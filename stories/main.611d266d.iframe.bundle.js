(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{1e3:function(module,exports,__webpack_require__){"use strict";function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}__webpack_require__(28);var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.highlight=exports.FuzzySearch=void 0;var Util_1=__webpack_require__(40),fuzzysort_1=__importDefault(__webpack_require__(1810)),FuzzySearch=function(){function FuzzySearch(data,key){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,FuzzySearch),this.datamap=Util_1.keyBy(data,key),this.strings=data.map((function(d){return fuzzysort_1.default.prepare(d[key])}))}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(FuzzySearch,[{key:"search",value:function search(input){var _this=this;return fuzzysort_1.default.go(input,this.strings).map((function(result){return _this.datamap[result.target]}))}},{key:"single",value:function single(input,target){return fuzzysort_1.default.single(input,target)}},{key:"highlight",value:function highlight(input,target){var _a;return null!==(_a=_highlight(fuzzysort_1.default.single(input,target)))&&void 0!==_a?_a:target}}]),FuzzySearch}();function _highlight(result){return fuzzysort_1.default.highlight(result)}exports.FuzzySearch=FuzzySearch,exports.highlight=_highlight},1001:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(65),__webpack_require__(32),__webpack_require__(1811),__webpack_require__(1818),__webpack_require__(1820),__webpack_require__(1821),__webpack_require__(1822),__webpack_require__(1824),__webpack_require__(1825),__webpack_require__(1826),__webpack_require__(1827),__webpack_require__(1828),__webpack_require__(1829),__webpack_require__(1830),__webpack_require__(1831),__webpack_require__(1832),__webpack_require__(1833),__webpack_require__(1834),__webpack_require__(1835),__webpack_require__(1836),__webpack_require__(1837),__webpack_require__(1838),__webpack_require__(1839),__webpack_require__(1840),__webpack_require__(1841),__webpack_require__(1842),__webpack_require__(5),__webpack_require__(6),__webpack_require__(311),__webpack_require__(7),__webpack_require__(8),__webpack_require__(25),__webpack_require__(31),__webpack_require__(9),__webpack_require__(10),__webpack_require__(11),__webpack_require__(18),__webpack_require__(21);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.DownloadTab=void 0;var Util_1=__webpack_require__(40),React=__importStar(__webpack_require__(0)),mobx_1=__webpack_require__(41),mobx_react_1=__webpack_require__(58),Bounds_1=__webpack_require__(73),LoadingIndicator_1=__webpack_require__(608),react_fontawesome_1=__webpack_require__(123),faDownload_1=__webpack_require__(998),classnames_1=__importDefault(__webpack_require__(139)),OwidTable_1=__webpack_require__(201),createObjectURL=function createObjectURL(obj){return URL.createObjectURL?URL.createObjectURL(obj):""},DownloadTab=function(_React$Component){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(DownloadTab,_React$Component);var _super=_createSuper(DownloadTab);function DownloadTab(){var _this;return _classCallCheck(this,DownloadTab),(_this=_super.apply(this,arguments)).isReady=!1,_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(DownloadTab,[{key:"idealBounds",get:function get(){var _a;return null!==(_a=this.manager.idealBounds)&&void 0!==_a?_a:Bounds_1.DEFAULT_BOUNDS}},{key:"bounds",get:function get(){var _a;return null!==(_a=this.props.bounds)&&void 0!==_a?_a:Bounds_1.DEFAULT_BOUNDS}},{key:"targetWidth",get:function get(){return this.idealBounds.width}},{key:"targetHeight",get:function get(){return this.idealBounds.height}},{key:"manager",get:function get(){return this.props.manager}},{key:"export",value:function _export(){var _this2=this;HTMLCanvasElement.prototype.toBlob||function polyfillToBlob(){Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function value(callback,type,quality){for(var binStr=atob(this.toDataURL(type,quality).split(",")[1]),len=binStr.length,arr=new Uint8Array(len),i=0;i<len;i++)arr[i]=binStr.charCodeAt(i);callback(new Blob([arr],{type:type||"image/png"}))}})}(),this.createSvg();var reader=new FileReader;reader.onload=function(ev){_this2.svgPreviewUrl=ev.target.result,_this2.tryCreatePng(_this2.svgPreviewUrl)},reader.readAsDataURL(this.svgBlob)}},{key:"createSvg",value:function createSvg(){var staticSVG=this.manager.staticSVG;this.svgBlob=new Blob([staticSVG],{type:"image/svg+xml;charset=utf-8"}),this.svgDownloadUrl=createObjectURL(this.svgBlob)}},{key:"tryCreatePng",value:function tryCreatePng(svgPreviewUrl){var _this3=this,targetWidth=this.targetWidth,targetHeight=this.targetHeight,img=new Image;img.onload=function(){try{var canvas=document.createElement("canvas");canvas.width=4*targetWidth,canvas.height=4*targetHeight;var ctx=canvas.getContext("2d",{alpha:!1});ctx.imageSmoothingEnabled=!1,ctx.setTransform(4,0,0,4,0,0),ctx.drawImage(img,0,0),_this3.pngPreviewUrl=canvas.toDataURL("image/png"),canvas.toBlob((function(blob){_this3.pngBlob=blob,_this3.pngDownloadUrl=createObjectURL(blob),_this3.markAsReady()}))}catch(e){console.error(e),_this3.markAsReady()}},img.onerror=function(err){console.error(JSON.stringify(err)),_this3.markAsReady()},img.src=svgPreviewUrl}},{key:"markAsReady",value:function markAsReady(){this.isReady=!0}},{key:"fallbackPngUrl",get:function get(){return"".concat(this.manager.baseUrl||"",".png").concat(this.manager.queryStr||"")}},{key:"baseFilename",get:function get(){return this.manager.displaySlug}},{key:"onPNGDownload",value:function onPNGDownload(ev){window.navigator.msSaveBlob&&(window.navigator.msSaveBlob(this.pngBlob,this.baseFilename+".png"),ev.preventDefault())}},{key:"onSVGDownload",value:function onSVGDownload(ev){window.navigator.msSaveBlob&&(window.navigator.msSaveBlob(this.svgBlob,this.baseFilename+".svg"),ev.preventDefault())}},{key:"inputTable",get:function get(){var _a;return null!==(_a=this.manager.table)&&void 0!==_a?_a:OwidTable_1.BlankOwidTable()}},{key:"onCsvDownload",value:function onCsvDownload(ev){var manager=this.manager,inputTable=this.inputTable,csvFilename=manager.displaySlug+".csv",csv=inputTable.toPrettyCsv()||"";if(window.navigator.msSaveBlob)window.navigator.msSaveBlob(new Blob([csv],{type:"text/csv"}),csvFilename),ev.preventDefault();else{var downloadLink=document.createElement("a");downloadLink.setAttribute("href","data:text/csv,"+encodeURIComponent(csv)),downloadLink.setAttribute("download",csvFilename),downloadLink.click()}}},{key:"csvButton",get:function get(){var _this4=this,manager=this.manager,externalCsvLink=manager.externalCsvLink,csvFilename=manager.displaySlug+".csv",props=externalCsvLink?{href:externalCsvLink,download:csvFilename}:{onClick:function onClick(ev){return _this4.onCsvDownload(ev)}};return React.createElement("div",{className:"download-csv",style:{maxWidth:"100%"}},React.createElement("p",null,"Download a CSV file containing all data used in this visualization:"),React.createElement("a",Object.assign({className:"btn btn-primary","data-track-note":"chart-download-csv"},props),React.createElement(react_fontawesome_1.FontAwesomeIcon,{icon:faDownload_1.faDownload})," ",csvFilename))}},{key:"renderReady",value:function renderReady(){var previewWidth,previewHeight,targetWidth=this.targetWidth,targetHeight=this.targetHeight,svgPreviewUrl=this.svgPreviewUrl,svgDownloadUrl=this.svgDownloadUrl,baseFilename=this.baseFilename,bounds=this.bounds,pngPreviewUrl=this.pngPreviewUrl||this.fallbackPngUrl,pngDownloadUrl=this.pngDownloadUrl||pngPreviewUrl;bounds.width/bounds.height>targetWidth/targetHeight?previewWidth=targetWidth/targetHeight*(previewHeight=.4*bounds.height):previewHeight=targetHeight/targetWidth*(previewWidth=.4*bounds.width);var imgStyle={minWidth:previewWidth,minHeight:previewHeight,maxWidth:previewWidth,maxHeight:previewHeight,border:"1px solid #ccc"},asideStyle={maxWidth:previewWidth};return React.createElement(React.Fragment,null,React.createElement("div",{className:"img-downloads"},React.createElement("a",{key:"png",href:pngDownloadUrl,download:baseFilename+".png","data-track-note":"chart-download-png",onClick:this.onPNGDownload},React.createElement("div",null,React.createElement("img",{src:pngPreviewUrl,style:imgStyle}),React.createElement("aside",{style:asideStyle},React.createElement("h2",null,"Save as .png"),React.createElement("p",null,"A standard image of the visualization that can be used in presentations or other documents.")))),React.createElement("a",{key:"svg",href:svgDownloadUrl,download:baseFilename+".svg","data-track-note":"chart-download-svg",onClick:this.onSVGDownload},React.createElement("div",null,React.createElement("img",{src:svgPreviewUrl,style:imgStyle}),React.createElement("aside",{style:asideStyle},React.createElement("h2",null,"Save as .svg"),React.createElement("p",null,"A vector format image useful for further redesigning the visualization with vector graphic software."))))),this.csvButton)}},{key:"componentDidMount",value:function componentDidMount(){this.export()}},{key:"componentWillUnmount",value:function componentWillUnmount(){void 0!==this.pngDownloadUrl&&URL.revokeObjectURL(this.pngDownloadUrl),void 0!==this.svgDownloadUrl&&URL.revokeObjectURL(this.svgDownloadUrl)}},{key:"render",value:function render(){return React.createElement("div",{className:classnames_1.default("DownloadTab",{mobile:Util_1.isMobile()}),style:Object.assign(Object.assign({},this.bounds.toCSS()),{position:"absolute"})},this.isReady?this.renderReady():React.createElement(LoadingIndicator_1.LoadingIndicator,{color:"#000"}))}}]),DownloadTab}(React.Component);__decorate([mobx_1.computed],DownloadTab.prototype,"idealBounds",null),__decorate([mobx_1.computed],DownloadTab.prototype,"bounds",null),__decorate([mobx_1.computed],DownloadTab.prototype,"targetWidth",null),__decorate([mobx_1.computed],DownloadTab.prototype,"targetHeight",null),__decorate([mobx_1.computed],DownloadTab.prototype,"manager",null),__decorate([mobx_1.observable],DownloadTab.prototype,"svgBlob",void 0),__decorate([mobx_1.observable],DownloadTab.prototype,"svgDownloadUrl",void 0),__decorate([mobx_1.observable],DownloadTab.prototype,"svgPreviewUrl",void 0),__decorate([mobx_1.observable],DownloadTab.prototype,"pngBlob",void 0),__decorate([mobx_1.observable],DownloadTab.prototype,"pngDownloadUrl",void 0),__decorate([mobx_1.observable],DownloadTab.prototype,"pngPreviewUrl",void 0),__decorate([mobx_1.observable],DownloadTab.prototype,"isReady",void 0),__decorate([mobx_1.action.bound],DownloadTab.prototype,"export",null),__decorate([mobx_1.action.bound],DownloadTab.prototype,"createSvg",null),__decorate([mobx_1.action.bound],DownloadTab.prototype,"tryCreatePng",null),__decorate([mobx_1.action.bound],DownloadTab.prototype,"markAsReady",null),__decorate([mobx_1.computed],DownloadTab.prototype,"fallbackPngUrl",null),__decorate([mobx_1.computed],DownloadTab.prototype,"baseFilename",null),__decorate([mobx_1.action.bound],DownloadTab.prototype,"onPNGDownload",null),__decorate([mobx_1.action.bound],DownloadTab.prototype,"onSVGDownload",null),__decorate([mobx_1.computed],DownloadTab.prototype,"inputTable",null),__decorate([mobx_1.computed],DownloadTab.prototype,"csvButton",null),DownloadTab=__decorate([mobx_react_1.observer],DownloadTab),exports.DownloadTab=DownloadTab},1006:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(62),__webpack_require__(32),__webpack_require__(25),__webpack_require__(17),__webpack_require__(9),__webpack_require__(10),__webpack_require__(1007),__webpack_require__(33),__webpack_require__(31),__webpack_require__(28),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(18),__webpack_require__(21);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SourcesTab=void 0;var Util_1=__webpack_require__(40),React=__importStar(__webpack_require__(0)),mobx_1=__webpack_require__(41),mobx_react_1=__webpack_require__(58),Bounds_1=__webpack_require__(73),faPencilAlt_1=__webpack_require__(1008),react_fontawesome_1=__webpack_require__(123),formatText=function formatText(s){return Util_1.linkify(s).replace(/(?:\r\n|\r|\n)/g,"<br/>")},SourcesTab=function(_React$Component){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(SourcesTab,_React$Component);var _super=_createSuper(SourcesTab);function SourcesTab(){return _classCallCheck(this,SourcesTab),_super.apply(this,arguments)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(SourcesTab,[{key:"bounds",get:function get(){var _a;return null!==(_a=this.props.bounds)&&void 0!==_a?_a:Bounds_1.DEFAULT_BOUNDS}},{key:"manager",get:function get(){return this.props.manager}},{key:"renderSource",value:function renderSource(column){var _a,_b,table=column.table,slug=column.slug,source=column.source,def=column.def,datasetId=def.datasetId,coverage=def.coverage,editUrl=this.manager.showAdminControls?"".concat(this.props.manager.adminBaseUrl,"/admin/datasets/").concat(datasetId):void 0,minTime=column.minTime,maxTime=column.maxTime,timespan="";return void 0!==minTime&&void 0!==maxTime&&(timespan="".concat(null===(_a=table.timeColumn)||void 0===_a?void 0:_a.formatValue(minTime)," â€“ ").concat(null===(_b=table.timeColumn)||void 0===_b?void 0:_b.formatValue(maxTime))),React.createElement("div",{key:slug,className:"datasource-wrapper"},React.createElement("h2",null,column.name," ",editUrl&&React.createElement("a",{href:editUrl,target:"_blank",rel:"noopener"},React.createElement(react_fontawesome_1.FontAwesomeIcon,{icon:faPencilAlt_1.faPencilAlt}))),React.createElement("table",{className:"variable-desc"},React.createElement("tbody",null,column.description?React.createElement("tr",null,React.createElement("td",null,"Variable description"),React.createElement("td",{dangerouslySetInnerHTML:{__html:formatText(column.description)}})):null,coverage?React.createElement("tr",null,React.createElement("td",null,"Variable geographic coverage"),React.createElement("td",null,coverage)):null,timespan?React.createElement("tr",null,React.createElement("td",null,"Variable time span"),React.createElement("td",null,timespan)):null,1!==column.unitConversionFactor?React.createElement("tr",null,React.createElement("td",null,"Unit conversion factor for chart"),React.createElement("td",null,column.unitConversionFactor)):null,source.dataPublishedBy?React.createElement("tr",null,React.createElement("td",null,"Data published by"),React.createElement("td",{dangerouslySetInnerHTML:{__html:formatText(source.dataPublishedBy)}})):null,source.dataPublisherSource?React.createElement("tr",null,React.createElement("td",null,"Data publisher's source"),React.createElement("td",{dangerouslySetInnerHTML:{__html:formatText(source.dataPublisherSource)}})):null,source.link?React.createElement("tr",null,React.createElement("td",null,"Link"),React.createElement("td",{dangerouslySetInnerHTML:{__html:formatText(source.link)}})):null,source.retrievedDate?React.createElement("tr",null,React.createElement("td",null,"Retrieved"),React.createElement("td",null,source.retrievedDate)):null)),source.additionalInfo&&React.createElement("p",{dangerouslySetInnerHTML:{__html:formatText(source.additionalInfo)}}))}},{key:"render",value:function render(){var _this=this,bounds=this.bounds,cols=this.manager.columnsWithSources.filter((function(col){return col.source}));return React.createElement("div",{className:"sourcesTab",style:Object.assign(Object.assign({},bounds.toCSS()),{position:"absolute"})},React.createElement("div",null,React.createElement("h2",null,"Sources"),React.createElement("div",null,cols.map((function(col){return _this.renderSource(col)})))))}}]),SourcesTab}(React.Component);__decorate([mobx_1.computed],SourcesTab.prototype,"bounds",null),__decorate([mobx_1.computed],SourcesTab.prototype,"manager",null),SourcesTab=__decorate([mobx_react_1.observer],SourcesTab),exports.SourcesTab=SourcesTab},1009:function(module,exports,__webpack_require__){"use strict";function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=arr&&("undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"]);if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(31),__webpack_require__(28),__webpack_require__(48),__webpack_require__(55),__webpack_require__(17),__webpack_require__(25),__webpack_require__(36),__webpack_require__(143),__webpack_require__(79),__webpack_require__(33),__webpack_require__(75),__webpack_require__(5),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(39),__webpack_require__(9),__webpack_require__(10),__webpack_require__(11),__webpack_require__(18),__webpack_require__(21),__webpack_require__(29),__webpack_require__(22);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.DataTable=void 0;var React=__importStar(__webpack_require__(0)),mobx_1=__webpack_require__(41),mobx_react_1=__webpack_require__(58),classnames_1=__importDefault(__webpack_require__(139)),react_fontawesome_1=__webpack_require__(123),faInfoCircle_1=__webpack_require__(1010),CoreTableConstants_1=__webpack_require__(276),OwidTableConstants_1=__webpack_require__(172),Util_1=__webpack_require__(40),SortIcon_1=__webpack_require__(1011),Tippy_1=__webpack_require__(392),OwidTable_1=__webpack_require__(201),Bounds_1=__webpack_require__(73),ChartUtils_1=__webpack_require__(173),DEFAULT_SORT_STATE={dimIndex:-1,columnKey:void 0,order:CoreTableConstants_1.SortOrder.asc},columnNameByType={single:"Value",start:"Start",end:"End",delta:"Absolute Change",deltaRatio:"Relative Change"},DataTable=function(_React$Component){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(DataTable,_React$Component);var _super=_createSuper(DataTable);function DataTable(){var _this;return _classCallCheck(this,DataTable),(_this=_super.apply(this,arguments)).storedState={sort:DEFAULT_SORT_STATE},_this.AUTO_SELECTION_THRESHOLD_PERCENTAGE=.5,_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(DataTable,[{key:"tableState",get:function get(){return{sort:this.sortState}}},{key:"sortState",get:function get(){var _Object$assign=Object.assign(Object.assign({},DEFAULT_SORT_STATE),this.storedState.sort),dimIndex=_Object$assign.dimIndex,columnKey=_Object$assign.columnKey,order=_Object$assign.order;if(-1!==(dimIndex=Math.min(dimIndex,this.table.numColumns-1))){var availableColumns=this.columnsWithValues[dimIndex].columns.map((function(sub){return sub.key}));void 0!==columnKey&&availableColumns.includes(columnKey)||(columnKey=availableColumns[0])}return{dimIndex:dimIndex,columnKey:columnKey,order:order}}},{key:"table",get:function get(){return this.inputTable}},{key:"inputTable",get:function get(){return this.manager.table}},{key:"manager",get:function get(){return this.props.manager||{table:OwidTable_1.BlankOwidTable()}}},{key:"entityType",get:function get(){return this.table.entityType}},{key:"sortValueMapper",get:function get(){var _this$tableState$sort=this.tableState.sort,dimIndex=_this$tableState$sort.dimIndex,columnKey=_this$tableState$sort.columnKey,order=_this$tableState$sort.order;return-1===dimIndex?function(row){return row.entityName}:function(row){var _a,_b,value,dv=row.dimensionValues[dimIndex];return dv&&(isSingleValue(dv)?value=null===(_a=dv.single)||void 0===_a?void 0:_a.value:isRangeValue(dv)&&void 0!==columnKey&&columnKey in RangeValueKey&&(value=null===(_b=dv[columnKey])||void 0===_b?void 0:_b.value)),void 0===value||"number"==typeof value&&(!isFinite(value)||isNaN(value))?order===CoreTableConstants_1.SortOrder.asc?1/0:-1/0:value}}},{key:"hasSubheaders",get:function get(){return this.displayDimensions.some((function(header){return header.columns.length>1}))}},{key:"updateSort",value:function updateSort(dimIndex,columnKey){var sort=this.tableState.sort,order=sort.dimIndex===dimIndex&&sort.columnKey===columnKey?function inverseSortOrder(order){return order===CoreTableConstants_1.SortOrder.asc?CoreTableConstants_1.SortOrder.desc:CoreTableConstants_1.SortOrder.asc}(sort.order):-1===dimIndex?CoreTableConstants_1.SortOrder.asc:CoreTableConstants_1.SortOrder.desc;this.storedState.sort.dimIndex=dimIndex,this.storedState.sort.columnKey=columnKey,this.storedState.sort.order=order}},{key:"entityHeader",get:function get(){var _this2=this,sort=this.tableState.sort;return React.createElement(ColumnHeader,{key:"entity",sortable:!0,sortedCol:-1===sort.dimIndex,sortOrder:sort.order,onClick:function onClick(){return _this2.updateSort(-1)},rowSpan:this.hasSubheaders?2:1,headerText:Util_1.capitalize(this.entityType),colType:"entity",dataType:"text"})}},{key:"dimensionHeaders",get:function get(){var _this3=this,sort=this.tableState.sort;return this.displayDimensions.map((function(dim,dimIndex){var actualColumn=dim.coreTableColumn,unit="%"===actualColumn.unit?"percent":dim.coreTableColumn.unit,columnName=""!==actualColumn.displayName?actualColumn.displayName:actualColumn.name,dimensionHeaderText=React.createElement(React.Fragment,null,React.createElement("span",{className:"name"},Util_1.upperFirst(columnName)),React.createElement("span",{className:"unit"},unit)),props={sortable:dim.sortable,sortedCol:dim.sortable&&sort.dimIndex===dimIndex,sortOrder:sort.order,onClick:function onClick(){dim.sortable&&_this3.updateSort(dimIndex,SingleValueKey.single)},rowSpan:_this3.hasSubheaders&&dim.columns.length<2?2:1,colSpan:dim.columns.length,headerText:dimensionHeaderText,colType:"dimension",dataType:"numeric"};return React.createElement(ColumnHeader,Object.assign({key:actualColumn.slug},props))}))}},{key:"dimensionSubheaders",get:function get(){var _this4=this,sort=this.tableState.sort;return this.displayDimensions.map((function(dim,dimIndex){return dim.columns.map((function(column,i){var headerText=isDeltaColumn(column.key)?columnNameByType[column.key]:dim.coreTableColumn.table.formatTime(column.targetTime);return React.createElement(ColumnHeader,{key:column.key,sortable:column.sortable,sortedCol:sort.dimIndex===dimIndex&&sort.columnKey===column.key,sortOrder:sort.order,onClick:function onClick(){return _this4.updateSort(dimIndex,column.key)},headerText:headerText,colType:"subdimension",dataType:"numeric",subdimensionType:column.key,lastSubdimension:i===dim.columns.length-1})}))}))}},{key:"headerRow",get:function get(){return React.createElement(React.Fragment,null,React.createElement("tr",null,this.entityHeader,this.dimensionHeaders),this.hasSubheaders&&React.createElement("tr",null,this.dimensionSubheaders))}},{key:"renderValueCell",value:function renderValueCell(key,column,dv,sorted,actualColumn){if(void 0===dv||!(column.key in dv))return React.createElement("td",{key:key,className:"dimension"});var value;if((isSingleValue(dv)||isRangeValue(dv))&&(value=dv[column.key]),void 0===value)return React.createElement("td",{key:key,className:"dimension"});var shouldShowClosestTimeNotice=void 0!==value.time&&!isDeltaColumn(column.key)&&void 0!==column.targetTime&&column.targetTime!==value.time;return React.createElement("td",{key:key,className:classnames_1.default(["dimension","dimension-".concat(column.key),{sorted:sorted}])},shouldShowClosestTimeNotice&&makeClosestTimeNotice(actualColumn.table.formatTime(column.targetTime),actualColumn.table.formatTime(value.time)),value.displayValue)}},{key:"renderEntityRow",value:function renderEntityRow(row,dimensions){var _this5=this,sort=this.tableState.sort;return React.createElement("tr",{key:row.entityName},React.createElement("td",{key:"entity",className:classnames_1.default({entity:!0,sorted:-1===sort.dimIndex})},row.entityName),row.dimensionValues.map((function(dv,dimIndex){var dimension=dimensions[dimIndex];return dimension.columns.map((function(column,colIndex){var key="".concat(dimIndex,"-").concat(colIndex);return _this5.renderValueCell(key,column,dv,sort.dimIndex===dimIndex&&sort.columnKey===column.key,dimension.coreTableColumn)}))})))}},{key:"valueRows",get:function get(){var _this6=this;return this.sortedRows.map((function(row){return _this6.renderEntityRow(row,_this6.displayDimensions)}))}},{key:"bounds",get:function get(){var _a;return null!==(_a=this.props.bounds)&&void 0!==_a?_a:Bounds_1.DEFAULT_BOUNDS}},{key:"render",value:function render(){return React.createElement("div",{style:{width:"100%",height:"100%",overflow:"auto"}},React.createElement("table",{className:"data-table"},React.createElement("thead",null,this.headerRow),React.createElement("tbody",null,this.valueRows)))}},{key:"loadedWithData",get:function get(){return this.columnsToShow.length>0}},{key:"autoSelectedStartTime",get:function get(){var _this7=this,autoSelectedStartTime=void 0;if(this.loadedWithData){var numEntitiesInTable=this.entityNames.length;return this.columnsToShow.forEach((function(column){var _a,firstTimeWithSufficientData=null===(_a=Util_1.sortBy(Object.entries(Util_1.countBy(column.uniqTimesAsc)),(function(value){return parseInt(value[0])})).find((function(time){return time[1]/numEntitiesInTable>=_this7.AUTO_SELECTION_THRESHOLD_PERCENTAGE})))||void 0===_a?void 0:_a[0];return!firstTimeWithSufficientData||(autoSelectedStartTime=parseInt(firstTimeWithSufficientData),!1)})),autoSelectedStartTime}}},{key:"columnsToShow",get:function get(){var _a,_this8=this,slugs=null!==(_a=this.manager.dataTableSlugs)&&void 0!==_a?_a:[];if(slugs.length)return slugs.map((function(slug){var col=_this8.table.get(slug);return col||console.log("Warning: column '".concat(slug,"' not found")),col})).filter((function(col){return col}));var skips=new Set(Object.keys(OwidTableConstants_1.OwidTableSlugs));return this.table.columnsAsArray.filter((function(column){var _a,_b;return!skips.has(column.slug)&&(null===(_b=null===(_a=column.display)||void 0===_a?void 0:_a.includeInTable)||void 0===_b||_b)}))}},{key:"selectionArray",get:function get(){return ChartUtils_1.makeSelectionArray(this.manager)}},{key:"entityNames",get:function get(){var tableForEntities=this.table;return this.manager.minPopulationFilter&&(tableForEntities=tableForEntities.filterByPopulationExcept(this.manager.minPopulationFilter,this.selectionArray.selectedEntityNames)),Util_1.union.apply(Util_1,_toConsumableArray(this.columnsToShow.map((function(col){return tableForEntities.get(col.slug).uniqEntityNames}))))}},{key:"componentDidMount",value:function componentDidMount(){Util_1.exposeInstanceOnWindow(this,"dataTable")}},{key:"formatValue",value:function formatValue(column,value,formattingOverrides){return void 0===value?value:column.formatValueShort(value,Object.assign({numberPrefixes:!1,noTrailingZeroes:!1},formattingOverrides))}},{key:"targetTimes",get:function get(){var _this$manager=this.manager,startTime=_this$manager.startTime,endTime=_this$manager.endTime;if(void 0!==startTime&&void 0!==endTime)return startTime!==endTime?[startTime,endTime]:[endTime]}},{key:"columnsWithValues",get:function get(){var _this9=this;return this.columnsToShow.map((function(sourceColumn){var _a,targetTimes=null!==(_a=_this9.targetTimes)&&void 0!==_a?_a:[sourceColumn.maxTime],targetTimeMode=targetTimes.length<2?TargetTimeMode.point:TargetTimeMode.range,prelimValuesByEntity=targetTimeMode===TargetTimeMode.range?Util_1.es6mapValues(Util_1.valuesByEntityWithinTimes(sourceColumn.valueByEntityNameAndTime,targetTimes),Util_1.getStartEndValues):Util_1.valuesByEntityAtTimes(sourceColumn.valueByEntityNameAndTime,targetTimes,sourceColumn.tolerance),isRange=2===targetTimes.length,deltaColumns=[];if(isRange){var tableDisplay={};(null==tableDisplay?void 0:tableDisplay.hideAbsoluteChange)||deltaColumns.push({key:RangeValueKey.delta}),(null==tableDisplay?void 0:tableDisplay.hideRelativeChange)||deltaColumns.push({key:RangeValueKey.deltaRatio})}return{columns:[].concat(_toConsumableArray(targetTimes.map((function(targetTime,index){return{key:isRange?0===index?RangeValueKey.start:RangeValueKey.end:SingleValueKey.single,targetTime:targetTime,targetTimeMode:targetTimeMode}}))),deltaColumns),valueByEntity:Util_1.es6mapValues(prelimValuesByEntity,(function(dvs){if(isRange){var _dvs=_slicedToArray(dvs,2),start=_dvs[0],end=_dvs[1],result={start:Object.assign(Object.assign({},start),{displayValue:_this9.formatValue(sourceColumn,null==start?void 0:start.value)}),end:Object.assign(Object.assign({},end),{displayValue:_this9.formatValue(sourceColumn,null==end?void 0:end.value)}),delta:void 0,deltaRatio:void 0};if(void 0!==start&&void 0!==end&&"number"==typeof start.value&&"number"==typeof end.value){var deltaValue=end.value-start.value,deltaRatioValue=deltaValue/Math.abs(start.value);result.delta={value:deltaValue,displayValue:_this9.formatValue(sourceColumn,deltaValue,{showPlus:!0,unit:"%"===sourceColumn.shortUnit?"pp":sourceColumn.shortUnit})},result.deltaRatio={value:deltaRatioValue,displayValue:isFinite(deltaRatioValue)&&!isNaN(deltaRatioValue)?_this9.formatValue(sourceColumn,100*deltaRatioValue,{unit:"%",numDecimalPlaces:0,showPlus:!0}):void 0}}return result}var dv=dvs[0],_result={single:Object.assign({},dv)};return void 0!==dv&&(_result.single.displayValue=_this9.formatValue(sourceColumn,dv.value)),_result})),sourceColumn:sourceColumn}}))}},{key:"displayDimensions",get:function get(){return this.columnsWithValues.map((function(d){return{sortable:1===d.columns.length,columns:d.columns.map((function(column){return Object.assign(Object.assign({},column),{sortable:!0})})),coreTableColumn:d.sourceColumn}}))}},{key:"sortedRows",get:function get(){var order=this.tableState.sort.order;return Util_1.orderBy(this.displayRows,this.sortValueMapper,[order])}},{key:"displayRows",get:function get(){var _this10=this;return this.entityNames.map((function(entityName){return{entityName:entityName,dimensionValues:_this10.columnsWithValues.map((function(d){return d.valueByEntity.get(entityName)}))}}))}}]),DataTable}(React.Component);function ColumnHeader(props){var _a,_b,sortable=props.sortable,sortedCol=props.sortedCol,colType=props.colType,subdimensionType=props.subdimensionType,lastSubdimension=props.lastSubdimension;return React.createElement("th",{className:classnames_1.default(colType,{sortable:sortable,sorted:sortedCol,firstSubdimension:"start"===subdimensionType,endSubdimension:"end"===subdimensionType,lastSubdimension:lastSubdimension}),rowSpan:null!==(_a=props.rowSpan)&&void 0!==_a?_a:1,colSpan:null!==(_b=props.colSpan)&&void 0!==_b?_b:1,onClick:props.onClick},React.createElement("div",{className:classnames_1.default({deltaColumn:isDeltaColumn(subdimensionType)})},props.headerText,sortable&&React.createElement(SortIcon_1.SortIcon,{type:props.dataType,isActiveIcon:sortedCol,order:sortedCol?props.sortOrder:"entity"===colType?CoreTableConstants_1.SortOrder.asc:CoreTableConstants_1.SortOrder.desc})))}__decorate([mobx_1.observable],DataTable.prototype,"storedState",void 0),__decorate([mobx_1.computed],DataTable.prototype,"tableState",null),__decorate([mobx_1.computed],DataTable.prototype,"sortState",null),__decorate([mobx_1.computed],DataTable.prototype,"table",null),__decorate([mobx_1.computed],DataTable.prototype,"inputTable",null),__decorate([mobx_1.computed],DataTable.prototype,"manager",null),__decorate([mobx_1.computed],DataTable.prototype,"entityType",null),__decorate([mobx_1.computed],DataTable.prototype,"sortValueMapper",null),__decorate([mobx_1.computed],DataTable.prototype,"hasSubheaders",null),__decorate([mobx_1.action.bound],DataTable.prototype,"updateSort",null),__decorate([mobx_1.computed],DataTable.prototype,"bounds",null),__decorate([mobx_1.computed],DataTable.prototype,"loadedWithData",null),__decorate([mobx_1.computed],DataTable.prototype,"autoSelectedStartTime",null),__decorate([mobx_1.computed],DataTable.prototype,"columnsToShow",null),__decorate([mobx_1.computed],DataTable.prototype,"selectionArray",null),__decorate([mobx_1.computed],DataTable.prototype,"entityNames",null),__decorate([mobx_1.computed],DataTable.prototype,"targetTimes",null),__decorate([mobx_1.computed],DataTable.prototype,"columnsWithValues",null),__decorate([mobx_1.computed],DataTable.prototype,"displayDimensions",null),__decorate([mobx_1.computed],DataTable.prototype,"sortedRows",null),__decorate([mobx_1.computed],DataTable.prototype,"displayRows",null),DataTable=__decorate([mobx_react_1.observer],DataTable),exports.DataTable=DataTable;var TargetTimeMode,RangeValueKey,SingleValueKey,makeClosestTimeNotice=function makeClosestTimeNotice(targetTime,closestTime){return React.createElement(Tippy_1.Tippy,{content:React.createElement("div",{className:"closest-time-notice-tippy"},React.createElement("strong",null,"Data not available for ",targetTime),React.createElement("br",null),"Showing closest available data point (",closestTime,")"),arrow:!1},React.createElement("span",{className:"closest-time-notice-icon"},closestTime," ",React.createElement("span",{className:"icon"},React.createElement(react_fontawesome_1.FontAwesomeIcon,{icon:faInfoCircle_1.faInfoCircle}))))};function isRangeValue(value){return"start"in value}function isSingleValue(value){return"single"in value}function isDeltaColumn(columnKey){return"delta"===columnKey||"deltaRatio"===columnKey}!function(TargetTimeMode){TargetTimeMode.point="point",TargetTimeMode.range="range"}(TargetTimeMode||(TargetTimeMode={})),function(RangeValueKey){RangeValueKey.start="start",RangeValueKey.end="end",RangeValueKey.delta="delta",RangeValueKey.deltaRatio="deltaRatio"}(RangeValueKey||(RangeValueKey={})),function(SingleValueKey){SingleValueKey.single="single"}(SingleValueKey||(SingleValueKey={}))},1011:function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SortIcon=void 0;var react_1=__importDefault(__webpack_require__(0)),classnames_1=__importDefault(__webpack_require__(139)),faSortAlphaUpAlt_1=__webpack_require__(1843),faSortAlphaDown_1=__webpack_require__(1844),faSortAmountUpAlt_1=__webpack_require__(1845),faSortAmountDown_1=__webpack_require__(1846),react_fontawesome_1=__webpack_require__(123),CoreTableConstants_1=__webpack_require__(276);exports.SortIcon=function SortIcon(props){var _a,_b,faIcon,type=null!==(_a=props.type)&&void 0!==_a?_a:"numeric",isActiveIcon=null!==(_b=props.isActiveIcon)&&void 0!==_b&&_b;return faIcon="text"===type?props.order===CoreTableConstants_1.SortOrder.desc?faSortAlphaUpAlt_1.faSortAlphaUpAlt:faSortAlphaDown_1.faSortAlphaDown:props.order===CoreTableConstants_1.SortOrder.desc?faSortAmountDown_1.faSortAmountDown:faSortAmountUpAlt_1.faSortAmountUpAlt,react_1.default.createElement("span",{className:classnames_1.default({"sort-icon":!0,active:isActiveIcon})},react_1.default.createElement(react_fontawesome_1.FontAwesomeIcon,{icon:faIcon}))}},1012:function(module,exports,__webpack_require__){"use strict";function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(33),__webpack_require__(28),__webpack_require__(36),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(18),__webpack_require__(21),__webpack_require__(22),__webpack_require__(17),__webpack_require__(29);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.HorizontalCategoricalColorLegend=exports.HorizontalNumericColorLegend=void 0;var React=__importStar(__webpack_require__(0)),mobx_1=__webpack_require__(41),mobx_react_1=__webpack_require__(58),Util_1=__webpack_require__(40),Bounds_1=__webpack_require__(73),ColorScaleBin_1=__webpack_require__(472),GrapherConstants_1=__webpack_require__(64),owidTypes_1=__webpack_require__(122),HorizontalColorLegend=function(_React$Component){_inherits(HorizontalColorLegend,_React$Component);var _super=_createSuper(HorizontalColorLegend);function HorizontalColorLegend(){return _classCallCheck(this,HorizontalColorLegend),_super.apply(this,arguments)}return _createClass(HorizontalColorLegend,[{key:"manager",get:function get(){return this.props.manager}},{key:"legendX",get:function get(){var _a;return null!==(_a=this.manager.legendX)&&void 0!==_a?_a:0}},{key:"categoryLegendY",get:function get(){var _a;return null!==(_a=this.manager.categoryLegendY)&&void 0!==_a?_a:0}},{key:"numericLegendY",get:function get(){var _a;return null!==(_a=this.manager.numericLegendY)&&void 0!==_a?_a:0}},{key:"legendWidth",get:function get(){var _a;return null!==(_a=this.manager.legendWidth)&&void 0!==_a?_a:200}},{key:"legendHeight",get:function get(){var _a;return null!==(_a=this.manager.legendHeight)&&void 0!==_a?_a:200}},{key:"legendAlign",get:function get(){var _a;return null!==(_a=this.manager.legendAlign)&&void 0!==_a?_a:owidTypes_1.HorizontalAlign.center}},{key:"fontSize",get:function get(){var _a;return null!==(_a=this.manager.fontSize)&&void 0!==_a?_a:GrapherConstants_1.BASE_FONT_SIZE}}]),HorizontalColorLegend}(React.Component);__decorate([mobx_1.computed],HorizontalColorLegend.prototype,"manager",null),__decorate([mobx_1.computed],HorizontalColorLegend.prototype,"legendX",null),__decorate([mobx_1.computed],HorizontalColorLegend.prototype,"categoryLegendY",null),__decorate([mobx_1.computed],HorizontalColorLegend.prototype,"numericLegendY",null),__decorate([mobx_1.computed],HorizontalColorLegend.prototype,"legendWidth",null),__decorate([mobx_1.computed],HorizontalColorLegend.prototype,"legendHeight",null),__decorate([mobx_1.computed],HorizontalColorLegend.prototype,"legendAlign",null),__decorate([mobx_1.computed],HorizontalColorLegend.prototype,"fontSize",null);var HorizontalNumericColorLegend=function(_HorizontalColorLegen){_inherits(HorizontalNumericColorLegend,_HorizontalColorLegen);var _super2=_createSuper(HorizontalNumericColorLegend);function HorizontalNumericColorLegend(){var _this;return _classCallCheck(this,HorizontalNumericColorLegend),(_this=_super2.apply(this,arguments)).base=React.createRef(),_this.rectHeight=10,_this}return _createClass(HorizontalNumericColorLegend,[{key:"numericLegendData",get:function get(){var _a;return null!==(_a=this.manager.numericLegendData)&&void 0!==_a?_a:[]}},{key:"numericBins",get:function get(){return this.numericLegendData.filter((function(bin){return bin instanceof ColorScaleBin_1.NumericBin}))}},{key:"tickFontSize",get:function get(){return.75*this.fontSize}},{key:"minValue",get:function get(){return Util_1.min(this.numericBins.map((function(bin){return bin.min})))}},{key:"maxValue",get:function get(){return Util_1.max(this.numericBins.map((function(bin){return bin.max})))}},{key:"rangeSize",get:function get(){return this.maxValue-this.minValue}},{key:"categoryBinWidth",get:function get(){return Bounds_1.Bounds.forText("No data",{fontSize:this.tickFontSize}).width}},{key:"categoryBinMargin",get:function get(){return 1.5*this.rectHeight}},{key:"totalCategoricalWidth",get:function get(){var numericLegendData=this.numericLegendData,categoryBinWidth=this.categoryBinWidth,categoryBinMargin=this.categoryBinMargin,widths=numericLegendData.map((function(bin){return bin instanceof ColorScaleBin_1.CategoricalBin?categoryBinWidth+categoryBinMargin:0}));return Util_1.sum(widths)}},{key:"availableNumericWidth",get:function get(){return this.legendWidth-this.totalCategoricalWidth}},{key:"positionedBins",get:function get(){var manager=this.manager,rangeSize=this.rangeSize,categoryBinWidth=this.categoryBinWidth,categoryBinMargin=this.categoryBinMargin,availableNumericWidth=this.availableNumericWidth,numericLegendData=this.numericLegendData,numericBins=this.numericBins,xOffset=0;return numericLegendData.map((function(bin){var width=categoryBinWidth,margin=categoryBinMargin;bin instanceof ColorScaleBin_1.NumericBin&&(width=manager.equalSizeBins?availableNumericWidth/numericBins.length:(bin.max-bin.min)/rangeSize*availableNumericWidth,margin=0);var x=xOffset;return xOffset+=width+margin,{x:x,width:width,margin:margin,bin:bin}}))}},{key:"numericLabels",get:function get(){var _step,rectHeight=this.rectHeight,positionedBins=this.positionedBins,tickFontSize=this.tickFontSize,makeBoundaryLabel=function makeBoundaryLabel(bin,minOrMax,text){var labelBounds=Bounds_1.Bounds.forText(text,{fontSize:tickFontSize}),x=bin.x+("min"===minOrMax?0:bin.width)-labelBounds.width/2,y=-rectHeight-labelBounds.height-3;return{text:text,fontSize:tickFontSize,bounds:labelBounds.set({x:x,y:y}),hidden:!1}},makeRangeLabel=function makeRangeLabel(bin){var labelBounds=Bounds_1.Bounds.forText(bin.bin.text,{fontSize:tickFontSize}),x=bin.x+bin.width/2-labelBounds.width/2,y=-rectHeight-labelBounds.height-3;return{text:bin.bin.text,fontSize:tickFontSize,bounds:labelBounds.set({x:x,y:y}),priority:!0,hidden:!1}},labels=[],_iterator=_createForOfIteratorHelper(positionedBins);try{for(_iterator.s();!(_step=_iterator.n()).done;){var bin=_step.value;bin.bin.text?labels.push(makeRangeLabel(bin)):bin.bin instanceof ColorScaleBin_1.NumericBin&&(labels.push(makeBoundaryLabel(bin,"min",bin.bin.minText)),bin===Util_1.last(positionedBins)&&labels.push(makeBoundaryLabel(bin,"max",bin.bin.maxText)))}}catch(err){_iterator.e(err)}finally{_iterator.f()}for(var index=0;index<labels.length;index++){var l1=labels[index];if(!l1.hidden)for(var j=index+1;j<labels.length;j++){var l2=labels[j];(l1.bounds.right+5>=l2.bounds.centerX||l2.bounds.left-5<=l1.bounds.centerX&&!l2.priority)&&(l2.hidden=!0)}}labels=labels.filter((function(label){return!label.hidden}));for(var raisedMode=!1,_index=1;_index<labels.length;_index++){var _l=labels[_index-1],_l2=labels[_index];if(_l.bounds.right+5>=_l2.bounds.left){raisedMode=!0;break}}if(raisedMode)for(var _index2=1;_index2<labels.length;_index2++){var label=labels[_index2];_index2%2!=0&&(label.bounds=label.bounds.set({y:label.bounds.y-label.bounds.height-1}))}return labels}},{key:"height",get:function get(){var _a;return Math.abs(null!==(_a=Util_1.min(this.numericLabels.map((function(label){return label.bounds.y}))))&&void 0!==_a?_a:0)}},{key:"bounds",get:function get(){return new Bounds_1.Bounds(this.legendX,this.numericLegendY,this.legendWidth,this.legendHeight)}},{key:"onMouseMove",value:function onMouseMove(ev){var _this2=this,manager=this.manager,base=this.base,positionedBins=this.positionedBins,numericFocusBracket=manager.numericFocusBracket;if(base.current){var mouse=Util_1.getRelativeMouse(base.current,ev);if(!this.bounds.contains(mouse))return numericFocusBracket&&manager.onLegendMouseLeave?manager.onLegendMouseLeave():void 0;var newFocusBracket=null;positionedBins.forEach((function(bin){mouse.x>=_this2.legendX+bin.x&&mouse.x<=_this2.legendX+bin.x+bin.width&&(newFocusBracket=bin.bin)})),newFocusBracket&&manager.onLegendMouseOver&&manager.onLegendMouseOver(newFocusBracket)}}},{key:"componentDidMount",value:function componentDidMount(){document.documentElement.addEventListener("mousemove",this.onMouseMove),document.documentElement.addEventListener("touchmove",this.onMouseMove)}},{key:"componentWillUnmount",value:function componentWillUnmount(){document.documentElement.removeEventListener("mousemove",this.onMouseMove),document.documentElement.removeEventListener("touchmove",this.onMouseMove)}},{key:"render",value:function render(){var _this3=this,manager=this.manager,numericLabels=this.numericLabels,rectHeight=this.rectHeight,positionedBins=this.positionedBins,height=this.height,numericFocusBracket=manager.numericFocusBracket,bottomY=this.numericLegendY+height;return React.createElement("g",{ref:this.base,className:"numericColorLegend"},numericLabels.map((function(label,index){return React.createElement("line",{key:index,x1:_this3.legendX+label.bounds.x+label.bounds.width/2,y1:bottomY-rectHeight,x2:_this3.legendX+label.bounds.x+label.bounds.width/2,y2:bottomY+label.bounds.y+label.bounds.height,stroke:"#333",strokeWidth:.3})})),Util_1.sortBy(positionedBins.map((function(positionedBin,index){var isFocus=numericFocusBracket&&positionedBin.bin.equals(numericFocusBracket);return React.createElement("rect",{key:index,x:_this3.legendX+positionedBin.x,y:bottomY-rectHeight,width:positionedBin.width,height:rectHeight,fill:positionedBin.bin.color,stroke:isFocus?"#111":"#333",strokeWidth:isFocus?2:.3})})),(function(rect){return rect.props.strokeWidth})),numericLabels.map((function(label,index){return React.createElement("text",{key:index,x:_this3.legendX+label.bounds.x,y:bottomY+label.bounds.y,dy:Util_1.dyFromAlign(owidTypes_1.VerticalAlign.bottom),fontSize:label.fontSize},label.text)})))}}]),HorizontalNumericColorLegend}(HorizontalColorLegend=__decorate([mobx_react_1.observer],HorizontalColorLegend));__decorate([mobx_1.computed],HorizontalNumericColorLegend.prototype,"numericLegendData",null),__decorate([mobx_1.computed],HorizontalNumericColorLegend.prototype,"numericBins",null),__decorate([mobx_1.computed],HorizontalNumericColorLegend.prototype,"tickFontSize",null),__decorate([mobx_1.computed],HorizontalNumericColorLegend.prototype,"minValue",null),__decorate([mobx_1.computed],HorizontalNumericColorLegend.prototype,"maxValue",null),__decorate([mobx_1.computed],HorizontalNumericColorLegend.prototype,"rangeSize",null),__decorate([mobx_1.computed],HorizontalNumericColorLegend.prototype,"categoryBinWidth",null),__decorate([mobx_1.computed],HorizontalNumericColorLegend.prototype,"categoryBinMargin",null),__decorate([mobx_1.computed],HorizontalNumericColorLegend.prototype,"totalCategoricalWidth",null),__decorate([mobx_1.computed],HorizontalNumericColorLegend.prototype,"availableNumericWidth",null),__decorate([mobx_1.computed],HorizontalNumericColorLegend.prototype,"positionedBins",null),__decorate([mobx_1.computed],HorizontalNumericColorLegend.prototype,"numericLabels",null),__decorate([mobx_1.computed],HorizontalNumericColorLegend.prototype,"height",null),__decorate([mobx_1.computed],HorizontalNumericColorLegend.prototype,"bounds",null),__decorate([mobx_1.action.bound],HorizontalNumericColorLegend.prototype,"onMouseMove",null),HorizontalNumericColorLegend=__decorate([mobx_react_1.observer],HorizontalNumericColorLegend),exports.HorizontalNumericColorLegend=HorizontalNumericColorLegend;var HorizontalCategoricalColorLegend=function(_HorizontalColorLegen2){_inherits(HorizontalCategoricalColorLegend,_HorizontalColorLegen2);var _super3=_createSuper(HorizontalCategoricalColorLegend);function HorizontalCategoricalColorLegend(){return _classCallCheck(this,HorizontalCategoricalColorLegend),_super3.apply(this,arguments)}return _createClass(HorizontalCategoricalColorLegend,[{key:"categoricalLegendData",get:function get(){var _a;return null!==(_a=this.manager.categoricalLegendData)&&void 0!==_a?_a:[]}},{key:"markLines",get:function get(){var _a,_this4=this,scale=null!==(_a=this.manager.scale)&&void 0!==_a?_a:1,rectSize=12*scale,fontSize=.8*scale*this.fontSize,lines=[],marks=[],xOffset=0,yOffset=0;return this.categoricalLegendData.forEach((function(bin){var labelBounds=Bounds_1.Bounds.forText(bin.text,{fontSize:fontSize}),markWidth=rectSize+5+labelBounds.width+5;xOffset+markWidth>_this4.legendWidth&&marks.length>0&&(lines.push({totalWidth:xOffset-5,marks:marks}),marks=[],xOffset=0,yOffset+=rectSize+5);var markX=xOffset,markY=yOffset,label={text:bin.text,bounds:labelBounds.set({x:markX+rectSize+5,y:markY+1}),fontSize:fontSize};marks.push({x:markX,y:markY,rectSize:rectSize,label:label,bin:bin}),xOffset+=markWidth+7})),marks.length>0&&lines.push({totalWidth:xOffset-5,marks:marks}),lines}},{key:"width",get:function get(){return Util_1.max(this.markLines.map((function(l){return l.totalWidth})))}},{key:"marks",get:function get(){var _this5=this,lines=this.markLines,align=this.legendAlign;return lines.forEach((function(line){var xShift=align===owidTypes_1.HorizontalAlign.center?(_this5.width-line.totalWidth)/2:align===owidTypes_1.HorizontalAlign.right?_this5.width-line.totalWidth:0;line.marks.forEach((function(mark){mark.x+=xShift,mark.label.bounds=mark.label.bounds.set({x:mark.label.bounds.x+xShift})}))})),Util_1.flatten(lines.map((function(l){return l.marks})))}},{key:"height",get:function get(){return Util_1.max(this.marks.map((function(mark){return mark.y+mark.rectSize})))}},{key:"render",value:function render(){var _this6=this,manager=this.manager,marks=this.marks;return React.createElement("g",null,React.createElement("g",{className:"categoricalColorLegend"},marks.map((function(mark,index){return React.createElement("g",{key:index,onMouseOver:function onMouseOver(){return manager.onLegendMouseOver?manager.onLegendMouseOver(mark.bin):void 0},onMouseLeave:function onMouseLeave(){return manager.onLegendMouseLeave?manager.onLegendMouseLeave():void 0}},React.createElement("rect",{x:_this6.legendX+mark.x,y:_this6.categoryLegendY+mark.y,width:mark.rectSize,height:mark.rectSize,fill:mark.bin.color,stroke:manager.categoricalBinStroke,strokeWidth:.4}),",",React.createElement("text",{x:_this6.legendX+mark.label.bounds.x,y:_this6.categoryLegendY+mark.label.bounds.y,dy:Util_1.dyFromAlign(owidTypes_1.VerticalAlign.bottom),fontSize:mark.label.fontSize},mark.label.text))}))))}}]),HorizontalCategoricalColorLegend}(HorizontalColorLegend);__decorate([mobx_1.computed],HorizontalCategoricalColorLegend.prototype,"categoricalLegendData",null),__decorate([mobx_1.computed],HorizontalCategoricalColorLegend.prototype,"markLines",null),__decorate([mobx_1.computed],HorizontalCategoricalColorLegend.prototype,"width",null),__decorate([mobx_1.computed],HorizontalCategoricalColorLegend.prototype,"marks",null),__decorate([mobx_1.computed],HorizontalCategoricalColorLegend.prototype,"height",null),HorizontalCategoricalColorLegend=__decorate([mobx_react_1.observer],HorizontalCategoricalColorLegend),exports.HorizontalCategoricalColorLegend=HorizontalCategoricalColorLegend},1013:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(36),__webpack_require__(22),__webpack_require__(5),__webpack_require__(14),__webpack_require__(62),__webpack_require__(32),__webpack_require__(31),__webpack_require__(9),__webpack_require__(10),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(18),__webpack_require__(21);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MapTooltip=void 0;var React=__importStar(__webpack_require__(0)),mobx_1=__webpack_require__(41),mobx_react_1=__webpack_require__(58),Tooltip_1=__webpack_require__(323),Util_1=__webpack_require__(40),SparkBars_1=__webpack_require__(1847),SparkBarTimeSeriesValue_1=__webpack_require__(1848),ColorScale_1=__webpack_require__(391),GrapherConstants_1=__webpack_require__(64),MapTooltip=function(_React$Component){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(MapTooltip,_React$Component);var _super=_createSuper(MapTooltip);function MapTooltip(){var _this,_a;return _classCallCheck(this,MapTooltip),(_this=_super.apply(this,arguments)).sparkBarsDatumXAccessor=function(d){return d.time},_this.colorScale=null!==(_a=_this.props.colorScale)&&void 0!==_a?_a:new ColorScale_1.ColorScale,_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(MapTooltip,[{key:"sparkBarsToDisplay",get:function get(){return Util_1.isMobile()?13:20}},{key:"sparkBarsProps",get:function get(){return{data:this.sparkBarsData,x:this.sparkBarsDatumXAccessor,y:function y(d){return d.value},xDomain:this.sparkBarsDomain}}},{key:"inputTable",get:function get(){return this.props.manager.table}},{key:"mapColumnSlug",get:function get(){return this.props.manager.mapColumnSlug}},{key:"sparkBarColumn",get:function get(){return this.inputTable.rootTable.get(this.mapColumnSlug)}},{key:"sparkBarsData",get:function get(){var _a,tooltipDatum=this.props.tooltipDatum;if(!tooltipDatum)return[];var sparkBarValues=[];return null===(_a=this.sparkBarColumn.valueByEntityNameAndTime.get(tooltipDatum.seriesName))||void 0===_a||_a.forEach((function(value,key){sparkBarValues.push({time:key,value:value})})),Util_1.takeWhile(sparkBarValues,(function(d){return d.time<=tooltipDatum.time})).slice(-this.sparkBarsToDisplay)}},{key:"sparkBarsDomain",get:function get(){var lastVal=Util_1.last(this.sparkBarsData),end=lastVal?this.sparkBarsDatumXAccessor(lastVal):0;return[end>0?end-this.sparkBarsToDisplay+1:0,end]}},{key:"currentSparkBar",get:function get(){var lastVal=Util_1.last(this.sparkBarsData);return lastVal?this.sparkBarsDatumXAccessor(lastVal):void 0}},{key:"renderSparkBars",get:function get(){return this.props.manager.mapIsClickable}},{key:"darkestColorInColorScheme",get:function get(){var colorScale=this.colorScale;return colorScale.isColorSchemeInverted?Util_1.first(colorScale.baseColors):Util_1.last(colorScale.baseColors)}},{key:"barColor",get:function get(){var colorScale=this.colorScale;return colorScale.singleColorScale&&!colorScale.customNumericColorsActive?this.darkestColorInColorScheme:void 0}},{key:"tooltipTarget",get:function get(){var _a;return null!==(_a=this.props.tooltipTarget)&&void 0!==_a?_a:{x:0,y:0,featureId:"Default Tooltip"}}},{key:"render",value:function render(){var _a,_this$props=this.props,tooltipDatum=_this$props.tooltipDatum,isEntityClickable=_this$props.isEntityClickable,targetTime=_this$props.targetTime,clickToSelectMessage=_this$props.manager.type===GrapherConstants_1.ChartTypeName.LineChart?"Click for change over time":"Click to select",timeColumn=this.inputTable.timeColumn,renderSparkBars=this.renderSparkBars,barColor=this.barColor,tooltipTarget=this.tooltipTarget,displayTime=timeColumn.isMissing?targetTime:timeColumn.formatValue(targetTime),displayDatumTime=timeColumn&&tooltipDatum?timeColumn.formatValue(tooltipDatum.time):null!==(_a=null==tooltipDatum?void 0:tooltipDatum.time.toString())&&void 0!==_a?_a:"";return React.createElement(Tooltip_1.Tooltip,{tooltipManager:this.props.manager,key:"mapTooltip",x:tooltipTarget.x,y:tooltipTarget.y,style:{textAlign:"center",padding:"8px"},offsetX:15,offsetY:10,offsetYDirection:"upward"},React.createElement("h3",{style:{padding:"0.3em 0.3em",margin:0,fontWeight:"normal",fontSize:"1em"}},tooltipTarget.featureId||tooltipTarget.featureId.replace(/_/g," ")),React.createElement("div",{style:{margin:0,padding:"0.3em 0.3em"}},tooltipDatum?React.createElement("div",{className:"map-tooltip"},React.createElement("div",{className:"trend"},renderSparkBars&&React.createElement("div",{className:"plot"},React.createElement(SparkBars_1.SparkBars,Object.assign({},this.sparkBarsProps,{currentX:this.currentSparkBar,color:barColor}))),React.createElement("div",{className:"value"+(renderSparkBars?"":" no-plot")},React.createElement(SparkBarTimeSeriesValue_1.SparkBarTimeSeriesValue,{className:"current",value:tooltipDatum.displayValue,displayDate:displayDatumTime,valueColor:renderSparkBars?barColor:"black"})))):"No data for ".concat(displayTime)),isEntityClickable&&React.createElement("div",null,React.createElement("p",{style:{margin:0,padding:"0.3em 0.9em",fontSize:"13px",opacity:.6}},clickToSelectMessage)))}}]),MapTooltip}(React.Component);__decorate([mobx_1.computed],MapTooltip.prototype,"sparkBarsToDisplay",null),__decorate([mobx_1.computed],MapTooltip.prototype,"sparkBarsProps",null),__decorate([mobx_1.computed],MapTooltip.prototype,"inputTable",null),__decorate([mobx_1.computed],MapTooltip.prototype,"mapColumnSlug",null),__decorate([mobx_1.computed],MapTooltip.prototype,"sparkBarColumn",null),__decorate([mobx_1.computed],MapTooltip.prototype,"sparkBarsData",null),__decorate([mobx_1.computed],MapTooltip.prototype,"sparkBarsDomain",null),__decorate([mobx_1.computed],MapTooltip.prototype,"currentSparkBar",null),__decorate([mobx_1.computed],MapTooltip.prototype,"renderSparkBars",null),__decorate([mobx_1.computed],MapTooltip.prototype,"darkestColorInColorScheme",null),__decorate([mobx_1.computed],MapTooltip.prototype,"barColor",null),__decorate([mobx_1.computed],MapTooltip.prototype,"tooltipTarget",null),MapTooltip=__decorate([mobx_react_1.observer],MapTooltip),exports.MapTooltip=MapTooltip},1015:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(33),__webpack_require__(28),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(18),__webpack_require__(21);var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.CommandPalette=void 0;var BodyDiv_1=__webpack_require__(1853),Util_1=__webpack_require__(40),mobx_react_1=__webpack_require__(58),react_1=__importDefault(__webpack_require__(0)),CommandPalette=function(_react_1$default$Comp){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(CommandPalette,_react_1$default$Comp);var _super=_createSuper(CommandPalette);function CommandPalette(){return _classCallCheck(this,CommandPalette),_super.apply(this,arguments)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(CommandPalette,[{key:"render",value:function render(){var style={display:this.props.display},lastCat="",commands=this.props.commands.filter((function(command){return command.title&&command.category})),sortedCommands=Util_1.sortBy(commands,"category").map((function(command,index){var cat=void 0;return command.category!==lastCat&&(lastCat=command.category,cat=react_1.default.createElement("div",{className:"commandCategory"},lastCat)),react_1.default.createElement("div",{key:"command".concat(index)},cat,react_1.default.createElement("div",{className:"commandOption"},react_1.default.createElement("span",{className:"commandCombo"},command.combo),react_1.default.createElement("a",{onClick:function onClick(){return command.fn()}},command.title)))}));return react_1.default.createElement(BodyDiv_1.BodyDiv,null,react_1.default.createElement("div",{className:"CommandPalette",style:style},react_1.default.createElement("div",{className:"paletteTitle"},"Keyboard Shortcuts"),sortedCommands))}}],[{key:"togglePalette",value:function togglePalette(){var element=document.getElementsByClassName("CommandPalette")[0];element&&(element.style.display="none"===element.style.display?"block":"none")}}]),CommandPalette}(react_1.default.Component);CommandPalette=__decorate([mobx_react_1.observer],CommandPalette),exports.CommandPalette=CommandPalette},1016:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(28),__webpack_require__(31),__webpack_require__(25),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(18),__webpack_require__(21);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.StaticCaptionedChart=exports.CaptionedChart=void 0;var React=__importStar(__webpack_require__(0)),mobx_1=__webpack_require__(41),mobx_react_1=__webpack_require__(58),Bounds_1=__webpack_require__(73),Header_1=__webpack_require__(1017),Footer_1=__webpack_require__(1018),ChartTypeMap_1=__webpack_require__(474),GrapherConstants_1=__webpack_require__(64),LoadingIndicator_1=__webpack_require__(608),FacetChart_1=__webpack_require__(1031),faExchangeAlt_1=__webpack_require__(1014),react_fontawesome_1=__webpack_require__(123),CollapsibleList_1=__webpack_require__(1032),Controls_1=__webpack_require__(996),ScaleSelector_1=__webpack_require__(1033),AddEntityButton_1=__webpack_require__(1869),faPencilAlt_1=__webpack_require__(1008),Util_1=__webpack_require__(40),CaptionedChart=function(_React$Component){_inherits(CaptionedChart,_React$Component);var _super=_createSuper(CaptionedChart);function CaptionedChart(){return _classCallCheck(this,CaptionedChart),_super.apply(this,arguments)}return _createClass(CaptionedChart,[{key:"manager",get:function get(){return this.props.manager}},{key:"containerElement",get:function get(){var _a;return null===(_a=this.manager)||void 0===_a?void 0:_a.containerElement}},{key:"maxWidth",get:function get(){var _a;return null!==(_a=this.props.maxWidth)&&void 0!==_a?_a:this.bounds.width-30}},{key:"header",get:function get(){return new Header_1.Header({manager:this.manager,maxWidth:this.maxWidth})}},{key:"footer",get:function get(){return new Footer_1.Footer({manager:this.manager,maxWidth:this.maxWidth})}},{key:"chartHeight",get:function get(){var controlsRowHeight=this.controls.length?36:0;return this.bounds.height-this.header.height-controlsRowHeight-this.footer.height-25}},{key:"isMapTab",get:function get(){return this.manager.tab===GrapherConstants_1.GrapherTabOption.map}},{key:"bounds",get:function get(){var _a,_b;return null!==(_b=null!==(_a=this.props.bounds)&&void 0!==_a?_a:this.manager.tabBounds)&&void 0!==_b?_b:Bounds_1.DEFAULT_BOUNDS}},{key:"boundsForChart",get:function get(){return new Bounds_1.Bounds(0,0,this.bounds.width,this.chartHeight).padWidth(15).padTop(this.isMapTab?0:18).padBottom(15)}},{key:"isFaceted",get:function get(){var hasStrategy=!!this.manager.facetStrategy&&this.manager.facetStrategy!==GrapherConstants_1.FacetStrategy.none;return!this.isMapTab&&hasStrategy}},{key:"renderChart",value:function renderChart(){var _a,_b,_c,manager=this.manager,bounds=this.boundsForChart,chartTypeName=this.isMapTab?GrapherConstants_1.ChartTypeName.WorldMap:null!==(_b=null!==(_a=manager.typeExceptWhenLineChartAndSingleTimeThenWillBeBarChart)&&void 0!==_a?_a:manager.type)&&void 0!==_b?_b:GrapherConstants_1.ChartTypeName.LineChart,ChartClass=null!==(_c=ChartTypeMap_1.ChartComponentClassMap.get(chartTypeName))&&void 0!==_c?_c:ChartTypeMap_1.DefaultChartClass;return this.isFaceted?React.createElement(FacetChart_1.FacetChart,{bounds:bounds,chartTypeName:chartTypeName,manager:manager}):React.createElement(ChartClass,{bounds:bounds,manager:manager,containerElement:this.containerElement})}},{key:"componentDidMount",value:function componentDidMount(){Util_1.exposeInstanceOnWindow(this,"captionedChart")}},{key:"startSelecting",value:function startSelecting(){this.manager.isSelectingData=!0}},{key:"controls",get:function get(){var manager=this.manager;if(!manager.isReady||this.isMapTab)return[];var showYScaleToggle=manager.showYScaleToggle,showXScaleToggle=manager.showXScaleToggle,controls=[];return showYScaleToggle&&controls.push(React.createElement(ScaleSelector_1.ScaleSelector,{key:"scaleSelector",manager:manager.yAxis,prefix:showXScaleToggle?"Y: ":""})),showXScaleToggle&&controls.push(React.createElement(ScaleSelector_1.ScaleSelector,{key:"scaleSelector",manager:manager.xAxis,prefix:"X: "})),manager.showSelectEntitiesButton&&controls.push(React.createElement("button",{type:"button",key:"grapher-select-entities","data-track-note":"grapher-select-entities",onClick:this.startSelecting},React.createElement("span",{className:"SelectEntitiesButton"},React.createElement(react_fontawesome_1.FontAwesomeIcon,{icon:faPencilAlt_1.faPencilAlt}),"Select ".concat(manager.entityTypePlural)))),manager.showChangeEntityButton&&controls.push(React.createElement("button",{type:"button",key:"grapher-change-entities","data-track-note":"grapher-change-entity",className:"ChangeEntityButton",onClick:this.startSelecting},React.createElement(react_fontawesome_1.FontAwesomeIcon,{icon:faExchangeAlt_1.faExchangeAlt})," Change"," ",manager.entityType)),manager.showAddEntityButton&&controls.push(React.createElement(AddEntityButton_1.AddEntityButton,{key:"AddEntityButton",manager:manager})),manager.showZoomToggle&&controls.push(React.createElement(Controls_1.ZoomToggle,{key:"ZoomToggle",manager:manager})),!manager.hideFacetControl&&manager.availableFacetStrategies.length>1&&controls.push(React.createElement(Controls_1.FacetStrategyDropdown,{key:"FacetStrategyDropdown",manager:manager})),manager.showAbsRelToggle&&controls.push(React.createElement(Controls_1.AbsRelToggle,{key:"AbsRelToggle",manager:manager})),manager.showFacetYDomainToggle&&controls.push(React.createElement(Controls_1.FacetYDomainToggle,{key:"FacetYDomainToggle",manager:manager})),manager.showHighlightToggle&&controls.push(React.createElement(Controls_1.HighlightToggle,{key:"highlight-toggle",manager:manager})),manager.showSmallCountriesFilterToggle&&controls.push(React.createElement(Controls_1.FilterSmallCountriesToggle,{key:"FilterSmallCountriesToggle",manager:manager})),controls}},{key:"selectionArray",get:function get(){return this.manager.selection}},{key:"renderControlsRow",value:function renderControlsRow(){return this.controls.length?React.createElement("div",{className:"controlsRow"},React.createElement(CollapsibleList_1.CollapsibleList,null,this.controls)):null}},{key:"renderLoadingIndicator",value:function renderLoadingIndicator(){return React.createElement("foreignObject",Object.assign({},this.boundsForChart.toProps()),React.createElement(LoadingIndicator_1.LoadingIndicator,{title:this.manager.whatAreWeWaitingFor}))}},{key:"render",value:function render(){var bounds=this.bounds,chartHeight=this.chartHeight,maxWidth=this.maxWidth,width=bounds.width;return React.createElement(React.Fragment,null,React.createElement(Header_1.Header,{manager:this.manager,maxWidth:maxWidth}),this.renderControlsRow(),React.createElement("div",{style:{position:"relative",clear:"both"}},React.createElement("svg",Object.assign({},this.svgProps,{width:width,height:chartHeight,viewBox:"0 0 ".concat(width," ").concat(chartHeight)}),this.manager.isReady?this.renderChart():this.renderLoadingIndicator())),React.createElement(Footer_1.Footer,{manager:this.manager,maxWidth:maxWidth}))}},{key:"svgProps",get:function get(){var _a;return{xmlns:"http://www.w3.org/2000/svg",version:"1.1",style:{fontFamily:"Lato, 'Helvetica Neue', Helvetica, Arial, sans-serif",fontSize:null!==(_a=this.manager.fontSize)&&void 0!==_a?_a:GrapherConstants_1.BASE_FONT_SIZE,backgroundColor:"white",textRendering:"optimizeLegibility",WebkitFontSmoothing:"antialiased"}}}}]),CaptionedChart}(React.Component);__decorate([mobx_1.computed],CaptionedChart.prototype,"manager",null),__decorate([mobx_1.computed],CaptionedChart.prototype,"containerElement",null),__decorate([mobx_1.computed],CaptionedChart.prototype,"maxWidth",null),__decorate([mobx_1.computed],CaptionedChart.prototype,"header",null),__decorate([mobx_1.computed],CaptionedChart.prototype,"footer",null),__decorate([mobx_1.computed],CaptionedChart.prototype,"chartHeight",null),__decorate([mobx_1.computed],CaptionedChart.prototype,"isMapTab",null),__decorate([mobx_1.computed],CaptionedChart.prototype,"bounds",null),__decorate([mobx_1.computed],CaptionedChart.prototype,"boundsForChart",null),__decorate([mobx_1.computed],CaptionedChart.prototype,"isFaceted",null),__decorate([mobx_1.action.bound],CaptionedChart.prototype,"startSelecting",null),__decorate([mobx_1.computed],CaptionedChart.prototype,"controls",null),__decorate([mobx_1.computed],CaptionedChart.prototype,"selectionArray",null),__decorate([mobx_1.computed],CaptionedChart.prototype,"svgProps",null),CaptionedChart=__decorate([mobx_react_1.observer],CaptionedChart),exports.CaptionedChart=CaptionedChart;var StaticCaptionedChart=function(_CaptionedChart){_inherits(StaticCaptionedChart,_CaptionedChart);var _super2=_createSuper(StaticCaptionedChart);function StaticCaptionedChart(props){return _classCallCheck(this,StaticCaptionedChart),_super2.call(this,props)}return _createClass(StaticCaptionedChart,[{key:"paddedBounds",get:function get(){return this.bounds.pad(15)}},{key:"boundsForChart",get:function get(){return this.paddedBounds.padTop(this.header.height).padBottom(this.footer.height+25).padTop(this.isMapTab?0:18)}},{key:"render",value:function render(){var bounds=this.bounds,paddedBounds=this.paddedBounds,width=bounds.width,height=bounds.height;return React.createElement("svg",Object.assign({},this.svgProps,{width:width,height:height,viewBox:"0 0 ".concat(width," ").concat(height)}),this.header.renderStatic(paddedBounds.x,paddedBounds.y),this.renderChart(),this.footer.renderStatic(paddedBounds.x,paddedBounds.bottom-this.footer.height))}}]),StaticCaptionedChart}(CaptionedChart);__decorate([mobx_1.computed],StaticCaptionedChart.prototype,"paddedBounds",null),__decorate([mobx_1.computed],StaticCaptionedChart.prototype,"boundsForChart",null),StaticCaptionedChart=__decorate([mobx_react_1.observer],StaticCaptionedChart),exports.StaticCaptionedChart=StaticCaptionedChart},1017:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(31),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(18),__webpack_require__(21);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Header=void 0;var React=__importStar(__webpack_require__(0)),TextWrap_1=__webpack_require__(242),mobx_1=__webpack_require__(41),mobx_react_1=__webpack_require__(58),Logos_1=__webpack_require__(1854),GrapherConstants_1=__webpack_require__(64),Bounds_1=__webpack_require__(73),Header=function(_React$Component){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(Header,_React$Component);var _super=_createSuper(Header);function Header(){var _this;return _classCallCheck(this,Header),(_this=_super.apply(this,arguments)).titleMarginBottom=4,_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Header,[{key:"manager",get:function get(){return this.props.manager}},{key:"fontSize",get:function get(){var _a;return null!==(_a=this.manager.fontSize)&&void 0!==_a?_a:GrapherConstants_1.BASE_FONT_SIZE}},{key:"maxWidth",get:function get(){var _a;return null!==(_a=this.props.maxWidth)&&void 0!==_a?_a:Bounds_1.DEFAULT_BOUNDS.width}},{key:"titleText",get:function get(){var _a;return null!==(_a=this.manager.currentTitle)&&void 0!==_a?_a:""}},{key:"subtitleText",get:function get(){var _a;return null!==(_a=this.manager.subtitle)&&void 0!==_a?_a:""}},{key:"logo",get:function get(){var manager=this.manager;if(!manager.hideLogo)return new Logos_1.Logo({logo:manager.logo,isLink:!!manager.shouldLinkToOwid,fontSize:this.fontSize})}},{key:"logoWidth",get:function get(){return this.logo?this.logo.width:0}},{key:"logoHeight",get:function get(){return this.logo?this.logo.height:0}},{key:"title",get:function get(){for(var title,logoWidth=this.logoWidth,maxWidth=this.maxWidth-logoWidth-20,fontScale=1.4;title=new TextWrap_1.TextWrap({maxWidth:maxWidth,fontSize:fontScale*this.fontSize,text:this.titleText,lineHeight:1}),!(fontScale<=1.2||title.lines.length<=1);)fontScale-=.05;return new TextWrap_1.TextWrap({maxWidth:maxWidth,fontSize:fontScale*this.fontSize,text:this.titleText,lineHeight:1})}},{key:"subtitleWidth",get:function get(){return this.title.height>this.logoHeight?this.maxWidth:this.maxWidth-this.logoWidth-10}},{key:"subtitle",get:function get(){return new TextWrap_1.TextWrap({maxWidth:this.subtitleWidth,fontSize:.8*this.fontSize,text:this.subtitleText,lineHeight:1.2,linkifyText:!0})}},{key:"height",get:function get(){return this.manager.isMediaCard?0:Math.max(this.title.height+this.subtitle.height+this.titleMarginBottom,this.logoHeight)}},{key:"renderStatic",value:function renderStatic(x,y){var title=this.title,logo=this.logo,subtitle=this.subtitle,manager=this.manager,maxWidth=this.maxWidth;return manager.isMediaCard?null:React.createElement("g",{className:"HeaderView"},logo&&logo.height>0&&logo.renderSVG(x+maxWidth-logo.width,y),React.createElement("a",{href:manager.canonicalUrl,style:{fontFamily:'"Playfair Display", Georgia, "Times New Roman", serif'},target:"_blank",rel:"noopener"},title.render(x,y,{fill:"#555"})),subtitle.render(x,y+title.height+this.titleMarginBottom,{fill:"#666"}))}},{key:"render",value:function render(){var manager=this.manager,titleStyle=Object.assign(Object.assign({},this.title.htmlStyle),{marginBottom:this.titleMarginBottom}),subtitleStyle=Object.assign(Object.assign({},this.subtitle.htmlStyle),{overflowY:"hidden"});return React.createElement("div",{className:"HeaderHTML"},this.logo&&this.logo.renderHTML(),React.createElement("a",{href:manager.canonicalUrl,target:"_blank"},React.createElement("h1",{style:titleStyle},this.title.renderHTML())),React.createElement("p",{style:subtitleStyle},this.subtitle.renderHTML()))}}]),Header}(React.Component);__decorate([mobx_1.computed],Header.prototype,"manager",null),__decorate([mobx_1.computed],Header.prototype,"fontSize",null),__decorate([mobx_1.computed],Header.prototype,"maxWidth",null),__decorate([mobx_1.computed],Header.prototype,"titleText",null),__decorate([mobx_1.computed],Header.prototype,"subtitleText",null),__decorate([mobx_1.computed],Header.prototype,"logo",null),__decorate([mobx_1.computed],Header.prototype,"logoWidth",null),__decorate([mobx_1.computed],Header.prototype,"logoHeight",null),__decorate([mobx_1.computed],Header.prototype,"title",null),__decorate([mobx_1.computed],Header.prototype,"subtitleWidth",null),__decorate([mobx_1.computed],Header.prototype,"subtitle",null),__decorate([mobx_1.computed],Header.prototype,"height",null),Header=__decorate([mobx_react_1.observer],Header),exports.Header=Header},1018:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(25),__webpack_require__(103),__webpack_require__(32),__webpack_require__(62),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(18),__webpack_require__(21);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Footer=void 0;var React=__importStar(__webpack_require__(0)),mobx_1=__webpack_require__(41),mobx_react_1=__webpack_require__(58),url_parse_1=__importDefault(__webpack_require__(596)),TextWrap_1=__webpack_require__(242),Bounds_1=__webpack_require__(73),Util_1=__webpack_require__(40),Tooltip_1=__webpack_require__(323),GrapherConstants_1=__webpack_require__(64),Footer=function(_React$Component){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(Footer,_React$Component);var _super=_createSuper(Footer);function Footer(){var _this;return _classCallCheck(this,Footer),(_this=_super.apply(this,arguments)).base=React.createRef(),_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Footer,[{key:"maxWidth",get:function get(){var _a;return null!==(_a=this.props.maxWidth)&&void 0!==_a?_a:Bounds_1.DEFAULT_BOUNDS.width}},{key:"manager",get:function get(){return this.props.manager}},{key:"sourcesText",get:function get(){var sourcesLine=this.manager.sourcesLine;return sourcesLine?"Source: ".concat(sourcesLine):""}},{key:"noteText",get:function get(){return this.manager.note?"Note: ".concat(this.manager.note):""}},{key:"ccSvg",get:function get(){return this.manager.hasOWIDLogo?'<a style="fill: #777;" class="cclogo" href="http://creativecommons.org/licenses/by/4.0/deed.en_US" target="_blank">CC BY</a>':'<a href="https://ourworldindata.org" target="_blank">Powered by ourworldindata.org</a>'}},{key:"originUrlWithProtocol",get:function get(){var _a;return null!==(_a=this.manager.originUrlWithProtocol)&&void 0!==_a?_a:"http://localhost"}},{key:"finalUrl",get:function get(){var originUrl=this.originUrlWithProtocol,url=url_parse_1.default(originUrl);return"https://".concat(url.hostname).concat(url.pathname)}},{key:"finalUrlText",get:function get(){var originUrl=this.originUrlWithProtocol;if(originUrl&&originUrl.toLowerCase().match(/^https?:\/\/./)&&!this.manager.shouldLinkToOwid){var url=url_parse_1.default(originUrl),finalUrlText="".concat(url.hostname).concat(url.pathname).replace("ourworldindata.org","OurWorldInData.org");if(!(Bounds_1.Bounds.forText(finalUrlText,{fontSize:this.fontSize}).width>.7*this.maxWidth))return finalUrlText}}},{key:"licenseSvg",get:function get(){var finalUrl=this.finalUrl,finalUrlText=this.finalUrlText,ccSvg=this.ccSvg;return finalUrlText?"*data-entry* â€¢ ".concat(ccSvg).replace(/\*data-entry\*/,"<a target='_blank' style='fill: #777;' href='"+finalUrl+"'>"+finalUrlText+"</a>"):ccSvg}},{key:"fontSize",get:function get(){var _a;return.7*(null!==(_a=this.manager.fontSize)&&void 0!==_a?_a:GrapherConstants_1.BASE_FONT_SIZE)}},{key:"sources",get:function get(){var maxWidth=this.maxWidth,fontSize=this.fontSize,sourcesText=this.sourcesText;return new TextWrap_1.TextWrap({maxWidth:maxWidth,fontSize:fontSize,text:sourcesText,linkifyText:!0})}},{key:"note",get:function get(){var maxWidth=this.maxWidth,fontSize=this.fontSize,noteText=this.noteText;return new TextWrap_1.TextWrap({maxWidth:maxWidth,fontSize:fontSize,text:noteText,linkifyText:!0})}},{key:"license",get:function get(){var maxWidth=this.maxWidth,fontSize=this.fontSize,licenseSvg=this.licenseSvg;return new TextWrap_1.TextWrap({maxWidth:3*maxWidth,fontSize:fontSize,text:licenseSvg,rawHtml:!0})}},{key:"isCompact",get:function get(){return this.maxWidth-this.sources.width-5>this.license.width}},{key:"paraMargin",get:function get(){return 2}},{key:"height",get:function get(){if(this.manager.isMediaCard)return 0;var sources=this.sources,note=this.note,license=this.license,isCompact=this.isCompact,paraMargin=this.paraMargin;return sources.height+(note.height?paraMargin+note.height:0)+(isCompact?0:paraMargin+license.height)}},{key:"onSourcesClick",value:function onSourcesClick(){this.manager.currentTab=GrapherConstants_1.GrapherTabOption.sources}},{key:"renderStatic",value:function renderStatic(targetX,targetY){if(this.manager.isMediaCard)return null;var sources=this.sources,note=this.note,license=this.license,maxWidth=this.maxWidth,isCompact=this.isCompact,paraMargin=this.paraMargin;return React.createElement("g",{className:"SourcesFooter",style:{fill:"#777"}},React.createElement("g",{style:{fill:"#777"}},sources.render(targetX,targetY)),note.render(targetX,targetY+sources.height+paraMargin),isCompact?license.render(targetX+maxWidth-license.width,targetY):license.render(targetX,targetY+sources.height+paraMargin+(note.height?note.height+paraMargin:0)))}},{key:"onMouseMove",value:function onMouseMove(e){var cc=this.base.current.querySelector(".cclogo");if(cc&&cc.matches(":hover")){var grapher=this.base.current.closest(".GrapherComponent");if(grapher){var mouse=Util_1.getRelativeMouse(grapher,e);this.tooltipTarget={x:mouse.x,y:mouse.y}}else console.error("Grapher was falsy")}else this.tooltipTarget=void 0}},{key:"componentDidMount",value:function componentDidMount(){window.addEventListener("mousemove",this.onMouseMove)}},{key:"componentWillUnmount",value:function componentWillUnmount(){window.removeEventListener("mousemove",this.onMouseMove)}},{key:"render",value:function render(){var tooltipTarget=this.tooltipTarget,license=React.createElement("div",{className:"license",style:{fontSize:this.license.fontSize,lineHeight:this.sources.lineHeight}},this.finalUrlText&&React.createElement("a",{href:this.finalUrl,target:"_blank",rel:"noopener"},this.finalUrlText," â€¢"," "),this.manager.hasOWIDLogo?React.createElement("a",{className:"cclogo",href:"http://creativecommons.org/licenses/by/4.0/deed.en_US",target:"_blank",rel:"noopener"},"CC BY"):React.createElement("a",{href:"https://ourworldindata.org",target:"_blank",rel:"noopener"},"Powered by ourworldindata.org"));return React.createElement("footer",{className:"SourcesFooterHTML"+(this.isCompact?" compact":""),ref:this.base,style:{color:"#777"}},this.isCompact&&license,React.createElement("p",{style:this.sources.htmlStyle,className:"clickable",onClick:this.onSourcesClick},this.sources.renderHTML()),this.note&&React.createElement("p",{style:this.note.htmlStyle},this.note.renderHTML()),!this.isCompact&&license,tooltipTarget&&React.createElement(Tooltip_1.Tooltip,{tooltipManager:this.manager,x:tooltipTarget.x,y:tooltipTarget.y,style:{textAlign:"center",maxWidth:"300px",whiteSpace:"inherit",padding:"10px",fontSize:"0.8em"}},React.createElement("p",null,"Our World in Data charts are licensed under Creative Commons; you are free to use, share, and adapt this material. Click through to the CC BY page for more information. Please bear in mind that the underlying source data for all our charts might be subject to different license terms from third-party authors.")))}}]),Footer}(React.Component);__decorate([mobx_1.computed],Footer.prototype,"maxWidth",null),__decorate([mobx_1.computed],Footer.prototype,"manager",null),__decorate([mobx_1.computed],Footer.prototype,"sourcesText",null),__decorate([mobx_1.computed],Footer.prototype,"noteText",null),__decorate([mobx_1.computed],Footer.prototype,"ccSvg",null),__decorate([mobx_1.computed],Footer.prototype,"originUrlWithProtocol",null),__decorate([mobx_1.computed],Footer.prototype,"finalUrl",null),__decorate([mobx_1.computed],Footer.prototype,"finalUrlText",null),__decorate([mobx_1.computed],Footer.prototype,"licenseSvg",null),__decorate([mobx_1.computed],Footer.prototype,"fontSize",null),__decorate([mobx_1.computed],Footer.prototype,"sources",null),__decorate([mobx_1.computed],Footer.prototype,"note",null),__decorate([mobx_1.computed],Footer.prototype,"license",null),__decorate([mobx_1.computed],Footer.prototype,"isCompact",null),__decorate([mobx_1.computed],Footer.prototype,"paraMargin",null),__decorate([mobx_1.computed],Footer.prototype,"height",null),__decorate([mobx_1.action.bound],Footer.prototype,"onSourcesClick",null),__decorate([mobx_1.observable.ref],Footer.prototype,"tooltipTarget",void 0),__decorate([mobx_1.action.bound],Footer.prototype,"onMouseMove",null),Footer=__decorate([mobx_react_1.observer],Footer),exports.Footer=Footer},1019:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(33),__webpack_require__(28),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(18),__webpack_require__(21);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ComparisonLine=void 0;var d3_shape_1=__webpack_require__(1934),Util_1=__webpack_require__(40),React=__importStar(__webpack_require__(0)),mobx_1=__webpack_require__(41),mobx_react_1=__webpack_require__(58),ComparisonLineGenerator_1=__webpack_require__(1857),Bounds_1=__webpack_require__(73),PointVector_1=__webpack_require__(239),Halos_1=__webpack_require__(1020),ComparisonLine=function(_React$Component){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(ComparisonLine,_React$Component);var _super=_createSuper(ComparisonLine);function ComparisonLine(){var _this;return _classCallCheck(this,ComparisonLine),(_this=_super.apply(this,arguments)).renderUid=Util_1.guid(),_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(ComparisonLine,[{key:"controlData",get:function get(){var _this$props=this.props,comparisonLine=_this$props.comparisonLine,dualAxis=_this$props.dualAxis,horizontalAxis=dualAxis.horizontalAxis,verticalAxis=dualAxis.verticalAxis;return ComparisonLineGenerator_1.generateComparisonLinePoints(comparisonLine.yEquals,horizontalAxis.domain,verticalAxis.domain,horizontalAxis.scaleType,verticalAxis.scaleType)}},{key:"linePath",get:function get(){var controlData=this.controlData,_this$props$dualAxis=this.props.dualAxis,horizontalAxis=_this$props$dualAxis.horizontalAxis,verticalAxis=_this$props$dualAxis.verticalAxis;return d3_shape_1.line().curve(d3_shape_1.curveLinear).x((function(d){return horizontalAxis.place(d[0])})).y((function(d){return verticalAxis.place(d[1])}))(controlData)}},{key:"placedLabel",get:function get(){var label=this.props.comparisonLine.label;if(label){var controlData=this.controlData,_this$props$dualAxis2=this.props.dualAxis,horizontalAxis=_this$props$dualAxis2.horizontalAxis,verticalAxis=_this$props$dualAxis2.verticalAxis,innerBounds=_this$props$dualAxis2.innerBounds,linePoints=controlData.map((function(d){return new PointVector_1.PointVector(horizontalAxis.place(d[0]),verticalAxis.place(d[1]))})).filter((function(p){return innerBounds.contains(p)}));if(linePoints.length){var midPoint=linePoints[Math.floor(linePoints.length/2)],p1=linePoints[0],p2=linePoints[linePoints.length-1],angle=180*Math.atan2(p2.y-p1.y,p2.x-p1.x)/Math.PI,bounds=Bounds_1.Bounds.forText(label);return{x:midPoint.x,y:midPoint.y,bounds:bounds,angle:angle,text:label}}}}},{key:"render",value:function render(){var innerBounds=this.props.dualAxis.innerBounds,linePath=this.linePath,renderUid=this.renderUid,placedLabel=this.placedLabel;return React.createElement("g",{className:"comparisonLine"},React.createElement("defs",null,React.createElement("clipPath",{id:"axisBounds-".concat(renderUid)},React.createElement("rect",{x:innerBounds.x,y:innerBounds.y,width:innerBounds.width,height:innerBounds.height}))),React.createElement("path",{style:{opacity:.9,fill:"none",stroke:"#ccc",strokeDasharray:"2 2"},id:"path-".concat(renderUid),d:linePath||void 0,clipPath:"url(#axisBounds-".concat(renderUid,")")}),placedLabel&&React.createElement("text",{style:{fontSize:"80%",opacity:.9,textAnchor:"end",fill:"#999"},clipPath:"url(#axisBounds-".concat(renderUid,")")},Halos_1.getElementWithHalo("path-".concat(renderUid),React.createElement("textPath",{baselineShift:"-0.2rem",href:"#path-".concat(renderUid),startOffset:"90%"},placedLabel.text))))}}]),ComparisonLine}(React.Component);__decorate([mobx_1.computed],ComparisonLine.prototype,"controlData",null),__decorate([mobx_1.computed],ComparisonLine.prototype,"linePath",null),__decorate([mobx_1.computed],ComparisonLine.prototype,"placedLabel",null),ComparisonLine=__decorate([mobx_react_1.observer],ComparisonLine),exports.ComparisonLine=ComparisonLine},1020:function(module,exports,__webpack_require__){"use strict";__webpack_require__(31);var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getElementWithHalo=void 0;var react_1=__importDefault(__webpack_require__(0)),DefaultHaloStyle={fill:"#fff",stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:".25em"};exports.getElementWithHalo=function getElementWithHalo(key,element){var styles=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},halo=react_1.default.cloneElement(element,{style:Object.assign(Object.assign({},DefaultHaloStyle),styles)});return react_1.default.createElement(react_1.default.Fragment,{key:key},halo,element)}},1021:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(9),__webpack_require__(36),__webpack_require__(57),__webpack_require__(28),__webpack_require__(25),__webpack_require__(202),__webpack_require__(31),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(18),__webpack_require__(21);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result},__rest=this&&this.__rest||function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MultiColorPolyline=exports.getSegmentsFromPoints=void 0;var React=__importStar(__webpack_require__(0)),mobx_1=__webpack_require__(41),mobx_react_1=__webpack_require__(58),Util_1=__webpack_require__(40);function toPoint(point){return{x:point.x,y:point.y}}function getSegmentsFromPoints(points){var segments=[];return points.forEach((function(currentPoint){var currentSegment=segments[segments.length-1];if(currentSegment)if(currentSegment.color===currentPoint.color)currentSegment.points.push(toPoint(currentPoint));else{var midPoint=function getMidpoint(a,b){return{x:(a.x+b.x)/2,y:(a.y+b.y)/2}}(Util_1.last(currentSegment.points),currentPoint);currentSegment.points.push(midPoint),segments.push({points:[midPoint,toPoint(currentPoint)],color:currentPoint.color})}else segments.push({points:[toPoint(currentPoint)],color:currentPoint.color})})),segments}exports.getSegmentsFromPoints=getSegmentsFromPoints;var MultiColorPolyline=function(_React$Component){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(MultiColorPolyline,_React$Component);var _super=_createSuper(MultiColorPolyline);function MultiColorPolyline(){return _classCallCheck(this,MultiColorPolyline),_super.apply(this,arguments)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(MultiColorPolyline,[{key:"segments",get:function get(){return getSegmentsFromPoints(this.props.points)}},{key:"render",value:function render(){var _this=this,_a=this.props,markerStart=_a.markerStart,markerMid=_a.markerMid,markerEnd=_a.markerEnd,polylineProps=__rest(_a,["markerStart","markerMid","markerEnd"]);return React.createElement(React.Fragment,null,this.segments.map((function(group,index){return React.createElement("polyline",Object.assign({},polylineProps,{key:index,points:(points=group.points,points.map((function(p){return"".concat(p.x.toFixed(2),",").concat(p.y.toFixed(2))})).join(" ")),stroke:group.color,fill:"none",strokeLinecap:"butt",markerStart:0===index?markerStart:void 0,markerMid:markerMid,markerEnd:index===_this.segments.length-1?markerEnd:void 0}));var points})))}}]),MultiColorPolyline}(React.Component);__decorate([mobx_1.computed],MultiColorPolyline.prototype,"segments",null),MultiColorPolyline=__decorate([mobx_react_1.observer],MultiColorPolyline),exports.MultiColorPolyline=MultiColorPolyline},1022:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ScatterLabelFontFamily=void 0,exports.ScatterLabelFontFamily="Arial, sans-serif"},1023:function(module,exports,__webpack_require__){"use strict";function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=arr&&("undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"]);if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(28),__webpack_require__(33),__webpack_require__(48),__webpack_require__(55),__webpack_require__(25),__webpack_require__(68),__webpack_require__(5),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(36),__webpack_require__(29),__webpack_require__(31),__webpack_require__(14),__webpack_require__(9),__webpack_require__(10),__webpack_require__(11),__webpack_require__(18),__webpack_require__(21),__webpack_require__(22),__webpack_require__(17);var SlopeChartAxis_1,__createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SlopeChart=void 0;var React=__importStar(__webpack_require__(0)),Util_1=__webpack_require__(40),mobx_1=__webpack_require__(41),mobx_react_1=__webpack_require__(58),Bounds_1=__webpack_require__(73),NoDataModal_1=__webpack_require__(203),VerticalColorLegend_1=__webpack_require__(475),ColorScale_1=__webpack_require__(391),GrapherConstants_1=__webpack_require__(64),d3_scale_1=__webpack_require__(279),d3_array_1=__webpack_require__(89),d3_selection_1=__webpack_require__(135),Text_1=__webpack_require__(1024),TextWrap_1=__webpack_require__(242),SlopeChartConstants_1=__webpack_require__(1864),ChartUtils_1=__webpack_require__(173),ColorConstants_1=__webpack_require__(278),AxisConfig_1=__webpack_require__(216),SlopeChart=function(_React$Component){_inherits(SlopeChart,_React$Component);var _super=_createSuper(SlopeChart);function SlopeChart(){var _this;return _classCallCheck(this,SlopeChart),(_this=_super.apply(this,arguments)).sidebarMinWidth=100,_this.colorScale=new ColorScale_1.ColorScale(_assertThisInitialized(_this)),_this.defaultBaseColorScheme=ColorConstants_1.ColorSchemeName.continents,_this}return _createClass(SlopeChart,[{key:"transformTable",value:function transformTable(table){return table.has(this.yColumnSlug)?(table=table.replaceNonNumericCellsWithErrorValues([this.yColumnSlug])).dropRowsWithErrorValuesForColumn(this.yColumnSlug).interpolateColumnWithTolerance(this.yColumnSlug):table}},{key:"manager",get:function get(){return this.props.manager}},{key:"bounds",get:function get(){var _a;return null!==(_a=this.props.bounds)&&void 0!==_a?_a:Bounds_1.DEFAULT_BOUNDS}},{key:"fontSize",get:function get(){var _a;return null!==(_a=this.manager.baseFontSize)&&void 0!==_a?_a:GrapherConstants_1.BASE_FONT_SIZE}},{key:"legendItems",get:function get(){var _this2=this;return this.colorScale.legendBins.filter((function(bin){return _this2.colorsInUse.includes(bin.color)})).map((function(bin){var _a,_b;return{key:null!==(_a=bin.label)&&void 0!==_a?_a:"",label:null!==(_b=bin.label)&&void 0!==_b?_b:"",color:bin.color}}))}},{key:"maxLegendWidth",get:function get(){return this.sidebarMaxWidth}},{key:"onSlopeMouseOver",value:function onSlopeMouseOver(slopeProps){this.hoverKey=slopeProps.seriesName}},{key:"onSlopeMouseLeave",value:function onSlopeMouseLeave(){this.hoverKey=void 0}},{key:"onSlopeClick",value:function onSlopeClick(){var manager=this.manager,hoverKey=this.hoverKey;manager.addCountryMode!==GrapherConstants_1.EntitySelectionMode.Disabled&&manager.addCountryMode&&void 0!==hoverKey&&this.selectionArray.toggleSelection(hoverKey)}},{key:"onLegendMouseOver",value:function onLegendMouseOver(color){this.hoverColor=color}},{key:"onLegendMouseLeave",value:function onLegendMouseLeave(){this.hoverColor=void 0}},{key:"selectionArray",get:function get(){return ChartUtils_1.makeSelectionArray(this.manager)}},{key:"selectedEntityNames",get:function get(){return this.selectionArray.selectedEntityNames}},{key:"onLegendClick",value:function onLegendClick(){var manager=this.manager,hoverColor=this.hoverColor;if(manager.addCountryMode!==GrapherConstants_1.EntitySelectionMode.Disabled&&manager.addCountryMode&&void 0!==hoverColor){var seriesNamesToToggle=this.series.filter((function(g){return g.color===hoverColor})).map((function(g){return g.seriesName}));Util_1.intersection(seriesNamesToToggle,this.selectedEntityNames).length===seriesNamesToToggle.length?this.selectionArray.setSelectedEntities(Util_1.without.apply(Util_1,[this.selectedEntityNames].concat(_toConsumableArray(seriesNamesToToggle)))):this.selectionArray.setSelectedEntities(this.selectedEntityNames.concat(seriesNamesToToggle))}}},{key:"focusColors",get:function get(){var _this3=this;return this.colorsInUse.filter((function(color){var matchingSeriesNames=_this3.series.filter((function(g){return g.color===color})).map((function(g){return g.seriesName}));return Util_1.intersection(matchingSeriesNames,_this3.selectedEntityNames).length===matchingSeriesNames.length}))}},{key:"focusKeys",get:function get(){return this.selectedEntityNames}},{key:"hoverKeys",get:function get(){var hoverColor=this.hoverColor,hoverKey=this.hoverKey,hoverKeys=void 0===hoverColor?[]:Util_1.uniq(this.series.filter((function(g){return g.color===hoverColor})).map((function(g){return g.seriesName})));return void 0!==hoverKey&&hoverKeys.push(hoverKey),hoverKeys}},{key:"activeColors",get:function get(){var hoverKeys=this.hoverKeys,focusKeys=this.focusKeys,activeKeys=hoverKeys.concat(focusKeys);return 0===activeKeys.length?Util_1.uniq(this.series.map((function(g){return g.color}))):Util_1.uniq(this.series.filter((function(g){return-1!==activeKeys.indexOf(g.seriesName)})).map((function(g){return g.color})))}},{key:"colorsInUse",get:function get(){return Util_1.uniq(this.series.map((function(series){return series.color})))}},{key:"sidebarMaxWidth",get:function get(){return.5*this.bounds.width}},{key:"legendWidth",get:function get(){return new VerticalColorLegend_1.VerticalColorLegend({manager:this}).width}},{key:"sidebarWidth",get:function get(){var sidebarMinWidth=this.sidebarMinWidth,sidebarMaxWidth=this.sidebarMaxWidth,legendWidth=this.legendWidth;return Math.max(Math.min(legendWidth,sidebarMaxWidth),sidebarMinWidth)}},{key:"innerBounds",get:function get(){var sidebarWidth=this.sidebarWidth;return this.showLegend?this.bounds.padRight(sidebarWidth+20):this.bounds}},{key:"showLegend",get:function get(){var colorsInUse=this.colorsInUse;return this.colorScale.legendBins.some((function(bin){return colorsInUse.includes(bin.color)}))}},{key:"render",value:function render(){if(this.failMessage)return React.createElement(NoDataModal_1.NoDataModal,{manager:this.manager,bounds:this.props.bounds,message:this.failMessage});var manager=this.props.manager,series=this.series,focusKeys=this.focusKeys,hoverKeys=this.hoverKeys,innerBounds=this.innerBounds,legend=this.showLegend?React.createElement(VerticalColorLegend_1.VerticalColorLegend,{manager:this}):React.createElement("div",null);return React.createElement("g",{className:"slopeChart"},React.createElement(LabelledSlopes,{manager:manager,bounds:innerBounds,yColumn:this.yColumn,seriesArr:series,focusKeys:focusKeys,hoverKeys:hoverKeys,onMouseOver:this.onSlopeMouseOver,onMouseLeave:this.onSlopeMouseLeave,onClick:this.onSlopeClick}),legend)}},{key:"legendY",get:function get(){return this.bounds.top}},{key:"legendX",get:function get(){return this.bounds.right-this.sidebarWidth}},{key:"failMessage",get:function get(){return this.yColumn.isMissing?"Missing Y column":Util_1.isEmpty(this.series)?"No matching data":""}},{key:"colorScaleConfig",get:function get(){return this.manager.colorScale}},{key:"colorScaleColumn",get:function get(){return this.colorColumn}},{key:"yColumn",get:function get(){return this.transformedTable.get(this.yColumnSlug)}},{key:"yColumnSlug",get:function get(){return ChartUtils_1.autoDetectYColumnSlugs(this.manager)[0]}},{key:"colorColumn",get:function get(){return this.inputTable.get(this.manager.colorColumnSlug)}},{key:"transformedTable",get:function get(){var _a;return null!==(_a=this.manager.transformedTable)&&void 0!==_a?_a:this.transformTable(this.inputTable)}},{key:"inputTable",get:function get(){return this.manager.table}},{key:"colorBySeriesName",get:function get(){var colorScale=this.colorScale,colorColumn=this.colorColumn;if(colorColumn.isMissing)return new Map;var colorByEntity=new Map;return colorColumn.valueByEntityNameAndTime.forEach((function(timeToColorMap,seriesName){var values=Array.from(timeToColorMap.values()),key=Util_1.last(values);colorByEntity.set(seriesName,colorScale.getColor(key))})),colorByEntity}},{key:"sizeColumn",get:function get(){return this.transformedTable.get(this.manager.sizeColumnSlug)}},{key:"sizeByEntity",get:function get(){var sizeCol=this.sizeColumn,sizeByEntity=new Map;return sizeCol&&sizeCol.valueByEntityNameAndTime.forEach((function(timeToSizeMap,entity){var values=Array.from(timeToSizeMap.values());sizeByEntity.set(entity,values[0])})),sizeByEntity}},{key:"componentDidMount",value:function componentDidMount(){Util_1.exposeInstanceOnWindow(this)}},{key:"series",get:function get(){var column=this.yColumn;if(!column)return[];var colorBySeriesName=this.colorBySeriesName,sizeByEntity=this.sizeByEntity,minTime=column.minTime,maxTime=column.maxTime,table=this.inputTable;return column.uniqEntityNames.map((function(seriesName){var _a,_b,values=[];return(column.valueByEntityNameAndTime.get(seriesName)||[]).forEach((function(value,time){time!==minTime&&time!==maxTime||values.push({x:time,y:value})})),{seriesName:seriesName,color:null!==(_b=null!==(_a=table.getColorForEntityName(seriesName))&&void 0!==_a?_a:colorBySeriesName.get(seriesName))&&void 0!==_b?_b:SlopeChartConstants_1.DEFAULT_SLOPE_CHART_COLOR,size:sizeByEntity.get(seriesName)||1,values:values}})).filter((function(series){return series.values.length>=2}))}}]),SlopeChart}(React.Component);__decorate([mobx_1.observable],SlopeChart.prototype,"hoverKey",void 0),__decorate([mobx_1.observable],SlopeChart.prototype,"hoverColor",void 0),__decorate([mobx_1.computed],SlopeChart.prototype,"manager",null),__decorate([mobx_1.computed.struct],SlopeChart.prototype,"bounds",null),__decorate([mobx_1.computed],SlopeChart.prototype,"fontSize",null),__decorate([mobx_1.computed],SlopeChart.prototype,"legendItems",null),__decorate([mobx_1.computed],SlopeChart.prototype,"maxLegendWidth",null),__decorate([mobx_1.action.bound],SlopeChart.prototype,"onSlopeMouseOver",null),__decorate([mobx_1.action.bound],SlopeChart.prototype,"onSlopeMouseLeave",null),__decorate([mobx_1.action.bound],SlopeChart.prototype,"onSlopeClick",null),__decorate([mobx_1.action.bound],SlopeChart.prototype,"onLegendMouseOver",null),__decorate([mobx_1.action.bound],SlopeChart.prototype,"onLegendMouseLeave",null),__decorate([mobx_1.computed],SlopeChart.prototype,"selectionArray",null),__decorate([mobx_1.computed],SlopeChart.prototype,"selectedEntityNames",null),__decorate([mobx_1.action.bound],SlopeChart.prototype,"onLegendClick",null),__decorate([mobx_1.computed],SlopeChart.prototype,"focusColors",null),__decorate([mobx_1.computed],SlopeChart.prototype,"focusKeys",null),__decorate([mobx_1.computed.struct],SlopeChart.prototype,"hoverKeys",null),__decorate([mobx_1.computed],SlopeChart.prototype,"activeColors",null),__decorate([mobx_1.computed],SlopeChart.prototype,"colorsInUse",null),__decorate([mobx_1.computed],SlopeChart.prototype,"sidebarMaxWidth",null),__decorate([mobx_1.computed],SlopeChart.prototype,"legendWidth",null),__decorate([mobx_1.computed.struct],SlopeChart.prototype,"sidebarWidth",null),__decorate([mobx_1.computed],SlopeChart.prototype,"innerBounds",null),__decorate([mobx_1.computed],SlopeChart.prototype,"showLegend",null),__decorate([mobx_1.computed],SlopeChart.prototype,"legendY",null),__decorate([mobx_1.computed],SlopeChart.prototype,"legendX",null),__decorate([mobx_1.computed],SlopeChart.prototype,"failMessage",null),__decorate([mobx_1.computed],SlopeChart.prototype,"colorScaleConfig",null),__decorate([mobx_1.computed],SlopeChart.prototype,"colorScaleColumn",null),__decorate([mobx_1.computed],SlopeChart.prototype,"yColumn",null),__decorate([mobx_1.computed],SlopeChart.prototype,"yColumnSlug",null),__decorate([mobx_1.computed],SlopeChart.prototype,"colorColumn",null),__decorate([mobx_1.computed],SlopeChart.prototype,"transformedTable",null),__decorate([mobx_1.computed],SlopeChart.prototype,"inputTable",null),__decorate([mobx_1.computed],SlopeChart.prototype,"colorBySeriesName",null),__decorate([mobx_1.computed],SlopeChart.prototype,"sizeColumn",null),__decorate([mobx_1.computed],SlopeChart.prototype,"sizeByEntity",null),__decorate([mobx_1.computed],SlopeChart.prototype,"series",null),SlopeChart=__decorate([mobx_react_1.observer],SlopeChart),exports.SlopeChart=SlopeChart;var SlopeChartAxis=SlopeChartAxis_1=function(_React$Component2){_inherits(SlopeChartAxis,_React$Component2);var _super2=_createSuper(SlopeChartAxis);function SlopeChartAxis(){return _classCallCheck(this,SlopeChartAxis),_super2.apply(this,arguments)}return _createClass(SlopeChartAxis,[{key:"ticks",get:function get(){return SlopeChartAxis_1.getTicks(this.props.scale,this.props.scaleType)}},{key:"render",value:function render(){var _this$props=this.props,bounds=_this$props.bounds,scale=_this$props.scale,orient=_this$props.orient,column=_this$props.column,ticks=this.ticks;return React.createElement("g",{className:"axis",fontSize:"0.8em"},ticks.map((function(tick,i){return React.createElement("text",{key:i,x:"left"===orient?bounds.left:bounds.right,y:scale(tick),fill:"#666",dominantBaseline:"middle",textAnchor:"left"===orient?"start":"end"},column.formatValueShort(tick))})))}}],[{key:"calculateBounds",value:function calculateBounds(containerBounds,props){var scale=props.scale,column=props.column,longestTick=Util_1.maxBy(scale.ticks(6).map((function(tick){return column.formatValueShort(tick)})),(function(tick){return tick.length})),axisWidth=Bounds_1.Bounds.forText(longestTick).width;return new Bounds_1.Bounds(containerBounds.x,containerBounds.y,axisWidth,containerBounds.height)}},{key:"getTicks",value:function getTicks(scale,scaleType){if(scaleType===GrapherConstants_1.ScaleType.log){var minPower10=Math.ceil(Math.log(scale.domain()[0])/Math.log(10));isFinite(minPower10)||(minPower10=0);var maxPower10=Math.floor(Math.log(scale.domain()[1])/Math.log(10));maxPower10<=minPower10&&(maxPower10+=1);for(var tickValues=[],i=minPower10;i<=maxPower10;i++)tickValues.push(Math.pow(10,i));return tickValues}return scale.ticks(6)}}]),SlopeChartAxis}(React.Component);__decorate([mobx_1.computed],SlopeChartAxis.prototype,"ticks",null),SlopeChartAxis=SlopeChartAxis_1=__decorate([mobx_react_1.observer],SlopeChartAxis);var Slope=function(_React$Component3){_inherits(Slope,_React$Component3);var _super3=_createSuper(Slope);function Slope(){var _this4;return _classCallCheck(this,Slope),(_this4=_super3.apply(this,arguments)).line=null,_this4}return _createClass(Slope,[{key:"isInBackground",get:function get(){var _this$props2=this.props,isLayerMode=_this$props2.isLayerMode,isHovered=_this$props2.isHovered,isFocused=_this$props2.isFocused;return!!isLayerMode&&!(isHovered||isFocused)}},{key:"render",value:function render(){var _this5=this,_this$props3=this.props,x1=_this$props3.x1,y1=_this$props3.y1,x2=_this$props3.x2,y2=_this$props3.y2,color=_this$props3.color,size=_this$props3.size,hasLeftLabel=_this$props3.hasLeftLabel,hasRightLabel=_this$props3.hasRightLabel,leftValueStr=_this$props3.leftValueStr,rightValueStr=_this$props3.rightValueStr,leftLabel=_this$props3.leftLabel,rightLabel=_this$props3.rightLabel,labelFontSize=_this$props3.labelFontSize,leftLabelBounds=_this$props3.leftLabelBounds,rightLabelBounds=_this$props3.rightLabelBounds,isFocused=_this$props3.isFocused,isHovered=_this$props3.isHovered,isInBackground=this.isInBackground,lineColor=isInBackground?"#e2e2e2":color,labelColor=isInBackground?"#aaa":"#333",opacity=isHovered?1:isFocused?.7:.5,lineStrokeWidth=isHovered?2*size:isFocused?1.5*size:size,leftValueLabelBounds=Bounds_1.Bounds.forText(leftValueStr,{fontSize:labelFontSize}),rightValueLabelBounds=Bounds_1.Bounds.forText(rightValueStr,{fontSize:labelFontSize});return React.createElement("g",{className:"slope"},hasLeftLabel&&leftLabel.render(leftLabelBounds.x+leftLabelBounds.width,leftLabelBounds.y,{textAnchor:"end",fill:labelColor,fontWeight:isFocused||isHovered?"bold":void 0}),hasLeftLabel&&React.createElement(Text_1.Text,{x:x1-8,y:y1-leftValueLabelBounds.height/2,textAnchor:"end",fontSize:labelFontSize,fill:labelColor,fontWeight:isFocused||isHovered?"bold":void 0},leftValueStr),React.createElement("circle",{cx:x1,cy:y1,r:isFocused||isHovered?4:2,fill:lineColor,opacity:opacity}),React.createElement("line",{ref:function ref(el){return _this5.line=el},x1:x1,y1:y1,x2:x2,y2:y2,stroke:lineColor,strokeWidth:lineStrokeWidth,opacity:opacity}),React.createElement("circle",{cx:x2,cy:y2,r:isFocused||isHovered?4:2,fill:lineColor,opacity:opacity}),hasRightLabel&&React.createElement(Text_1.Text,{x:x2+8,y:y2-rightValueLabelBounds.height/2,fontSize:labelFontSize,fill:labelColor,fontWeight:isFocused||isHovered?"bold":void 0},rightValueStr),hasRightLabel&&rightLabel.render(rightLabelBounds.x,rightLabelBounds.y,{fill:labelColor,fontWeight:isFocused||isHovered?"bold":void 0}))}}]),Slope}(React.Component);__decorate([mobx_1.computed],Slope.prototype,"isInBackground",null),Slope=__decorate([mobx_react_1.observer],Slope);var LabelledSlopes=function(_React$Component4){_inherits(LabelledSlopes,_React$Component4);var _super4=_createSuper(LabelledSlopes);function LabelledSlopes(){var _this6;return _classCallCheck(this,LabelledSlopes),(_this6=_super4.apply(this,arguments)).base=React.createRef(),_this6}return _createClass(LabelledSlopes,[{key:"data",get:function get(){return this.props.seriesArr}},{key:"yColumn",get:function get(){return this.props.yColumn}},{key:"manager",get:function get(){return this.props.manager}},{key:"bounds",get:function get(){return this.props.bounds}},{key:"fontSize",get:function get(){var _a;return null!==(_a=this.manager.baseFontSize)&&void 0!==_a?_a:GrapherConstants_1.BASE_FONT_SIZE}},{key:"focusedSeriesNames",get:function get(){return Util_1.intersection(this.props.focusKeys||[],this.data.map((function(g){return g.seriesName})))}},{key:"hoveredSeriesNames",get:function get(){return Util_1.intersection(this.props.hoverKeys||[],this.data.map((function(g){return g.seriesName})))}},{key:"isLayerMode",get:function get(){return this.focusedSeriesNames.length>0||this.hoveredSeriesNames.length>0}},{key:"isPortrait",get:function get(){return this.bounds.width<400}},{key:"allValues",get:function get(){return Util_1.flatten(this.props.seriesArr.map((function(g){return g.values})))}},{key:"xDomainDefault",get:function get(){return Util_1.domainExtent(this.allValues.map((function(v){return v.x})),GrapherConstants_1.ScaleType.linear)}},{key:"yAxisConfig",get:function get(){return new AxisConfig_1.AxisConfig(this.manager.yAxisConfig,this)}},{key:"yScaleType",get:function get(){return this.yAxisConfig.scaleType||GrapherConstants_1.ScaleType.linear}},{key:"yDomainDefault",get:function get(){return Util_1.domainExtent(this.allValues.map((function(v){return v.y})),this.yScaleType||GrapherConstants_1.ScaleType.linear)}},{key:"xDomain",get:function get(){return this.xDomainDefault}},{key:"yDomain",get:function get(){var domain=this.yAxisConfig.domain||[1/0,-1/0],domainDefault=this.yDomainDefault;return[Math.min(domain[0],domainDefault[0]),Math.max(domain[1],domainDefault[1])]}},{key:"sizeScale",get:function get(){return d3_scale_1.scaleLinear().domain(d3_array_1.extent(this.props.seriesArr.map((function(series){return series.size})))).range([1,4])}},{key:"yScaleConstructor",get:function get(){return this.yScaleType===GrapherConstants_1.ScaleType.log?d3_scale_1.scaleLog:d3_scale_1.scaleLinear}},{key:"yScale",get:function get(){return this.yScaleConstructor().domain(this.yDomain).range(this.props.bounds.padBottom(50).yRange())}},{key:"xScale",get:function get(){var bounds=this.bounds,isPortrait=this.isPortrait,xDomain=this.xDomain,yScale=this.yScale,yColumn=this.yColumn,padding=isPortrait?0:SlopeChartAxis.calculateBounds(bounds,{orient:"left",scale:yScale,column:yColumn}).width;return d3_scale_1.scaleLinear().domain(xDomain).range(bounds.padWidth(padding).xRange())}},{key:"maxLabelWidth",get:function get(){return this.bounds.width/5}},{key:"initialSlopeData",get:function get(){var _this7=this,data=this.data,isPortrait=this.isPortrait,xScale=this.xScale,yScale=this.yScale,sizeScale=this.sizeScale,yColumn=this.yColumn,maxWidth=this.maxLabelWidth,slopeData=[],yDomain=yScale.domain();return data.forEach((function(series){if(series.values.every((function(d){return d.y>=yDomain[0]&&d.y<=yDomain[1]}))){var text=series.seriesName,_series$values=_slicedToArray(series.values,2),v1=_series$values[0],v2=_series$values[1],_ref=[xScale(v1.x),xScale(v2.x)],x1=_ref[0],x2=_ref[1],_ref2=[yScale(v1.y),yScale(v2.y)],y1=_ref2[0],y2=_ref2[1],fontSize=(isPortrait?.6:.65)*_this7.fontSize,leftValueStr=yColumn.formatValueShort(v1.y),rightValueStr=yColumn.formatValueShort(v2.y),leftValueWidth=Bounds_1.Bounds.forText(leftValueStr,{fontSize:fontSize}).width,rightValueWidth=Bounds_1.Bounds.forText(rightValueStr,{fontSize:fontSize}).width,leftLabel=new TextWrap_1.TextWrap({maxWidth:maxWidth,fontSize:fontSize,text:text}),rightLabel=new TextWrap_1.TextWrap({maxWidth:maxWidth,fontSize:fontSize,text:text});slopeData.push({x1:x1,y1:y1,x2:x2,y2:y2,color:series.color,size:sizeScale(series.size)||1,leftValueStr:leftValueStr,rightValueStr:rightValueStr,leftValueWidth:leftValueWidth,rightValueWidth:rightValueWidth,leftLabel:leftLabel,rightLabel:rightLabel,labelFontSize:fontSize,seriesName:series.seriesName,isFocused:!1,isHovered:!1,hasLeftLabel:!0,hasRightLabel:!0})}})),slopeData}},{key:"maxValueWidth",get:function get(){return Util_1.max(this.initialSlopeData.map((function(s){return s.leftValueWidth})))}},{key:"labelAccountedSlopeData",get:function get(){var maxLabelWidth=this.maxLabelWidth,maxValueWidth=this.maxValueWidth;return this.initialSlopeData.map((function(slope){var x1=slope.x1+maxLabelWidth+maxValueWidth+8,x2=slope.x2-maxLabelWidth-maxValueWidth-8,leftLabelBounds=new Bounds_1.Bounds(x1-slope.leftValueWidth-12-slope.leftLabel.width,slope.y1-slope.leftLabel.height/2,slope.leftLabel.width,slope.leftLabel.height),rightLabelBounds=new Bounds_1.Bounds(x2+slope.rightValueWidth+12,slope.y2-slope.rightLabel.height/2,slope.rightLabel.width,slope.rightLabel.height);return Object.assign(Object.assign({},slope),{x1:x1,x2:x2,leftLabelBounds:leftLabelBounds,rightLabelBounds:rightLabelBounds})}))}},{key:"backgroundGroups",get:function get(){return this.slopeData.filter((function(group){return!(group.isHovered||group.isFocused)}))}},{key:"foregroundGroups",get:function get(){return this.slopeData.filter((function(group){return!(!group.isHovered&&!group.isFocused)}))}},{key:"slopeData",get:function get(){var focusedSeriesNames=this.focusedSeriesNames,hoveredSeriesNames=this.hoveredSeriesNames,slopeData=this.labelAccountedSlopeData;function chooseLabel(s1,s2){return s1.isHovered&&!s2.isHovered?s1:!s1.isHovered&&s2.isHovered?s2:s1.isFocused&&!s2.isFocused?s1:!s1.isFocused&&s2.isFocused?s2:s1.hasLeftLabel&&!s2.hasLeftLabel?s1:!s1.hasLeftLabel&&s2.hasLeftLabel?s2:s1.size>s2.size?s1:s2.size>s1.size?s2:s1}return(slopeData=slopeData.map((function(slope){return Object.assign(Object.assign({},slope),{isFocused:focusedSeriesNames.includes(slope.seriesName),isHovered:hoveredSeriesNames.includes(slope.seriesName)})}))).forEach((function(s1){slopeData.forEach((function(s2){s1!==s2&&s1.hasLeftLabel&&s2.hasLeftLabel&&s1.leftLabelBounds.intersects(s2.leftLabelBounds)&&(chooseLabel(s1,s2)===s1?s2.hasLeftLabel=!1:s1.hasLeftLabel=!1)}))})),slopeData.forEach((function(s1){slopeData.forEach((function(s2){s1!==s2&&s1.hasRightLabel&&s2.hasRightLabel&&s1.rightLabelBounds.intersects(s2.rightLabelBounds)&&(chooseLabel(s1,s2)===s1?s2.hasRightLabel=!1:s1.hasRightLabel=!1)}))})),slopeData=Util_1.sortBy(slopeData,(function(slope){return slope.size})),slopeData=Util_1.sortBy(slopeData,(function(slope){return slope.isFocused||slope.isHovered?1:0}))}},{key:"onMouseLeave",value:function onMouseLeave(){void 0!==this.mouseFrame&&cancelAnimationFrame(this.mouseFrame),this.props.onMouseLeave&&this.props.onMouseLeave()}},{key:"onMouseMove",value:function onMouseMove(ev){var _this8=this;if(this.base.current){var mouse=Util_1.getRelativeMouse(this.base.current,ev.nativeEvent);this.mouseFrame=requestAnimationFrame((function(){if(_this8.props.bounds.contains(mouse)){var _step,distToSlope=new Map,_iterator=function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e3){didErr=!0,err=_e3},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}(_this8.slopeData);try{for(_iterator.s();!(_step=_iterator.n()).done;){var s=_step.value,dist=Math.abs((s.y2-s.y1)*mouse.x-(s.x2-s.x1)*mouse.y+s.x2*s.y1-s.y2*s.x1)/Math.sqrt(Math.pow(s.y2-s.y1,2)+Math.pow(s.x2-s.x1,2));distToSlope.set(s,dist)}}catch(err){_iterator.e(err)}finally{_iterator.f()}var closestSlope=Util_1.minBy(_this8.slopeData,(function(s){return distToSlope.get(s)}));closestSlope&&distToSlope.get(closestSlope)<20&&_this8.props.onMouseOver?_this8.props.onMouseOver(closestSlope):_this8.props.onMouseLeave()}}))}}},{key:"onClick",value:function onClick(){this.props.onClick&&this.props.onClick()}},{key:"componentDidMount",value:function componentDidMount(){this.playIntroAnimation()}},{key:"playIntroAnimation",value:function playIntroAnimation(){d3_selection_1.select(this.base.current).select(".slopes").attr("stroke-dasharray","100%").attr("stroke-dashoffset","100%").transition().attr("stroke-dashoffset","0%")}},{key:"renderGroups",value:function renderGroups(groups){var isLayerMode=this.isLayerMode;return groups.map((function(slope){return React.createElement(Slope,Object.assign({key:slope.seriesName},slope,{isLayerMode:isLayerMode}))}))}},{key:"render",value:function render(){var fontSize=this.fontSize,yScaleType=this.yScaleType,bounds=this.bounds,slopeData=this.slopeData,isPortrait=this.isPortrait,xDomain=this.xDomain,yScale=this.yScale,onMouseMove=this.onMouseMove,yColumn=this.yColumn;if(Util_1.isEmpty(slopeData))return React.createElement(NoDataModal_1.NoDataModal,{manager:this.props.manager,bounds:bounds});var _slopeData$=slopeData[0],x1=_slopeData$.x1,x2=_slopeData$.x2,_yScale$range2=_slicedToArray(yScale.range(),2),y1=_yScale$range2[0],y2=_yScale$range2[1];return React.createElement("g",{className:"LabelledSlopes",ref:this.base,onMouseMove:onMouseMove,onTouchMove:onMouseMove,onTouchStart:onMouseMove,onMouseLeave:this.onMouseLeave,onClick:this.onClick},React.createElement("rect",{x:bounds.x,y:bounds.y,width:bounds.width,height:bounds.height,fill:"rgba(255,255,255,0)",opacity:0}),React.createElement("g",{className:"gridlines"},SlopeChartAxis.getTicks(yScale,yScaleType).map((function(tick,i){return React.createElement("line",{key:i,x1:x1,y1:yScale(tick),x2:x2,y2:yScale(tick),stroke:"#eee",strokeDasharray:"3,2"})}))),!isPortrait&&React.createElement(SlopeChartAxis,{orient:"left",column:yColumn,scale:yScale,scaleType:yScaleType,bounds:bounds}),!isPortrait&&React.createElement(SlopeChartAxis,{orient:"right",column:yColumn,scale:yScale,scaleType:yScaleType,bounds:bounds}),React.createElement("line",{x1:x1,y1:y1,x2:x1,y2:y2,stroke:"#333"}),React.createElement("line",{x1:x2,y1:y1,x2:x2,y2:y2,stroke:"#333"}),React.createElement(Text_1.Text,{x:x1,y:y1+10,textAnchor:"middle",fill:"#666",fontSize:fontSize},xDomain[0].toString()),React.createElement(Text_1.Text,{x:x2,y:y1+10,textAnchor:"middle",fill:"#666",fontSize:fontSize},xDomain[1].toString()),React.createElement("g",{className:"slopes"},this.renderGroups(this.backgroundGroups),this.renderGroups(this.foregroundGroups)))}}]),LabelledSlopes}(React.Component);__decorate([mobx_1.computed],LabelledSlopes.prototype,"data",null),__decorate([mobx_1.computed],LabelledSlopes.prototype,"yColumn",null),__decorate([mobx_1.computed],LabelledSlopes.prototype,"manager",null),__decorate([mobx_1.computed],LabelledSlopes.prototype,"bounds",null),__decorate([mobx_1.computed],LabelledSlopes.prototype,"fontSize",null),__decorate([mobx_1.computed],LabelledSlopes.prototype,"focusedSeriesNames",null),__decorate([mobx_1.computed],LabelledSlopes.prototype,"hoveredSeriesNames",null),__decorate([mobx_1.computed],LabelledSlopes.prototype,"isLayerMode",null),__decorate([mobx_1.computed],LabelledSlopes.prototype,"isPortrait",null),__decorate([mobx_1.computed],LabelledSlopes.prototype,"allValues",null),__decorate([mobx_1.computed],LabelledSlopes.prototype,"xDomainDefault",null),__decorate([mobx_1.computed],LabelledSlopes.prototype,"yAxisConfig",null),__decorate([mobx_1.computed],LabelledSlopes.prototype,"yScaleType",null),__decorate([mobx_1.computed],LabelledSlopes.prototype,"yDomainDefault",null),__decorate([mobx_1.computed],LabelledSlopes.prototype,"xDomain",null),__decorate([mobx_1.computed],LabelledSlopes.prototype,"yDomain",null),__decorate([mobx_1.computed],LabelledSlopes.prototype,"sizeScale",null),__decorate([mobx_1.computed],LabelledSlopes.prototype,"yScaleConstructor",null),__decorate([mobx_1.computed],LabelledSlopes.prototype,"yScale",null),__decorate([mobx_1.computed],LabelledSlopes.prototype,"xScale",null),__decorate([mobx_1.computed],LabelledSlopes.prototype,"maxLabelWidth",null),__decorate([mobx_1.computed],LabelledSlopes.prototype,"initialSlopeData",null),__decorate([mobx_1.computed],LabelledSlopes.prototype,"maxValueWidth",null),__decorate([mobx_1.computed],LabelledSlopes.prototype,"labelAccountedSlopeData",null),__decorate([mobx_1.computed],LabelledSlopes.prototype,"backgroundGroups",null),__decorate([mobx_1.computed],LabelledSlopes.prototype,"foregroundGroups",null),__decorate([mobx_1.computed],LabelledSlopes.prototype,"slopeData",null),__decorate([mobx_1.action.bound],LabelledSlopes.prototype,"onMouseLeave",null),__decorate([mobx_1.action.bound],LabelledSlopes.prototype,"onMouseMove",null),__decorate([mobx_1.action.bound],LabelledSlopes.prototype,"onClick",null),LabelledSlopes=__decorate([mobx_react_1.observer],LabelledSlopes)},1024:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}__webpack_require__(31),__webpack_require__(18),__webpack_require__(21),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Text=void 0;var React=__importStar(__webpack_require__(0)),Bounds_1=__webpack_require__(73),Util_1=__webpack_require__(40),Text=function(_React$Component){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(Text,_React$Component);var _super=_createSuper(Text);function Text(){return _classCallCheck(this,Text),_super.apply(this,arguments)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Text,[{key:"render",value:function render(){var bounds=Bounds_1.Bounds.forText(this.props.children,{fontSize:this.props.fontSize,fontFamily:this.props.fontFamily}),y=this.props.y+bounds.height-.2*bounds.height;return React.createElement("text",Object.assign({},Util_1.omit(this.props,["children"]),{y:y,dangerouslySetInnerHTML:{__html:this.props.children}}))}}]),Text}(React.Component);exports.Text=Text,Text.__docgenInfo={description:"",methods:[],displayName:"Text"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["itsJustJavascript/grapher/text/Text.js"]={name:"Text",docgenInfo:Text.__docgenInfo,path:"itsJustJavascript/grapher/text/Text.js"})},1025:function(module,exports,__webpack_require__){"use strict";function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=arr&&("undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"]);if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(28),__webpack_require__(33),__webpack_require__(48),__webpack_require__(55),__webpack_require__(79),__webpack_require__(57),__webpack_require__(29),__webpack_require__(7),__webpack_require__(5),__webpack_require__(6),__webpack_require__(8),__webpack_require__(22),__webpack_require__(31),__webpack_require__(9),__webpack_require__(10),__webpack_require__(11),__webpack_require__(18),__webpack_require__(21),__webpack_require__(17);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.LineChart=void 0;var React=__importStar(__webpack_require__(0)),Util_1=__webpack_require__(40),mobx_1=__webpack_require__(41),mobx_react_1=__webpack_require__(58),d3_selection_1=__webpack_require__(135),d3_ease_1=__webpack_require__(396),Bounds_1=__webpack_require__(73),AxisViews_1=__webpack_require__(324),Axis_1=__webpack_require__(389),PointVector_1=__webpack_require__(239),LineLegend_1=__webpack_require__(612),ComparisonLine_1=__webpack_require__(1019),Tooltip_1=__webpack_require__(323),NoDataModal_1=__webpack_require__(203),d3_array_1=__webpack_require__(89),GrapherConstants_1=__webpack_require__(64),ColorSchemes_1=__webpack_require__(321),AxisConfig_1=__webpack_require__(216),LineChartUtils_1=__webpack_require__(1865),ChartUtils_1=__webpack_require__(173),Lines=function(_React$Component){_inherits(Lines,_React$Component);var _super=_createSuper(Lines);function Lines(){var _this;return _classCallCheck(this,Lines),(_this=_super.apply(this,arguments)).base=React.createRef(),_this}return _createClass(Lines,[{key:"allValues",get:function get(){return Util_1.flatten(this.props.placedSeries.map((function(series){return series.points})))}},{key:"onCursorMove",value:function onCursorMove(ev){var dualAxis=this.props.dualAxis,horizontalAxis=dualAxis.horizontalAxis;if(this.base.current){var hoverX,mouse=Util_1.getRelativeMouse(this.base.current,ev);if(dualAxis.innerBounds.contains(mouse)){var closestValue=Util_1.minBy(this.allValues,(function(point){return Math.abs(horizontalAxis.place(point.x)-mouse.x)}));hoverX=null==closestValue?void 0:closestValue.x}this.props.onHover(hoverX)}}},{key:"onCursorLeave",value:function onCursorLeave(){this.props.onHover(void 0)}},{key:"bounds",get:function get(){var _this$props$dualAxis=this.props.dualAxis,horizontalAxis=_this$props$dualAxis.horizontalAxis,verticalAxis=_this$props$dualAxis.verticalAxis;return Bounds_1.Bounds.fromCorners(new PointVector_1.PointVector(horizontalAxis.range[0],verticalAxis.range[0]),new PointVector_1.PointVector(horizontalAxis.range[1],verticalAxis.range[1]))}},{key:"focusedLines",get:function get(){var focusedSeriesNames=this.props.focusedSeriesNames;return focusedSeriesNames.length?this.props.placedSeries.filter((function(series){return focusedSeriesNames.includes(series.seriesName)})):this.props.placedSeries}},{key:"backgroundLines",get:function get(){var focusedSeriesNames=this.props.focusedSeriesNames;return this.props.placedSeries.filter((function(series){return!focusedSeriesNames.includes(series.seriesName)}))}},{key:"hasMarkers",get:function get(){return!this.props.hidePoints&&Util_1.sum(this.focusedLines.map((function(series){return series.placedPoints.length})))<500}},{key:"strokeWidth",get:function get(){var _a;return null!==(_a=this.props.lineStrokeWidth)&&void 0!==_a?_a:1.5}},{key:"renderFocusGroups",value:function renderFocusGroups(){var _this2=this;return this.focusedLines.map((function(series,index){var showMarkers=(_this2.hasMarkers||1===series.placedPoints.length)&&!series.isProjection;return React.createElement("g",{key:index},React.createElement("path",{stroke:series.color,strokeLinecap:"round",strokeLinejoin:"round",d:Util_1.pointsToPath(series.placedPoints.map((function(value){return[value.x,value.y]}))),fill:"none",strokeWidth:_this2.strokeWidth,strokeDasharray:series.isProjection?"1,4":void 0}),showMarkers&&React.createElement("g",{fill:series.color},series.placedPoints.map((function(value,index){return React.createElement("circle",{key:index,cx:value.x,cy:value.y,r:2})}))))}))}},{key:"renderBackgroundGroups",value:function renderBackgroundGroups(){return this.backgroundLines.map((function(series,index){return React.createElement("g",{key:index},React.createElement("path",{key:ChartUtils_1.getSeriesKey(series,"line"),strokeLinecap:"round",strokeLinejoin:"round",stroke:"#ddd",d:Util_1.pointsToPath(series.placedPoints.map((function(value){return[value.x,value.y]}))),fill:"none",strokeWidth:1}))}))}},{key:"componentDidMount",value:function componentDidMount(){var container=this.base.current.closest("svg");container.addEventListener("mousemove",this.onCursorMove),container.addEventListener("mouseleave",this.onCursorLeave),container.addEventListener("touchstart",this.onCursorMove),container.addEventListener("touchmove",this.onCursorMove),container.addEventListener("touchend",this.onCursorLeave),container.addEventListener("touchcancel",this.onCursorLeave),this.container=container}},{key:"componentWillUnmount",value:function componentWillUnmount(){var container=this.container;container&&(container.removeEventListener("mousemove",this.onCursorMove),container.removeEventListener("mouseleave",this.onCursorLeave),container.removeEventListener("touchstart",this.onCursorMove),container.removeEventListener("touchmove",this.onCursorMove),container.removeEventListener("touchend",this.onCursorLeave),container.removeEventListener("touchcancel",this.onCursorLeave))}},{key:"render",value:function render(){var bounds=this.bounds;return React.createElement("g",{ref:this.base,className:"Lines"},React.createElement("rect",{x:Math.round(bounds.x),y:Math.round(bounds.y),width:Math.round(bounds.width),height:Math.round(bounds.height),fill:"rgba(255,255,255,0)",opacity:0}),this.renderBackgroundGroups(),this.renderFocusGroups())}}]),Lines}(React.Component);__decorate([mobx_1.computed],Lines.prototype,"allValues",null),__decorate([mobx_1.action.bound],Lines.prototype,"onCursorMove",null),__decorate([mobx_1.action.bound],Lines.prototype,"onCursorLeave",null),__decorate([mobx_1.computed],Lines.prototype,"bounds",null),__decorate([mobx_1.computed],Lines.prototype,"focusedLines",null),__decorate([mobx_1.computed],Lines.prototype,"backgroundLines",null),__decorate([mobx_1.computed],Lines.prototype,"hasMarkers",null),__decorate([mobx_1.computed],Lines.prototype,"strokeWidth",null),Lines=__decorate([mobx_react_1.observer],Lines);var LineChart=function(_React$Component2){_inherits(LineChart,_React$Component2);var _super2=_createSuper(LineChart);function LineChart(){var _this3;return _classCallCheck(this,LineChart),(_this3=_super2.apply(this,arguments)).base=React.createRef(),_this3.mouseHoverX=void 0,_this3.defaultRightPadding=1,_this3}return _createClass(LineChart,[{key:"transformTable",value:function transformTable(table){return table=(table=table.filterByEntityNames(this.selectionArray.selectedEntityNames)).replaceNonNumericCellsWithErrorValues(this.yColumnSlugs),this.isLogScale&&(table=table.replaceNonPositiveCellsForLogScale(this.manager.yColumnSlugs)),table}},{key:"inputTable",get:function get(){return this.manager.table}},{key:"transformedTableFromGrapher",get:function get(){var _a;return null!==(_a=this.manager.transformedTable)&&void 0!==_a?_a:this.transformTable(this.inputTable)}},{key:"transformedTable",get:function get(){var _a,table=this.transformedTableFromGrapher,_this$manager=this.manager,isRelativeMode=_this$manager.isRelativeMode,startHandleTimeBound=_this$manager.startHandleTimeBound;return isRelativeMode&&void 0!==startHandleTimeBound&&(table=table.toTotalGrowthForEachColumnComparedToStartTime(startHandleTimeBound,null!==(_a=this.manager.yColumnSlugs)&&void 0!==_a?_a:[])),table}},{key:"onHover",value:function onHover(hoverX){this.mouseHoverX=hoverX}},{key:"hoverX",get:function get(){var _a,_b;return null!==(_a=this.mouseHoverX)&&void 0!==_a?_a:null===(_b=this.props.manager.annotation)||void 0===_b?void 0:_b.year}},{key:"manager",get:function get(){return this.props.manager}},{key:"bounds",get:function get(){var _a;return null!==(_a=this.props.bounds)&&void 0!==_a?_a:Bounds_1.DEFAULT_BOUNDS}},{key:"maxLegendWidth",get:function get(){return this.bounds.width/3}},{key:"selectionArray",get:function get(){return ChartUtils_1.makeSelectionArray(this.manager)}},{key:"seriesIsBlurred",value:function seriesIsBlurred(series){return this.isFocusMode&&!this.focusedSeriesNames.includes(series.seriesName)}},{key:"tooltip",get:function get(){var _this4=this,hoverX=this.hoverX,dualAxis=this.dualAxis,inputTable=this.inputTable,formatColumn=this.formatColumn;if(void 0!==hoverX){var sortedData=Util_1.sortBy(this.series,(function(series){var value=series.points.find((function(point){return point.x===hoverX}));return void 0!==value?-value.y:1/0})),formatted=inputTable.timeColumnFormatFunction(hoverX);return React.createElement(Tooltip_1.Tooltip,{tooltipManager:this.manager,x:dualAxis.horizontalAxis.place(hoverX),y:dualAxis.verticalAxis.rangeMin+dualAxis.verticalAxis.rangeSize/2,style:{padding:"0.3em"},offsetX:5},React.createElement("table",{style:{fontSize:"0.9em",lineHeight:"1.4em",whiteSpace:"normal"}},React.createElement("tbody",null,React.createElement("tr",null,React.createElement("td",{colSpan:3},React.createElement("strong",null,formatted))),sortedData.map((function(series){var value=series.points.find((function(point){return point.x===hoverX})),annotation=_this4.getAnnotationsForSeries(series.seriesName);if(!value){var _d3_array_1$extent2=_slicedToArray(d3_array_1.extent(series.points,(function(point){return point.x})),2),startX=_d3_array_1$extent2[0],endX=_d3_array_1$extent2[1];if(void 0===startX||void 0===endX||startX>hoverX||endX<hoverX)return}var isBlur=_this4.seriesIsBlurred(series)||void 0===value,textColor=isBlur?"#ddd":"#333",annotationColor=isBlur?"#ddd":"#999",circleColor=isBlur?"#eee":series.color;return React.createElement("tr",{key:ChartUtils_1.getSeriesKey(series),style:{color:textColor}},React.createElement("td",null,React.createElement("div",{style:{width:"10px",height:"10px",borderRadius:"5px",backgroundColor:circleColor,display:"inline-block",marginRight:"2px"}})),React.createElement("td",{style:{paddingRight:"0.8em",fontSize:"0.9em"}},series.seriesName,annotation&&React.createElement("span",{className:"tooltipAnnotation",style:{color:annotationColor,fontSize:"90%"}}," ",annotation)),React.createElement("td",{style:{textAlign:"right",whiteSpace:"nowrap"}},value?formatColumn.formatValueShort(value.y,{noTrailingZeroes:!1}):"No data"))})))))}}},{key:"onLegendClick",value:function onLegendClick(){this.manager.startSelectingWhenLineClicked&&(this.manager.isSelectingData=!0)}},{key:"onLegendMouseOver",value:function onLegendMouseOver(seriesName){this.hoveredSeriesName=seriesName}},{key:"onLegendMouseLeave",value:function onLegendMouseLeave(){this.hoveredSeriesName=void 0}},{key:"focusedSeriesNames",get:function get(){var _a,_b,_c,entityName=null!==(_c=null!==(_b=null===(_a=this.props.manager.annotation)||void 0===_a?void 0:_a.entityName)&&void 0!==_b?_b:this.hoveredSeriesName)&&void 0!==_c?_c:void 0;return entityName?[entityName]:[]}},{key:"isFocusMode",get:function get(){return this.focusedSeriesNames.length>0}},{key:"componentDidMount",value:function componentDidMount(){this.manager.isExportingtoSvgOrPng||this.runFancyIntroAnimation(),Util_1.exposeInstanceOnWindow(this)}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.animSelection&&this.animSelection.interrupt()}},{key:"renderUid",get:function get(){return Util_1.guid()}},{key:"fontSize",get:function get(){var _a;return null!==(_a=this.manager.baseFontSize)&&void 0!==_a?_a:GrapherConstants_1.BASE_FONT_SIZE}},{key:"legendX",get:function get(){var _a;return this.bounds.right-((null===(_a=this.legendDimensions)||void 0===_a?void 0:_a.width)||0)}},{key:"clipPathBounds",get:function get(){var dualAxis=this.dualAxis;return this.bounds.set({x:dualAxis.innerBounds.x}).expand(10)}},{key:"clipPath",get:function get(){return ChartUtils_1.makeClipPath(this.renderUid,this.clipPathBounds)}},{key:"runFancyIntroAnimation",value:function runFancyIntroAnimation(){var _this5=this;this.animSelection=d3_selection_1.select(this.base.current).selectAll("clipPath > rect").attr("width",0),this.animSelection.transition().duration(800).ease(d3_ease_1.easeLinear).attr("width",this.clipPathBounds.width).on("end",(function(){return _this5.forceUpdate()}))}},{key:"legendDimensions",get:function get(){return this.manager.hideLegend?void 0:new LineLegend_1.LineLegend({manager:this})}},{key:"render",value:function render(){var _this6=this;if(this.failMessage)return React.createElement(NoDataModal_1.NoDataModal,{manager:this.manager,bounds:this.props.bounds,message:this.failMessage});var manager=this.manager,tooltip=this.tooltip,dualAxis=this.dualAxis,hoverX=this.hoverX,clipPath=this.clipPath,horizontalAxis=dualAxis.horizontalAxis,verticalAxis=dualAxis.verticalAxis,comparisonLines=manager.comparisonLines||[];return React.createElement("g",{ref:this.base,className:"LineChart"},clipPath.element,React.createElement(AxisViews_1.DualAxisComponent,{dualAxis:dualAxis,showTickMarks:!0}),React.createElement("g",{clipPath:clipPath.id},comparisonLines.map((function(line,index){return React.createElement(ComparisonLine_1.ComparisonLine,{key:index,dualAxis:dualAxis,comparisonLine:line})})),React.createElement(LineLegend_1.LineLegend,{manager:this}),React.createElement(Lines,{dualAxis:dualAxis,placedSeries:this.placedSeries,hidePoints:manager.hidePoints,onHover:this.onHover,focusedSeriesNames:this.focusedSeriesNames,lineStrokeWidth:manager.lineStrokeWidth})),void 0!==hoverX&&React.createElement("g",{className:"hoverIndicator"},this.series.map((function(series){var value=series.points.find((function(point){return point.x===hoverX}));return!value||_this6.seriesIsBlurred(series)?null:React.createElement("circle",{key:ChartUtils_1.getSeriesKey(series),cx:horizontalAxis.place(value.x),cy:verticalAxis.place(value.y),r:4,fill:series.color})})),React.createElement("line",{x1:horizontalAxis.place(hoverX),y1:verticalAxis.range[0],x2:horizontalAxis.place(hoverX),y2:verticalAxis.range[1],stroke:"rgba(180,180,180,.4)"})),tooltip)}},{key:"failMessage",get:function get(){var message=ChartUtils_1.getDefaultFailMessage(this.manager);return message||(this.series.length?"":"No matching data")}},{key:"yColumns",get:function get(){var _this7=this;return this.yColumnSlugs.map((function(slug){return _this7.transformedTable.get(slug)}))}},{key:"yColumnSlugs",get:function get(){return ChartUtils_1.autoDetectYColumnSlugs(this.manager)}},{key:"formatColumn",get:function get(){return this.yColumns[0]}},{key:"annotationsMap",get:function get(){var _a;return null===(_a=this.inputTable.getAnnotationColumnForColumn(this.yColumnSlugs[0]))||void 0===_a?void 0:_a.getUniqueValuesGroupedBy(this.inputTable.entityNameSlug)}},{key:"getAnnotationsForSeries",value:function getAnnotationsForSeries(seriesName){var annotationsMap=this.annotationsMap,annos=null==annotationsMap?void 0:annotationsMap.get(seriesName);return annos?Array.from(annos.values()).filter((function(anno){return anno})).join(" & "):void 0}},{key:"colorScheme",get:function get(){var _a;return null!==(_a=this.manager.baseColorScheme?ColorSchemes_1.ColorSchemes[this.manager.baseColorScheme]:null)&&void 0!==_a?_a:ColorSchemes_1.ColorSchemes["owid-distinct"]}},{key:"seriesStrategy",get:function get(){var hasNormalAndProjectedSeries=this.yColumns.some((function(col){return col.isProjection}))&&this.yColumns.some((function(col){return!col.isProjection}));return ChartUtils_1.autoDetectSeriesStrategy(this.manager,hasNormalAndProjectedSeries)}},{key:"isLogScale",get:function get(){return this.yAxisConfig.scaleType===GrapherConstants_1.ScaleType.log}},{key:"series",get:function get(){var _this8=this,arrOfSeries=Util_1.flatten(this.yColumns.map((function(col){return LineChartUtils_1.columnToLineChartSeriesArray(col,_this8.seriesStrategy,!!_this8.manager.canSelectMultipleEntities)})));return this.colorScheme.assignColors(arrOfSeries,this.manager.invertColorScheme,this.seriesStrategy===GrapherConstants_1.SeriesStrategy.entity?this.inputTable.entityNameColorIndex:this.inputTable.columnDisplayNameToColorMap,this.manager.seriesColorMap),arrOfSeries}},{key:"allPoints",get:function get(){return Util_1.flatten(this.series.map((function(series){return series.points})))}},{key:"placedSeries",get:function get(){var dualAxis=this.dualAxis,horizontalAxis=dualAxis.horizontalAxis,verticalAxis=dualAxis.verticalAxis;return this.series.slice().reverse().map((function(series){return Object.assign(Object.assign({},series),{placedPoints:series.points.map((function(point){return new PointVector_1.PointVector(Util_1.round(horizontalAxis.place(point.x),1),Util_1.round(verticalAxis.place(point.y),1))}))})}))}},{key:"labelSeries",get:function get(){var _this9=this,seriesToShow=this.series;return seriesToShow.some((function(series){return!!series.isProjection}))&&(seriesToShow=seriesToShow.filter((function(series){return series.isProjection}))),seriesToShow.map((function(series){var seriesName=series.seriesName,color=series.color,lastValue=Util_1.last(series.points).y;return{color:color,seriesName:seriesName,label:_this9.manager.hideLegend?"":"".concat(seriesName),annotation:_this9.getAnnotationsForSeries(seriesName),yValue:lastValue}}))}},{key:"xAxisConfig",get:function get(){return new AxisConfig_1.AxisConfig(this.manager.xAxisConfig,this)}},{key:"horizontalAxisPart",get:function get(){var axis=this.xAxisConfig.toHorizontalAxis();return axis.updateDomainPreservingUserSettings(this.transformedTable.timeDomainFor(this.yColumnSlugs)),axis.scaleType=GrapherConstants_1.ScaleType.linear,axis.formatColumn=this.inputTable.timeColumn,axis.hideFractionalTicks=!0,axis.hideGridlines=!0,axis}},{key:"yAxisConfig",get:function get(){return new AxisConfig_1.AxisConfig(this.manager.yAxisConfig,this)}},{key:"verticalAxisPart",get:function get(){var axisConfig=this.yAxisConfig,yDomain=this.transformedTable.domainFor(this.yColumnSlugs),domain=axisConfig.domain,axis=axisConfig.toVerticalAxis();return axis.updateDomainPreservingUserSettings([Math.min(domain[0],yDomain[0]),Math.max(domain[1],yDomain[1])]),axis.hideFractionalTicks=this.yColumns.every((function(yColumn){return yColumn.isAllIntegers})),axis.label="",axis.formatColumn=this.formatColumn,axis}},{key:"dualAxis",get:function get(){return new Axis_1.DualAxis({bounds:this.bounds.padRight(this.legendDimensions?this.legendDimensions.width:this.defaultRightPadding),verticalAxis:this.verticalAxisPart,horizontalAxis:this.horizontalAxisPart})}},{key:"yAxis",get:function get(){return this.dualAxis.verticalAxis}},{key:"xAxis",get:function get(){return this.dualAxis.horizontalAxis}}]),LineChart}(React.Component);__decorate([mobx_1.computed],LineChart.prototype,"inputTable",null),__decorate([mobx_1.computed],LineChart.prototype,"transformedTableFromGrapher",null),__decorate([mobx_1.computed],LineChart.prototype,"transformedTable",null),__decorate([mobx_1.observable],LineChart.prototype,"mouseHoverX",void 0),__decorate([mobx_1.action.bound],LineChart.prototype,"onHover",null),__decorate([mobx_1.computed],LineChart.prototype,"hoverX",null),__decorate([mobx_1.computed],LineChart.prototype,"manager",null),__decorate([mobx_1.computed],LineChart.prototype,"bounds",null),__decorate([mobx_1.computed],LineChart.prototype,"maxLegendWidth",null),__decorate([mobx_1.computed],LineChart.prototype,"selectionArray",null),__decorate([mobx_1.computed],LineChart.prototype,"tooltip",null),__decorate([mobx_1.observable],LineChart.prototype,"hoveredSeriesName",void 0),__decorate([mobx_1.action.bound],LineChart.prototype,"onLegendClick",null),__decorate([mobx_1.action.bound],LineChart.prototype,"onLegendMouseOver",null),__decorate([mobx_1.action.bound],LineChart.prototype,"onLegendMouseLeave",null),__decorate([mobx_1.computed],LineChart.prototype,"focusedSeriesNames",null),__decorate([mobx_1.computed],LineChart.prototype,"isFocusMode",null),__decorate([mobx_1.computed],LineChart.prototype,"renderUid",null),__decorate([mobx_1.computed],LineChart.prototype,"fontSize",null),__decorate([mobx_1.computed],LineChart.prototype,"legendX",null),__decorate([mobx_1.computed],LineChart.prototype,"clipPathBounds",null),__decorate([mobx_1.computed],LineChart.prototype,"clipPath",null),__decorate([mobx_1.computed],LineChart.prototype,"legendDimensions",null),__decorate([mobx_1.computed],LineChart.prototype,"failMessage",null),__decorate([mobx_1.computed],LineChart.prototype,"yColumns",null),__decorate([mobx_1.computed],LineChart.prototype,"yColumnSlugs",null),__decorate([mobx_1.computed],LineChart.prototype,"formatColumn",null),__decorate([mobx_1.computed],LineChart.prototype,"annotationsMap",null),__decorate([mobx_1.computed],LineChart.prototype,"colorScheme",null),__decorate([mobx_1.computed],LineChart.prototype,"seriesStrategy",null),__decorate([mobx_1.computed],LineChart.prototype,"isLogScale",null),__decorate([mobx_1.computed],LineChart.prototype,"series",null),__decorate([mobx_1.computed],LineChart.prototype,"allPoints",null),__decorate([mobx_1.computed],LineChart.prototype,"placedSeries",null),__decorate([mobx_1.computed],LineChart.prototype,"labelSeries",null),__decorate([mobx_1.computed],LineChart.prototype,"xAxisConfig",null),__decorate([mobx_1.computed],LineChart.prototype,"horizontalAxisPart",null),__decorate([mobx_1.computed],LineChart.prototype,"yAxisConfig",null),__decorate([mobx_1.computed],LineChart.prototype,"verticalAxisPart",null),__decorate([mobx_1.computed],LineChart.prototype,"dualAxis",null),__decorate([mobx_1.computed],LineChart.prototype,"yAxis",null),__decorate([mobx_1.computed],LineChart.prototype,"xAxis",null),LineChart=__decorate([mobx_react_1.observer],LineChart),exports.LineChart=LineChart},1026:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(48),__webpack_require__(55),__webpack_require__(28),__webpack_require__(25),__webpack_require__(5),__webpack_require__(14),__webpack_require__(22),__webpack_require__(31),__webpack_require__(9),__webpack_require__(10),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(18),__webpack_require__(21);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.StackedAreaChart=void 0;var React=__importStar(__webpack_require__(0)),Util_1=__webpack_require__(40),mobx_1=__webpack_require__(41),mobx_react_1=__webpack_require__(58),AxisViews_1=__webpack_require__(324),LineLegend_1=__webpack_require__(612),NoDataModal_1=__webpack_require__(203),Tooltip_1=__webpack_require__(323),d3_color_1=__webpack_require__(200),AbstractStackedChart_1=__webpack_require__(1027),StackedUtils_1=__webpack_require__(613),ChartUtils_1=__webpack_require__(173),Areas=function(_React$Component){_inherits(Areas,_React$Component);var _super=_createSuper(Areas);function Areas(){var _this;return _classCallCheck(this,Areas),(_this=_super.apply(this,arguments)).base=React.createRef(),_this}return _createClass(Areas,[{key:"onCursorMove",value:function onCursorMove(ev){var _this$props=this.props,dualAxis=_this$props.dualAxis,seriesArr=_this$props.seriesArr;if(this.base.current){var mouse=Util_1.getRelativeMouse(this.base.current,ev.nativeEvent);if(dualAxis.innerBounds.contains(mouse)){var closestPoint=Util_1.minBy(seriesArr[0].points,(function(d){return Math.abs(dualAxis.horizontalAxis.place(d.position)-mouse.x)}));if(closestPoint){var index=seriesArr[0].points.indexOf(closestPoint);this.hoverIndex=index}else this.hoverIndex=void 0}else this.hoverIndex=void 0;this.props.onHover(this.hoverIndex)}}},{key:"onCursorLeave",value:function onCursorLeave(){this.hoverIndex=void 0,this.props.onHover(this.hoverIndex)}},{key:"seriesIsBlur",value:function seriesIsBlur(series){return this.props.focusedSeriesNames.length>0&&!this.props.focusedSeriesNames.includes(series.seriesName)}},{key:"areas",get:function get(){var _this2=this,_this$props2=this.props,dualAxis=_this$props2.dualAxis,seriesArr=_this$props2.seriesArr,horizontalAxis=dualAxis.horizontalAxis,verticalAxis=dualAxis.verticalAxis,prevPoints=[[horizontalAxis.range[0],verticalAxis.range[0]],[horizontalAxis.range[1],verticalAxis.range[0]]];return seriesArr.map((function(series){var mainPoints=series.points.map((function(point){return[horizontalAxis.place(point.position),verticalAxis.place(point.value+point.valueOffset)]})),points=mainPoints.concat(Util_1.reverse(Util_1.clone(prevPoints)));return prevPoints=mainPoints,React.createElement("path",{className:Util_1.makeSafeForCSS(series.seriesName)+"-area",key:series.seriesName+"-area",strokeLinecap:"round",d:Util_1.pointsToPath(points),fill:_this2.seriesIsBlur(series)?"#ddd":series.color,fillOpacity:.7,clipPath:_this2.props.clipPath})}))}},{key:"borders",get:function get(){var _this3=this,_this$props3=this.props,dualAxis=_this$props3.dualAxis,seriesArr=_this$props3.seriesArr,horizontalAxis=dualAxis.horizontalAxis,verticalAxis=dualAxis.verticalAxis;return seriesArr.map((function(series){var points=series.points.map((function(point){return[horizontalAxis.place(point.position),verticalAxis.place(point.value+point.valueOffset)]}));return React.createElement("path",{className:Util_1.makeSafeForCSS(series.seriesName)+"-border",key:series.seriesName+"-border",strokeLinecap:"round",d:Util_1.pointsToPath(points),stroke:d3_color_1.rgb(_this3.seriesIsBlur(series)?"#ddd":series.color).darker(.5).toString(),strokeOpacity:.7,strokeWidth:.5,fill:"none",clipPath:_this3.props.clipPath})}))}},{key:"render",value:function render(){var _this4=this,_this$props4=this.props,dualAxis=_this$props4.dualAxis,seriesArr=_this$props4.seriesArr,horizontalAxis=dualAxis.horizontalAxis,verticalAxis=dualAxis.verticalAxis,hoverIndex=this.hoverIndex;return React.createElement("g",{ref:this.base,className:"Areas",onMouseMove:this.onCursorMove,onMouseLeave:this.onCursorLeave,onTouchStart:this.onCursorMove,onTouchMove:this.onCursorMove,onTouchEnd:this.onCursorLeave,onTouchCancel:this.onCursorLeave},React.createElement("rect",{x:horizontalAxis.range[0],y:verticalAxis.range[1],width:horizontalAxis.range[1]-horizontalAxis.range[0],height:verticalAxis.range[0]-verticalAxis.range[1],opacity:0,fill:"rgba(255,255,255,0)"}),this.areas,this.borders,void 0!==hoverIndex&&React.createElement("g",{className:"hoverIndicator"},seriesArr.map((function(series){var point=series.points[hoverIndex];return _this4.seriesIsBlur(series)||point.fake?null:React.createElement("circle",{key:series.seriesName,cx:horizontalAxis.place(point.position),cy:verticalAxis.place(point.value+point.valueOffset),r:2,fill:series.color})})),React.createElement("line",{x1:horizontalAxis.place(seriesArr[0].points[hoverIndex].position),y1:verticalAxis.range[0],x2:horizontalAxis.place(seriesArr[0].points[hoverIndex].position),y2:verticalAxis.range[1],stroke:"rgba(180,180,180,.4)"})))}}]),Areas}(React.Component);__decorate([mobx_1.observable],Areas.prototype,"hoverIndex",void 0),__decorate([mobx_1.action.bound],Areas.prototype,"onCursorMove",null),__decorate([mobx_1.action.bound],Areas.prototype,"onCursorLeave",null),__decorate([mobx_1.computed],Areas.prototype,"areas",null),__decorate([mobx_1.computed],Areas.prototype,"borders",null),Areas=__decorate([mobx_react_1.observer],Areas);var StackedAreaChart=function(_AbstractStackedChart){_inherits(StackedAreaChart,_AbstractStackedChart);var _super2=_createSuper(StackedAreaChart);function StackedAreaChart(props){return _classCallCheck(this,StackedAreaChart),_super2.call(this,props)}return _createClass(StackedAreaChart,[{key:"midpoints",get:function get(){var prevY=0;return this.series.map((function(series){var lastValue=Util_1.last(series.points);if(!lastValue)return 0;var y=lastValue.value+lastValue.valueOffset,middleY=prevY+(y-prevY)/2;return prevY=y,middleY}))}},{key:"labelSeries",get:function get(){var midpoints=this.midpoints;return this.series.map((function(series,index){return{color:series.color,seriesName:series.seriesName,label:series.seriesName,yValue:midpoints[index]}})).reverse()}},{key:"maxLegendWidth",get:function get(){return Math.min(150,this.bounds.width/3)}},{key:"legendDimensions",get:function get(){if(!this.manager.hideLegend)return new LineLegend_1.LineLegend({manager:this})}},{key:"onHover",value:function onHover(hoverIndex){this.hoveredPointIndex=hoverIndex}},{key:"onLegendClick",value:function onLegendClick(){this.manager.startSelectingWhenLineClicked&&(this.manager.isSelectingData=!0)}},{key:"paddingForLegend",get:function get(){var legendDimensions=this.legendDimensions;return legendDimensions?legendDimensions.width:20}},{key:"onLegendMouseOver",value:function onLegendMouseOver(seriesName){this.hoverSeriesName=seriesName}},{key:"onLegendMouseLeave",value:function onLegendMouseLeave(){this.hoverSeriesName=void 0}},{key:"focusedSeriesNames",get:function get(){return this.hoverSeriesName?[this.hoverSeriesName]:[]}},{key:"isFocusMode",get:function get(){return this.focusedSeriesNames.length>0}},{key:"seriesIsBlur",value:function seriesIsBlur(series){return this.focusedSeriesNames.length>0&&!this.focusedSeriesNames.includes(series.seriesName)}},{key:"tooltip",get:function get(){var _this5=this;if(void 0!==this.hoveredPointIndex){var hoveredPointIndex=this.hoveredPointIndex,dualAxis=this.dualAxis,series=this.series,bottomSeriesPoint=series[0].points[hoveredPointIndex],somePointsMissingForHoveredTime=series.some((function(series){return series.points[hoveredPointIndex].fake})),legendBlockStyle={width:"10px",height:"10px",display:"inline-block",marginRight:"2px"},lastStackedPoint=Util_1.last(series).points[hoveredPointIndex],totalValue=lastStackedPoint.value+lastStackedPoint.valueOffset,yColumn=this.yColumns[0];return React.createElement(Tooltip_1.Tooltip,{tooltipManager:this.props.manager,x:dualAxis.horizontalAxis.place(bottomSeriesPoint.position),y:dualAxis.verticalAxis.rangeMin+dualAxis.verticalAxis.rangeSize/2,style:{padding:"0.3em"},offsetX:5},React.createElement("table",{style:{fontSize:"0.9em",lineHeight:"1.4em"}},React.createElement("tbody",null,React.createElement("tr",null,React.createElement("td",null,React.createElement("strong",null,this.inputTable.timeColumnFormatFunction(bottomSeriesPoint.position))),React.createElement("td",null)),series.slice().reverse().map((function(series){var point=series.points[hoveredPointIndex],isBlur=_this5.seriesIsBlur(series),textColor=isBlur?"#ddd":"#333",blockColor=isBlur?"#ddd":series.color;return React.createElement("tr",{key:series.seriesName,style:{color:textColor}},React.createElement("td",{style:{paddingRight:"0.8em",fontSize:"0.9em"}},React.createElement("div",{style:Object.assign(Object.assign({},legendBlockStyle),{backgroundColor:blockColor})})," ",series.seriesName),React.createElement("td",{style:{textAlign:"right"}},point.fake?"No data":yColumn.formatValueLong(point.value)))})),!somePointsMissingForHoveredTime&&React.createElement("tr",null,React.createElement("td",{style:{fontSize:"0.9em"}},React.createElement("div",{style:Object.assign(Object.assign({},legendBlockStyle),{backgroundColor:"transparent"})})," ",React.createElement("strong",null,"Total")),React.createElement("td",{style:{textAlign:"right"}},React.createElement("span",null,React.createElement("strong",null,yColumn.formatValueLong(totalValue))))))))}}},{key:"render",value:function render(){if(this.failMessage)return React.createElement(NoDataModal_1.NoDataModal,{manager:this.manager,bounds:this.props.bounds,message:this.failMessage});var bounds=this.bounds,dualAxis=this.dualAxis,renderUid=this.renderUid,series=this.series,showLegend=!this.manager.hideLegend,clipPath=ChartUtils_1.makeClipPath(renderUid,Object.assign(Object.assign({},bounds),{height:2*bounds.height,x:dualAxis.innerBounds.x}));return React.createElement("g",{ref:this.base,className:"StackedArea"},clipPath.element,React.createElement(AxisViews_1.DualAxisComponent,{dualAxis:dualAxis,showTickMarks:!0}),React.createElement("g",{clipPath:clipPath.id},showLegend&&React.createElement(LineLegend_1.LineLegend,{manager:this}),React.createElement(Areas,{dualAxis:dualAxis,seriesArr:series,focusedSeriesNames:this.focusedSeriesNames,onHover:this.onHover})),this.tooltip)}},{key:"showAllZeroSeries",get:function get(){return!1}},{key:"legendX",get:function get(){return this.legendDimensions?this.bounds.right-this.legendDimensions.width:0}},{key:"series",get:function get(){return StackedUtils_1.stackSeries(StackedUtils_1.withMissingValuesAsZeroes(this.unstackedSeries))}}]),StackedAreaChart}(AbstractStackedChart_1.AbstactStackedChart);__decorate([mobx_1.computed],StackedAreaChart.prototype,"midpoints",null),__decorate([mobx_1.computed],StackedAreaChart.prototype,"labelSeries",null),__decorate([mobx_1.computed],StackedAreaChart.prototype,"maxLegendWidth",null),__decorate([mobx_1.computed],StackedAreaChart.prototype,"legendDimensions",null),__decorate([mobx_1.observable],StackedAreaChart.prototype,"hoveredPointIndex",void 0),__decorate([mobx_1.action.bound],StackedAreaChart.prototype,"onHover",null),__decorate([mobx_1.observable],StackedAreaChart.prototype,"hoverSeriesName",void 0),__decorate([mobx_1.action.bound],StackedAreaChart.prototype,"onLegendClick",null),__decorate([mobx_1.computed],StackedAreaChart.prototype,"paddingForLegend",null),__decorate([mobx_1.action.bound],StackedAreaChart.prototype,"onLegendMouseOver",null),__decorate([mobx_1.action.bound],StackedAreaChart.prototype,"onLegendMouseLeave",null),__decorate([mobx_1.computed],StackedAreaChart.prototype,"focusedSeriesNames",null),__decorate([mobx_1.computed],StackedAreaChart.prototype,"isFocusMode",null),__decorate([mobx_1.computed],StackedAreaChart.prototype,"tooltip",null),__decorate([mobx_1.computed],StackedAreaChart.prototype,"legendX",null),__decorate([mobx_1.computed],StackedAreaChart.prototype,"series",null),StackedAreaChart=__decorate([mobx_react_1.observer],StackedAreaChart),exports.StackedAreaChart=StackedAreaChart},1027:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(36),__webpack_require__(28),__webpack_require__(33),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(18),__webpack_require__(21);var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.AbstactStackedChart=void 0;var Axis_1=__webpack_require__(389),AxisConfig_1=__webpack_require__(216),GrapherConstants_1=__webpack_require__(64),Bounds_1=__webpack_require__(73),Util_1=__webpack_require__(40),mobx_1=__webpack_require__(41),mobx_react_1=__webpack_require__(58),react_1=__importDefault(__webpack_require__(0)),ChartUtils_1=__webpack_require__(173),d3_scale_1=__webpack_require__(279),d3_ease_1=__webpack_require__(396),d3_selection_1=__webpack_require__(135),ColorSchemes_1=__webpack_require__(321),AbstactStackedChart=function(_react_1$default$Comp){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(AbstactStackedChart,_react_1$default$Comp);var _super=_createSuper(AbstactStackedChart);function AbstactStackedChart(){var _this;return _classCallCheck(this,AbstactStackedChart),(_this=_super.apply(this,arguments)).base=react_1.default.createRef(),_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(AbstactStackedChart,[{key:"transformTable",value:function transformTable(table){return table=(table=table.filterByEntityNames(this.selectionArray.selectedEntityNames)).replaceNonNumericCellsWithErrorValues(this.yColumnSlugs).dropRowsWithErrorValuesForAllColumns(this.yColumnSlugs),this.props.disableLinearInterpolation||this.yColumnSlugs.forEach((function(slug){table=table.interpolateColumnLinearly(slug)})),table=table.dropRowsWithErrorValuesForAnyColumn(this.yColumnSlugs),this.manager.isRelativeMode&&(table=this.isEntitySeries?table.toPercentageFromEachEntityForEachTime(this.yColumnSlugs[0]):table.toPercentageFromEachColumnForEachEntityAndTime(this.yColumnSlugs)),table}},{key:"inputTable",get:function get(){return this.manager.table}},{key:"transformedTable",get:function get(){var _a;return null!==(_a=this.manager.transformedTable)&&void 0!==_a?_a:this.transformTable(this.inputTable)}},{key:"manager",get:function get(){return this.props.manager}},{key:"bounds",get:function get(){var _a;return null!==(_a=this.props.bounds)&&void 0!==_a?_a:Bounds_1.DEFAULT_BOUNDS}},{key:"fontSize",get:function get(){var _a;return null!==(_a=this.manager.baseFontSize)&&void 0!==_a?_a:GrapherConstants_1.BASE_FONT_SIZE}},{key:"paddingForLegend",get:function get(){return 0}},{key:"renderUid",get:function get(){return Util_1.guid()}},{key:"yColumns",get:function get(){return this.transformedTable.getColumns(this.yColumnSlugs)}},{key:"yColumnSlugs",get:function get(){var _a;return null!==(_a=this.manager.yColumnSlugsInSelectionOrder)&&void 0!==_a?_a:ChartUtils_1.autoDetectYColumnSlugs(this.manager)}},{key:"componentDidMount",value:function componentDidMount(){var _this2=this;this.animSelection=d3_selection_1.select(this.base.current).selectAll("clipPath > rect").attr("width",0),this.animSelection.transition().duration(800).ease(d3_ease_1.easeLinear).attr("width",this.bounds.width).on("end",(function(){return _this2.forceUpdate()})),Util_1.exposeInstanceOnWindow(this)}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.animSelection&&this.animSelection.interrupt()}},{key:"seriesStrategy",get:function get(){return ChartUtils_1.autoDetectSeriesStrategy(this.manager)}},{key:"dualAxis",get:function get(){var bounds=this.bounds,horizontalAxisPart=this.horizontalAxisPart,verticalAxisPart=this.verticalAxisPart,paddingForLegend=this.paddingForLegend;return new Axis_1.DualAxis({bounds:bounds.padRight(paddingForLegend),horizontalAxis:horizontalAxisPart,verticalAxis:verticalAxisPart})}},{key:"yAxis",get:function get(){return this.dualAxis.verticalAxis}},{key:"xAxis",get:function get(){return this.dualAxis.horizontalAxis}},{key:"xAxisConfig",get:function get(){return new AxisConfig_1.AxisConfig(this.manager.xAxisConfig,this)}},{key:"horizontalAxisPart",get:function get(){var axis=this.xAxisConfig.toHorizontalAxis();return axis.updateDomainPreservingUserSettings(this.transformedTable.timeDomainFor(this.yColumnSlugs)),axis.formatColumn=this.inputTable.timeColumn,axis.hideFractionalTicks=!0,axis.hideGridlines=!0,axis}},{key:"yAxisConfig",get:function get(){return new AxisConfig_1.AxisConfig(this.manager.yAxisConfig,this)}},{key:"verticalAxisPart",get:function get(){var _a,yValues=this.allStackedPoints.map((function(point){return point.value+point.valueOffset})),axis=this.yAxisConfig.toVerticalAxis();return this.manager.isRelativeMode?axis.domain=[0,100]:axis.updateDomainPreservingUserSettings([0,null!==(_a=Util_1.max(yValues))&&void 0!==_a?_a:100]),axis.formatColumn=this.yColumns[0],axis}},{key:"columnsAsSeries",get:function get(){return this.yColumns.map((function(col){return{isProjection:col.isProjection,seriesName:col.displayName,rows:col.owidRows}})).reverse()}},{key:"entitiesAsSeries",get:function get(){var _this$yColumns$=this.yColumns[0],isProjection=_this$yColumns$.isProjection,owidRowsByEntityName=_this$yColumns$.owidRowsByEntityName;return this.selectionArray.selectedEntityNames.map((function(seriesName){return{isProjection:isProjection,seriesName:seriesName,rows:owidRowsByEntityName.get(seriesName)||[]}})).reverse()}},{key:"rawSeries",get:function get(){return this.isEntitySeries?this.entitiesAsSeries:this.columnsAsSeries}},{key:"allStackedPoints",get:function get(){return Util_1.flatten(this.series.map((function(series){return series.points})))}},{key:"failMessage",get:function get(){return this.yColumnSlugs.length?this.series.length?this.allStackedPoints.length?"":"No matching points":"No matching data":"Missing variable"}},{key:"colorScheme",get:function get(){var _a,scheme=null!==(_a=this.manager.baseColorScheme?ColorSchemes_1.ColorSchemes[this.manager.baseColorScheme]:null)&&void 0!==_a?_a:ColorSchemes_1.ColorSchemes.stackedAreaDefault,seriesCount=this.isEntitySeries?this.selectionArray.numSelectedEntities:this.yColumns.length,baseColors=scheme.getColors(seriesCount);return this.manager.invertColorScheme&&baseColors.reverse(),d3_scale_1.scaleOrdinal(baseColors)}},{key:"getColorForSeries",value:function getColorForSeries(seriesName){var _a,table=this.transformedTable,color=this.isEntitySeries?table.getColorForEntityName(seriesName):table.getColorForColumnByDisplayName(seriesName);return null!==(_a=null!=color?color:this.colorScheme(seriesName))&&void 0!==_a?_a:"#ddd"}},{key:"selectionArray",get:function get(){return ChartUtils_1.makeSelectionArray(this.manager)}},{key:"isEntitySeries",get:function get(){return this.seriesStrategy===GrapherConstants_1.SeriesStrategy.entity}},{key:"seriesColors",get:function get(){return this.series.map((function(series){return series.color}))}},{key:"showAllZeroSeries",get:function get(){return!0}},{key:"unstackedSeries",get:function get(){var _this3=this;return this.rawSeries.filter((function(series){return series.rows.length&&(_this3.showAllZeroSeries||series.rows.some((function(row){return 0!==row.value})))})).map((function(series){var isProjection=series.isProjection,seriesName=series.seriesName;return{seriesName:seriesName,isProjection:isProjection,points:series.rows.map((function(row){return{position:row.time,value:row.value,valueOffset:0}})),color:_this3.getColorForSeries(seriesName)}}))}},{key:"series",get:function get(){return this.unstackedSeries}}]),AbstactStackedChart}(react_1.default.Component);__decorate([mobx_1.computed],AbstactStackedChart.prototype,"inputTable",null),__decorate([mobx_1.computed],AbstactStackedChart.prototype,"transformedTable",null),__decorate([mobx_1.computed],AbstactStackedChart.prototype,"manager",null),__decorate([mobx_1.computed],AbstactStackedChart.prototype,"bounds",null),__decorate([mobx_1.computed],AbstactStackedChart.prototype,"fontSize",null),__decorate([mobx_1.computed],AbstactStackedChart.prototype,"renderUid",null),__decorate([mobx_1.computed],AbstactStackedChart.prototype,"yColumns",null),__decorate([mobx_1.computed],AbstactStackedChart.prototype,"yColumnSlugs",null),__decorate([mobx_1.computed],AbstactStackedChart.prototype,"seriesStrategy",null),__decorate([mobx_1.computed],AbstactStackedChart.prototype,"dualAxis",null),__decorate([mobx_1.computed],AbstactStackedChart.prototype,"yAxis",null),__decorate([mobx_1.computed],AbstactStackedChart.prototype,"xAxis",null),__decorate([mobx_1.computed],AbstactStackedChart.prototype,"xAxisConfig",null),__decorate([mobx_1.computed],AbstactStackedChart.prototype,"horizontalAxisPart",null),__decorate([mobx_1.computed],AbstactStackedChart.prototype,"yAxisConfig",null),__decorate([mobx_1.computed],AbstactStackedChart.prototype,"verticalAxisPart",null),__decorate([mobx_1.computed],AbstactStackedChart.prototype,"columnsAsSeries",null),__decorate([mobx_1.computed],AbstactStackedChart.prototype,"entitiesAsSeries",null),__decorate([mobx_1.computed],AbstactStackedChart.prototype,"rawSeries",null),__decorate([mobx_1.computed],AbstactStackedChart.prototype,"allStackedPoints",null),__decorate([mobx_1.computed],AbstactStackedChart.prototype,"failMessage",null),__decorate([mobx_1.computed],AbstactStackedChart.prototype,"colorScheme",null),__decorate([mobx_1.computed],AbstactStackedChart.prototype,"selectionArray",null),__decorate([mobx_1.computed],AbstactStackedChart.prototype,"isEntitySeries",null),__decorate([mobx_1.computed],AbstactStackedChart.prototype,"seriesColors",null),__decorate([mobx_1.computed],AbstactStackedChart.prototype,"unstackedSeries",null),__decorate([mobx_1.computed],AbstactStackedChart.prototype,"series",null),AbstactStackedChart=__decorate([mobx_react_1.observer],AbstactStackedChart),exports.AbstactStackedChart=AbstactStackedChart},1028:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(36),__webpack_require__(28),__webpack_require__(33),__webpack_require__(31),__webpack_require__(25),__webpack_require__(57),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(18),__webpack_require__(21);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.DiscreteBarChart=void 0;var React=__importStar(__webpack_require__(0)),d3_selection_1=__webpack_require__(135),Util_1=__webpack_require__(40),mobx_1=__webpack_require__(41),mobx_react_1=__webpack_require__(58),Bounds_1=__webpack_require__(73),GrapherConstants_1=__webpack_require__(64),AxisViews_1=__webpack_require__(324),NoDataModal_1=__webpack_require__(203),AxisConfig_1=__webpack_require__(216),ColorSchemes_1=__webpack_require__(321),DiscreteBarChartConstants_1=__webpack_require__(1866),ChartUtils_1=__webpack_require__(173),owidTypes_1=__webpack_require__(122),DiscreteBarChart=function(_React$Component){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(DiscreteBarChart,_React$Component);var _super=_createSuper(DiscreteBarChart);function DiscreteBarChart(){var _this;return _classCallCheck(this,DiscreteBarChart),(_this=_super.apply(this,arguments)).base=React.createRef(),_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(DiscreteBarChart,[{key:"transformTable",value:function transformTable(table){return this.yColumnSlugs.length?(table=(table=table.filterByEntityNames(this.selectionArray.selectedEntityNames)).replaceNonNumericCellsWithErrorValues(this.yColumnSlugs),this.isLogScale&&(table=table.replaceNonPositiveCellsForLogScale(this.yColumnSlugs)),table=table.dropRowsWithErrorValuesForAllColumns(this.yColumnSlugs),this.yColumnSlugs.forEach((function(slug){table=table.interpolateColumnWithTolerance(slug)})),table):table}},{key:"inputTable",get:function get(){return this.manager.table}},{key:"transformedTable",get:function get(){var _a;return null!==(_a=this.manager.transformedTable)&&void 0!==_a?_a:this.transformTable(this.inputTable)}},{key:"manager",get:function get(){return this.props.manager}},{key:"targetTime",get:function get(){return this.manager.endTime}},{key:"isLogScale",get:function get(){return this.yAxisConfig.scaleType===GrapherConstants_1.ScaleType.log}},{key:"bounds",get:function get(){var _a;return(null!==(_a=this.props.bounds)&&void 0!==_a?_a:Bounds_1.DEFAULT_BOUNDS).padRight(10)}},{key:"fontSize",get:function get(){var _a;return null!==(_a=this.manager.baseFontSize)&&void 0!==_a?_a:GrapherConstants_1.BASE_FONT_SIZE}},{key:"legendLabelStyle",get:function get(){return{fontSize:.75*this.fontSize,fontWeight:700}}},{key:"valueLabelStyle",get:function get(){return{fontSize:.75*this.fontSize,fontWeight:400}}},{key:"legendWidth",get:function get(){var labels=this.series.map((function(series){return series.seriesName})),longestLabel=Util_1.maxBy(labels,(function(d){return d.length}));return Bounds_1.Bounds.forText(longestLabel,this.legendLabelStyle).width}},{key:"hasPositive",get:function get(){return this.series.some((function(d){return d.value>=0}))}},{key:"hasNegative",get:function get(){return this.series.some((function(d){return d.value<0}))}},{key:"rightValueLabelWidth",get:function get(){var _this2=this;if(!this.hasPositive)return 0;var positiveLabels=this.series.filter((function(d){return d.value>=0})).map((function(d){return _this2.formatValue(d)})),longestPositiveLabel=Util_1.maxBy(positiveLabels,(function(l){return l.length}));return Bounds_1.Bounds.forText(longestPositiveLabel,this.valueLabelStyle).width}},{key:"leftValueLabelWidth",get:function get(){var _this3=this;if(!this.hasNegative)return 0;var negativeLabels=this.series.filter((function(d){return d.value<0})).map((function(d){return _this3.formatValue(d)})),longestNegativeLabel=Util_1.maxBy(negativeLabels,(function(l){return l.length}));return Bounds_1.Bounds.forText(longestNegativeLabel,this.valueLabelStyle).width+10}},{key:"x0",get:function get(){if(!this.isLogScale)return 0;var minValue=Util_1.min(this.series.map((function(d){return d.value})));return void 0!==minValue?Math.min(1,minValue):1}},{key:"xDomainDefault",get:function get(){var allValues=this.series.map((function(d){return d.value}));return[Math.min(this.x0,Util_1.min(allValues)),Math.max(this.x0,Util_1.max(allValues))]}},{key:"xRange",get:function get(){return[this.bounds.left+this.legendWidth+this.leftValueLabelWidth,this.bounds.right-this.rightValueLabelWidth]}},{key:"yAxisConfig",get:function get(){return new AxisConfig_1.AxisConfig(this.manager.yAxisConfig,this)}},{key:"yAxis",get:function get(){var axis=this.yAxisConfig.toHorizontalAxis();return axis.updateDomainPreservingUserSettings(this.xDomainDefault),axis.formatColumn=this.yColumns[0],axis.range=this.xRange,axis.label="",axis}},{key:"innerBounds",get:function get(){return this.bounds.padLeft(this.legendWidth+this.leftValueLabelWidth).padBottom(this.yAxis.height).padRight(this.rightValueLabelWidth)}},{key:"selectionArray",get:function get(){return ChartUtils_1.makeSelectionArray(this.manager)}},{key:"barCount",get:function get(){return this.series.length}},{key:"barHeight",get:function get(){return.8*this.innerBounds.height/this.barCount}},{key:"barSpacing",get:function get(){return this.innerBounds.height/this.barCount-this.barHeight}},{key:"barPlacements",get:function get(){var _this4=this,series=this.series,yAxis=this.yAxis;return series.map((function(d){var isNegative=d.value<0,barX=isNegative?yAxis.place(d.value):yAxis.place(_this4.x0);return{x:barX,width:isNegative?yAxis.place(_this4.x0)-barX:yAxis.place(d.value)-barX}}))}},{key:"barWidths",get:function get(){return this.barPlacements.map((function(b){return b.width}))}},{key:"d3Bars",value:function d3Bars(){return d3_selection_1.select(this.base.current).selectAll("g.bar > rect")}},{key:"animateBarWidth",value:function animateBarWidth(){var _this5=this;this.d3Bars().transition().attr("width",(function(_,i){return _this5.barWidths[i]}))}},{key:"componentDidMount",value:function componentDidMount(){this.d3Bars().attr("width",0),this.animateBarWidth(),Util_1.exposeInstanceOnWindow(this)}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.animateBarWidth()}},{key:"render",value:function render(){var _this6=this;if(this.failMessage)return React.createElement(NoDataModal_1.NoDataModal,{manager:this.manager,bounds:this.bounds,message:this.failMessage});var series=this.series,bounds=this.bounds,yAxis=this.yAxis,innerBounds=this.innerBounds,barHeight=this.barHeight,barSpacing=this.barSpacing,yOffset=innerBounds.top+barHeight/2;return React.createElement("g",{ref:this.base,className:"DiscreteBarChart"},React.createElement("rect",{x:bounds.left,y:bounds.top,width:bounds.width,height:bounds.height,opacity:0,fill:"rgba(255,255,255,0)"}),React.createElement(AxisViews_1.HorizontalAxisComponent,{bounds:bounds,axis:yAxis,axisPosition:innerBounds.bottom}),React.createElement(AxisViews_1.HorizontalAxisGridLines,{horizontalAxis:yAxis,bounds:innerBounds}),series.map((function(series){var isNegative=series.value<0,barX=isNegative?yAxis.place(series.value):yAxis.place(_this6.x0),barWidth=isNegative?yAxis.place(_this6.x0)-barX:yAxis.place(series.value)-barX,valueLabel=_this6.formatValue(series),labelX=isNegative?barX-Bounds_1.Bounds.forText(valueLabel,_this6.valueLabelStyle).width-10:barX-5,result=React.createElement("g",{key:series.seriesName,className:"bar",transform:"translate(0, ".concat(yOffset,")")},React.createElement("text",Object.assign({x:0,y:0,transform:"translate(".concat(labelX,", 0)"),fill:"#555",dominantBaseline:"middle",textAnchor:"end"},_this6.legendLabelStyle),series.seriesName),React.createElement("rect",{x:0,y:0,transform:"translate(".concat(barX,", ").concat(-barHeight/2,")"),width:barWidth,height:barHeight,fill:series.color,opacity:.85,style:{transition:"height 200ms ease"}}),React.createElement("text",Object.assign({x:0,y:0,transform:"translate(".concat(yAxis.place(series.value)+(isNegative?-5:5),", 0)"),fill:"#666",dominantBaseline:"middle",textAnchor:isNegative?"end":"start"},_this6.valueLabelStyle),valueLabel));return yOffset+=barHeight+barSpacing,result})))}},{key:"failMessage",get:function get(){return this.yColumns[0]?this.selectionArray.hasSelection?this.yColumns.every((function(col){return col.isEmpty}))?"No matching data in columns ".concat(this.yColumnSlugs.join(", ")):"":"No data selected":"No column to chart"}},{key:"formatValue",value:function formatValue(series){var column=this.yColumns[0],transformedTable=this.transformedTable,showYearLabels=this.manager.showYearLabels||series.time!==this.targetTime;return column.formatValueShort(series.value)+(showYearLabels?" (".concat(transformedTable.timeColumnFormatFunction(series.time),")"):"")}},{key:"yColumnSlugs",get:function get(){return ChartUtils_1.autoDetectYColumnSlugs(this.manager)}},{key:"seriesStrategy",get:function get(){var _a;return null!==(_a=this.manager.seriesStrategy)&&void 0!==_a?_a:this.yColumnSlugs.length>1&&1===this.selectionArray.numSelectedEntities?GrapherConstants_1.SeriesStrategy.column:GrapherConstants_1.SeriesStrategy.entity}},{key:"yColumns",get:function get(){return this.transformedTable.getColumns(this.yColumnSlugs)}},{key:"columnsAsSeries",get:function get(){return Util_1.excludeUndefined(this.yColumns.map((function(col){var row=Util_1.first(col.owidRows);if(row)return{row:row,seriesName:col.displayName,color:col.def.color}})))}},{key:"entitiesAsSeries",get:function get(){var transformedTable=this.transformedTable;return this.yColumns[0].owidRows.map((function(row){return{seriesName:row.entityName,color:transformedTable.getColorForEntityName(row.entityName),row:row}}))}},{key:"sortConfig",get:function get(){var _a;return null!==(_a=this.manager.sortConfig)&&void 0!==_a?_a:{}}},{key:"sortedRawSeries",get:function get(){var _a,sortByFunc,raw=this.seriesStrategy===GrapherConstants_1.SeriesStrategy.entity?this.entitiesAsSeries:this.columnsAsSeries;switch(this.sortConfig.sortBy){case owidTypes_1.SortBy.entityName:sortByFunc=function sortByFunc(item){return item.seriesName};break;default:case owidTypes_1.SortBy.total:case owidTypes_1.SortBy.column:sortByFunc=function sortByFunc(item){return item.row.value}}var sortedSeries=Util_1.sortBy(raw,sortByFunc);return(null!==(_a=this.sortConfig.sortOrder)&&void 0!==_a?_a:owidTypes_1.SortOrder.desc)===owidTypes_1.SortOrder.desc&&sortedSeries.reverse(),sortedSeries}},{key:"colorScheme",get:function get(){var _a,defaultColorScheme=this.manager.isLineChart?ColorSchemes_1.ColorSchemes["owid-distinct"]:void 0;return null!==(_a=this.manager.baseColorScheme?ColorSchemes_1.ColorSchemes[this.manager.baseColorScheme]:void 0)&&void 0!==_a?_a:defaultColorScheme}},{key:"valuesToColorsMap",get:function get(){var manager=this.manager,colorScheme=this.colorScheme,sortedRawSeries=this.sortedRawSeries;return null==colorScheme?void 0:colorScheme.getUniqValueColorMap(Util_1.uniq(sortedRawSeries.map((function(series){return series.row.value}))),!manager.invertColorScheme)}},{key:"series",get:function get(){var _this7=this,manager=this.manager,colorScheme=this.colorScheme,series=this.sortedRawSeries.map((function(rawSeries){var _a,_b,row=rawSeries.row,seriesName=rawSeries.seriesName,color=rawSeries.color;return Object.assign(Object.assign({},row),{seriesName:seriesName,color:null!==(_b=null!=color?color:null===(_a=_this7.valuesToColorsMap)||void 0===_a?void 0:_a.get(row.value))&&void 0!==_b?_b:DiscreteBarChartConstants_1.DEFAULT_BAR_COLOR})}));return manager.isLineChart&&(null==colorScheme||colorScheme.assignColors(series,manager.invertColorScheme,this.seriesStrategy===GrapherConstants_1.SeriesStrategy.entity?this.inputTable.entityNameColorIndex:this.inputTable.columnDisplayNameToColorMap,manager.seriesColorMap)),series}}]),DiscreteBarChart}(React.Component);__decorate([mobx_1.computed],DiscreteBarChart.prototype,"inputTable",null),__decorate([mobx_1.computed],DiscreteBarChart.prototype,"transformedTable",null),__decorate([mobx_1.computed],DiscreteBarChart.prototype,"manager",null),__decorate([mobx_1.computed],DiscreteBarChart.prototype,"targetTime",null),__decorate([mobx_1.computed],DiscreteBarChart.prototype,"isLogScale",null),__decorate([mobx_1.computed],DiscreteBarChart.prototype,"bounds",null),__decorate([mobx_1.computed],DiscreteBarChart.prototype,"fontSize",null),__decorate([mobx_1.computed],DiscreteBarChart.prototype,"legendLabelStyle",null),__decorate([mobx_1.computed],DiscreteBarChart.prototype,"valueLabelStyle",null),__decorate([mobx_1.computed],DiscreteBarChart.prototype,"legendWidth",null),__decorate([mobx_1.computed],DiscreteBarChart.prototype,"hasPositive",null),__decorate([mobx_1.computed],DiscreteBarChart.prototype,"hasNegative",null),__decorate([mobx_1.computed],DiscreteBarChart.prototype,"rightValueLabelWidth",null),__decorate([mobx_1.computed],DiscreteBarChart.prototype,"leftValueLabelWidth",null),__decorate([mobx_1.computed],DiscreteBarChart.prototype,"x0",null),__decorate([mobx_1.computed],DiscreteBarChart.prototype,"xDomainDefault",null),__decorate([mobx_1.computed],DiscreteBarChart.prototype,"xRange",null),__decorate([mobx_1.computed],DiscreteBarChart.prototype,"yAxisConfig",null),__decorate([mobx_1.computed],DiscreteBarChart.prototype,"yAxis",null),__decorate([mobx_1.computed],DiscreteBarChart.prototype,"innerBounds",null),__decorate([mobx_1.computed],DiscreteBarChart.prototype,"selectionArray",null),__decorate([mobx_1.computed],DiscreteBarChart.prototype,"barCount",null),__decorate([mobx_1.computed],DiscreteBarChart.prototype,"barHeight",null),__decorate([mobx_1.computed],DiscreteBarChart.prototype,"barSpacing",null),__decorate([mobx_1.computed],DiscreteBarChart.prototype,"barPlacements",null),__decorate([mobx_1.computed],DiscreteBarChart.prototype,"barWidths",null),__decorate([mobx_1.computed],DiscreteBarChart.prototype,"failMessage",null),__decorate([mobx_1.computed],DiscreteBarChart.prototype,"yColumnSlugs",null),__decorate([mobx_1.computed],DiscreteBarChart.prototype,"seriesStrategy",null),__decorate([mobx_1.computed],DiscreteBarChart.prototype,"yColumns",null),__decorate([mobx_1.computed],DiscreteBarChart.prototype,"columnsAsSeries",null),__decorate([mobx_1.computed],DiscreteBarChart.prototype,"entitiesAsSeries",null),__decorate([mobx_1.computed],DiscreteBarChart.prototype,"sortConfig",null),__decorate([mobx_1.computed],DiscreteBarChart.prototype,"sortedRawSeries",null),__decorate([mobx_1.computed],DiscreteBarChart.prototype,"colorScheme",null),__decorate([mobx_1.computed],DiscreteBarChart.prototype,"valuesToColorsMap",null),__decorate([mobx_1.computed],DiscreteBarChart.prototype,"series",null),DiscreteBarChart=__decorate([mobx_react_1.observer],DiscreteBarChart),exports.DiscreteBarChart=DiscreteBarChart},1029:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(28),__webpack_require__(33),__webpack_require__(68),__webpack_require__(5),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(48),__webpack_require__(55),__webpack_require__(9),__webpack_require__(10),__webpack_require__(11),__webpack_require__(18),__webpack_require__(21);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.StackedBarChart=void 0;var React=__importStar(__webpack_require__(0)),mobx_1=__webpack_require__(41),mobx_react_1=__webpack_require__(58),Util_1=__webpack_require__(40),Bounds_1=__webpack_require__(73),AxisViews_1=__webpack_require__(324),NoDataModal_1=__webpack_require__(203),Text_1=__webpack_require__(1024),VerticalColorLegend_1=__webpack_require__(475),Tooltip_1=__webpack_require__(323),GrapherConstants_1=__webpack_require__(64),AbstractStackedChart_1=__webpack_require__(1027),ColorConstants_1=__webpack_require__(278),StackedUtils_1=__webpack_require__(613),ChartUtils_1=__webpack_require__(173),StackedBarSegment=function(_React$Component){_inherits(StackedBarSegment,_React$Component);var _super=_createSuper(StackedBarSegment);function StackedBarSegment(){var _this;return _classCallCheck(this,StackedBarSegment),(_this=_super.apply(this,arguments)).base=React.createRef(),_this.mouseOver=!1,_this}return _createClass(StackedBarSegment,[{key:"yPos",get:function get(){var _this$props=this.props,bar=_this$props.bar;return _this$props.yAxis.place(bar.value+bar.valueOffset)}},{key:"barHeight",get:function get(){var _this$props2=this.props,bar=_this$props2.bar;return _this$props2.yAxis.place(bar.valueOffset)-this.yPos}},{key:"trueOpacity",get:function get(){return this.mouseOver?1:this.props.opacity}},{key:"onBarMouseOver",value:function onBarMouseOver(){this.mouseOver=!0,this.props.onBarMouseOver(this.props.bar,this.props.series)}},{key:"onBarMouseLeave",value:function onBarMouseLeave(){this.mouseOver=!1,this.props.onBarMouseLeave()}},{key:"render",value:function render(){var _this$props3=this.props,color=_this$props3.color,xOffset=_this$props3.xOffset,barWidth=_this$props3.barWidth,yPos=this.yPos,barHeight=this.barHeight,trueOpacity=this.trueOpacity;return React.createElement("rect",{ref:this.base,x:xOffset,y:yPos,width:barWidth,height:barHeight,fill:color,opacity:trueOpacity,onMouseOver:this.onBarMouseOver,onMouseLeave:this.onBarMouseLeave})}}]),StackedBarSegment}(React.Component);__decorate([mobx_1.observable],StackedBarSegment.prototype,"mouseOver",void 0),__decorate([mobx_1.computed],StackedBarSegment.prototype,"yPos",null),__decorate([mobx_1.computed],StackedBarSegment.prototype,"barHeight",null),__decorate([mobx_1.computed],StackedBarSegment.prototype,"trueOpacity",null),__decorate([mobx_1.action.bound],StackedBarSegment.prototype,"onBarMouseOver",null),__decorate([mobx_1.action.bound],StackedBarSegment.prototype,"onBarMouseLeave",null),StackedBarSegment=__decorate([mobx_react_1.observer],StackedBarSegment);var StackedBarChart=function(_AbstractStackedChart){_inherits(StackedBarChart,_AbstractStackedChart);var _super2=_createSuper(StackedBarChart);function StackedBarChart(props){var _this2;return _classCallCheck(this,StackedBarChart),(_this2=_super2.call(this,props)).minBarSpacing=4,_this2.defaultBaseColorScheme=ColorConstants_1.ColorSchemeName.stackedAreaDefault,_this2}return _createClass(StackedBarChart,[{key:"baseFontSize",get:function get(){var _a;return null!==(_a=this.manager.baseFontSize)&&void 0!==_a?_a:GrapherConstants_1.BASE_FONT_SIZE}},{key:"tickFontSize",get:function get(){return.9*this.baseFontSize}},{key:"barWidth",get:function get(){return.8*this.dualAxis.innerBounds.width/this.xValues.length}},{key:"barSpacing",get:function get(){return this.dualAxis.innerBounds.width/this.xValues.length-this.barWidth}},{key:"barFontSize",get:function get(){return.75*this.baseFontSize}},{key:"paddingForLegend",get:function get(){return this.sidebarWidth+20}},{key:"hoverKeys",get:function get(){var hoverColor=this.hoverColor;return void 0===hoverColor?[]:Util_1.uniq(this.series.filter((function(g){return g.color===hoverColor})).map((function(g){return g.seriesName})))}},{key:"activeColors",get:function get(){var hoverKeys=this.hoverKeys,activeKeys=hoverKeys.length>0?hoverKeys:[];return activeKeys.length?Util_1.uniq(this.series.filter((function(g){return-1!==activeKeys.indexOf(g.seriesName)})).map((function(g){return g.color}))):Util_1.uniq(this.series.map((function(g){return g.color})))}},{key:"legendItems",get:function get(){return this.series.map((function(series){return{label:series.seriesName,color:series.color}})).reverse()}},{key:"maxLegendWidth",get:function get(){return this.sidebarMaxWidth}},{key:"sidebarMaxWidth",get:function get(){return this.bounds.width/5}},{key:"sidebarMinWidth",get:function get(){return 100}},{key:"sidebarWidth",get:function get(){var sidebarMinWidth=this.sidebarMinWidth,sidebarMaxWidth=this.sidebarMaxWidth,legendDimensions=this.legendDimensions;return Math.max(Math.min(legendDimensions.width,sidebarMaxWidth),sidebarMinWidth)}},{key:"legendDimensions",get:function get(){return new VerticalColorLegend_1.VerticalColorLegend({manager:this})}},{key:"tooltip",get:function get(){var hoverBar=this.hoverBar,mapXValueToOffset=this.mapXValueToOffset,barWidth=this.barWidth,dualAxis=this.dualAxis,yColumns=this.yColumns,inputTable=this.inputTable,hoverSeries=this.hoverSeries;if(void 0!==hoverBar){var xPos=mapXValueToOffset.get(hoverBar.position);if(void 0!==xPos){var yPos=dualAxis.verticalAxis.place(hoverBar.valueOffset+hoverBar.value),yColumn=yColumns[0];return React.createElement(Tooltip_1.Tooltip,{tooltipManager:this.props.manager,x:xPos+barWidth,y:yPos,style:{textAlign:"center"}},React.createElement("h3",{style:{padding:"0.3em 0.9em",margin:0,backgroundColor:"#fcfcfc",borderBottom:"1px solid #ebebeb",fontWeight:"normal",fontSize:"1em"}},null==hoverSeries?void 0:hoverSeries.seriesName),React.createElement("p",{style:{margin:0,padding:"0.3em 0.9em",fontSize:"0.8em"}},React.createElement("span",null,yColumn.formatValueLong(hoverBar.value)),React.createElement("br",null),"in",React.createElement("br",null),React.createElement("span",null,inputTable.timeColumnFormatFunction(hoverBar.position))))}}}},{key:"mapXValueToOffset",get:function get(){for(var dualAxis=this.dualAxis,barWidth=this.barWidth,barSpacing=this.barSpacing,xValueToOffset=new Map,xOffset=dualAxis.innerBounds.left+barSpacing,i=0;i<this.xValues.length;i++)xValueToOffset.set(this.xValues[i],xOffset),xOffset+=barWidth+barSpacing;return xValueToOffset}},{key:"tickPlacements",get:function get(){var _this3=this,mapXValueToOffset=this.mapXValueToOffset,barWidth=this.barWidth,dualAxis=this.dualAxis,xValues=this.xValues,horizontalAxis=dualAxis.horizontalAxis;return xValues.map((function(x){var text=horizontalAxis.formatTick(x),xPos=mapXValueToOffset.get(x),bounds=Bounds_1.Bounds.forText(text,{fontSize:_this3.tickFontSize});return{text:text,bounds:bounds.set({x:xPos+barWidth/2-bounds.width/2,y:dualAxis.innerBounds.bottom+5}),isHidden:!1}}))}},{key:"ticks",get:function get(){for(var tickPlacements=this.tickPlacements,i=0;i<tickPlacements.length;i++)for(var j=1;j<tickPlacements.length;j++){var t1=tickPlacements[i],t2=tickPlacements[j];t1===t2||t1.isHidden||t2.isHidden||t1.bounds.intersects(t2.bounds.padWidth(-5))&&(0===i?t2.isHidden=!0:j===tickPlacements.length-1?t1.isHidden=!0:t2.isHidden=!0)}return tickPlacements.filter((function(t){return!t.isHidden}))}},{key:"onLegendMouseOver",value:function onLegendMouseOver(color){this.hoverColor=color}},{key:"onLegendMouseLeave",value:function onLegendMouseLeave(){this.hoverColor=void 0}},{key:"onLegendClick",value:function onLegendClick(){}},{key:"onBarMouseOver",value:function onBarMouseOver(bar,series){this.hoverBar=bar,this.hoverSeries=series}},{key:"onBarMouseLeave",value:function onBarMouseLeave(){this.hoverBar=void 0}},{key:"render",value:function render(){var _this4=this;if(this.failMessage)return React.createElement(NoDataModal_1.NoDataModal,{manager:this.manager,bounds:this.bounds,message:this.failMessage});var dualAxis=this.dualAxis,renderUid=this.renderUid,bounds=this.bounds,tooltip=this.tooltip,barWidth=this.barWidth,mapXValueToOffset=this.mapXValueToOffset,ticks=this.ticks,series=this.series,innerBounds=dualAxis.innerBounds,verticalAxis=dualAxis.verticalAxis,clipPath=ChartUtils_1.makeClipPath(renderUid,innerBounds);return React.createElement("g",{className:"StackedBarChart",width:bounds.width,height:bounds.height},clipPath.element,React.createElement("rect",{x:bounds.left,y:bounds.top,width:bounds.width,height:bounds.height,opacity:0,fill:"rgba(255,255,255,0)"}),React.createElement(AxisViews_1.VerticalAxisComponent,{bounds:bounds,verticalAxis:verticalAxis}),React.createElement(AxisViews_1.VerticalAxisGridLines,{verticalAxis:verticalAxis,bounds:innerBounds}),React.createElement(AxisViews_1.AxisTickMarks,{tickMarkTopPosition:innerBounds.bottom,tickMarkXPositions:ticks.map((function(tick){return tick.bounds.centerX})),color:"#666"}),React.createElement("g",null,ticks.map((function(tick,i){return React.createElement(Text_1.Text,{key:i,x:tick.bounds.x,y:tick.bounds.y,fill:"#666",fontSize:_this4.tickFontSize},tick.text)}))),React.createElement("g",{clipPath:clipPath.id},series.map((function(series,index){var opacity=_this4.hoverKeys.includes(series.seriesName)||0===_this4.hoverKeys.length?.8:.2;return React.createElement("g",{key:index,className:Util_1.makeSafeForCSS(series.seriesName)+"-segments"},series.points.map((function(bar,index){var xPos=mapXValueToOffset.get(bar.position),barOpacity=bar===_this4.hoverBar?1:opacity;return React.createElement(StackedBarSegment,{key:index,bar:bar,color:series.color,xOffset:xPos,opacity:barOpacity,yAxis:verticalAxis,series:series,onBarMouseOver:_this4.onBarMouseOver,onBarMouseLeave:_this4.onBarMouseLeave,barWidth:barWidth})})))}))),React.createElement(VerticalColorLegend_1.VerticalColorLegend,{manager:this}),tooltip)}},{key:"legendY",get:function get(){return this.bounds.top}},{key:"legendX",get:function get(){return this.bounds.right-this.sidebarWidth}},{key:"xValues",get:function get(){return Util_1.uniq(this.allStackedPoints.map((function(bar){return bar.position})))}},{key:"colorScaleConfig",get:function get(){return this.manager.colorScale}},{key:"series",get:function get(){return StackedUtils_1.stackSeries(StackedUtils_1.withMissingValuesAsZeroes(this.unstackedSeries))}}]),StackedBarChart}(AbstractStackedChart_1.AbstactStackedChart);__decorate([mobx_1.observable],StackedBarChart.prototype,"hoverColor",void 0),__decorate([mobx_1.observable],StackedBarChart.prototype,"hoverBar",void 0),__decorate([mobx_1.observable],StackedBarChart.prototype,"hoverSeries",void 0),__decorate([mobx_1.computed],StackedBarChart.prototype,"baseFontSize",null),__decorate([mobx_1.computed],StackedBarChart.prototype,"tickFontSize",null),__decorate([mobx_1.computed],StackedBarChart.prototype,"barWidth",null),__decorate([mobx_1.computed],StackedBarChart.prototype,"barSpacing",null),__decorate([mobx_1.computed],StackedBarChart.prototype,"barFontSize",null),__decorate([mobx_1.computed],StackedBarChart.prototype,"paddingForLegend",null),__decorate([mobx_1.computed],StackedBarChart.prototype,"hoverKeys",null),__decorate([mobx_1.computed],StackedBarChart.prototype,"activeColors",null),__decorate([mobx_1.computed],StackedBarChart.prototype,"legendItems",null),__decorate([mobx_1.computed],StackedBarChart.prototype,"maxLegendWidth",null),__decorate([mobx_1.computed],StackedBarChart.prototype,"sidebarMaxWidth",null),__decorate([mobx_1.computed],StackedBarChart.prototype,"sidebarMinWidth",null),__decorate([mobx_1.computed],StackedBarChart.prototype,"sidebarWidth",null),__decorate([mobx_1.computed],StackedBarChart.prototype,"legendDimensions",null),__decorate([mobx_1.computed],StackedBarChart.prototype,"tooltip",null),__decorate([mobx_1.computed],StackedBarChart.prototype,"mapXValueToOffset",null),__decorate([mobx_1.computed],StackedBarChart.prototype,"tickPlacements",null),__decorate([mobx_1.computed],StackedBarChart.prototype,"ticks",null),__decorate([mobx_1.action.bound],StackedBarChart.prototype,"onLegendMouseOver",null),__decorate([mobx_1.action.bound],StackedBarChart.prototype,"onLegendMouseLeave",null),__decorate([mobx_1.action.bound],StackedBarChart.prototype,"onLegendClick",null),__decorate([mobx_1.action.bound],StackedBarChart.prototype,"onBarMouseOver",null),__decorate([mobx_1.action.bound],StackedBarChart.prototype,"onBarMouseLeave",null),__decorate([mobx_1.computed],StackedBarChart.prototype,"legendY",null),__decorate([mobx_1.computed],StackedBarChart.prototype,"legendX",null),__decorate([mobx_1.computed],StackedBarChart.prototype,"xValues",null),__decorate([mobx_1.computed],StackedBarChart.prototype,"colorScaleConfig",null),__decorate([mobx_1.computed],StackedBarChart.prototype,"series",null),StackedBarChart=__decorate([mobx_react_1.observer],StackedBarChart),exports.StackedBarChart=StackedBarChart},1030:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(36),__webpack_require__(28),__webpack_require__(33),__webpack_require__(79),__webpack_require__(31),__webpack_require__(57),__webpack_require__(25),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(18),__webpack_require__(21);var StackedDiscreteBarChart_1,__createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.StackedDiscreteBarChart=void 0;var React=__importStar(__webpack_require__(0)),Util_1=__webpack_require__(40),mobx_1=__webpack_require__(41),mobx_react_1=__webpack_require__(58),Bounds_1=__webpack_require__(73),GrapherConstants_1=__webpack_require__(64),AxisViews_1=__webpack_require__(324),NoDataModal_1=__webpack_require__(203),AxisConfig_1=__webpack_require__(216),ChartUtils_1=__webpack_require__(173),StackedUtils_1=__webpack_require__(613),owidTypes_1=__webpack_require__(122),ColorSchemes_1=__webpack_require__(321),HorizontalColorLegends_1=__webpack_require__(1012),ColorScaleBin_1=__webpack_require__(472),Tippy_1=__webpack_require__(392),react_fontawesome_1=__webpack_require__(123),faInfoCircle_1=__webpack_require__(1010),ColorUtils_1=__webpack_require__(986),react_move_1=__webpack_require__(1937),d3_ease_1=__webpack_require__(396),StackedDiscreteBarChart=StackedDiscreteBarChart_1=function(_React$Component){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(StackedDiscreteBarChart,_React$Component);var _super=_createSuper(StackedDiscreteBarChart);function StackedDiscreteBarChart(){var _this;return _classCallCheck(this,StackedDiscreteBarChart),(_this=_super.apply(this,arguments)).base=React.createRef(),_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(StackedDiscreteBarChart,[{key:"transformTable",value:function transformTable(table){return this.yColumnSlugs.length?(table=(table=(table=table.filterByEntityNames(this.selectionArray.selectedEntityNames)).replaceNonNumericCellsWithErrorValues(this.yColumnSlugs)).dropRowsWithErrorValuesForAllColumns(this.yColumnSlugs),this.yColumnSlugs.forEach((function(slug){table=table.interpolateColumnWithTolerance(slug)})),this.manager.isRelativeMode&&(table=table.toPercentageFromEachColumnForEachEntityAndTime(this.yColumnSlugs)),table):table}},{key:"sortConfig",get:function get(){var _a;return null!==(_a=this.manager.sortConfig)&&void 0!==_a?_a:{}}},{key:"inputTable",get:function get(){return this.manager.table}},{key:"transformedTable",get:function get(){var _a;return null!==(_a=this.manager.transformedTable)&&void 0!==_a?_a:this.transformTable(this.inputTable)}},{key:"manager",get:function get(){return this.props.manager}},{key:"bounds",get:function get(){var _a;return(null!==(_a=this.props.bounds)&&void 0!==_a?_a:Bounds_1.DEFAULT_BOUNDS).padRight(10)}},{key:"baseFontSize",get:function get(){var _a;return null!==(_a=this.manager.baseFontSize)&&void 0!==_a?_a:GrapherConstants_1.BASE_FONT_SIZE}},{key:"labelStyle",get:function get(){return{fontSize:.75*this.baseFontSize,fontWeight:700}}},{key:"labelWidth",get:function get(){var labels=this.items.map((function(item){return item.label})),longestLabel=Util_1.maxBy(labels,(function(d){return d.length}));return Bounds_1.Bounds.forText(longestLabel,this.labelStyle).width}},{key:"x0",get:function get(){return 0}},{key:"allPoints",get:function get(){return Util_1.flatten(this.series.map((function(series){return series.points})))}},{key:"xDomainDefault",get:function get(){var maxValues=this.allPoints.map((function(point){return point.value+point.valueOffset}));return[Math.min(this.x0,Util_1.min(maxValues)),Math.max(this.x0,Util_1.max(maxValues))]}},{key:"xRange",get:function get(){return[this.bounds.left+this.labelWidth,this.bounds.right]}},{key:"yAxisConfig",get:function get(){return new AxisConfig_1.AxisConfig(this.manager.yAxisConfig,this)}},{key:"yAxis",get:function get(){var axis=this.yAxisConfig.toHorizontalAxis();return axis.updateDomainPreservingUserSettings(this.xDomainDefault),axis.formatColumn=this.yColumns[0],axis.range=this.xRange,axis.label="",axis}},{key:"innerBounds",get:function get(){return this.bounds.padLeft(this.labelWidth).padBottom(this.yAxis.height).padTop(this.legendPaddingTop).padTop(this.legend.height)}},{key:"selectionArray",get:function get(){return ChartUtils_1.makeSelectionArray(this.manager)}},{key:"items",get:function get(){var _this2=this;return this.selectionArray.selectedEntityNames.map((function(entityName){return{label:entityName,bars:Util_1.excludeUndefined(_this2.series.map((function(series){var point=series.points.find((function(point){return point.position===entityName}));if(point)return{point:point,columnSlug:series.columnSlug,color:series.color,seriesName:series.seriesName}})))}})).filter((function(item){return item.bars.length}))}},{key:"sortedItems",get:function get(){var _a,sortByFunc;switch(this.sortConfig.sortBy){case owidTypes_1.SortBy.entityName:sortByFunc=function sortByFunc(item){return item.label};break;case owidTypes_1.SortBy.column:var sortColumnSlug=this.sortConfig.sortColumnSlug;sortByFunc=function sortByFunc(item){var _a,_b;return null!==(_b=null===(_a=item.bars.find((function(b){return b.columnSlug===sortColumnSlug})))||void 0===_a?void 0:_a.point.value)&&void 0!==_b?_b:0};break;default:case owidTypes_1.SortBy.total:sortByFunc=function sortByFunc(item){var _a,lastPoint=null===(_a=Util_1.last(item.bars))||void 0===_a?void 0:_a.point;return lastPoint?lastPoint.valueOffset+lastPoint.value:0}}var sortedItems=Util_1.sortBy(this.items,sortByFunc);return(null!==(_a=this.sortConfig.sortOrder)&&void 0!==_a?_a:owidTypes_1.SortOrder.desc)===owidTypes_1.SortOrder.desc&&sortedItems.reverse(),sortedItems}},{key:"barHeight",get:function get(){return.8*this.innerBounds.height/this.items.length}},{key:"barSpacing",get:function get(){return this.innerBounds.height/this.items.length-this.barHeight}},{key:"legendPaddingTop",get:function get(){return this.baseFontSize}},{key:"legendX",get:function get(){return this.bounds.x}},{key:"categoryLegendY",get:function get(){return this.bounds.top}},{key:"legendWidth",get:function get(){return this.bounds.width}},{key:"legendAlign",get:function get(){return owidTypes_1.HorizontalAlign.left}},{key:"fontSize",get:function get(){return this.baseFontSize}},{key:"categoricalLegendData",get:function get(){return this.series.map((function(series,index){return new ColorScaleBin_1.CategoricalBin({index:index,value:series.seriesName,label:series.seriesName,color:series.color})}))}},{key:"onLegendMouseOver",value:function onLegendMouseOver(bin){this.focusSeriesName=bin.value}},{key:"onLegendMouseLeave",value:function onLegendMouseLeave(){this.focusSeriesName=void 0}},{key:"legend",get:function get(){return new HorizontalColorLegends_1.HorizontalCategoricalColorLegend({manager:this})}},{key:"formatColumn",get:function get(){return this.yColumns[0]}},{key:"render",value:function render(){var _this3=this;if(this.failMessage)return React.createElement(NoDataModal_1.NoDataModal,{manager:this.manager,bounds:this.bounds,message:this.failMessage});var bounds=this.bounds,yAxis=this.yAxis,innerBounds=this.innerBounds,barHeight=this.barHeight,barSpacing=this.barSpacing,chartContext={yAxis:yAxis,targetTime:this.manager.endTime,timeColumn:this.inputTable.timeColumn,formatColumn:this.formatColumn,barHeight:this.barHeight,focusSeriesName:this.focusSeriesName,x0:this.x0,baseFontSize:this.baseFontSize,isInteractive:!this.manager.isExportingtoSvgOrPng},yOffset=innerBounds.top+barHeight/2,placedItems=this.sortedItems.map((function(d,i){return Object.assign({yPosition:yOffset+(barHeight+barSpacing)*i},d)})),handlePositionUpdate=function handlePositionUpdate(d){return{translateY:[d.yPosition],timing:{duration:350,ease:d3_ease_1.easeQuadOut}}};return React.createElement("g",{ref:this.base,className:"StackedDiscreteBarChart"},React.createElement("rect",{x:bounds.left,y:bounds.top,width:bounds.width,height:bounds.height,opacity:0,fill:"rgba(255,255,255,0)"}),React.createElement(AxisViews_1.HorizontalAxisComponent,{bounds:bounds,axis:yAxis,axisPosition:innerBounds.bottom}),React.createElement(AxisViews_1.HorizontalAxisGridLines,{horizontalAxis:yAxis,bounds:innerBounds}),React.createElement(HorizontalColorLegends_1.HorizontalCategoricalColorLegend,{manager:this}),React.createElement(react_move_1.NodeGroup,{data:placedItems,keyAccessor:function keyAccessor(d){return d.label},start:handlePositionUpdate,update:handlePositionUpdate},(function(nodes){return React.createElement("g",null,nodes.map((function(_ref){var data=_ref.data,state=_ref.state,label=data.label,bars=data.bars,tooltipProps=Object.assign(Object.assign({},chartContext),{label:label,bars:bars});return React.createElement("g",{key:label,className:"bar",transform:"translate(0, ".concat(state.translateY,")")},React.createElement(Tippy_1.TippyIfInteractive,{lazy:!0,isInteractive:!_this3.manager.isExportingtoSvgOrPng,hideOnClick:!1,content:React.createElement(StackedDiscreteBarChart_1.Tooltip,Object.assign({},tooltipProps,{highlightedSeriesName:void 0}))},React.createElement("text",Object.assign({x:0,y:0,transform:"translate(".concat(yAxis.place(_this3.x0)-5,", 0)"),fill:"#555",dominantBaseline:"middle",textAnchor:"end"},_this3.labelStyle),label)),bars.map((function(bar){return React.createElement(StackedDiscreteBarChart_1.Bar,{key:bar.seriesName,bar:bar,chartContext:chartContext,tooltipProps:Object.assign(Object.assign({},tooltipProps),{highlightedSeriesName:bar.seriesName})})})))})))})))}},{key:"failMessage",get:function get(){return this.yColumns[0]?this.selectionArray.hasSelection?this.yColumns.every((function(col){return col.isEmpty}))?"No matching data in columns ".concat(this.yColumnSlugs.join(", ")):"":"No data selected":"No column to chart"}},{key:"yColumnSlugs",get:function get(){var _a;return null!==(_a=this.manager.yColumnSlugsInSelectionOrder)&&void 0!==_a?_a:ChartUtils_1.autoDetectYColumnSlugs(this.manager)}},{key:"yColumns",get:function get(){return this.transformedTable.getColumns(this.yColumnSlugs)}},{key:"colorScheme",get:function get(){var _a;return null!==(_a=this.manager.baseColorScheme?ColorSchemes_1.ColorSchemes[this.manager.baseColorScheme]:void 0)&&void 0!==_a?_a:ColorSchemes_1.ColorSchemes["owid-distinct"]}},{key:"unstackedSeries",get:function get(){var _this4=this;return this.yColumns.map((function(col,i){var _a;return{seriesName:col.displayName,columnSlug:col.slug,color:null!==(_a=col.def.color)&&void 0!==_a?_a:_this4.colorScheme.getColors(_this4.yColumns.length)[i],points:col.owidRows.map((function(row){return{time:row.time,position:row.entityName,value:row.value,valueOffset:0}}))}})).filter((function(series){return series.points.length>0}))}},{key:"series",get:function get(){return StackedUtils_1.stackSeries(StackedUtils_1.withMissingValuesAsZeroes(this.unstackedSeries))}}],[{key:"Bar",value:function Bar(props){var bar=props.bar,chartContext=props.chartContext,tooltipProps=props.tooltipProps,yAxis=chartContext.yAxis,formatColumn=chartContext.formatColumn,focusSeriesName=chartContext.focusSeriesName,barHeight=chartContext.barHeight,isFaint=void 0!==focusSeriesName&&focusSeriesName!==bar.seriesName,barX=yAxis.place(chartContext.x0+bar.point.valueOffset),barWidth=yAxis.place(bar.point.value)-yAxis.place(chartContext.x0),magnitude=Util_1.numberMagnitude(bar.point.value),barLabel=formatColumn.formatValueShort(bar.point.value,{numDecimalPlaces:Math.max(0,2-magnitude)}),labelFontSize=.7*chartContext.baseFontSize,labelBounds=Bounds_1.Bounds.forText(barLabel,{fontSize:labelFontSize}),showLabelInsideBar=labelBounds.width<.85*barWidth&&labelBounds.height<.85*barHeight,labelColor=ColorUtils_1.isDarkColor(bar.color)?"#fff":"#000";return React.createElement(Tippy_1.TippyIfInteractive,{lazy:!0,isInteractive:chartContext.isInteractive,key:bar.seriesName,hideOnClick:!1,content:React.createElement(StackedDiscreteBarChart_1.Tooltip,Object.assign({},tooltipProps))},React.createElement("g",null,React.createElement("rect",{x:0,y:0,transform:"translate(".concat(barX,", ").concat(-barHeight/2,")"),width:barWidth,height:barHeight,fill:bar.color,opacity:isFaint?.1:.85,style:{transition:"height 200ms ease"}}),showLabelInsideBar&&React.createElement("text",{x:barX+barWidth/2,y:0,width:barWidth,height:barHeight,fill:labelColor,opacity:isFaint?0:1,fontSize:labelFontSize,textAnchor:"middle",dominantBaseline:"middle"},barLabel)))}},{key:"Tooltip",value:function Tooltip(props){var hasTimeNotice=!1,highlightedSeriesName=props.highlightedSeriesName,showTotal=!props.bars.some((function(bar){return bar.point.fake})),timeNoticeStyle={fontWeight:"normal",color:"#707070",fontSize:"0.8em",whiteSpace:"nowrap",paddingLeft:"8px"};return React.createElement("table",{style:{lineHeight:"1em",whiteSpace:"normal",borderSpacing:"0.5em"}},React.createElement("tbody",null,React.createElement("tr",null,React.createElement("td",{colSpan:4,style:{color:"#111"}},React.createElement("strong",null,props.label))),props.bars.map((function(bar){var squareColor=bar.color,isHighlighted=bar.seriesName===highlightedSeriesName,isFaint=null!==highlightedSeriesName&&!isHighlighted,shouldShowTimeNotice=!bar.point.fake&&bar.point.time!==props.targetTime;return hasTimeNotice||(hasTimeNotice=shouldShowTimeNotice),React.createElement("tr",{key:"".concat(bar.seriesName),style:{color:isHighlighted?"#000":isFaint?"#707070":"#444",fontWeight:isHighlighted?"bold":void 0}},React.createElement("td",null,React.createElement("div",{style:{width:"10px",height:"10px",backgroundColor:squareColor,display:"inline-block"}})),React.createElement("td",{style:{paddingRight:"0.8em",fontSize:"0.9em"}},bar.seriesName),React.createElement("td",{style:{textAlign:"right",whiteSpace:"nowrap"}},bar.point.fake?"No data":props.formatColumn.formatValueShort(bar.point.value,{noTrailingZeroes:!1})),shouldShowTimeNotice&&React.createElement("td",{style:timeNoticeStyle},React.createElement("span",{className:"icon"},React.createElement(react_fontawesome_1.FontAwesomeIcon,{icon:faInfoCircle_1.faInfoCircle,style:{marginRight:"0.25em"}})," "),props.timeColumn.formatValue(bar.point.time)))})),showTotal&&React.createElement("tr",{style:{color:"#000",fontWeight:highlightedSeriesName?void 0:"bold"}},React.createElement("td",null),React.createElement("td",{style:{paddingRight:"0.8em",fontSize:"0.9em"}},"Total"),React.createElement("td",{style:{textAlign:"right",whiteSpace:"nowrap"}},props.formatColumn.formatValueShort(Util_1.sum(props.bars.map((function(bar){return bar.point.value}))),{noTrailingZeroes:!1})),hasTimeNotice&&React.createElement("td",{style:timeNoticeStyle},React.createElement("span",{className:"icon"},React.createElement(react_fontawesome_1.FontAwesomeIcon,{icon:faInfoCircle_1.faInfoCircle})))),hasTimeNotice&&React.createElement("tr",null,React.createElement("td",{colSpan:4,style:Object.assign(Object.assign({},timeNoticeStyle),{paddingLeft:void 0,whiteSpace:void 0,paddingTop:"10px"})},React.createElement("div",{style:{display:"flex"}},React.createElement("span",{className:"icon",style:{marginRight:"0.5em"}},React.createElement(react_fontawesome_1.FontAwesomeIcon,{icon:faInfoCircle_1.faInfoCircle})," "),React.createElement("span",null,"No data available for"," ",props.timeColumn.formatValue(props.targetTime),". Showing closest available data point instead."))))))}}]),StackedDiscreteBarChart}(React.Component);__decorate([mobx_1.computed],StackedDiscreteBarChart.prototype,"sortConfig",null),__decorate([mobx_1.observable],StackedDiscreteBarChart.prototype,"focusSeriesName",void 0),__decorate([mobx_1.computed],StackedDiscreteBarChart.prototype,"inputTable",null),__decorate([mobx_1.computed],StackedDiscreteBarChart.prototype,"transformedTable",null),__decorate([mobx_1.computed],StackedDiscreteBarChart.prototype,"manager",null),__decorate([mobx_1.computed],StackedDiscreteBarChart.prototype,"bounds",null),__decorate([mobx_1.computed],StackedDiscreteBarChart.prototype,"baseFontSize",null),__decorate([mobx_1.computed],StackedDiscreteBarChart.prototype,"labelStyle",null),__decorate([mobx_1.computed],StackedDiscreteBarChart.prototype,"labelWidth",null),__decorate([mobx_1.computed],StackedDiscreteBarChart.prototype,"x0",null),__decorate([mobx_1.computed],StackedDiscreteBarChart.prototype,"allPoints",null),__decorate([mobx_1.computed],StackedDiscreteBarChart.prototype,"xDomainDefault",null),__decorate([mobx_1.computed],StackedDiscreteBarChart.prototype,"xRange",null),__decorate([mobx_1.computed],StackedDiscreteBarChart.prototype,"yAxisConfig",null),__decorate([mobx_1.computed],StackedDiscreteBarChart.prototype,"yAxis",null),__decorate([mobx_1.computed],StackedDiscreteBarChart.prototype,"innerBounds",null),__decorate([mobx_1.computed],StackedDiscreteBarChart.prototype,"selectionArray",null),__decorate([mobx_1.computed],StackedDiscreteBarChart.prototype,"items",null),__decorate([mobx_1.computed],StackedDiscreteBarChart.prototype,"sortedItems",null),__decorate([mobx_1.computed],StackedDiscreteBarChart.prototype,"barHeight",null),__decorate([mobx_1.computed],StackedDiscreteBarChart.prototype,"barSpacing",null),__decorate([mobx_1.computed],StackedDiscreteBarChart.prototype,"legendPaddingTop",null),__decorate([mobx_1.computed],StackedDiscreteBarChart.prototype,"legendX",null),__decorate([mobx_1.computed],StackedDiscreteBarChart.prototype,"categoryLegendY",null),__decorate([mobx_1.computed],StackedDiscreteBarChart.prototype,"legendWidth",null),__decorate([mobx_1.computed],StackedDiscreteBarChart.prototype,"legendAlign",null),__decorate([mobx_1.computed],StackedDiscreteBarChart.prototype,"fontSize",null),__decorate([mobx_1.computed],StackedDiscreteBarChart.prototype,"categoricalLegendData",null),__decorate([mobx_1.action.bound],StackedDiscreteBarChart.prototype,"onLegendMouseOver",null),__decorate([mobx_1.action.bound],StackedDiscreteBarChart.prototype,"onLegendMouseLeave",null),__decorate([mobx_1.computed],StackedDiscreteBarChart.prototype,"legend",null),__decorate([mobx_1.computed],StackedDiscreteBarChart.prototype,"formatColumn",null),__decorate([mobx_1.computed],StackedDiscreteBarChart.prototype,"failMessage",null),__decorate([mobx_1.computed],StackedDiscreteBarChart.prototype,"yColumnSlugs",null),__decorate([mobx_1.computed],StackedDiscreteBarChart.prototype,"yColumns",null),__decorate([mobx_1.computed],StackedDiscreteBarChart.prototype,"colorScheme",null),__decorate([mobx_1.computed],StackedDiscreteBarChart.prototype,"unstackedSeries",null),__decorate([mobx_1.computed],StackedDiscreteBarChart.prototype,"series",null),StackedDiscreteBarChart=StackedDiscreteBarChart_1=__decorate([mobx_react_1.observer],StackedDiscreteBarChart),exports.StackedDiscreteBarChart=StackedDiscreteBarChart},1031:function(module,exports,__webpack_require__){"use strict";function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(28),__webpack_require__(31),__webpack_require__(36),__webpack_require__(5),__webpack_require__(6),__webpack_require__(8),__webpack_require__(9),__webpack_require__(10),__webpack_require__(11),__webpack_require__(7),__webpack_require__(18),__webpack_require__(21),__webpack_require__(22),__webpack_require__(17),__webpack_require__(29);var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.FacetChart=void 0;var react_1=__importDefault(__webpack_require__(0)),mobx_react_1=__webpack_require__(58),Bounds_1=__webpack_require__(73),mobx_1=__webpack_require__(41),GrapherConstants_1=__webpack_require__(64),ChartTypeMap_1=__webpack_require__(474),FacetChartUtils_1=__webpack_require__(1867),ChartUtils_1=__webpack_require__(173),Util_1=__webpack_require__(40),owidTypes_1=__webpack_require__(122),AxisConfig_1=__webpack_require__(216),shouldHideFacetAxis=function shouldHideFacetAxis(axis,edges,sharedAxesSizes){return!!axis&&(axis.position in sharedAxesSizes&&!edges.has(axis.position))},FacetChart=function(_react_1$default$Comp){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(FacetChart,_react_1$default$Comp);var _super=_createSuper(FacetChart);function FacetChart(){return _classCallCheck(this,FacetChart),_super.apply(this,arguments)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(FacetChart,[{key:"transformTable",value:function transformTable(table){return table}},{key:"inputTable",get:function get(){return this.manager.table}},{key:"transformedTable",get:function get(){var _a;return null!==(_a=this.manager.transformedTable)&&void 0!==_a?_a:this.transformTable(this.inputTable)}},{key:"fontSize",get:function get(){return FacetChartUtils_1.getFontSize(this.series.length,this.manager.baseFontSize)}},{key:"yAxisConfig",get:function get(){return new AxisConfig_1.AxisConfig(this.manager.yAxisConfig,this)}},{key:"uniformYAxis",get:function get(){return this.yAxisConfig.facetDomain===GrapherConstants_1.FacetAxisDomain.shared}},{key:"uniformXAxis",get:function get(){return!0}},{key:"gridParams",get:function get(){var count=this.series.length,containerAspectRatio=this.bounds.width/this.bounds.height;return Util_1.getIdealGridParams({count:count,containerAspectRatio:containerAspectRatio,idealAspectRatio:owidTypes_1.IDEAL_PLOT_ASPECT_RATIO})}},{key:"intermediatePlacedSeries",get:function get(){var _this=this,manager=this.manager,series=this.series,count=series.length,baseFontSize=this.fontSize,gridBoundsArr=this.bounds.grid(this.gridParams,FacetChartUtils_1.getChartPadding(count,baseFontSize)),yColumnSlug=manager.yColumnSlug,xColumnSlug=manager.xColumnSlug,yColumnSlugs=manager.yColumnSlugs,colorColumnSlug=manager.colorColumnSlug,sizeColumnSlug=manager.sizeColumnSlug,isRelativeMode=manager.isRelativeMode,compactLabels=count>2,globalXAxisConfig={compactLabels:compactLabels},globalYAxisConfig={compactLabels:compactLabels};!this.uniformYAxis&&this.facetStrategy===GrapherConstants_1.FacetStrategy.entity&&(globalYAxisConfig.nice=!1);var table=this.transformedTable;return series.map((function(series,index){var _a,_b,_gridBoundsArr$index=gridBoundsArr[index],bounds=_gridBoundsArr$index.bounds,edges=_gridBoundsArr$index.edges,chartTypeName=null!==(_b=null!==(_a=series.chartTypeName)&&void 0!==_a?_a:_this.props.chartTypeName)&&void 0!==_b?_b:GrapherConstants_1.ChartTypeName.LineChart,hideLegend=!edges.has(owidTypes_1.Position.right);return{bounds:bounds,contentBounds:bounds,chartTypeName:chartTypeName,manager:Object.assign(Object.assign({table:table,baseFontSize:baseFontSize,hideLegend:hideLegend,hidePoints:!0,yColumnSlug:yColumnSlug,xColumnSlug:xColumnSlug,yColumnSlugs:yColumnSlugs,colorColumnSlug:colorColumnSlug,sizeColumnSlug:sizeColumnSlug,isRelativeMode:isRelativeMode},series.manager),{xAxisConfig:Object.assign(Object.assign(Object.assign({},globalXAxisConfig),_this.manager.xAxisConfig),series.manager.xAxisConfig),yAxisConfig:Object.assign(Object.assign(Object.assign({},globalYAxisConfig),_this.manager.yAxisConfig),series.manager.yAxisConfig)}),seriesName:series.seriesName,color:series.color}}))}},{key:"placedSeries",get:function get(){var chartInstances=this.intermediatePlacedSeries.map((function(_ref2){var _a,bounds=_ref2.bounds,manager=_ref2.manager,chartTypeName=_ref2.chartTypeName;return new(null!==(_a=ChartTypeMap_1.ChartComponentClassMap.get(chartTypeName))&&void 0!==_a?_a:ChartTypeMap_1.DefaultChartClass)({bounds:bounds,manager:manager})})),sharedAxesSizes={},axes={x:{config:{},axisAccessor:function axisAccessor(instance){return instance.xAxis},uniform:this.uniformXAxis,shared:!1},y:{config:{},axisAccessor:function axisAccessor(instance){return instance.yAxis},uniform:this.uniformYAxis,shared:this.uniformYAxis}};Util_1.values(axes).forEach((function(_ref3){var config=_ref3.config,axisAccessor=_ref3.axisAccessor,uniform=_ref3.uniform,shared=_ref3.shared,axisWithMaxSize=Util_1.maxBy(chartInstances.map(axisAccessor),(function(axis){return null==axis?void 0:axis.size}));if(uniform){var domains=Util_1.excludeUndefined(chartInstances.map(axisAccessor).map((function(axis){return null==axis?void 0:axis.domain})));if(config.min=Util_1.min(domains.map((function(d){return d[0]}))),config.max=Util_1.max(domains.map((function(d){return d[1]}))),axisWithMaxSize){var axis=axisWithMaxSize.clone(),size=axis.updateDomainPreservingUserSettings([config.min,config.max]).size;config.minSize=size,shared&&(sharedAxesSizes[axis.position]=size)}}else axisWithMaxSize&&(config.minSize=axisWithMaxSize.size)}));var fullBounds=this.bounds.pad(sharedAxesSizes),count=this.intermediatePlacedSeries.length,gridBoundsArr=fullBounds.grid(this.gridParams,FacetChartUtils_1.getChartPadding(count,this.fontSize));return this.intermediatePlacedSeries.map((function(series,i){var _step,chartInstance=chartInstances[i],xAxis=chartInstance.xAxis,yAxis=chartInstance.yAxis,_gridBoundsArr$i=gridBoundsArr[i],initialGridBounds=_gridBoundsArr$i.bounds,edges=_gridBoundsArr$i.edges,bounds=initialGridBounds,_iterator=_createForOfIteratorHelper(edges);try{for(_iterator.s();!(_step=_iterator.n()).done;){var edge=_step.value;bounds=bounds.expand(_defineProperty({},edge,sharedAxesSizes[edge]))}}catch(err){_iterator.e(err)}finally{_iterator.f()}var manager=Object.assign(Object.assign({},series.manager),{xAxisConfig:Object.assign(Object.assign({hideAxis:shouldHideFacetAxis(xAxis,edges,sharedAxesSizes)},series.manager.xAxisConfig),axes.x.config),yAxisConfig:Object.assign(Object.assign({hideAxis:shouldHideFacetAxis(yAxis,edges,sharedAxesSizes)},series.manager.yAxisConfig),axes.y.config)}),contentBounds=function getContentBounds(containerBounds,manager,chartInstance){for(var bounds=containerBounds,_i=0,_axes=[{config:manager.xAxisConfig,axis:chartInstance.xAxis},{config:manager.yAxisConfig,axis:chartInstance.yAxis}];_i<_axes.length;_i++){var _ref=_axes[_i],config=_ref.config,axis=_ref.axis;config&&axis&&(config.hideAxis||void 0===config.minSize||(bounds=bounds.pad(_defineProperty({},axis.position,config.minSize))))}return bounds}(bounds,manager,chartInstance);return Object.assign(Object.assign({},series),{bounds:bounds,contentBounds:contentBounds,manager:manager})}))}},{key:"selectionArray",get:function get(){return ChartUtils_1.makeSelectionArray(this.manager)}},{key:"entityFacets",get:function get(){var _this2=this,table=this.transformedTable.filterByEntityNames(this.selectionArray.selectedEntityNames);return this.selectionArray.selectedEntityNames.map((function(seriesName){var _a,manager={table:table.filterByEntityNames([seriesName]),selection:[seriesName],seriesStrategy:GrapherConstants_1.SeriesStrategy.column};return 1===(null===(_a=_this2.manager.yColumnSlugs)||void 0===_a?void 0:_a.length)&&(manager.hideLegend=!0),{seriesName:seriesName,color:"transparent",manager:manager}}))}},{key:"columnFacets",get:function get(){var _this3=this;return this.yColumns.map((function(col){return{seriesName:col.displayName,color:"transparent",manager:{selection:_this3.selectionArray,yColumnSlug:col.slug,yColumnSlugs:[col.slug],seriesStrategy:GrapherConstants_1.SeriesStrategy.entity}}}))}},{key:"yColumns",get:function get(){var _this4=this;return this.yColumnSlugs.map((function(slug){return _this4.inputTable.get(slug)}))}},{key:"yColumnSlugs",get:function get(){return ChartUtils_1.autoDetectYColumnSlugs(this.manager)}},{key:"facetStrategy",get:function get(){var _a;return null!==(_a=this.manager.facetStrategy)&&void 0!==_a?_a:GrapherConstants_1.FacetStrategy.none}},{key:"series",get:function get(){return this.facetStrategy===GrapherConstants_1.FacetStrategy.column?this.columnFacets:this.entityFacets}},{key:"bounds",get:function get(){var _a;return(null!==(_a=this.props.bounds)&&void 0!==_a?_a:Bounds_1.DEFAULT_BOUNDS).padTop(this.fontSize+10)}},{key:"manager",get:function get(){return this.props.manager}},{key:"failMessage",get:function get(){return""}},{key:"render",value:function render(){var fontSize=this.fontSize;return this.placedSeries.map((function(smallChart,index){var _a,ChartClass=null!==(_a=ChartTypeMap_1.ChartComponentClassMap.get(smallChart.chartTypeName))&&void 0!==_a?_a:ChartTypeMap_1.DefaultChartClass,bounds=smallChart.bounds,contentBounds=smallChart.contentBounds,seriesName=smallChart.seriesName,shiftTop=.9*fontSize;return react_1.default.createElement(react_1.default.Fragment,{key:index},react_1.default.createElement("text",{x:contentBounds.x,y:contentBounds.top-shiftTop,fill:"#1d3d63",fontSize:fontSize,style:{fontWeight:700}},seriesName),react_1.default.createElement(ChartClass,{bounds:bounds,manager:smallChart.manager}))}))}}]),FacetChart}(react_1.default.Component);__decorate([mobx_1.computed],FacetChart.prototype,"inputTable",null),__decorate([mobx_1.computed],FacetChart.prototype,"transformedTable",null),__decorate([mobx_1.computed],FacetChart.prototype,"fontSize",null),__decorate([mobx_1.computed],FacetChart.prototype,"yAxisConfig",null),__decorate([mobx_1.computed],FacetChart.prototype,"uniformYAxis",null),__decorate([mobx_1.computed],FacetChart.prototype,"uniformXAxis",null),__decorate([mobx_1.computed],FacetChart.prototype,"gridParams",null),__decorate([mobx_1.computed],FacetChart.prototype,"intermediatePlacedSeries",null),__decorate([mobx_1.computed],FacetChart.prototype,"placedSeries",null),__decorate([mobx_1.computed],FacetChart.prototype,"selectionArray",null),__decorate([mobx_1.computed],FacetChart.prototype,"entityFacets",null),__decorate([mobx_1.computed],FacetChart.prototype,"columnFacets",null),__decorate([mobx_1.computed],FacetChart.prototype,"yColumns",null),__decorate([mobx_1.computed],FacetChart.prototype,"yColumnSlugs",null),__decorate([mobx_1.computed],FacetChart.prototype,"facetStrategy",null),__decorate([mobx_1.computed],FacetChart.prototype,"series",null),__decorate([mobx_1.computed],FacetChart.prototype,"bounds",null),__decorate([mobx_1.computed],FacetChart.prototype,"manager",null),__decorate([mobx_1.computed],FacetChart.prototype,"failMessage",null),FacetChart=__decorate([mobx_react_1.observer],FacetChart),exports.FacetChart=FacetChart},1032:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(28),__webpack_require__(36),__webpack_require__(22),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(18),__webpack_require__(21);var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.numItemsVisible=exports.MoreButton=exports.CollapsibleList=void 0;var react_1=__importDefault(__webpack_require__(0)),mobx_1=__webpack_require__(41),mobx_react_1=__webpack_require__(58),Util_1=__webpack_require__(40),Tippy_1=__webpack_require__(392),react_fontawesome_1=__webpack_require__(123),faCog_1=__webpack_require__(1868),CollapsibleList=function(_react_1$default$Comp){_inherits(CollapsibleList,_react_1$default$Comp);var _super=_createSuper(CollapsibleList);function CollapsibleList(){var _this;return _classCallCheck(this,CollapsibleList),(_this=_super.apply(this,arguments)).outerContainerRef=react_1.default.createRef(),_this.moreButtonRef=react_1.default.createRef(),_this.outerContainerWidth=0,_this.moreButtonWidth=0,_this.itemsWidths=[],_this.onResize=Util_1.throttle((function(){_this.updateItemVisibility()}),100),_this}return _createClass(CollapsibleList,[{key:"children",get:function get(){var _a;return null!==(_a=react_1.default.Children.map(this.props.children,(function(child,i){return{index:i,child:child}})))&&void 0!==_a?_a:[]}},{key:"updateOuterContainerWidth",value:function updateOuterContainerWidth(){var _a,_b;this.outerContainerWidth=null!==(_b=null===(_a=this.outerContainerRef.current)||void 0===_a?void 0:_a.clientWidth)&&void 0!==_b?_b:0}},{key:"calculateItemWidths",value:function calculateItemWidths(){var _a,_this2=this;this.itemsWidths=[],null===(_a=this.outerContainerRef.current)||void 0===_a||_a.querySelectorAll(".list-item.visible, .list-item.hidden").forEach((function(item){return _this2.itemsWidths.push(item.clientWidth)}))}},{key:"updateNumItemsVisible",value:function updateNumItemsVisible(){var numItemsVisibleWithoutMoreButton=numItemsVisible(this.itemsWidths,this.outerContainerWidth);this.numItemsVisible=numItemsVisibleWithoutMoreButton>=this.children.length?numItemsVisibleWithoutMoreButton:numItemsVisible(this.itemsWidths,this.outerContainerWidth,this.moreButtonWidth)}},{key:"visibleItems",get:function get(){return this.children.slice(0,this.numItemsVisible)}},{key:"dropdownItems",get:function get(){return this.children.slice(this.numItemsVisible)}},{key:"updateItemVisibility",value:function updateItemVisibility(){this.updateOuterContainerWidth(),this.updateNumItemsVisible()}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.calculateItemWidths(),this.updateItemVisibility()}},{key:"componentDidMount",value:function componentDidMount(){var _a,_b;window.addEventListener("resize",this.onResize),this.moreButtonWidth=null!==(_b=null===(_a=this.moreButtonRef.current)||void 0===_a?void 0:_a.clientWidth)&&void 0!==_b?_b:0,this.calculateItemWidths(),this.updateItemVisibility()}},{key:"componentWillUnmount",value:function componentWillUnmount(){window.removeEventListener("resize",this.onResize)}},{key:"render",value:function render(){return react_1.default.createElement("div",{className:"collapsibleList",ref:this.outerContainerRef},react_1.default.createElement("ul",null,this.visibleItems.map((function(item){return react_1.default.createElement("li",{key:item.index,className:"list-item visible"},item.child)})),react_1.default.createElement("li",{className:"list-item moreButton",ref:this.moreButtonRef,style:{visibility:this.dropdownItems.length?"visible":"hidden"}},react_1.default.createElement(MoreButton,{options:this.dropdownItems.map((function(item){return react_1.default.createElement("li",{key:item.index,className:"list-item dropdown"},item.child)}))})),this.dropdownItems.map((function(item){return react_1.default.createElement("li",{key:item.index,className:"list-item hidden"},item.child)}))))}}]),CollapsibleList}(react_1.default.Component);__decorate([mobx_1.observable],CollapsibleList.prototype,"numItemsVisible",void 0),__decorate([mobx_1.action],CollapsibleList.prototype,"updateNumItemsVisible",null),__decorate([mobx_1.action],CollapsibleList.prototype,"onResize",void 0),__decorate([mobx_1.action],CollapsibleList.prototype,"updateItemVisibility",null),CollapsibleList=__decorate([mobx_react_1.observer],CollapsibleList),exports.CollapsibleList=CollapsibleList;var MoreButton=function(_react_1$default$Comp2){_inherits(MoreButton,_react_1$default$Comp2);var _super2=_createSuper(MoreButton);function MoreButton(){return _classCallCheck(this,MoreButton),_super2.apply(this,arguments)}return _createClass(MoreButton,[{key:"render",value:function render(){var options=this.props.options;return react_1.default.createElement(Tippy_1.Tippy,{content:options,interactive:!0,trigger:"click",placement:"bottom"},react_1.default.createElement("span",null,react_1.default.createElement(react_fontawesome_1.FontAwesomeIcon,{icon:faCog_1.faCog}),"Â More"))}}]),MoreButton}(react_1.default.Component);function numItemsVisible(itemWidths,containerWidth){for(var startingWidth=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,total=startingWidth,i=0;i<itemWidths.length;i++){if(total+itemWidths[i]>containerWidth)return i;total+=itemWidths[i]}return itemWidths.length}exports.MoreButton=MoreButton,exports.numItemsVisible=numItemsVisible,MoreButton.__docgenInfo={description:"",methods:[],displayName:"MoreButton"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["itsJustJavascript/grapher/controls/CollapsibleList/CollapsibleList.js"]={name:"MoreButton",docgenInfo:MoreButton.__docgenInfo,path:"itsJustJavascript/grapher/controls/CollapsibleList/CollapsibleList.js"})},1033:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(18),__webpack_require__(21);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ScaleSelector=void 0;var React=__importStar(__webpack_require__(0)),mobx_1=__webpack_require__(41),mobx_react_1=__webpack_require__(58),GrapherConstants_1=__webpack_require__(64),classnames_1=__importDefault(__webpack_require__(139)),Util_1=__webpack_require__(40),ScaleSelector=function(_React$Component){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(ScaleSelector,_React$Component);var _super=_createSuper(ScaleSelector);function ScaleSelector(){return _classCallCheck(this,ScaleSelector),_super.apply(this,arguments)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(ScaleSelector,[{key:"onClick",value:function onClick(){var _a,_b,manager=null!==(_a=this.props.manager)&&void 0!==_a?_a:{};manager.scaleType=Util_1.next([GrapherConstants_1.ScaleType.linear,GrapherConstants_1.ScaleType.log],null!==(_b=manager.scaleType)&&void 0!==_b?_b:GrapherConstants_1.ScaleType.linear)}},{key:"render",value:function render(){var _this$props=this.props,manager=_this$props.manager,prefix=_this$props.prefix,scaleType=(null!=manager?manager:{}).scaleType;return React.createElement("span",{onClick:this.onClick,className:classnames_1.default(["clickable","toggleSwitch"])},React.createElement("span",{"data-track-note":"chart-toggle-scale",className:"leftToggle "+(scaleType===GrapherConstants_1.ScaleType.linear?"activeToggle":"")},prefix,"Linear"),React.createElement("span",{"data-track-note":"chart-toggle-scale",className:"rightToggle "+(scaleType===GrapherConstants_1.ScaleType.log?"activeToggle":"")},prefix,"Log"))}}]),ScaleSelector}(React.Component);__decorate([mobx_1.action.bound],ScaleSelector.prototype,"onClick",null),ScaleSelector=__decorate([mobx_react_1.observer],ScaleSelector),exports.ScaleSelector=ScaleSelector},1034:function(module,exports,__webpack_require__){"use strict";function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}__webpack_require__(106),__webpack_require__(5);var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.TimelineController=void 0;var TimeBounds_1=__webpack_require__(387),Util_1=__webpack_require__(40),delay=function delay(ms){return new Promise((function(resolve){return setTimeout(resolve,ms)}))},TimelineController=function(){function TimelineController(manager){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TimelineController),this.rangeMode=!0,this.dragOffsets=[0,0],this.manager=manager}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(TimelineController,[{key:"timesAsc",get:function get(){return this.manager.times}},{key:"startTime",get:function get(){return Util_1.findClosestTime(this.timesAsc,this.manager.startHandleTimeBound)}},{key:"endTime",get:function get(){return Util_1.findClosestTime(this.timesAsc,this.manager.endHandleTimeBound)}},{key:"minTime",get:function get(){return this.timesAsc[0]}},{key:"maxTime",get:function get(){return Util_1.last(this.timesAsc)}},{key:"startTimeProgress",get:function get(){return(this.startTime-this.minTime)/(this.maxTime-this.minTime)}},{key:"endTimeProgress",get:function get(){return(this.endTime-this.minTime)/(this.maxTime-this.minTime)}},{key:"getNextTime",value:function getNextTime(time){var _a;return null!==(_a=this.timesAsc[this.timesAsc.indexOf(time)+1])&&void 0!==_a?_a:this.maxTime}},{key:"toggleRangeMode",value:function toggleRangeMode(){return this.rangeMode=!this.rangeMode,this}},{key:"isAtEnd",value:function isAtEnd(){return this.endTime===this.maxTime}},{key:"resetToBeginning",value:function resetToBeginning(){var manager=this.manager,beginning=manager.endHandleTimeBound!==manager.startHandleTimeBound?manager.startHandleTimeBound:this.minTime;manager.endHandleTimeBound=beginning,manager.startHandleTimeBound=beginning}},{key:"play",value:function play(numberOfTicks){var _a;return __awaiter(this,void 0,void 0,regeneratorRuntime.mark((function _callee(){var manager,tickCount,nextTime;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:(manager=this.manager).isPlaying=!0,this.isAtEnd()&&this.resetToBeginning(),manager.onPlay&&manager.onPlay(),tickCount=0;case 5:if(!manager.isPlaying){_context.next=17;break}if(nextTime=this.getNextTime(this.endTime),this.rangeMode||this.updateStartTime(nextTime),this.updateEndTime(nextTime),tickCount++,!(nextTime>=this.maxTime||numberOfTicks===tickCount)){_context.next=13;break}return this.stop(),_context.abrupt("break",17);case 13:return _context.next=15,delay(null!==(_a=manager.msPerTick)&&void 0!==_a?_a:0);case 15:_context.next=5;break;case 17:return _context.abrupt("return",tickCount);case 18:case"end":return _context.stop()}}),_callee,this)})))}},{key:"stop",value:function stop(){this.manager.isPlaying=!1}},{key:"pause",value:function pause(){this.manager.isPlaying=!1}},{key:"togglePlay",value:function togglePlay(){return __awaiter(this,void 0,void 0,regeneratorRuntime.mark((function _callee2(){return regeneratorRuntime.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!this.manager.isPlaying){_context2.next=4;break}this.pause(),_context2.next=6;break;case 4:return _context2.next=6,this.play();case 6:case"end":return _context2.stop()}}),_callee2,this)})))}},{key:"setDragOffsets",value:function setDragOffsets(inputTime){var _a,closestTime=null!==(_a=Util_1.findClosestTime(this.timesAsc,inputTime))&&void 0!==_a?_a:inputTime;this.dragOffsets=[this.startTime-closestTime,this.endTime-closestTime]}},{key:"getTimeBoundFromDrag",value:function getTimeBoundFromDrag(inputTime){var _a;if(inputTime<this.minTime)return TimeBounds_1.TimeBoundValue.negativeInfinity;if(inputTime>this.maxTime)return TimeBounds_1.TimeBoundValue.positiveInfinity;var closestTime=null!==(_a=Util_1.findClosestTime(this.timesAsc,inputTime))&&void 0!==_a?_a:inputTime;return Math.min(this.maxTime,Math.max(this.minTime,closestTime))}},{key:"dragRangeToTime",value:function dragRangeToTime(time){var _a,minTime=this.minTime,maxTime=this.maxTime,closestTime=null!==(_a=Util_1.findClosestTime(this.timesAsc,time))&&void 0!==_a?_a:time,startTime=this.dragOffsets[0]+closestTime,endTime=this.dragOffsets[1]+closestTime;startTime<minTime?(startTime=minTime,endTime=this.getTimeBoundFromDrag(minTime+(this.dragOffsets[1]-this.dragOffsets[0]))):endTime>maxTime&&(startTime=this.getTimeBoundFromDrag(maxTime+(this.dragOffsets[0]-this.dragOffsets[1])),endTime=maxTime),this.updateStartTime(startTime),this.updateEndTime(endTime)}},{key:"dragHandleToTime",value:function dragHandleToTime(handle,inputTime){var manager=this.manager,time=this.getTimeBoundFromDrag(inputTime),constrainedHandle="start"===handle&&time>this.endTime?"end":"end"===handle&&time<this.startTime?"start":handle;return constrainedHandle!==handle&&("start"===handle?this.updateStartTime(manager.endHandleTimeBound):this.updateEndTime(manager.startHandleTimeBound)),manager.isPlaying&&!this.rangeMode?(this.updateStartTime(time),this.updateEndTime(time)):"both"===handle?this.dragRangeToTime(inputTime):"start"===constrainedHandle?this.updateStartTime(time):"end"===constrainedHandle&&this.updateEndTime(time),constrainedHandle}},{key:"updateStartTime",value:function updateStartTime(timeBound){this.manager.startHandleTimeBound=timeBound}},{key:"updateEndTime",value:function updateEndTime(timeBound){this.manager.endHandleTimeBound=timeBound}},{key:"resetStartToMin",value:function resetStartToMin(){this.updateStartTime(TimeBounds_1.TimeBoundValue.negativeInfinity)}},{key:"resetEndToMax",value:function resetEndToMax(){this.updateEndTime(TimeBounds_1.TimeBoundValue.positiveInfinity)}}]),TimelineController}();exports.TimelineController=TimelineController},1035:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}__webpack_require__(106),__webpack_require__(5),__webpack_require__(31),__webpack_require__(62),__webpack_require__(32);var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.GrapherAnalytics=void 0;var Categories,EventNames,Util_1=__webpack_require__(40);!function(Categories){Categories.GrapherError="GrapherErrors",Categories.GrapherUsage="GrapherUsage",Categories.GlobalEntitySelectorUsage="GlobalEntitySelector",Categories.SiteClick="SiteClick",Categories.KeyboardShortcut="KeyboardShortcut"}(Categories||(Categories={})),function(EventNames){EventNames.grapherViewError="GRAPHER_VIEW_ERROR",EventNames.entitiesNotFound="ENTITIES_NOT_FOUND",EventNames.timelinePlay="TimelinePlay"}(EventNames||(EventNames={}));var GrapherAnalytics=function(){function GrapherAnalytics(){var environment=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",version=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1.0.0";_classCallCheck(this,GrapherAnalytics),this.isDev="development"===environment,this.version=version}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(GrapherAnalytics,[{key:"logGrapherViewError",value:function logGrapherViewError(error,info){this.logToAmplitude(EventNames.grapherViewError,{error:error,info:info}),this.logToGA(Categories.GrapherError,EventNames.grapherViewError)}},{key:"logEntitiesNotFoundError",value:function logEntitiesNotFoundError(entities){this.logToAmplitude(EventNames.entitiesNotFound,{entities:entities}),this.logToGA(Categories.GrapherError,EventNames.entitiesNotFound,JSON.stringify(entities))}},{key:"logGrapherTimelinePlay",value:function logGrapherTimelinePlay(slug){this.logToGA(Categories.GrapherUsage,EventNames.timelinePlay,slug)}},{key:"logGlobalEntitySelector",value:function logGlobalEntitySelector(action,note){this.logToGA(Categories.GlobalEntitySelectorUsage,action,note)}},{key:"logEntityPickerEvent",value:function logEntityPickerEvent(pickerSlug,action,note){this.logToGA("".concat(pickerSlug,"ExplorerCountrySelectorUsage"),action,note)}},{key:"logSiteClick",value:function logSiteClick(){var action=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"unknown-action",label=arguments.length>1?arguments[1]:void 0;this.logToGA(Categories.SiteClick,action,label)}},{key:"logKeyboardShortcut",value:function logKeyboardShortcut(shortcut,combo){this.logToGA(Categories.KeyboardShortcut,shortcut,combo)}},{key:"startClickTracking",value:function startClickTracking(){var _this=this;document.addEventListener("click",(function(ev){return __awaiter(_this,void 0,void 0,regeneratorRuntime.mark((function _callee(){var targetElement,trackedElement;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(targetElement=ev.target,trackedElement=Util_1.findDOMParent(targetElement,(function(el){return null!==el.getAttribute("data-track-note")}))){_context.next=4;break}return _context.abrupt("return");case 4:this.logSiteClick(trackedElement.getAttribute("data-track-note")||void 0,trackedElement.innerText);case 5:case"end":return _context.stop()}}),_callee,this)})))}))}},{key:"logToAmplitude",value:function logToAmplitude(name,props){var allProps=Object.assign({context:{siteVersion:this.version,pageHref:window.location.href,pagePath:window.location.pathname,pageTitle:document.title.replace(/ - [^-]+/,"")}},props);window.amplitude&&window.amplitude.getInstance().logEvent(name,allProps)}},{key:"logToGA",value:function logToGA(eventCategory,eventAction,eventLabel,eventValue){var event={hitType:"event",eventCategory:eventCategory,eventAction:eventAction,eventLabel:eventLabel,eventValue:eventValue};window.ga&&window.ga((function(){var tracker=window.ga.getAll()[0];tracker&&tracker.send(event)}))}}]),GrapherAnalytics}();exports.GrapherAnalytics=GrapherAnalytics},1036:function(module,exports,__webpack_require__){"use strict";(function(__dirname){__webpack_require__(25);var _a,_b,_c,_d,_e,_f,_g,_h,_j,_k,_l,__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.RECAPTCHA_SITE_KEY=exports.DONATE_API_URL=exports.STRIPE_PUBLIC_KEY=exports.ALGOLIA_SEARCH_KEY=exports.ALGOLIA_ID=exports.WORDPRESS_URL=exports.ADMIN_BASE_URL=exports.BAKED_GRAPHER_URL=exports.BAKED_BASE_URL=exports.ADMIN_SERVER_HOST=exports.ADMIN_SERVER_PORT=exports.BUGSNAG_API_KEY=exports.ENV=void 0;var dotenv_1=__importDefault(__webpack_require__(1872)),baseDir=__importDefault(__webpack_require__(1873)).default(__dirname);baseDir&&dotenv_1.default.config({path:"".concat(baseDir,"/.env")});var Util_1=__webpack_require__(40);exports.ENV="production"===Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).ENV?"production":"development",exports.BUGSNAG_API_KEY=Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).BUGSNAG_API_KEY,exports.ADMIN_SERVER_PORT=null!==(_a=Util_1.parseIntOrUndefined(Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).ADMIN_SERVER_PORT))&&void 0!==_a?_a:3030,exports.ADMIN_SERVER_HOST=null!==(_b=Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).ADMIN_SERVER_HOST)&&void 0!==_b?_b:"localhost",exports.BAKED_BASE_URL=null!==(_c=Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).BAKED_BASE_URL)&&void 0!==_c?_c:"http://".concat(exports.ADMIN_SERVER_HOST,":").concat(exports.ADMIN_SERVER_PORT),exports.BAKED_GRAPHER_URL=null!==(_d=Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).BAKED_GRAPHER_URL)&&void 0!==_d?_d:"".concat(exports.BAKED_BASE_URL,"/grapher"),exports.ADMIN_BASE_URL=null!==(_e=Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).ADMIN_BASE_URL)&&void 0!==_e?_e:"http://".concat(exports.ADMIN_SERVER_HOST,":").concat(exports.ADMIN_SERVER_PORT),exports.WORDPRESS_URL=null!==(_f=Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).WORDPRESS_URL)&&void 0!==_f?_f:"",exports.ALGOLIA_ID=null!==(_g=Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).ALGOLIA_ID)&&void 0!==_g?_g:"",exports.ALGOLIA_SEARCH_KEY=null!==(_h=Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).ALGOLIA_SEARCH_KEY)&&void 0!==_h?_h:"",exports.STRIPE_PUBLIC_KEY=null!==(_j=Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).STRIPE_PUBLIC_KEY)&&void 0!==_j?_j:"pk_test_nIHvmH37zsoltpw3xMssPIYq",exports.DONATE_API_URL=null!==(_k=Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).DONATE_API_URL)&&void 0!==_k?_k:"http://localhost:9000/donate",exports.RECAPTCHA_SITE_KEY=null!==(_l=Object({NODE_ENV:"production",NODE_PATH:[],STORYBOOK:"true",PUBLIC_URL:"."}).RECAPTCHA_SITE_KEY)&&void 0!==_l?_l:"6LcJl5YUAAAAAATQ6F4vl9dAWRZeKPBm15MAZj4Q"}).call(this,"/")},1039:function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=arr&&("undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"]);if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(28),__webpack_require__(17),__webpack_require__(22),__webpack_require__(75),__webpack_require__(5),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(197),__webpack_require__(32),__webpack_require__(25),__webpack_require__(48),__webpack_require__(55),__webpack_require__(103),__webpack_require__(33),__webpack_require__(79),__webpack_require__(57),__webpack_require__(9),__webpack_require__(10),__webpack_require__(11),__webpack_require__(18),__webpack_require__(21),__webpack_require__(29);var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.EntityPicker=void 0;var FocusDirection,react_1=__importDefault(__webpack_require__(0)),mobx_1=__webpack_require__(41),mobx_react_1=__webpack_require__(58),react_flip_toolkit_1=__webpack_require__(1943),decko_1=__webpack_require__(601),classnames_1=__importDefault(__webpack_require__(139)),d3_scale_1=__webpack_require__(279),react_select_1=__importDefault(__webpack_require__(477)),react_fontawesome_1=__webpack_require__(123),faSearch_1=__webpack_require__(1878),faTimes_1=__webpack_require__(473),FuzzySearch_1=__webpack_require__(1e3),Util_1=__webpack_require__(40),VerticalScrollContainer_1=__webpack_require__(1879),SortIcon_1=__webpack_require__(1011),CoreTableConstants_1=__webpack_require__(276),react_select_2=__webpack_require__(592),CoreTableColumns_1=__webpack_require__(466),OwidTableConstants_1=__webpack_require__(172);!function(FocusDirection){FocusDirection.first="first",FocusDirection.last="last",FocusDirection.up="up",FocusDirection.down="down"}(FocusDirection||(FocusDirection={}));var EntityPicker=function(_react_1$default$Comp){_inherits(EntityPicker,_react_1$default$Comp);var _super=_createSuper(EntityPicker);function EntityPicker(){var _this;return _classCallCheck(this,EntityPicker),(_this=_super.apply(this,arguments)).searchInputRef=react_1.default.createRef(),_this.focusRef=react_1.default.createRef(),_this.scrollFocusedIntoViewOnUpdate=!1,_this.blockOptionHover=!1,_this.scrollContainerRef=react_1.default.createRef(),_this.isOpen=!1,_this}return _createClass(EntityPicker,[{key:"analyticsNamespace",get:function get(){var _a;return null!==(_a=this.manager.analyticsNamespace)&&void 0!==_a?_a:""}},{key:"isDropdownMenu",get:function get(){return!!this.props.isDropdownMenu}},{key:"selectEntity",value:function selectEntity(name,checked){var _a;this.manager.selection.toggleSelection(name),this.searchInput="",null===(_a=this.manager.analytics)||void 0===_a||_a.logEntityPickerEvent(this.analyticsNamespace,checked?"select":"deselect",name)}},{key:"manager",get:function get(){return this.props.manager}},{key:"metric",get:function get(){return this.manager.entityPickerMetric}},{key:"sortOrder",get:function get(){var _a;return this.isDropdownMenu?CoreTableConstants_1.SortOrder.asc:null!==(_a=this.manager.entityPickerSort)&&void 0!==_a?_a:CoreTableConstants_1.SortOrder.asc}},{key:"pickerColumnDefs",get:function get(){var _a;return null!==(_a=this.manager.entityPickerColumnDefs)&&void 0!==_a?_a:[]}},{key:"metricOptions",get:function get(){return this.pickerColumnDefs.map((function(col){return{label:col.name||col.slug,value:col.slug}}))}},{key:"activePickerMetricColumn",get:function get(){var _a;if(this.metric)return null===(_a=this.manager.entityPickerTable)||void 0===_a?void 0:_a.getColumns([this.metric])[0]}},{key:"availableEntitiesForCurrentView",get:function get(){var _a;return(null===(_a=this.manager.requiredColumnSlugs)||void 0===_a?void 0:_a.length)&&this.grapherTable?this.grapherTable.entitiesWith(this.manager.requiredColumnSlugs):this.selection.availableEntityNameSet}},{key:"entitiesWithMetricValue",get:function get(){var pickerTable=this.pickerTable,selection=this.selection,col=this.activePickerMetricColumn;return selection.availableEntityNames.slice().sort().map((function(entityName){var plotValue=col&&pickerTable?pickerTable.getLatestValueForEntity(entityName,col.slug):void 0;return{entityName:entityName,plotValue:plotValue,formattedValue:void 0!==plotValue?null==col?void 0:col.formatValueShortWithAbbreviations(plotValue):void 0}}))}},{key:"grapherTable",get:function get(){return this.manager.grapherTable}},{key:"pickerTable",get:function get(){return this.manager.entityPickerTable}},{key:"selection",get:function get(){return this.manager.selection}},{key:"selectionSet",get:function get(){return new Set(this.selection.selectedEntityNames)}},{key:"fuzzy",get:function get(){return new FuzzySearch_1.FuzzySearch(this.entitiesWithMetricValue,OwidTableConstants_1.OwidTableSlugs.entityName)}},{key:"searchResults",get:function get(){if(this.searchInput)return this.fuzzy.search(this.searchInput);var selectionSet=this.selectionSet,_Util_1$partition2=_slicedToArray(Util_1.partition(Util_1.sortByUndefinedLast(this.entitiesWithMetricValue,(function(option){return option.plotValue}),this.sortOrder),(function(option){return selectionSet.has(option.entityName)})),2),selected=_Util_1$partition2[0],unselected=_Util_1$partition2[1];return[].concat(_toConsumableArray(selected),_toConsumableArray(unselected))}},{key:"normalizeFocusIndex",value:function normalizeFocusIndex(index){if(0!==this.searchResults.length)return function mod(n,m){return(n%m+m)%m}(index,this.searchResults.length)}},{key:"focusedOption",get:function get(){return void 0!==this.focusIndex?this.searchResults[this.focusIndex].entityName:void 0}},{key:"showDoneButton",get:function get(){return this.isDropdownMenu&&this.isOpen}},{key:"focusOptionDirection",value:function focusOptionDirection(direction){if(direction===FocusDirection.first)this.focusIndex=this.normalizeFocusIndex(0);else if(direction===FocusDirection.last)this.focusIndex=this.normalizeFocusIndex(-1);else if(direction===FocusDirection.up){var newIndex=void 0===this.focusIndex?-1:this.focusIndex-1;this.focusIndex=this.normalizeFocusIndex(newIndex)}else{if(direction!==FocusDirection.down)return;var _newIndex=void 0===this.focusIndex?0:this.focusIndex+1;this.focusIndex=this.normalizeFocusIndex(_newIndex)}this.scrollFocusedIntoViewOnUpdate=!0}},{key:"clearSearchInput",value:function clearSearchInput(){this.searchInput&&(this.searchInput="")}},{key:"onKeyDown",value:function onKeyDown(event){var _a;switch(this.blockHover(),event.key){case"Enter":if(229===event.keyCode)break;if(!this.focusedOption)return;var name=this.focusedOption;this.selectEntity(name),this.clearSearchInput(),null===(_a=this.manager.analytics)||void 0===_a||_a.logEntityPickerEvent(this.analyticsNamespace,"enter",name);break;case"ArrowUp":this.focusOptionDirection(FocusDirection.up);break;case"ArrowDown":this.focusOptionDirection(FocusDirection.down);break;default:return}event.preventDefault()}},{key:"focusSearch",value:function focusSearch(){var _a;null===(_a=this.searchInputRef.current)||void 0===_a||_a.focus()}},{key:"onSearchFocus",value:function onSearchFocus(){this.isOpen=!0,void 0===this.focusIndex&&this.focusOptionDirection(FocusDirection.first)}},{key:"onSearchBlur",value:function onSearchBlur(){this.scrollContainerRef.current&&this.scrollContainerRef.current.contains(document.activeElement)?this.focusSearch():(this.isOpen=!1,this.focusIndex=void 0)}},{key:"onHover",value:function onHover(index){this.blockOptionHover||(this.focusIndex=index)}},{key:"blockHover",value:function blockHover(){this.blockOptionHover=!0}},{key:"unblockHover",value:function unblockHover(){this.blockOptionHover=!1}},{key:"onMenuMouseDown",value:function onMenuMouseDown(event){event.stopPropagation(),event.preventDefault(),this.focusSearch()}},{key:"highlightLabel",value:function highlightLabel(label){if(!this.searchInput)return label;var result=this.fuzzy.single(this.searchInput,label);if(!result)return label;for(var tokens=[],i=0;i<result.target.length;i++){var currentToken=Util_1.last(tokens),match=result.indexes.includes(i),char=result.target[i];currentToken&&currentToken.match===match?currentToken.text+=char:tokens.push({match:match,text:char})}return react_1.default.createElement(react_1.default.Fragment,null,tokens.map((function(token,i){return token.match?react_1.default.createElement("mark",{key:i},token.text):react_1.default.createElement(react_1.default.Fragment,{key:i},token.text)})))}},{key:"barScale",get:function get(){var maxValue=Util_1.max(this.entitiesWithMetricValue.map((function(option){return option.plotValue})).filter(Util_1.isNumber));return d3_scale_1.scaleLinear().domain([0,null!=maxValue?maxValue:1]).range([0,1])}},{key:"componentDidMount",value:function componentDidMount(){var _this2=this;mobx_1.reaction((function(){return _this2.searchInput}),(function(){return _this2.focusOptionDirection(FocusDirection.first)}))}},{key:"componentDidUpdate",value:function componentDidUpdate(){var _this3=this;void 0!==this.focusIndex&&this.scrollFocusedIntoViewOnUpdate&&this.scrollContainerRef.current&&this.focusRef.current&&(Util_1.scrollIntoViewIfNeeded(this.scrollContainerRef.current,this.focusRef.current),mobx_1.runInAction((function(){return _this3.scrollFocusedIntoViewOnUpdate=!1})))}},{key:"updateMetric",value:function updateMetric(columnSlug){var _a,_b,_c;null===(_b=(_a=this.manager).setEntityPicker)||void 0===_b||_b.call(_a,{metric:columnSlug,sort:this.isActivePickerColumnTypeNumeric?CoreTableConstants_1.SortOrder.desc:CoreTableConstants_1.SortOrder.asc}),null===(_c=this.manager.analytics)||void 0===_c||_c.logEntityPickerEvent(this.analyticsNamespace,"sortBy",columnSlug)}},{key:"isActivePickerColumnTypeNumeric",get:function get(){return this.activePickerMetricColumn instanceof CoreTableColumns_1.ColumnTypeMap.Numeric}},{key:"pickerMenu",get:function get(){var _this4=this;return this.isDropdownMenu||!this.manager.entityPickerColumnDefs||0===this.manager.entityPickerColumnDefs.length?null:react_1.default.createElement("div",{className:"MetricSettings"},react_1.default.createElement("span",{className:"mainLabel"},"Sort by"),react_1.default.createElement(react_select_1.default,{className:"metricDropdown",options:this.metricOptions,value:this.metricOptions.find((function(option){return option.value===_this4.metric})),onChange:function onChange(option){var _a,value=null===(_a=Util_1.first(react_select_2.asArray(option)))||void 0===_a?void 0:_a.value;value&&_this4.updateMetric(value)},menuPlacement:"bottom",components:{IndicatorSeparator:null},styles:react_select_2.getStylesForTargetHeight(26),isSearchable:!1,isLoading:this.manager.entityPickerTableIsLoading}),react_1.default.createElement("span",{className:"sort",onClick:function onClick(){var _a,_b,_c,sortOrder=function toggleSort(order){return order===CoreTableConstants_1.SortOrder.desc?CoreTableConstants_1.SortOrder.asc:CoreTableConstants_1.SortOrder.desc}(_this4.sortOrder);null===(_b=(_a=_this4.manager).setEntityPicker)||void 0===_b||_b.call(_a,{sort:sortOrder}),null===(_c=_this4.manager.analytics)||void 0===_c||_c.logEntityPickerEvent(_this4.analyticsNamespace,"sortOrder",sortOrder)}},react_1.default.createElement(SortIcon_1.SortIcon,{type:this.isActivePickerColumnTypeNumeric?"numeric":"text",order:this.sortOrder})))}},{key:"render",value:function render(){var _a,_this5=this,selection=this.selection,entities=this.searchResults,selectedEntityNames=selection.selectedEntityNames,availableEntities=this.availableEntitiesForCurrentView,selectedDebugMessage="".concat(selectedEntityNames.length," selected. ").concat(availableEntities.size," available. ").concat(this.entitiesWithMetricValue.length," options total."),entityType=selection.entityType;return react_1.default.createElement("div",{className:"EntityPicker",onKeyDown:this.onKeyDown},react_1.default.createElement("div",{className:"EntityPickerSearchInput"},react_1.default.createElement("input",{className:classnames_1.default("input-field",{"with-done-button":this.showDoneButton}),type:"text",placeholder:"Type to add a ".concat(entityType,"..."),value:null!==(_a=this.searchInput)&&void 0!==_a?_a:"",onChange:function onChange(e){return _this5.searchInput=e.currentTarget.value},onFocus:this.onSearchFocus,onBlur:this.onSearchBlur,ref:this.searchInputRef,"data-track-note":"".concat(this.analyticsNamespace,"-picker-search-input")}),react_1.default.createElement("div",{className:"search-icon"},react_1.default.createElement(react_fontawesome_1.FontAwesomeIcon,{icon:faSearch_1.faSearch})),this.showDoneButton&&react_1.default.createElement("div",{className:"done"},react_1.default.createElement("button",null,"Done"))),this.pickerMenu,react_1.default.createElement("div",{className:"EntityListContainer"},(!this.isDropdownMenu||this.isOpen)&&react_1.default.createElement("div",{className:classnames_1.default("EntityList",{isDropdown:this.isDropdownMenu}),onMouseDown:this.onMenuMouseDown},react_1.default.createElement(VerticalScrollContainer_1.VerticalScrollContainer,{scrollingShadows:!0,scrollLock:!0,className:"EntitySearchResults",contentsId:entities.map((function(c){return c.entityName})).join(","),onMouseMove:this.unblockHover,ref:this.scrollContainerRef},react_1.default.createElement(react_flip_toolkit_1.Flipper,{spring:{stiffness:300,damping:33},flipKey:selectedEntityNames.join(",")},entities.map((function(option,index){return react_1.default.createElement(PickerOption,{key:index,hasDataForActiveMetric:availableEntities.has(option.entityName),optionWithMetricValue:option,highlight:_this5.highlightLabel,barScale:_this5.barScale,onChange:_this5.selectEntity,onHover:function onHover(){return _this5.onHover(index)},isSelected:_this5.selectionSet.has(option.entityName),isFocused:_this5.focusIndex===index,innerRef:_this5.focusIndex===index?_this5.focusRef:void 0})})))),react_1.default.createElement("div",null,react_1.default.createElement("div",{title:selectedDebugMessage,className:"ClearSelectionButton","data-track-note":"".concat(this.analyticsNamespace,"-clear-selection"),onClick:function onClick(){return selection.clearSelection()}},react_1.default.createElement(react_fontawesome_1.FontAwesomeIcon,{icon:faTimes_1.faTimes})," Clear selection")))))}}]),EntityPicker}(react_1.default.Component);__decorate([mobx_1.computed],EntityPicker.prototype,"analyticsNamespace",null),__decorate([mobx_1.observable],EntityPicker.prototype,"searchInput",void 0),__decorate([mobx_1.observable],EntityPicker.prototype,"searchInputRef",void 0),__decorate([mobx_1.observable],EntityPicker.prototype,"focusIndex",void 0),__decorate([mobx_1.observable],EntityPicker.prototype,"focusRef",void 0),__decorate([mobx_1.observable],EntityPicker.prototype,"scrollFocusedIntoViewOnUpdate",void 0),__decorate([mobx_1.observable],EntityPicker.prototype,"blockOptionHover",void 0),__decorate([mobx_1.observable],EntityPicker.prototype,"scrollContainerRef",void 0),__decorate([mobx_1.observable],EntityPicker.prototype,"isOpen",void 0),__decorate([mobx_1.computed],EntityPicker.prototype,"isDropdownMenu",null),__decorate([mobx_1.action.bound],EntityPicker.prototype,"selectEntity",null),__decorate([mobx_1.computed],EntityPicker.prototype,"manager",null),__decorate([mobx_1.computed],EntityPicker.prototype,"metric",null),__decorate([mobx_1.computed],EntityPicker.prototype,"sortOrder",null),__decorate([mobx_1.computed],EntityPicker.prototype,"pickerColumnDefs",null),__decorate([mobx_1.computed],EntityPicker.prototype,"metricOptions",null),__decorate([mobx_1.computed],EntityPicker.prototype,"activePickerMetricColumn",null),__decorate([mobx_1.computed],EntityPicker.prototype,"availableEntitiesForCurrentView",null),__decorate([mobx_1.computed],EntityPicker.prototype,"entitiesWithMetricValue",null),__decorate([mobx_1.computed],EntityPicker.prototype,"grapherTable",null),__decorate([mobx_1.computed],EntityPicker.prototype,"pickerTable",null),__decorate([mobx_1.computed],EntityPicker.prototype,"selection",null),__decorate([mobx_1.computed],EntityPicker.prototype,"selectionSet",null),__decorate([mobx_1.computed],EntityPicker.prototype,"fuzzy",null),__decorate([mobx_1.computed],EntityPicker.prototype,"searchResults",null),__decorate([mobx_1.computed],EntityPicker.prototype,"focusedOption",null),__decorate([mobx_1.computed],EntityPicker.prototype,"showDoneButton",null),__decorate([mobx_1.action.bound],EntityPicker.prototype,"focusOptionDirection",null),__decorate([mobx_1.action.bound],EntityPicker.prototype,"clearSearchInput",null),__decorate([mobx_1.action.bound],EntityPicker.prototype,"onKeyDown",null),__decorate([decko_1.bind],EntityPicker.prototype,"focusSearch",null),__decorate([mobx_1.action.bound],EntityPicker.prototype,"onSearchFocus",null),__decorate([mobx_1.action.bound],EntityPicker.prototype,"onSearchBlur",null),__decorate([mobx_1.action.bound],EntityPicker.prototype,"onHover",null),__decorate([mobx_1.action.bound],EntityPicker.prototype,"blockHover",null),__decorate([mobx_1.action.bound],EntityPicker.prototype,"unblockHover",null),__decorate([mobx_1.action.bound],EntityPicker.prototype,"onMenuMouseDown",null),__decorate([decko_1.bind],EntityPicker.prototype,"highlightLabel",null),__decorate([mobx_1.computed],EntityPicker.prototype,"barScale",null),__decorate([mobx_1.action],EntityPicker.prototype,"updateMetric",null),__decorate([mobx_1.computed],EntityPicker.prototype,"isActivePickerColumnTypeNumeric",null),EntityPicker=__decorate([mobx_react_1.observer],EntityPicker),exports.EntityPicker=EntityPicker;var PickerOption=function(_react_1$default$Comp2){_inherits(PickerOption,_react_1$default$Comp2);var _super2=_createSuper(PickerOption);function PickerOption(){return _classCallCheck(this,PickerOption),_super2.apply(this,arguments)}return _createClass(PickerOption,[{key:"onClick",value:function onClick(event){event.stopPropagation(),event.preventDefault(),this.props.onChange(this.props.optionWithMetricValue.entityName,!this.props.isSelected)}},{key:"render",value:function render(){var _this$props=this.props,barScale=_this$props.barScale,optionWithMetricValue=_this$props.optionWithMetricValue,innerRef=_this$props.innerRef,isSelected=_this$props.isSelected,isFocused=_this$props.isFocused,hasDataForActiveMetric=_this$props.hasDataForActiveMetric,highlight=_this$props.highlight,entityName=optionWithMetricValue.entityName,plotValue=optionWithMetricValue.plotValue,formattedValue=optionWithMetricValue.formattedValue,metricValue=formattedValue===entityName?"":formattedValue;return react_1.default.createElement(react_flip_toolkit_1.Flipped,{flipId:entityName,translate:!0,opacity:!0},react_1.default.createElement("label",{className:classnames_1.default("EntityPickerOption",{selected:isSelected,focused:isFocused},hasDataForActiveMetric?void 0:"MissingData"),onMouseMove:this.props.onHover,onMouseOver:this.props.onHover,onClick:this.onClick,ref:innerRef},react_1.default.createElement("div",{className:"input-container"},react_1.default.createElement("input",{type:"checkbox",checked:isSelected,value:entityName,tabIndex:-1,readOnly:!0})),react_1.default.createElement("div",{className:"info-container"},react_1.default.createElement("div",{className:"labels-container"},react_1.default.createElement("div",{className:"name"},highlight(entityName)),void 0!==plotValue&&react_1.default.createElement("div",{className:"metric"},metricValue)),barScale&&Util_1.isNumber(plotValue)?react_1.default.createElement("div",{className:"plot"},react_1.default.createElement("div",{className:"bar",style:{width:"".concat(100*barScale(plotValue),"%")}})):react_1.default.createElement("div",{className:"plot"}))))}}]),PickerOption}(react_1.default.Component);__decorate([decko_1.bind],PickerOption.prototype,"onClick",null)},1040:function(module,exports,__webpack_require__){"use strict";__webpack_require__(33),__webpack_require__(79),__webpack_require__(28),__webpack_require__(25),Object.defineProperty(exports,"__esModule",{value:!0}),exports.getCountryDetectionRedirects=exports.getCountry=exports.countries=void 0;exports.countries=[{name:"Aruba",code:"ABW",slug:"aruba",iso3166:"AW"},{name:"Afghanistan",code:"AFG",slug:"afghanistan",iso3166:"AF"},{name:"Angola",code:"AGO",slug:"angola",iso3166:"AO"},{name:"Anguilla",code:"AIA",slug:"anguilla",iso3166:"AI"},{name:"Ã…land Islands",code:"ALA",slug:"aland-islands",filter:!0},{name:"Albania",code:"ALB",slug:"albania",iso3166:"AL"},{name:"Andorra",code:"AND",slug:"andorra",iso3166:"AD"},{name:"Netherlands Antilles",code:"ANT",slug:"netherlands-antilles",filter:!0},{name:"United Arab Emirates",code:"ARE",slug:"united-arab-emirates",iso3166:"AE"},{name:"Argentina",code:"ARG",slug:"argentina",iso3166:"AR"},{name:"Armenia",code:"ARM",slug:"armenia",iso3166:"AM"},{name:"American Samoa",code:"ASM",slug:"american-samoa",iso3166:"AS"},{name:"Antarctica",code:"ATA",slug:"antarctica",filter:!0,iso3166:"AQ"},{name:"French Southern Territories",code:"ATF",slug:"french-southern-territories",filter:!0,iso3166:"TF"},{name:"Antigua and Barbuda",code:"ATG",slug:"antigua-and-barbuda",iso3166:"AG"},{name:"Australia",code:"AUS",slug:"australia",iso3166:"AU"},{name:"Austria",code:"AUT",slug:"austria",iso3166:"AT"},{name:"Azerbaijan",code:"AZE",slug:"azerbaijan",iso3166:"AZ"},{name:"Burundi",code:"BDI",slug:"burundi",iso3166:"BI"},{name:"Belgium",code:"BEL",slug:"belgium",iso3166:"BE"},{name:"Benin",code:"BEN",slug:"benin",iso3166:"BJ"},{name:"Bonaire Sint Eustatius and Saba",code:"BES",slug:"bonaire-sint-eustatius-and-saba",filter:!0},{name:"Burkina Faso",code:"BFA",slug:"burkina-faso",iso3166:"BF"},{name:"Bangladesh",code:"BGD",slug:"bangladesh",iso3166:"BD"},{name:"Bulgaria",code:"BGR",slug:"bulgaria",iso3166:"BG"},{name:"Bahrain",code:"BHR",slug:"bahrain",iso3166:"BH"},{name:"Bahamas",code:"BHS",slug:"bahamas",iso3166:"BS"},{name:"Bosnia and Herzegovina",code:"BIH",slug:"bosnia-and-herzegovina",iso3166:"BA"},{name:"Saint BarthÃ©lemy",code:"BLM",slug:"saint-barthelemy"},{name:"Belarus",code:"BLR",slug:"belarus",iso3166:"BY"},{name:"Belize",code:"BLZ",slug:"belize",iso3166:"BZ"},{name:"Bermuda",code:"BMU",slug:"bermuda",iso3166:"BM"},{name:"Bolivia",code:"BOL",slug:"bolivia",iso3166:"BO"},{name:"Brazil",code:"BRA",slug:"brazil",iso3166:"BR"},{name:"Barbados",code:"BRB",slug:"barbados",iso3166:"BB"},{name:"Brunei",code:"BRN",slug:"brunei"},{name:"Bhutan",code:"BTN",slug:"bhutan",iso3166:"BT"},{name:"Bouvet Island",code:"BVT",slug:"bouvet-island",filter:!0,iso3166:"BV"},{name:"Botswana",code:"BWA",slug:"botswana",iso3166:"BW"},{name:"Central African Republic",code:"CAF",slug:"central-african-republic",iso3166:"CF"},{name:"Canada",code:"CAN",slug:"canada",iso3166:"CA"},{name:"Cocos Islands",code:"CCK",slug:"cocos-islands",filter:!0},{name:"Switzerland",code:"CHE",slug:"switzerland",iso3166:"CH"},{name:"Chile",code:"CHL",slug:"chile",iso3166:"CL"},{name:"China",code:"CHN",slug:"china",iso3166:"CN"},{name:"Cote d'Ivoire",code:"CIV",slug:"cote-divoire",iso3166:"CI"},{name:"Cameroon",code:"CMR",slug:"cameroon",iso3166:"CM"},{name:"Democratic Republic of Congo",code:"COD",slug:"democratic-republic-of-congo"},{name:"Congo",code:"COG",slug:"congo",iso3166:"CG"},{name:"Cook Islands",code:"COK",slug:"cook-islands",filter:!0,iso3166:"CK"},{name:"Colombia",code:"COL",slug:"colombia",iso3166:"CO"},{name:"Comoros",code:"COM",slug:"comoros",iso3166:"KM"},{name:"Cape Verde",code:"CPV",slug:"cape-verde",iso3166:"CV"},{name:"Costa Rica",code:"CRI",slug:"costa-rica",iso3166:"CR"},{name:"Cuba",code:"CUB",slug:"cuba",iso3166:"CU"},{name:"Curacao",code:"CUW",slug:"curacao",filter:!0,iso3166:"CW"},{name:"Christmas Island",code:"CXR",slug:"christmas-island",iso3166:"CX"},{name:"Cayman Islands",code:"CYM",slug:"cayman-islands",iso3166:"KY"},{name:"Cyprus",code:"CYP",slug:"cyprus",iso3166:"CY"},{name:"Czechia",code:"CZE",slug:"czech-republic",iso3166:"CZ",variantNames:["Czech Republic"]},{name:"Germany",code:"DEU",slug:"germany",iso3166:"DE"},{name:"Djibouti",code:"DJI",slug:"djibouti",iso3166:"DJ"},{name:"Dominica",code:"DMA",slug:"dominica",iso3166:"DM"},{name:"Denmark",code:"DNK",slug:"denmark",iso3166:"DK"},{name:"Dominican Republic",code:"DOM",slug:"dominican-republic",iso3166:"DO"},{name:"Algeria",code:"DZA",slug:"algeria",iso3166:"DZ"},{name:"Ecuador",code:"ECU",slug:"ecuador",iso3166:"EC"},{name:"Egypt",code:"EGY",slug:"egypt",iso3166:"EG"},{name:"Eritrea",code:"ERI",slug:"eritrea",iso3166:"ER"},{name:"Western Sahara",code:"ESH",slug:"western-sahara",filter:!0,iso3166:"EH"},{name:"Spain",code:"ESP",slug:"spain",iso3166:"ES"},{name:"Estonia",code:"EST",slug:"estonia",iso3166:"EE"},{name:"Ethiopia",code:"ETH",slug:"ethiopia",iso3166:"ET"},{name:"Finland",code:"FIN",slug:"finland",iso3166:"FI"},{name:"Fiji",code:"FJI",slug:"fiji",iso3166:"FJ"},{name:"Falkland Islands",code:"FLK",slug:"falkland-islands"},{name:"France",code:"FRA",slug:"france",iso3166:"FR"},{name:"Faeroe Islands",code:"FRO",slug:"faeroe-islands"},{name:"Micronesia (country)",code:"FSM",slug:"micronesia-country"},{name:"Gabon",code:"GAB",slug:"gabon",iso3166:"GA"},{name:"United Kingdom",code:"GBR",slug:"united-kingdom",variantNames:["UK"],iso3166:"GB"},{name:"Georgia",code:"GEO",slug:"georgia",iso3166:"GE"},{name:"Guernsey",code:"GGY",slug:"guernsey",filter:!0,iso3166:"GG"},{name:"Ghana",code:"GHA",slug:"ghana",iso3166:"GH"},{name:"Gibraltar",code:"GIB",slug:"gibraltar",iso3166:"GI"},{name:"Guinea",code:"GIN",slug:"guinea",iso3166:"GN"},{name:"Guadeloupe",code:"GLP",slug:"guadeloupe",filter:!0,iso3166:"GP"},{name:"Gambia",code:"GMB",slug:"gambia",iso3166:"GM"},{name:"Guinea-Bissau",code:"GNB",slug:"guinea-bissau",iso3166:"GW"},{name:"Equatorial Guinea",code:"GNQ",slug:"equatorial-guinea",iso3166:"GQ"},{name:"Greece",code:"GRC",slug:"greece",iso3166:"GR"},{name:"Grenada",code:"GRD",slug:"grenada",iso3166:"GD"},{name:"Greenland",code:"GRL",slug:"greenland",iso3166:"GL"},{name:"Guatemala",code:"GTM",slug:"guatemala",iso3166:"GT"},{name:"French Guiana",code:"GUF",slug:"french-guiana",iso3166:"GF"},{name:"Guam",code:"GUM",slug:"guam",iso3166:"GU"},{name:"Guyana",code:"GUY",slug:"guyana",iso3166:"GY"},{name:"Hong Kong",code:"HKG",slug:"hong-kong",iso3166:"HK"},{name:"Heard Island and McDonald Islands",code:"HMD",slug:"heard-island-and-mcdonald-islands",filter:!0,iso3166:"HM"},{name:"Honduras",code:"HND",slug:"honduras",iso3166:"HN"},{name:"Croatia",code:"HRV",slug:"croatia",iso3166:"HR"},{name:"Haiti",code:"HTI",slug:"haiti",iso3166:"HT"},{name:"Hungary",code:"HUN",slug:"hungary",iso3166:"HU"},{name:"Indonesia",code:"IDN",slug:"indonesia",iso3166:"ID"},{name:"Isle of Man",code:"IMN",slug:"isle-of-man",iso3166:"IM"},{name:"India",code:"IND",slug:"india",iso3166:"IN"},{name:"British Indian Ocean Territory",code:"IOT",slug:"british-indian-ocean-territory",filter:!0,iso3166:"IO"},{name:"Ireland",code:"IRL",slug:"ireland",iso3166:"IE"},{name:"Iran",code:"IRN",slug:"iran"},{name:"Iraq",code:"IRQ",slug:"iraq",iso3166:"IQ"},{name:"Iceland",code:"ISL",slug:"iceland",iso3166:"IS"},{name:"Israel",code:"ISR",slug:"israel",iso3166:"IL"},{name:"Italy",code:"ITA",slug:"italy",iso3166:"IT"},{name:"Jamaica",code:"JAM",slug:"jamaica",iso3166:"JM"},{name:"Jersey",code:"JEY",slug:"jersey",iso3166:"JE"},{name:"Jordan",code:"JOR",slug:"jordan",iso3166:"JO"},{name:"Japan",code:"JPN",slug:"japan",iso3166:"JP"},{name:"Kazakhstan",code:"KAZ",slug:"kazakhstan",iso3166:"KZ"},{name:"Kenya",code:"KEN",slug:"kenya",iso3166:"KE"},{name:"Kyrgyzstan",code:"KGZ",slug:"kyrgyzstan",iso3166:"KG"},{name:"Cambodia",code:"KHM",slug:"cambodia",iso3166:"KH"},{name:"Kiribati",code:"KIR",slug:"kiribati",iso3166:"KI"},{name:"Saint Kitts and Nevis",code:"KNA",slug:"saint-kitts-and-nevis",iso3166:"KN"},{name:"South Korea",code:"KOR",slug:"south-korea"},{name:"Kuwait",code:"KWT",slug:"kuwait",iso3166:"KW"},{name:"Laos",code:"LAO",slug:"laos"},{name:"Lebanon",code:"LBN",slug:"lebanon",iso3166:"LB"},{name:"Liberia",code:"LBR",slug:"liberia",iso3166:"LR"},{name:"Libya",code:"LBY",slug:"libya"},{name:"Saint Lucia",code:"LCA",slug:"saint-lucia",iso3166:"LC"},{name:"Liechtenstein",code:"LIE",slug:"liechtenstein",iso3166:"LI"},{name:"Sri Lanka",code:"LKA",slug:"sri-lanka",iso3166:"LK"},{name:"Lesotho",code:"LSO",slug:"lesotho",iso3166:"LS"},{name:"Lithuania",code:"LTU",slug:"lithuania",iso3166:"LT"},{name:"Luxembourg",code:"LUX",slug:"luxembourg",iso3166:"LU"},{name:"Latvia",code:"LVA",slug:"latvia",iso3166:"LV"},{name:"Macao",code:"MAC",slug:"macao",iso3166:"MO"},{name:"Saint Martin (French part)",code:"MAF",slug:"saint-martin-french-part",filter:!0},{name:"Morocco",code:"MAR",slug:"morocco",iso3166:"MA"},{name:"Monaco",code:"MCO",slug:"monaco",iso3166:"MC"},{name:"Moldova",code:"MDA",slug:"moldova"},{name:"Madagascar",code:"MDG",slug:"madagascar",iso3166:"MG"},{name:"Maldives",code:"MDV",slug:"maldives",iso3166:"MV"},{name:"Mexico",code:"MEX",slug:"mexico",iso3166:"MX"},{name:"Marshall Islands",code:"MHL",slug:"marshall-islands",iso3166:"MH"},{name:"North Macedonia",code:"MKD",slug:"macedonia",iso3166:"MK",variantNames:["Macedonia"]},{name:"Mali",code:"MLI",slug:"mali",iso3166:"ML"},{name:"Malta",code:"MLT",slug:"malta",iso3166:"MT"},{name:"Myanmar",code:"MMR",slug:"myanmar",iso3166:"MM"},{name:"Montenegro",code:"MNE",slug:"montenegro",iso3166:"ME"},{name:"Mongolia",code:"MNG",slug:"mongolia",iso3166:"MN"},{name:"Northern Mariana Islands",code:"MNP",slug:"northern-mariana-islands",iso3166:"MP"},{name:"Mozambique",code:"MOZ",slug:"mozambique",iso3166:"MZ"},{name:"Mauritania",code:"MRT",slug:"mauritania",iso3166:"MR"},{name:"Montserrat",code:"MSR",slug:"montserrat",filter:!0,iso3166:"MS"},{name:"Martinique",code:"MTQ",slug:"martinique",iso3166:"MQ"},{name:"Mauritius",code:"MUS",slug:"mauritius",iso3166:"MU"},{name:"Malawi",code:"MWI",slug:"malawi",iso3166:"MW"},{name:"Malaysia",code:"MYS",slug:"malaysia",iso3166:"MY"},{name:"Mayotte",code:"MYT",slug:"mayotte",iso3166:"YT"},{name:"Namibia",code:"NAM",slug:"namibia",iso3166:"NA"},{name:"New Caledonia",code:"NCL",slug:"new-caledonia",iso3166:"NC"},{name:"Niger",code:"NER",slug:"niger",iso3166:"NE"},{name:"Norfolk Island",code:"NFK",slug:"norfolk-island",iso3166:"NF"},{name:"Nigeria",code:"NGA",slug:"nigeria",iso3166:"NG"},{name:"Nicaragua",code:"NIC",slug:"nicaragua",iso3166:"NI"},{name:"Niue",code:"NIU",slug:"niue",iso3166:"NU"},{name:"Netherlands",code:"NLD",slug:"netherlands",iso3166:"NL"},{name:"Norway",code:"NOR",slug:"norway",iso3166:"NO"},{name:"Nepal",code:"NPL",slug:"nepal",iso3166:"NP"},{name:"Nauru",code:"NRU",slug:"nauru",iso3166:"NR"},{name:"New Zealand",code:"NZL",slug:"new-zealand",iso3166:"NZ"},{name:"Oman",code:"OMN",slug:"oman",iso3166:"OM"},{name:"Pakistan",code:"PAK",slug:"pakistan",iso3166:"PK"},{name:"Panama",code:"PAN",slug:"panama",iso3166:"PA"},{name:"Pitcairn",code:"PCN",slug:"pitcairn",iso3166:"PN"},{name:"Peru",code:"PER",slug:"peru",iso3166:"PE"},{name:"Philippines",code:"PHL",slug:"philippines",iso3166:"PH"},{name:"Palau",code:"PLW",slug:"palau",iso3166:"PW"},{name:"Papua New Guinea",code:"PNG",slug:"papua-new-guinea",iso3166:"PG"},{name:"Poland",code:"POL",slug:"poland",iso3166:"PL"},{name:"Puerto Rico",code:"PRI",slug:"puerto-rico",iso3166:"PR"},{name:"North Korea",code:"PRK",slug:"north-korea"},{name:"Portugal",code:"PRT",slug:"portugal",iso3166:"PT"},{name:"Paraguay",code:"PRY",slug:"paraguay",iso3166:"PY"},{name:"Palestine",code:"PSE",slug:"palestine"},{name:"French Polynesia",code:"PYF",slug:"french-polynesia",iso3166:"PF"},{name:"Qatar",code:"QAT",slug:"qatar",iso3166:"QA"},{name:"Reunion",code:"REU",slug:"reunion",iso3166:"RE"},{name:"Romania",code:"ROU",slug:"romania",iso3166:"RO"},{name:"Russia",code:"RUS",slug:"russia"},{name:"Rwanda",code:"RWA",slug:"rwanda",iso3166:"RW"},{name:"Saudi Arabia",code:"SAU",slug:"saudi-arabia",iso3166:"SA"},{name:"Sudan",code:"SDN",slug:"sudan",iso3166:"SD"},{name:"Senegal",code:"SEN",slug:"senegal",iso3166:"SN"},{name:"Singapore",code:"SGP",slug:"singapore",iso3166:"SG"},{name:"South Georgia and the South Sandwich Islands",code:"SGS",slug:"south-georgia-and-the-south-sandwich-islands",filter:!0,iso3166:"GS"},{name:"Saint Helena",code:"SHN",slug:"saint-helena",filter:!0,iso3166:"SH"},{name:"Svalbard and Jan Mayen",code:"SJM",slug:"svalbard-and-jan-mayen",filter:!0,iso3166:"SJ"},{name:"Solomon Islands",code:"SLB",slug:"solomon-islands",iso3166:"SB"},{name:"Sierra Leone",code:"SLE",slug:"sierra-leone",iso3166:"SL"},{name:"El Salvador",code:"SLV",slug:"el-salvador",iso3166:"SV"},{name:"San Marino",code:"SMR",slug:"san-marino",iso3166:"SM"},{name:"Somalia",code:"SOM",slug:"somalia",iso3166:"SO"},{name:"Saint Pierre and Miquelon",code:"SPM",slug:"saint-pierre-and-miquelon",iso3166:"PM"},{name:"Serbia",code:"SRB",slug:"serbia",iso3166:"RS"},{name:"South Sudan",code:"SSD",slug:"south-sudan",iso3166:"SS"},{name:"Sao Tome and Principe",code:"STP",slug:"sao-tome-and-principe",iso3166:"ST"},{name:"Suriname",code:"SUR",slug:"suriname",iso3166:"SR"},{name:"Slovakia",code:"SVK",slug:"slovakia",iso3166:"SK"},{name:"Slovenia",code:"SVN",slug:"slovenia",iso3166:"SI"},{name:"Sweden",code:"SWE",slug:"sweden",iso3166:"SE"},{name:"Eswatini",code:"SWZ",slug:"swaziland",iso3166:"SZ",variantNames:["Swaziland"]},{name:"Seychelles",code:"SYC",slug:"seychelles",iso3166:"SC"},{name:"Syria",code:"SYR",slug:"syria"},{name:"Turks and Caicos Islands",code:"TCA",slug:"turks-and-caicos-islands",iso3166:"TC"},{name:"Chad",code:"TCD",slug:"chad",iso3166:"TD"},{name:"Togo",code:"TGO",slug:"togo",iso3166:"TG"},{name:"Thailand",code:"THA",slug:"thailand",iso3166:"TH"},{name:"Tajikistan",code:"TJK",slug:"tajikistan",iso3166:"TJ"},{name:"Tokelau",code:"TKL",slug:"tokelau",iso3166:"TK"},{name:"Turkmenistan",code:"TKM",slug:"turkmenistan",iso3166:"TM"},{name:"Timor",code:"TLS",slug:"timor"},{name:"Tonga",code:"TON",slug:"tonga",iso3166:"TO"},{name:"Trinidad and Tobago",code:"TTO",slug:"trinidad-and-tobago",iso3166:"TT"},{name:"Tunisia",code:"TUN",slug:"tunisia",iso3166:"TN"},{name:"Turkey",code:"TUR",slug:"turkey",iso3166:"TR"},{name:"Tuvalu",code:"TUV",slug:"tuvalu",iso3166:"TV"},{name:"Taiwan",code:"TWN",slug:"taiwan",iso3166:"TW"},{name:"Tanzania",code:"TZA",slug:"tanzania"},{name:"Uganda",code:"UGA",slug:"uganda",iso3166:"UG"},{name:"Ukraine",code:"UKR",slug:"ukraine",iso3166:"UA"},{name:"United States Minor Outlying Islands",code:"UMI",slug:"united-states-minor-outlying-islands",filter:!0,iso3166:"UM"},{name:"Uruguay",code:"URY",slug:"uruguay",iso3166:"UY"},{name:"United States",code:"USA",slug:"united-states",variantNames:["US","USA"],iso3166:"US"},{name:"Uzbekistan",code:"UZB",slug:"uzbekistan",iso3166:"UZ"},{name:"Vatican",code:"VAT",slug:"vatican"},{name:"Saint Vincent and the Grenadines",code:"VCT",slug:"saint-vincent-and-the-grenadines",iso3166:"VC"},{name:"Venezuela",code:"VEN",slug:"venezuela",iso3166:"VE"},{name:"British Virgin Islands",code:"VGB",slug:"british-virgin-islands"},{name:"United States Virgin Islands",code:"VIR",slug:"united-states-virgin-islands"},{name:"Vietnam",code:"VNM",slug:"vietnam",iso3166:"VN"},{name:"Vanuatu",code:"VUT",slug:"vanuatu",iso3166:"VU"},{name:"Wallis and Futuna",code:"WLF",slug:"wallis-and-futuna",filter:!0,iso3166:"WF"},{name:"Samoa",code:"WSM",slug:"samoa",iso3166:"WS"},{name:"Yemen",code:"YEM",slug:"yemen",iso3166:"YE"},{name:"South Africa",code:"ZAF",slug:"south-africa",iso3166:"ZA"},{name:"Zambia",code:"ZMB",slug:"zambia",iso3166:"ZM"},{name:"Zimbabwe",code:"ZWE",slug:"zimbabwe",iso3166:"ZW"}].filter((function(country){return!country.filter}));exports.getCountry=function getCountry(slug){return exports.countries.find((function(c){return c.slug===slug}))};exports.getCountryDetectionRedirects=function getCountryDetectionRedirects(){return exports.countries.filter((function(country){return country.iso3166&&country.code})).map((function(country){return"/detect-country-redirect /detect-country.js?".concat(country.code," 302! Country=").concat(country.iso3166.toLowerCase())}))}},1041:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}__webpack_require__(28),__webpack_require__(119),__webpack_require__(18),__webpack_require__(21),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8);var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ChartTypeSwitcher=void 0;var react_1=__importDefault(__webpack_require__(0)),GrapherConstants_1=__webpack_require__(64),ChartTypeSwitcher=function(_react_1$default$Comp){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(ChartTypeSwitcher,_react_1$default$Comp);var _super=_createSuper(ChartTypeSwitcher);function ChartTypeSwitcher(){return _classCallCheck(this,ChartTypeSwitcher),_super.apply(this,arguments)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(ChartTypeSwitcher,[{key:"render",value:function render(){var _this=this;return react_1.default.createElement("select",{onChange:function onChange(event){return _this.props.onChange(event.target.value)}},Object.values(GrapherConstants_1.ChartTypeName).map((function(value){return react_1.default.createElement("option",{key:value,value:value},value)})))}}]),ChartTypeSwitcher}(react_1.default.Component);exports.ChartTypeSwitcher=ChartTypeSwitcher,ChartTypeSwitcher.__docgenInfo={description:"",methods:[],displayName:"ChartTypeSwitcher"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["itsJustJavascript/grapher/chart/ChartTypeSwitcher.js"]={name:"ChartTypeSwitcher",docgenInfo:ChartTypeSwitcher.__docgenInfo,path:"itsJustJavascript/grapher/chart/ChartTypeSwitcher.js"})},122:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _wrapNativeSuper(Class){var _cache="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function _wrapNativeSuper(Class){if(null===Class||!function _isNativeFunction(fn){return-1!==Function.toString.call(fn).indexOf("[native code]")}(Class))return Class;if("function"!=typeof Class)throw new TypeError("Super expression must either be null or a function");if(void 0!==_cache){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,Class)})(Class)}function _construct(Parent,args,Class){return(_construct=_isNativeReflectConstruct()?Reflect.construct:function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var instance=new(Function.bind.apply(Parent,a));return Class&&_setPrototypeOf(instance,Class.prototype),instance}).apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}__webpack_require__(18),__webpack_require__(5),__webpack_require__(14),__webpack_require__(21),__webpack_require__(68),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(9),__webpack_require__(10),__webpack_require__(11),Object.defineProperty(exports,"__esModule",{value:!0}),exports.VerticalAlign=exports.HorizontalAlign=exports.Position=exports.DimensionProperty=exports.DeployStatus=exports.JsonError=exports.WP_PostType=exports.SubNavId=exports.ScaleType=exports.SortBy=exports.SortOrder=exports.IDEAL_PLOT_ASPECT_RATIO=exports.EPOCH_DATE=void 0,exports.EPOCH_DATE="2020-01-21",exports.IDEAL_PLOT_ASPECT_RATIO=1.8,function(SortOrder){SortOrder.asc="asc",SortOrder.desc="desc"}(exports.SortOrder||(exports.SortOrder={})),function(SortBy){SortBy.entityName="entityName",SortBy.column="column",SortBy.total="total"}(exports.SortBy||(exports.SortBy={})),function(ScaleType){ScaleType.linear="linear",ScaleType.log="log"}(exports.ScaleType||(exports.ScaleType={})),function(SubNavId){SubNavId.about="about",SubNavId.biodiversity="biodiversity",SubNavId.coronavirus="coronavirus",SubNavId.co2="co2",SubNavId.energy="energy",SubNavId.forests="forests",SubNavId.water="water"}(exports.SubNavId||(exports.SubNavId={})),function(WP_PostType){WP_PostType.Post="post",WP_PostType.Page="page"}(exports.WP_PostType||(exports.WP_PostType={}));var JsonError=function(_Error){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(JsonError,_Error);var _super=function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}(JsonError);function JsonError(message,status){var _this;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,JsonError),(_this=_super.call(this,message)).status=status||400,_this}return JsonError}(_wrapNativeSuper(Error));exports.JsonError=JsonError,function(DeployStatus){DeployStatus.queued="queued",DeployStatus.pending="pending"}(exports.DeployStatus||(exports.DeployStatus={})),function(DimensionProperty){DimensionProperty.y="y",DimensionProperty.x="x",DimensionProperty.size="size",DimensionProperty.color="color",DimensionProperty.table="table"}(exports.DimensionProperty||(exports.DimensionProperty={})),function(Position){Position.top="top",Position.right="right",Position.bottom="bottom",Position.left="left"}(exports.Position||(exports.Position={})),function(HorizontalAlign){HorizontalAlign.left="left",HorizontalAlign.center="center",HorizontalAlign.right="right"}(exports.HorizontalAlign||(exports.HorizontalAlign={})),function(VerticalAlign){VerticalAlign.top="top",VerticalAlign.middle="middle",VerticalAlign.bottom="bottom"}(exports.VerticalAlign||(exports.VerticalAlign={}))},1223:function(module,exports,__webpack_require__){__webpack_require__(1224),__webpack_require__(1510),__webpack_require__(1511),__webpack_require__(1933),__webpack_require__(1936),__webpack_require__(1941),__webpack_require__(1940),__webpack_require__(1677),module.exports=__webpack_require__(1684)},1267:function(module,exports){},140:function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}__webpack_require__(31),__webpack_require__(25),__webpack_require__(28),__webpack_require__(57),__webpack_require__(17),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(29),__webpack_require__(22),Object.defineProperty(exports,"__esModule",{value:!0}),exports.SynthesizeFruitTableWithStringValues=exports.SynthesizeFruitTableWithNonPositives=exports.SynthesizeFruitTable=exports.SynthesizeGDPTable=exports.SampleColumnSlugs=exports.SynthesizeNonCountryTable=void 0;var SampleColumnSlugs,Util_1=__webpack_require__(40),countries_1=__webpack_require__(1040),CoreColumnDef_1=__webpack_require__(199),OwidTable_1=__webpack_require__(201),OwidTableConstants_1=__webpack_require__(172),SynthesizeOwidTable=function SynthesizeOwidTable(options){var seed=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now(),finalOptions=Object.assign({entityNames:[],entityCount:2,timeRange:[1950,2020],columnDefs:[]},options),entityCount=finalOptions.entityCount,columnDefs=finalOptions.columnDefs,timeRange=finalOptions.timeRange,entityNames=finalOptions.entityNames,colSlugs=[OwidTableConstants_1.OwidTableSlugs.entityName,OwidTableConstants_1.OwidTableSlugs.entityCode,OwidTableConstants_1.OwidTableSlugs.entityId,OwidTableConstants_1.OwidTableSlugs.year].concat(columnDefs.map((function(col){return col.slug}))),entities=entityNames.length?entityNames.map((function(name){return{name:name,code:name.substr(0,3).toUpperCase()}})):Util_1.sampleFrom(countries_1.countries,entityCount,seed),rows=entities.map((function(entity,index){var values=columnDefs.map((function(def){return def.generator()}));return Util_1.range(timeRange[0],timeRange[1]).map((function(year){return values=columnDefs.map((function(def,index){return Math.round(values[index]*(1+def.growthRateGenerator()/100))})),[entity.name,entity.code,index,year].concat(_toConsumableArray(values)).join(",")})).join("\n")}));return new OwidTable_1.OwidTable("".concat(colSlugs.join(","),"\n").concat(rows.join("\n")),columnDefs)};exports.SynthesizeNonCountryTable=function SynthesizeNonCountryTable(options){var seed=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();return SynthesizeOwidTable(Object.assign({entityNames:["Fire","Earthquake","Tornado"],columnDefs:[{slug:SampleColumnSlugs.Disasters,type:CoreColumnDef_1.ColumnTypeNames.Integer,generator:Util_1.getRandomNumberGenerator(0,20,seed),growthRateGenerator:Util_1.getRandomNumberGenerator(-50,50,seed)}]},options),seed)},function(SampleColumnSlugs){SampleColumnSlugs.Population="Population",SampleColumnSlugs.GDP="GDP",SampleColumnSlugs.LifeExpectancy="LifeExpectancy",SampleColumnSlugs.Fruit="Fruit",SampleColumnSlugs.Vegetables="Vegetables",SampleColumnSlugs.Disasters="Disasters"}(SampleColumnSlugs=exports.SampleColumnSlugs||(exports.SampleColumnSlugs={}));exports.SynthesizeGDPTable=function SynthesizeGDPTable(options){var seed=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now(),display=arguments.length>2?arguments[2]:void 0;return SynthesizeOwidTable(Object.assign({columnDefs:[{slug:SampleColumnSlugs.Population,type:CoreColumnDef_1.ColumnTypeNames.Population,source:SynthSource(SampleColumnSlugs.Population),generator:Util_1.getRandomNumberGenerator(1e7,1e9,seed),growthRateGenerator:Util_1.getRandomNumberGenerator(-5,5,seed),display:display},{slug:SampleColumnSlugs.GDP,type:CoreColumnDef_1.ColumnTypeNames.Currency,source:SynthSource(SampleColumnSlugs.GDP),generator:Util_1.getRandomNumberGenerator(1e9,1e12,seed),growthRateGenerator:Util_1.getRandomNumberGenerator(-15,15,seed),display:display},{slug:SampleColumnSlugs.LifeExpectancy,type:CoreColumnDef_1.ColumnTypeNames.Age,source:SynthSource(SampleColumnSlugs.LifeExpectancy),generator:Util_1.getRandomNumberGenerator(60,90,seed),growthRateGenerator:Util_1.getRandomNumberGenerator(-2,2,seed),display:display}]},options),seed)};var SynthSource=function SynthSource(name){return{id:name.charCodeAt(0)+name.charCodeAt(1)+name.charCodeAt(2),name:"".concat(name," Almanac"),dataPublishedBy:"".concat(name," Synthetic Data Team"),dataPublisherSource:"".concat(name," Institute"),link:"http://foo.example",retrievedDate:"1/1/2000",additionalInfo:"Downloaded via FTP"}};exports.SynthesizeFruitTable=function SynthesizeFruitTable(options){var seed=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();return SynthesizeOwidTable(Object.assign({columnDefs:[{slug:SampleColumnSlugs.Fruit,type:CoreColumnDef_1.ColumnTypeNames.Numeric,source:SynthSource(SampleColumnSlugs.Fruit),generator:Util_1.getRandomNumberGenerator(500,1e3,seed),growthRateGenerator:Util_1.getRandomNumberGenerator(-10,10,seed)},{slug:SampleColumnSlugs.Vegetables,type:CoreColumnDef_1.ColumnTypeNames.Numeric,source:SynthSource(SampleColumnSlugs.Vegetables),generator:Util_1.getRandomNumberGenerator(400,1e3,seed),growthRateGenerator:Util_1.getRandomNumberGenerator(-10,12,seed)}]},options),seed)};exports.SynthesizeFruitTableWithNonPositives=function SynthesizeFruitTableWithNonPositives(options){var howManyNonPositives=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,seed=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now(),rand=Util_1.getRandomNumberGenerator(-1e3,0);return exports.SynthesizeFruitTable(options,seed).replaceRandomCells(howManyNonPositives,[SampleColumnSlugs.Fruit,SampleColumnSlugs.Vegetables],void 0,(function(){return rand()}))};var stringValues=["NA","inf","..","/","-","#VALUE!"];exports.SynthesizeFruitTableWithStringValues=function SynthesizeFruitTableWithStringValues(options){var howMany=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,seed=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now();return exports.SynthesizeFruitTable(options,seed).replaceRandomCells(howMany,[SampleColumnSlugs.Fruit,SampleColumnSlugs.Vegetables],void 0,(function(){return Util_1.sampleFrom(stringValues,1,Date.now())[0]}))}},1511:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(729)},1677:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(39),__webpack_require__(9),__webpack_require__(33),__webpack_require__(23),__webpack_require__(36),__webpack_require__(134);var _home_runner_work_owid_grapher_owid_grapher_node_modules_storybook_client_api__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(188),_home_runner_work_owid_grapher_owid_grapher_node_modules_storybook_client_logger__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(49),_home_runner_work_owid_grapher_owid_grapher_itsJustJavascript_storybook_preview_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(626);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.keys(_home_runner_work_owid_grapher_owid_grapher_itsJustJavascript_storybook_preview_js__WEBPACK_IMPORTED_MODULE_8__).forEach((function(key){var value=_home_runner_work_owid_grapher_owid_grapher_itsJustJavascript_storybook_preview_js__WEBPACK_IMPORTED_MODULE_8__[key];switch(key){case"args":case"argTypes":return _home_runner_work_owid_grapher_owid_grapher_node_modules_storybook_client_logger__WEBPACK_IMPORTED_MODULE_7__.a.warn("Invalid args/argTypes in config, ignoring.",JSON.stringify(value));case"decorators":return value.forEach((function(decorator){return Object(_home_runner_work_owid_grapher_owid_grapher_node_modules_storybook_client_api__WEBPACK_IMPORTED_MODULE_6__.b)(decorator,!1)}));case"loaders":return value.forEach((function(loader){return Object(_home_runner_work_owid_grapher_owid_grapher_node_modules_storybook_client_api__WEBPACK_IMPORTED_MODULE_6__.c)(loader,!1)}));case"parameters":return Object(_home_runner_work_owid_grapher_owid_grapher_node_modules_storybook_client_api__WEBPACK_IMPORTED_MODULE_6__.d)(function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},value),!1);case"argTypesEnhancers":return value.forEach((function(enhancer){return Object(_home_runner_work_owid_grapher_owid_grapher_node_modules_storybook_client_api__WEBPACK_IMPORTED_MODULE_6__.a)(enhancer)}));case"globals":case"globalTypes":var v={};return v[key]=value,Object(_home_runner_work_owid_grapher_owid_grapher_node_modules_storybook_client_api__WEBPACK_IMPORTED_MODULE_6__.d)(v,!1);default:return console.log(key+" was not supported :( !")}}))},1678:function(module,exports,__webpack_require__){},1679:function(module,exports,__webpack_require__){},1684:function(module,exports,__webpack_require__){"use strict";(function(module){(0,__webpack_require__(729).configure)([__webpack_require__(1685)],module,!1)}).call(this,__webpack_require__(317)(module))},1685:function(module,exports,__webpack_require__){var map={"./explorer/Explorer.stories.js":1686,"./grapher/barCharts/DiscreteBarChart.stories.js":1887,"./grapher/captionedChart/CaptionedChart.stories.js":1888,"./grapher/controls/CollapsibleList/CollapsibleList.stories.js":1889,"./grapher/controls/CommandPalette.stories.js":1891,"./grapher/controls/ScaleSelector.stories.js":1892,"./grapher/controls/entityPicker/EntityPicker.stories.js":1893,"./grapher/controls/globalEntitySelector/GlobalEntitySelector.stories.js":1894,"./grapher/core/Grapher.stories.js":1897,"./grapher/dataTable/DataTable.stories.js":1898,"./grapher/downloadTab/DownloadTab.stories.js":1900,"./grapher/facetChart/FacetChart.stories.js":1901,"./grapher/footer/Footer.stories.js":1902,"./grapher/header/Header.stories.js":1903,"./grapher/lineCharts/LineChart.stories.js":1904,"./grapher/lineLegend/LineLegend.stories.js":1905,"./grapher/loadingIndicator/LoadingIndicator.stories.js":1906,"./grapher/mapCharts/MapChart.stories.js":1907,"./grapher/mapCharts/MapTooltip.stories.js":1908,"./grapher/noDataModal/NoDataModal.stories.js":1910,"./grapher/scatterCharts/ScatterPlotChart.stories.js":1911,"./grapher/slopeCharts/SlopeChart.stories.js":1912,"./grapher/sourcesTab/SourcesTab.stories.js":1913,"./grapher/spreadsheet/Spreadsheet.stories.js":1914,"./grapher/stackedCharts/StackedAreaChart.stories.js":1922,"./grapher/stackedCharts/StackedBarChart.stories.js":1923,"./grapher/stackedCharts/StackedDiscreteBarChart.stories.js":1924,"./grapher/timeline/TimelineComponent.stories.js":1925,"./grapher/verticalColorLegend/VerticalColorLegend.stories.js":1926,"./site/Feedback.stories.js":1927};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=1685},1686:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Sample=void 0;var Explorer_1=__webpack_require__(819),Explorer_sample_1=__webpack_require__(1886);exports.default={title:"Explorer",component:Explorer_1.Explorer};exports.Sample=function Sample(){return Explorer_sample_1.SampleExplorerOfGraphers()}},1688:function(module,exports,__webpack_require__){"use strict";function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(25),__webpack_require__(28),__webpack_require__(33),__webpack_require__(79),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(18),__webpack_require__(21);var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ExplorerControlPanel=exports.ExplorerControlBar=void 0;var react_1=__importDefault(__webpack_require__(0)),mobx_react_1=__webpack_require__(58),mobx_1=__webpack_require__(41),react_select_1=__importDefault(__webpack_require__(477)),react_select_2=__webpack_require__(592),ExplorerConstants_1=__webpack_require__(319),Util_1=__webpack_require__(40),GridLangConstants_1=__webpack_require__(240),classnames_1=__importDefault(__webpack_require__(139)),ExplorerControlBar=function(_react_1$default$Comp){_inherits(ExplorerControlBar,_react_1$default$Comp);var _super=_createSuper(ExplorerControlBar);function ExplorerControlBar(){return _classCallCheck(this,ExplorerControlBar),_super.apply(this,arguments)}return _createClass(ExplorerControlBar,[{key:"render",value:function render(){var _this$props=this.props,isMobile=_this$props.isMobile,showControls=_this$props.showControls,closeControls=_this$props.closeControls,mobileCloseButton=isMobile?react_1.default.createElement("a",{className:"btn btn-primary mobile-button",onClick:closeControls},"Done"):void 0,showMobileControls=isMobile&&showControls;return react_1.default.createElement("form",{className:classnames_1.default("ExplorerControlBar",showMobileControls?"show-controls-popup":!!isMobile&&"hide-controls-popup")},this.props.children,mobileCloseButton)}}]),ExplorerControlBar}(react_1.default.Component);exports.ExplorerControlBar=ExplorerControlBar;var ExplorerControlPanel=function(_react_1$default$Comp2){_inherits(ExplorerControlPanel,_react_1$default$Comp2);var _super2=_createSuper(ExplorerControlPanel);function ExplorerControlPanel(){return _classCallCheck(this,ExplorerControlPanel),_super2.apply(this,arguments)}return _createClass(ExplorerControlPanel,[{key:"renderCheckboxOrRadio",value:function renderCheckboxOrRadio(option,index){var _this=this,_this$props2=this.props,explorerSlug=_this$props2.explorerSlug,choice=_this$props2.choice,title=choice.title,type=choice.type,value=choice.value,available=option.available,label=option.label,checked=option.checked,isCheckbox=type===ExplorerConstants_1.ExplorerControlType.Checkbox,onChangeValue=isCheckbox?checked?GridLangConstants_1.GridBoolean.false:GridLangConstants_1.GridBoolean.true:option.value,currentValue=isCheckbox?checked?GridLangConstants_1.GridBoolean.true:GridLangConstants_1.GridBoolean.false:value;return react_1.default.createElement("div",{key:index,className:"ControlOption"},react_1.default.createElement("label",{className:classnames_1.default(_defineProperty({},"SelectedOption",checked),available?"AvailableOption":"UnavailableOption")},react_1.default.createElement("input",{onChange:function onChange(){return _this.customOnChange(onChangeValue)},type:isCheckbox?"checkbox":"radio",disabled:!available,name:title,checked:checked,value:currentValue,"data-track-note":"".concat(null!=explorerSlug?explorerSlug:"explorer","-click-").concat(title.toLowerCase())})," ",label))}},{key:"options",get:function get(){var _a;return null!==(_a=this.props.choice.options)&&void 0!==_a?_a:[]}},{key:"renderDropdown",value:function renderDropdown(){var _a,_this2=this,options=this.options.filter((function(option){return option.available})).map((function(option){return{label:option.label,value:option.value}})),value=null!==(_a=options.find((function(option){return option.value===_this2.props.choice.value})))&&void 0!==_a?_a:{label:"-",value:"-"},styles=react_select_2.getStylesForTargetHeight(30);return react_1.default.createElement(react_select_1.default,{className:"ExplorerDropdown",classNamePrefix:"ExplorerDropdown",isDisabled:options.length<2,menuPlacement:this.props.isMobile?"top":"auto",menuPosition:this.props.isMobile?"fixed":"absolute",options:options,value:value,onChange:function onChange(option){return _this2.customOnChange(option.value)},components:{IndicatorSeparator:null},styles:styles,isSearchable:options.length>20,maxMenuHeight:350})}},{key:"customOnChange",value:function customOnChange(value){this.props.onChange&&this.props.onChange(value)}},{key:"renderColumn",value:function renderColumn(key,hideTitle,options){var _this3=this,_this$props$choice=this.props.choice,title=_this$props$choice.title,type=_this$props$choice.type,displayTitle=_this$props$choice.displayTitle;return react_1.default.createElement("div",{key:key,className:"ExplorerControl"},react_1.default.createElement("div",{className:classnames_1.default("ControlHeader",_defineProperty({},"HiddenControlHeader",!0===hideTitle))},null!=displayTitle?displayTitle:title),type===ExplorerConstants_1.ExplorerControlType.Dropdown?this.renderDropdown():(null!=options?options:this.options).map((function(option,index){return _this3.renderCheckboxOrRadio(option,index)})))}},{key:"render",value:function render(){var _this4=this,choice=this.props.choice,title=choice.title,type=choice.type,options=this.options;return type===ExplorerConstants_1.ExplorerControlType.Radio&&options.length>4?Util_1.chunk(options,3).map((function(optionsGroup,column){return _this4.renderColumn("".concat(title).concat(column),column>0,optionsGroup)})):this.renderColumn(title,type===ExplorerConstants_1.ExplorerControlType.Checkbox)}}]),ExplorerControlPanel}(react_1.default.Component);__decorate([mobx_1.computed],ExplorerControlPanel.prototype,"options",null),__decorate([mobx_1.action.bound],ExplorerControlPanel.prototype,"customOnChange",null),ExplorerControlPanel=__decorate([mobx_react_1.observer],ExplorerControlPanel),exports.ExplorerControlPanel=ExplorerControlPanel,ExplorerControlBar.__docgenInfo={description:"",methods:[],displayName:"ExplorerControlBar"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["itsJustJavascript/explorer/ExplorerControls.js"]={name:"ExplorerControlBar",docgenInfo:ExplorerControlBar.__docgenInfo,path:"itsJustJavascript/explorer/ExplorerControls.js"})},172:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StandardOwidColumnDefs=exports.OwidEntityCodeColumnDef=exports.OwidEntityIdColumnDef=exports.OwidEntityNameColumnDef=exports.OwidTableSlugs=void 0;var OwidTableSlugs,OwidTableNames,CoreColumnDef_1=__webpack_require__(199);!function(OwidTableSlugs){OwidTableSlugs.entityName="entityName",OwidTableSlugs.entityColor="entityColor",OwidTableSlugs.entityId="entityId",OwidTableSlugs.entityCode="entityCode",OwidTableSlugs.time="time",OwidTableSlugs.day="day",OwidTableSlugs.year="year",OwidTableSlugs.date="date"}(OwidTableSlugs=exports.OwidTableSlugs||(exports.OwidTableSlugs={})),function(OwidTableNames){OwidTableNames.Entity="Entity",OwidTableNames.Code="Code"}(OwidTableNames||(OwidTableNames={})),exports.OwidEntityNameColumnDef={name:OwidTableNames.Entity,slug:OwidTableSlugs.entityName,type:CoreColumnDef_1.ColumnTypeNames.EntityName},exports.OwidEntityIdColumnDef={slug:OwidTableSlugs.entityId,type:CoreColumnDef_1.ColumnTypeNames.EntityId},exports.OwidEntityCodeColumnDef={name:OwidTableNames.Code,slug:OwidTableSlugs.entityCode,type:CoreColumnDef_1.ColumnTypeNames.EntityCode},exports.StandardOwidColumnDefs=[exports.OwidEntityNameColumnDef,exports.OwidEntityIdColumnDef,exports.OwidEntityCodeColumnDef]},173:function(module,exports,__webpack_require__){"use strict";__webpack_require__(25),__webpack_require__(31);var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeSelectionArray=exports.makeClipPath=exports.autoDetectSeriesStrategy=exports.getSeriesKey=exports.getDefaultFailMessage=exports.autoDetectYColumnSlugs=void 0;var react_1=__importDefault(__webpack_require__(0)),GrapherConstants_1=__webpack_require__(64),SelectionArray_1=__webpack_require__(394);exports.autoDetectYColumnSlugs=function autoDetectYColumnSlugs(manager){return manager.yColumnSlugs&&manager.yColumnSlugs.length?manager.yColumnSlugs:manager.yColumnSlug?[manager.yColumnSlug]:manager.table.numericColumnSlugs};exports.getDefaultFailMessage=function getDefaultFailMessage(manager){if(manager.table.rootTable.isBlank)return"No table loaded yet.";if(manager.table.rootTable.entityNameColumn.isMissing)return"Table is missing an EntityName column.";if(manager.table.rootTable.timeColumn.isMissing)return"Table is missing a Time column.";if(!exports.autoDetectYColumnSlugs(manager).length)return"Missing Y axis column";var selection=exports.makeSelectionArray(manager);return selection.hasSelection?"":"No ".concat(selection.entityType," selected")};exports.getSeriesKey=function getSeriesKey(series,suffix){return"".concat(series.seriesName,"-").concat(series.color,"-").concat(series.isProjection?"projection":"").concat(suffix?"-"+suffix:"")};exports.autoDetectSeriesStrategy=function autoDetectSeriesStrategy(manager,hasNormalAndProjectedSeries){if(manager.seriesStrategy)return manager.seriesStrategy;var columnThreshold=hasNormalAndProjectedSeries?2:1;return exports.autoDetectYColumnSlugs(manager).length>columnThreshold?GrapherConstants_1.SeriesStrategy.column:GrapherConstants_1.SeriesStrategy.entity};exports.makeClipPath=function makeClipPath(renderUid,box){var id="boundsClip-".concat(renderUid);return{id:"url(#".concat(id,")"),element:react_1.default.createElement("defs",null,react_1.default.createElement("clipPath",{id:id},react_1.default.createElement("rect",Object.assign({},box))))}};exports.makeSelectionArray=function makeSelectionArray(manager){var _a;return manager.selection instanceof SelectionArray_1.SelectionArray?manager.selection:new SelectionArray_1.SelectionArray(null!==(_a=manager.selection)&&void 0!==_a?_a:[])}},1753:function(module,exports,__webpack_require__){var map={"./af":837,"./af.js":837,"./ar":838,"./ar-dz":839,"./ar-dz.js":839,"./ar-kw":840,"./ar-kw.js":840,"./ar-ly":841,"./ar-ly.js":841,"./ar-ma":842,"./ar-ma.js":842,"./ar-sa":843,"./ar-sa.js":843,"./ar-tn":844,"./ar-tn.js":844,"./ar.js":838,"./az":845,"./az.js":845,"./be":846,"./be.js":846,"./bg":847,"./bg.js":847,"./bm":848,"./bm.js":848,"./bn":849,"./bn.js":849,"./bo":850,"./bo.js":850,"./br":851,"./br.js":851,"./bs":852,"./bs.js":852,"./ca":853,"./ca.js":853,"./cs":854,"./cs.js":854,"./cv":855,"./cv.js":855,"./cy":856,"./cy.js":856,"./da":857,"./da.js":857,"./de":858,"./de-at":859,"./de-at.js":859,"./de-ch":860,"./de-ch.js":860,"./de.js":858,"./dv":861,"./dv.js":861,"./el":862,"./el.js":862,"./en-au":863,"./en-au.js":863,"./en-ca":864,"./en-ca.js":864,"./en-gb":865,"./en-gb.js":865,"./en-ie":866,"./en-ie.js":866,"./en-il":867,"./en-il.js":867,"./en-in":868,"./en-in.js":868,"./en-nz":869,"./en-nz.js":869,"./en-sg":870,"./en-sg.js":870,"./eo":871,"./eo.js":871,"./es":872,"./es-do":873,"./es-do.js":873,"./es-us":874,"./es-us.js":874,"./es.js":872,"./et":875,"./et.js":875,"./eu":876,"./eu.js":876,"./fa":877,"./fa.js":877,"./fi":878,"./fi.js":878,"./fil":879,"./fil.js":879,"./fo":880,"./fo.js":880,"./fr":881,"./fr-ca":882,"./fr-ca.js":882,"./fr-ch":883,"./fr-ch.js":883,"./fr.js":881,"./fy":884,"./fy.js":884,"./ga":885,"./ga.js":885,"./gd":886,"./gd.js":886,"./gl":887,"./gl.js":887,"./gom-deva":888,"./gom-deva.js":888,"./gom-latn":889,"./gom-latn.js":889,"./gu":890,"./gu.js":890,"./he":891,"./he.js":891,"./hi":892,"./hi.js":892,"./hr":893,"./hr.js":893,"./hu":894,"./hu.js":894,"./hy-am":895,"./hy-am.js":895,"./id":896,"./id.js":896,"./is":897,"./is.js":897,"./it":898,"./it-ch":899,"./it-ch.js":899,"./it.js":898,"./ja":900,"./ja.js":900,"./jv":901,"./jv.js":901,"./ka":902,"./ka.js":902,"./kk":903,"./kk.js":903,"./km":904,"./km.js":904,"./kn":905,"./kn.js":905,"./ko":906,"./ko.js":906,"./ku":907,"./ku.js":907,"./ky":908,"./ky.js":908,"./lb":909,"./lb.js":909,"./lo":910,"./lo.js":910,"./lt":911,"./lt.js":911,"./lv":912,"./lv.js":912,"./me":913,"./me.js":913,"./mi":914,"./mi.js":914,"./mk":915,"./mk.js":915,"./ml":916,"./ml.js":916,"./mn":917,"./mn.js":917,"./mr":918,"./mr.js":918,"./ms":919,"./ms-my":920,"./ms-my.js":920,"./ms.js":919,"./mt":921,"./mt.js":921,"./my":922,"./my.js":922,"./nb":923,"./nb.js":923,"./ne":924,"./ne.js":924,"./nl":925,"./nl-be":926,"./nl-be.js":926,"./nl.js":925,"./nn":927,"./nn.js":927,"./oc-lnc":928,"./oc-lnc.js":928,"./pa-in":929,"./pa-in.js":929,"./pl":930,"./pl.js":930,"./pt":931,"./pt-br":932,"./pt-br.js":932,"./pt.js":931,"./ro":933,"./ro.js":933,"./ru":934,"./ru.js":934,"./sd":935,"./sd.js":935,"./se":936,"./se.js":936,"./si":937,"./si.js":937,"./sk":938,"./sk.js":938,"./sl":939,"./sl.js":939,"./sq":940,"./sq.js":940,"./sr":941,"./sr-cyrl":942,"./sr-cyrl.js":942,"./sr.js":941,"./ss":943,"./ss.js":943,"./sv":944,"./sv.js":944,"./sw":945,"./sw.js":945,"./ta":946,"./ta.js":946,"./te":947,"./te.js":947,"./tet":948,"./tet.js":948,"./tg":949,"./tg.js":949,"./th":950,"./th.js":950,"./tk":951,"./tk.js":951,"./tl-ph":952,"./tl-ph.js":952,"./tlh":953,"./tlh.js":953,"./tr":954,"./tr.js":954,"./tzl":955,"./tzl.js":955,"./tzm":956,"./tzm-latn":957,"./tzm-latn.js":957,"./tzm.js":956,"./ug-cn":958,"./ug-cn.js":958,"./uk":959,"./uk.js":959,"./ur":960,"./ur.js":960,"./uz":961,"./uz-latn":962,"./uz-latn.js":962,"./uz.js":961,"./vi":963,"./vi.js":963,"./x-pseudo":964,"./x-pseudo.js":964,"./yo":965,"./yo.js":965,"./zh-cn":966,"./zh-cn.js":966,"./zh-hk":967,"./zh-hk.js":967,"./zh-mo":968,"./zh-mo.js":968,"./zh-tw":969,"./zh-tw.js":969};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=1753},1769:function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}__webpack_require__(28),__webpack_require__(36),__webpack_require__(5),__webpack_require__(14),__webpack_require__(33),__webpack_require__(62),__webpack_require__(32),__webpack_require__(457),__webpack_require__(25),__webpack_require__(57),__webpack_require__(9),__webpack_require__(10),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(29),__webpack_require__(22),__webpack_require__(17),Object.defineProperty(exports,"__esModule",{value:!0}),exports.toDelimited=exports.toMarkdownTable=exports.toAlignedTextTable=void 0;exports.toAlignedTextTable=function toAlignedTextTable(headerSlugs,rows){var options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},_options$alignRight=options.alignRight,alignRight=void 0===_options$alignRight||_options$alignRight,_options$maxCharacter=options.maxCharactersPerColumn,maxCharactersPerColumn=void 0===_options$maxCharacter?20:_options$maxCharacter,_options$maxCharacter2=options.maxCharactersPerLine,maxCharactersPerLine=void 0===_options$maxCharacter2?80:_options$maxCharacter2,colWidths=headerSlugs.map((function(slug){return slug.length>maxCharactersPerColumn?maxCharactersPerColumn:slug.length}));rows.forEach((function(row){headerSlugs.forEach((function(slug,index){var cellValue=row[slug];if(cellValue){var length=cellValue.toString().length;length>colWidths[index]&&(colWidths[index]=length>maxCharactersPerColumn?maxCharactersPerColumn:length)}}))}));var runningWidth=0,finalHeaderSlugs=headerSlugs.filter((function(slug,index){return(runningWidth+=colWidths[index])<=maxCharactersPerLine})),cellFn=function cellFn(){var cellText=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",col=arguments.length>2?arguments[2]:void 0,width=colWidths[col],cellValue=(null==cellText?void 0:cellText.toString().replace(/\n/g,"\\n"))||"",cellLength=cellValue.length;if(cellLength>width)return cellValue.substr(0,width-3)+"...";var padding=" ".repeat(width-cellLength);return alignRight?padding+cellValue:cellValue+padding};return(finalHeaderSlugs.length!==headerSlugs.length?"Showing ".concat(finalHeaderSlugs.length," of ").concat(headerSlugs.length," columns\n"):"")+exports.toDelimited(" ",finalHeaderSlugs,rows,cellFn)};exports.toMarkdownTable=function toMarkdownTable(slugs,rows,formatFn){return[slugs,slugs.map((function(){return"-"}))].concat(_toConsumableArray(rows.map((function(row){return slugs.map((function(slug){return row[slug]}))})))).map((function(row,rowIndex){var formattedValues=row.map((function(val,colIndex){return formatFn?formatFn(val,rowIndex,colIndex):val}));return"|".concat(formattedValues.join("|"),"|")})).join("\n")};exports.toDelimited=function toDelimited(delimiter,columnSlugs,rows,cellFn){var rowDelimiter=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"\n",skipHeaderRow=1,header=columnSlugs.map((function(columnName,index){return cellFn?cellFn(columnName,0,index):columnName})),formattedRows=rows.map((function(row,rowNumber){return columnSlugs.map((function(slug,columnIndex){return cellFn?cellFn(row[slug],rowNumber+skipHeaderRow,columnIndex):row[slug]}))}));return header.join(delimiter)+rowDelimiter+formattedRows.map((function(row){return row.join(delimiter)})).join(rowDelimiter)}},1770:function(module,exports,__webpack_require__){"use strict";var _a,_b;__webpack_require__(31),__webpack_require__(192),__webpack_require__(32),__webpack_require__(14),__webpack_require__(28),__webpack_require__(119),Object.defineProperty(exports,"__esModule",{value:!0}),exports.ExplorerGrammar=void 0;var owidTypes_1=__webpack_require__(122),GridLangConstants_1=__webpack_require__(240),GrapherGrammar_1=__webpack_require__(600),ColumnGrammar_1=__webpack_require__(987),ExplorerFormControlCellDeff=Object.assign(Object.assign({},GridLangConstants_1.StringDeclarationDef),{description:"A form input for the user.",regex:/^.+ (Dropdown|Radio|Checkbox)$/,requirementsDescription:"Must end with 'Dropdown', 'Radio', or 'Checkbox'"});exports.ExplorerGrammar=Object.assign({table:Object.assign(Object.assign({},GridLangConstants_1.UrlCellDef),{keyword:"table",valuePlaceholder:"",regex:new RegExp("(".concat(null!==(_b=null===(_a=GridLangConstants_1.UrlCellDef.regex)||void 0===_a?void 0:_a.source)&&void 0!==_b?_b:"","|^[\\w -()]+$)")),description:"A link to a CSV or TSV or the name of an OWID dataset.",positionalCellDefs:[Object.assign(Object.assign({},GridLangConstants_1.SlugDeclarationCellDef),{description:"If you have multiple tables, give each one a unique slug."})],headerCellDef:Object.assign(Object.assign({},GridLangConstants_1.SlugDeclarationCellDef),{cssClass:"SubTableHeaderCellDef",grammar:{},catchAllCellDef:Object.assign(Object.assign({},GridLangConstants_1.SlugDeclarationCellDef),{description:"A column slug."})})}),explorerTitle:Object.assign(Object.assign({},GridLangConstants_1.StringCellDef),{keyword:"explorerTitle",valuePlaceholder:"Life Expectancy Data Explorer",description:"The title will appear in the top left corner of the Explorer."}),explorerSubtitle:Object.assign(Object.assign({},GridLangConstants_1.StringCellDef),{keyword:"explorerSubtitle",valuePlaceholder:"All our data from various sources.",description:"The subtitle will appear under the explorerTitle."}),columns:Object.assign(Object.assign({},GridLangConstants_1.SlugDeclarationCellDef),{keyword:"columns",description:"Include all your column definitions for a table here. If you do not provide a column definition for every column in your table one will be generated for you by the machine (sometimes incorrectly).",headerCellDef:Object.assign(Object.assign({},GridLangConstants_1.SubTableHeaderCellDef),{grammar:ColumnGrammar_1.ColumnGrammar})}),graphers:Object.assign(Object.assign({},GridLangConstants_1.SlugDeclarationCellDef),{keyword:"graphers",description:"The decision matrix for your Explorer goes here.",headerCellDef:Object.assign(Object.assign({},GridLangConstants_1.SubTableHeaderCellDef),{grammar:GrapherGrammar_1.GrapherGrammar,catchAllCellDef:ExplorerFormControlCellDeff})}),googleSheet:Object.assign(Object.assign({},GridLangConstants_1.UrlCellDef),{keyword:"googleSheet",valuePlaceholder:"https://docs.google.com/spreadsheets/d/1qeX...",description:"Create a Google Sheet, share it with the OWID Group, then put the link here."}),downloadDataLink:Object.assign(Object.assign({},GridLangConstants_1.UrlCellDef),{keyword:"downloadDataLink",valuePlaceholder:"https://example.com/data.csv",description:"An optional URL for the download button in the Download tab. If blank, the Explorer will instead generate a CSV from the data it has available."}),isPublished:Object.assign(Object.assign({},GridLangConstants_1.BooleanCellDef),{keyword:"isPublished",description:"Set to true to make this Explorer public."}),wpBlockId:Object.assign(Object.assign({},GridLangConstants_1.IntegerCellDef),{keyword:"wpBlockId",description:"If present will show the matching Wordpress block ID beneath the Explorer."}),hideControls:Object.assign(Object.assign({},GridLangConstants_1.BooleanCellDef),{keyword:"hideControls",description:"Whether to hide the controls. Default is false."}),subNavId:Object.assign(Object.assign({},GridLangConstants_1.EnumCellDef),{terminalOptions:Object.values(owidTypes_1.SubNavId).map((function(keyword){return{keyword:keyword,description:"",cssClass:""}})),keyword:"subNavId",description:"A subnav to show, if any."}),subNavCurrentId:Object.assign(Object.assign({},GridLangConstants_1.EnumCellDef),{keyword:"subNavCurrentId",description:"The current page in the subnav."}),thumbnail:Object.assign(Object.assign({},GridLangConstants_1.UrlCellDef),{keyword:"thumbnail",description:"URL to the social sharing thumbnail."}),selection:Object.assign(Object.assign({},GridLangConstants_1.StringCellDef),{keyword:"selection",valuePlaceholder:"Canada",description:"The default selected entities.",isHorizontalList:!0}),entityType:Object.assign(Object.assign({},GridLangConstants_1.StringCellDef),{keyword:"entityType",valuePlaceholder:"region",description:"Default is 'country', but you can specify a different one such as 'state' or 'region'."}),pickerColumnSlugs:Object.assign(Object.assign({},GridLangConstants_1.SlugsDeclarationCellDef),{keyword:"pickerColumnSlugs",valuePlaceholder:"gdp population gdp_per_capita",description:"You can manually set the column slug(s) to show in the entity picker or else they will be automatically chosen."}),hideAlertBanner:Object.assign(Object.assign({},GridLangConstants_1.BooleanCellDef),{keyword:"hideAlertBanner",description:"Set to true to hide the Covid alert banner."})},GrapherGrammar_1.GrapherGrammar)},1771:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CustomColorSchemes=void 0;var ColorConstants_1=__webpack_require__(278);exports.CustomColorSchemes=[],exports.CustomColorSchemes.push({name:ColorConstants_1.ColorSchemeName.Magma,colorSets:[["#000004","#010005","#010106","#010108","#020109","#02020b","#02020d","#03030f","#030312","#040414","#050416","#060518","#06051a","#07061c","#08071e","#090720","#0a0822","#0b0924","#0c0926","#0d0a29","#0e0b2b","#100b2d","#110c2f","#120d31","#130d34","#140e36","#150e38","#160f3b","#180f3d","#19103f","#1a1042","#1c1044","#1d1147","#1e1149","#20114b","#21114e","#221150","#241253","#251255","#271258","#29115a","#2a115c","#2c115f","#2d1161","#2f1163","#311165","#331067","#341069","#36106b","#38106c","#390f6e","#3b0f70","#3d0f71","#3f0f72","#400f74","#420f75","#440f76","#451077","#471078","#491078","#4a1079","#4c117a","#4e117b","#4f127b","#51127c","#52137c","#54137d","#56147d","#57157e","#59157e","#5a167e","#5c167f","#5d177f","#5f187f","#601880","#621980","#641a80","#651a80","#671b80","#681c81","#6a1c81","#6b1d81","#6d1d81","#6e1e81","#701f81","#721f81","#732081","#752181","#762181","#782281","#792282","#7b2382","#7c2382","#7e2482","#802582","#812581","#832681","#842681","#862781","#882781","#892881","#8b2981","#8c2981","#8e2a81","#902a81","#912b81","#932b80","#942c80","#962c80","#982d80","#992d80","#9b2e7f","#9c2e7f","#9e2f7f","#a02f7f","#a1307e","#a3307e","#a5317e","#a6317d","#a8327d","#aa337d","#ab337c","#ad347c","#ae347b","#b0357b","#b2357b","#b3367a","#b5367a","#b73779","#b83779","#ba3878","#bc3978","#bd3977","#bf3a77","#c03a76","#c23b75","#c43c75","#c53c74","#c73d73","#c83e73","#ca3e72","#cc3f71","#cd4071","#cf4070","#d0416f","#d2426f","#d3436e","#d5446d","#d6456c","#d8456c","#d9466b","#db476a","#dc4869","#de4968","#df4a68","#e04c67","#e24d66","#e34e65","#e44f64","#e55064","#e75263","#e85362","#e95462","#ea5661","#eb5760","#ec5860","#ed5a5f","#ee5b5e","#ef5d5e","#f05f5e","#f1605d","#f2625d","#f2645c","#f3655c","#f4675c","#f4695c","#f56b5c","#f66c5c","#f66e5c","#f7705c","#f7725c","#f8745c","#f8765c","#f9785d","#f9795d","#f97b5d","#fa7d5e","#fa7f5e","#fa815f","#fb835f","#fb8560","#fb8761","#fc8961","#fc8a62","#fc8c63","#fc8e64","#fc9065","#fd9266","#fd9467","#fd9668","#fd9869","#fd9a6a","#fd9b6b","#fe9d6c","#fe9f6d","#fea16e","#fea36f","#fea571","#fea772","#fea973","#feaa74","#feac76","#feae77","#feb078","#feb27a","#feb47b","#feb67c","#feb77e","#feb97f","#febb81","#febd82","#febf84","#fec185","#fec287","#fec488","#fec68a","#fec88c","#feca8d","#fecc8f","#fecd90","#fecf92","#fed194","#fed395","#fed597","#fed799","#fed89a","#fdda9c","#fddc9e","#fddea0","#fde0a1","#fde2a3","#fde3a5","#fde5a7","#fde7a9","#fde9aa","#fdebac","#fcecae","#fceeb0","#fcf0b2","#fcf2b4","#fcf4b6","#fcf6b8","#fcf7b9","#fcf9bb","#fcfbbd","#fcfdbf"]]}),exports.CustomColorSchemes.push({name:ColorConstants_1.ColorSchemeName.Plasma,colorSets:[["#0d0887","#100788","#130789","#16078a","#19068c","#1b068d","#1d068e","#20068f","#220690","#240691","#260591","#280592","#2a0593","#2c0594","#2e0595","#2f0596","#310597","#330597","#350498","#370499","#38049a","#3a049a","#3c049b","#3e049c","#3f049c","#41049d","#43039e","#44039e","#46039f","#48039f","#4903a0","#4b03a1","#4c02a1","#4e02a2","#5002a2","#5102a3","#5302a3","#5502a4","#5601a4","#5801a4","#5901a5","#5b01a5","#5c01a6","#5e01a6","#6001a6","#6100a7","#6300a7","#6400a7","#6600a7","#6700a8","#6900a8","#6a00a8","#6c00a8","#6e00a8","#6f00a8","#7100a8","#7201a8","#7401a8","#7501a8","#7701a8","#7801a8","#7a02a8","#7b02a8","#7d03a8","#7e03a8","#8004a8","#8104a7","#8305a7","#8405a7","#8606a6","#8707a6","#8808a6","#8a09a5","#8b0aa5","#8d0ba5","#8e0ca4","#8f0da4","#910ea3","#920fa3","#9410a2","#9511a1","#9613a1","#9814a0","#99159f","#9a169f","#9c179e","#9d189d","#9e199d","#a01a9c","#a11b9b","#a21d9a","#a31e9a","#a51f99","#a62098","#a72197","#a82296","#aa2395","#ab2494","#ac2694","#ad2793","#ae2892","#b02991","#b12a90","#b22b8f","#b32c8e","#b42e8d","#b52f8c","#b6308b","#b7318a","#b83289","#ba3388","#bb3488","#bc3587","#bd3786","#be3885","#bf3984","#c03a83","#c13b82","#c23c81","#c33d80","#c43e7f","#c5407e","#c6417d","#c7427c","#c8437b","#c9447a","#ca457a","#cb4679","#cc4778","#cc4977","#cd4a76","#ce4b75","#cf4c74","#d04d73","#d14e72","#d24f71","#d35171","#d45270","#d5536f","#d5546e","#d6556d","#d7566c","#d8576b","#d9586a","#da5a6a","#da5b69","#db5c68","#dc5d67","#dd5e66","#de5f65","#de6164","#df6263","#e06363","#e16462","#e26561","#e26660","#e3685f","#e4695e","#e56a5d","#e56b5d","#e66c5c","#e76e5b","#e76f5a","#e87059","#e97158","#e97257","#ea7457","#eb7556","#eb7655","#ec7754","#ed7953","#ed7a52","#ee7b51","#ef7c51","#ef7e50","#f07f4f","#f0804e","#f1814d","#f1834c","#f2844b","#f3854b","#f3874a","#f48849","#f48948","#f58b47","#f58c46","#f68d45","#f68f44","#f79044","#f79143","#f79342","#f89441","#f89540","#f9973f","#f9983e","#f99a3e","#fa9b3d","#fa9c3c","#fa9e3b","#fb9f3a","#fba139","#fba238","#fca338","#fca537","#fca636","#fca835","#fca934","#fdab33","#fdac33","#fdae32","#fdaf31","#fdb130","#fdb22f","#fdb42f","#fdb52e","#feb72d","#feb82c","#feba2c","#febb2b","#febd2a","#febe2a","#fec029","#fdc229","#fdc328","#fdc527","#fdc627","#fdc827","#fdca26","#fdcb26","#fccd25","#fcce25","#fcd025","#fcd225","#fbd324","#fbd524","#fbd724","#fad824","#fada24","#f9dc24","#f9dd25","#f8df25","#f8e125","#f7e225","#f7e425","#f6e626","#f6e826","#f5e926","#f5eb27","#f4ed27","#f3ee27","#f3f027","#f2f227","#f1f426","#f1f525","#f0f724","#f0f921"]]}),exports.CustomColorSchemes.push({name:ColorConstants_1.ColorSchemeName.Inferno,colorSets:[["#000004","#010005","#010106","#010108","#02010a","#02020c","#02020e","#030210","#040312","#040314","#050417","#060419","#07051b","#08051d","#09061f","#0a0722","#0b0724","#0c0826","#0d0829","#0e092b","#10092d","#110a30","#120a32","#140b34","#150b37","#160b39","#180c3c","#190c3e","#1b0c41","#1c0c43","#1e0c45","#1f0c48","#210c4a","#230c4c","#240c4f","#260c51","#280b53","#290b55","#2b0b57","#2d0b59","#2f0a5b","#310a5c","#320a5e","#340a5f","#360961","#380962","#390963","#3b0964","#3d0965","#3e0966","#400a67","#420a68","#440a68","#450a69","#470b6a","#490b6a","#4a0c6b","#4c0c6b","#4d0d6c","#4f0d6c","#510e6c","#520e6d","#540f6d","#550f6d","#57106e","#59106e","#5a116e","#5c126e","#5d126e","#5f136e","#61136e","#62146e","#64156e","#65156e","#67166e","#69166e","#6a176e","#6c186e","#6d186e","#6f196e","#71196e","#721a6e","#741a6e","#751b6e","#771c6d","#781c6d","#7a1d6d","#7c1d6d","#7d1e6d","#7f1e6c","#801f6c","#82206c","#84206b","#85216b","#87216b","#88226a","#8a226a","#8c2369","#8d2369","#8f2469","#902568","#922568","#932667","#952667","#972766","#982766","#9a2865","#9b2964","#9d2964","#9f2a63","#a02a63","#a22b62","#a32c61","#a52c60","#a62d60","#a82e5f","#a92e5e","#ab2f5e","#ad305d","#ae305c","#b0315b","#b1325a","#b3325a","#b43359","#b63458","#b73557","#b93556","#ba3655","#bc3754","#bd3853","#bf3952","#c03a51","#c13a50","#c33b4f","#c43c4e","#c63d4d","#c73e4c","#c83f4b","#ca404a","#cb4149","#cc4248","#ce4347","#cf4446","#d04545","#d24644","#d34743","#d44842","#d54a41","#d74b3f","#d84c3e","#d94d3d","#da4e3c","#db503b","#dd513a","#de5238","#df5337","#e05536","#e15635","#e25734","#e35933","#e45a31","#e55c30","#e65d2f","#e75e2e","#e8602d","#e9612b","#ea632a","#eb6429","#eb6628","#ec6726","#ed6925","#ee6a24","#ef6c23","#ef6e21","#f06f20","#f1711f","#f1731d","#f2741c","#f3761b","#f37819","#f47918","#f57b17","#f57d15","#f67e14","#f68013","#f78212","#f78410","#f8850f","#f8870e","#f8890c","#f98b0b","#f98c0a","#f98e09","#fa9008","#fa9207","#fa9407","#fb9606","#fb9706","#fb9906","#fb9b06","#fb9d07","#fc9f07","#fca108","#fca309","#fca50a","#fca60c","#fca80d","#fcaa0f","#fcac11","#fcae12","#fcb014","#fcb216","#fcb418","#fbb61a","#fbb81d","#fbba1f","#fbbc21","#fbbe23","#fac026","#fac228","#fac42a","#fac62d","#f9c72f","#f9c932","#f9cb35","#f8cd37","#f8cf3a","#f7d13d","#f7d340","#f6d543","#f6d746","#f5d949","#f5db4c","#f4dd4f","#f4df53","#f4e156","#f3e35a","#f3e55d","#f2e661","#f2e865","#f2ea69","#f1ec6d","#f1ed71","#f1ef75","#f1f179","#f2f27d","#f2f482","#f3f586","#f3f68a","#f4f88e","#f5f992","#f6fa96","#f8fb9a","#f9fc9d","#fafda1","#fcffa4"]]}),exports.CustomColorSchemes.push({name:ColorConstants_1.ColorSchemeName.Viridis,singleColorScale:!1,colorSets:[["#440154","#440256","#450457","#450559","#46075a","#46085c","#460a5d","#460b5e","#470d60","#470e61","#471063","#471164","#471365","#481467","#481668","#481769","#48186a","#481a6c","#481b6d","#481c6e","#481d6f","#481f70","#482071","#482173","#482374","#482475","#482576","#482677","#482878","#482979","#472a7a","#472c7a","#472d7b","#472e7c","#472f7d","#46307e","#46327e","#46337f","#463480","#453581","#453781","#453882","#443983","#443a83","#443b84","#433d84","#433e85","#423f85","#424086","#424186","#414287","#414487","#404588","#404688","#3f4788","#3f4889","#3e4989","#3e4a89","#3e4c8a","#3d4d8a","#3d4e8a","#3c4f8a","#3c508b","#3b518b","#3b528b","#3a538b","#3a548c","#39558c","#39568c","#38588c","#38598c","#375a8c","#375b8d","#365c8d","#365d8d","#355e8d","#355f8d","#34608d","#34618d","#33628d","#33638d","#32648e","#32658e","#31668e","#31678e","#31688e","#30698e","#306a8e","#2f6b8e","#2f6c8e","#2e6d8e","#2e6e8e","#2e6f8e","#2d708e","#2d718e","#2c718e","#2c728e","#2c738e","#2b748e","#2b758e","#2a768e","#2a778e","#2a788e","#29798e","#297a8e","#297b8e","#287c8e","#287d8e","#277e8e","#277f8e","#27808e","#26818e","#26828e","#26828e","#25838e","#25848e","#25858e","#24868e","#24878e","#23888e","#23898e","#238a8d","#228b8d","#228c8d","#228d8d","#218e8d","#218f8d","#21908d","#21918c","#20928c","#20928c","#20938c","#1f948c","#1f958b","#1f968b","#1f978b","#1f988b","#1f998a","#1f9a8a","#1e9b8a","#1e9c89","#1e9d89","#1f9e89","#1f9f88","#1fa088","#1fa188","#1fa187","#1fa287","#20a386","#20a486","#21a585","#21a685","#22a785","#22a884","#23a983","#24aa83","#25ab82","#25ac82","#26ad81","#27ad81","#28ae80","#29af7f","#2ab07f","#2cb17e","#2db27d","#2eb37c","#2fb47c","#31b57b","#32b67a","#34b679","#35b779","#37b878","#38b977","#3aba76","#3bbb75","#3dbc74","#3fbc73","#40bd72","#42be71","#44bf70","#46c06f","#48c16e","#4ac16d","#4cc26c","#4ec36b","#50c46a","#52c569","#54c568","#56c667","#58c765","#5ac864","#5cc863","#5ec962","#60ca60","#63cb5f","#65cb5e","#67cc5c","#69cd5b","#6ccd5a","#6ece58","#70cf57","#73d056","#75d054","#77d153","#7ad151","#7cd250","#7fd34e","#81d34d","#84d44b","#86d549","#89d548","#8bd646","#8ed645","#90d743","#93d741","#95d840","#98d83e","#9bd93c","#9dd93b","#a0da39","#a2da37","#a5db36","#a8db34","#aadc32","#addc30","#b0dd2f","#b2dd2d","#b5de2b","#b8de29","#bade28","#bddf26","#c0df25","#c2df23","#c5e021","#c8e020","#cae11f","#cde11d","#d0e11c","#d2e21b","#d5e21a","#d8e219","#dae319","#dde318","#dfe318","#e2e418","#e5e419","#e7e419","#eae51a","#ece51b","#efe51c","#f1e51d","#f4e61e","#f6e620","#f8e621","#fbe723","#fde725"]]}),exports.CustomColorSchemes.push({name:ColorConstants_1.ColorSchemeName["owid-distinct"],displayName:"OWID Distinct",singleColorScale:!1,isDistinct:!0,colorSets:[["#3C4E66","#B13507","#00847E","#6D3E91","#CF0A66","#883039","#00823F","#4C6A9C","#C05917","#D73C50","#287669","#CD2285","#0F739C","#9A5129","#C45267","#008860","#8C4569","#B36216","#366388","#A2559C","#578145","#D7263F","#18470F","#BC8E5A","#585C64"]]}),exports.CustomColorSchemes.push({name:ColorConstants_1.ColorSchemeName.stackedAreaDefault,displayName:"OWID 4 Color Gradient",colorSets:[["#3360a9"],["#3360a9","#34983f"],["#3360a9","#34983f","#ffd53e"],["#3360a9","#ca2628","#ffd53e","#34983f"],["#3360a9","#ca2628","#ffd53e","#9ecc8a","#34983f"],["#3360a9","#e6332e","#ca2628","#ffd53e","#9ecc8a","#34983f"],["#3360a9","#2a939b","#e6332e","#ca2628","#ffd53e","#9ecc8a","#34983f"]]}),exports.CustomColorSchemes.push({name:ColorConstants_1.ColorSchemeName.continents,displayName:"Continents",singleColorScale:!1,isDistinct:!0,colorSets:[[ColorConstants_1.ContinentColors.Africa,ColorConstants_1.ContinentColors.Antarctica,ColorConstants_1.ContinentColors.Asia,ColorConstants_1.ContinentColors.Europe,ColorConstants_1.ContinentColors["North America"],ColorConstants_1.ContinentColors.Oceania,ColorConstants_1.ContinentColors["South America"],"#ff7f0e","#1f77b4","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","c49c94","e377c2","f7b6d2","7f7f7f","c7c7c7","bcbd22","dbdb8d","17becf","9edae5","1f77b4"]]})},1772:function(module,exports,__webpack_require__){"use strict";__webpack_require__(39),__webpack_require__(28),__webpack_require__(33),__webpack_require__(36);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ColorBrewerSchemes=void 0;var colorbrewer=__importStar(__webpack_require__(1773)),ColorBrewerSchemeIndex={YlGn:{displayName:"Yellow-Green shades",singleColorScale:!0},YlGnBu:{displayName:"Yellow-Green-Blue shades",singleColorScale:!1},GnBu:{displayName:"Green-Blue shades",singleColorScale:!0},BuGn:{displayName:"Blue-Green shades",singleColorScale:!0},PuBuGn:{displayName:"Purple-Blue-Green shades",singleColorScale:!1},BuPu:{displayName:"Blue-Purple shades",singleColorScale:!0},RdPu:{displayName:"Red-Purple shades",singleColorScale:!0},PuRd:{displayName:"Purple-Red shades",singleColorScale:!0},OrRd:{displayName:"Orange-Red shades",singleColorScale:!0},YlOrRd:{displayName:"Yellow-Orange-Red shades",singleColorScale:!0},YlOrBr:{displayName:"Yellow-Orange-Brown shades",singleColorScale:!0},Purples:{displayName:"Purple shades",singleColorScale:!0},Blues:{displayName:"Blue shades",singleColorScale:!0},Greens:{displayName:"Green shades",singleColorScale:!0},Oranges:{displayName:"Orange shades",singleColorScale:!0},Reds:{displayName:"Red shades",singleColorScale:!0},Greys:{displayName:"Grey shades",singleColorScale:!0},PuOr:{displayName:"Purple-Orange",singleColorScale:!1},BrBG:{displayName:"Brown-Blue-Green",singleColorScale:!1},PRGn:{displayName:"Purple-Red-Green",singleColorScale:!1},PiYG:{displayName:"Magenta-Yellow-Green",singleColorScale:!1},RdBu:{displayName:"Red-Blue",singleColorScale:!1},RdGy:{displayName:"Red-Grey",singleColorScale:!1},RdYlBu:{displayName:"Red-Yellow-Blue",singleColorScale:!1},Spectral:{displayName:"Spectral colors",singleColorScale:!1},RdYlGn:{displayName:"Red-Yellow-Green",singleColorScale:!1},Accent:{displayName:"Accents",singleColorScale:!1},Dark2:{displayName:"Dark colors",singleColorScale:!1},Paired:{displayName:"Paired colors",singleColorScale:!1},Pastel1:{displayName:"Pastel 1 colors",singleColorScale:!1},Pastel2:{displayName:"Pastel 2 colors",singleColorScale:!1},Set1:{displayName:"Set 1 colors",singleColorScale:!1},Set2:{displayName:"Set 2 colors",singleColorScale:!1},Set3:{displayName:"Set 3 colors",singleColorScale:!1},PuBu:{displayName:"Purple-Blue shades",singleColorScale:!0},"hsv-RdBu":{displayName:"HSV Red-Blue",singleColorScale:!1},"hsv-CyMg":{displayName:"HSV Cyan-Magenta",singleColorScale:!1}},brewerKeys=Object.keys(colorbrewer);exports.ColorBrewerSchemes=brewerKeys.filter((function(brewerName){return ColorBrewerSchemeIndex[brewerName]})).map((function(brewerName){var props=ColorBrewerSchemeIndex[brewerName],colorSets=colorbrewer[brewerName],colorSetsArray=[];return Object.keys(colorSets).forEach((function(numColors){return colorSetsArray[+numColors]=colorSets[numColors]})),{name:brewerName,displayName:props.displayName,colorSets:colorSetsArray,singleColorScale:props.singleColorScale}}))},1774:function(module,exports,__webpack_require__){"use strict";function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}__webpack_require__(17),__webpack_require__(36),__webpack_require__(94),__webpack_require__(79),__webpack_require__(22),__webpack_require__(68),__webpack_require__(5),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(33),__webpack_require__(28),__webpack_require__(29),__webpack_require__(39),Object.defineProperty(exports,"__esModule",{value:!0}),exports.ColorScheme=void 0;var d3_color_1=__webpack_require__(200),d3_interpolate_1=__webpack_require__(244),Util_1=__webpack_require__(40),isPresent_1=__webpack_require__(241),ColorUtils_1=__webpack_require__(986),ColorScheme=function(){function ColorScheme(name,colorSets,singleColorScale,isDistinct){var _this=this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ColorScheme),this.name=name,this.colorSets=[],this.singleColorScale=!!singleColorScale,this.isDistinct=!!isDistinct,colorSets.forEach((function(set){return _this.colorSets[set.length]=set}))}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(ColorScheme,[{key:"improviseGradientFromShorter",value:function improviseGradientFromShorter(shortColors,numColors){for(var newColors=Util_1.clone(shortColors);newColors.length<numColors;)for(var index=newColors.length-1;index>0;index-=1){var startColor=d3_color_1.rgb(newColors[index-1]),endColor=d3_color_1.rgb(newColors[index]),newColor=d3_interpolate_1.interpolate(startColor,endColor)(.5);if(newColors.splice(index,0,newColor),newColors.length>=numColors)break}return newColors}},{key:"improviseGradientFromLonger",value:function improviseGradientFromLonger(knownColors,numColors){for(var newColors=[],scale=ColorUtils_1.interpolateArray(knownColors),index=0;index<numColors;index++)newColors.push(scale(index/numColors));return newColors}},{key:"getGradientColors",value:function getGradientColors(numColors){var colorSets=this.colorSets;if(colorSets[numColors])return Util_1.clone(colorSets[numColors]);var prevColors=Util_1.clone(colorSets).reverse().find((function(set){return set&&set.length<numColors}));return prevColors?this.improviseGradientFromShorter(prevColors,numColors):this.improviseGradientFromLonger(colorSets.find((function(set){return!!set})),numColors)}},{key:"getDistinctColors",value:function getDistinctColors(numColors){var colorSets=this.colorSets;if(0===colorSets.length)return[];if(colorSets[numColors])return Util_1.clone(colorSets[numColors]);if(numColors>colorSets.length-1){var colorSet=Util_1.lastOfNonEmptyArray(colorSets);return this.improviseGradientFromShorter(colorSet,numColors)}for(var i=numColors;i<colorSets.length;i++)if(colorSets[i])return colorSets[i].slice(0,numColors);return[]}},{key:"getColors",value:function getColors(numColors){return this.isDistinct?this.getDistinctColors(numColors):this.getGradientColors(numColors)}},{key:"getUniqValueColorMap",value:function getUniqValueColorMap(uniqValues,inverseOrder){var colors=this.getColors(uniqValues.length)||[];inverseOrder&&colors.reverse();var colorByValue=new Map;return uniqValues.forEach((function(value,index){return colorByValue.set(value,colors[index])})),colorByValue}},{key:"assignColors",value:function assignColors(seriesArr){var invertColorScheme=arguments.length>1&&void 0!==arguments[1]&&arguments[1],customColorMap=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,seriesColorMap=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Map;seriesArr.forEach((function(series){var customColor=customColorMap.get(series.seriesName);customColor&&seriesColorMap.set(series.seriesName,customColor)})),this.updateColorMap(seriesArr,seriesColorMap,invertColorScheme),seriesArr.forEach((function(series){series.color=seriesColorMap.get(series.seriesName)}))}},{key:"updateColorMap",value:function updateColorMap(seriesArr,seriesColorMap){var _this2=this,invertColorScheme=arguments.length>2&&void 0!==arguments[2]&&arguments[2];seriesArr.map((function(series){return series.seriesName})).filter((function(name){return!seriesColorMap.has(name)})).forEach((function(name){var availableColors=Util_1.lastOfNonEmptyArray(_this2.colorSets).slice();invertColorScheme&&availableColors.reverse();var usedColors=Array.from(seriesColorMap.values()).filter(isPresent_1.isPresent);seriesColorMap.set(name,ColorUtils_1.getLeastUsedColor(availableColors,usedColors))}))}}],[{key:"fromObject",value:function fromObject(name,colorSets,singleColorScale){var colorSetsArray=[];return Object.keys(colorSets).forEach((function(numColors){return colorSetsArray[+numColors]=colorSets[numColors]})),new ColorScheme(name,colorSetsArray,singleColorScale)}}]),ColorScheme}();exports.ColorScheme=ColorScheme},1775:function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(65),__webpack_require__(32),__webpack_require__(62),__webpack_require__(5),__webpack_require__(14),__webpack_require__(31),__webpack_require__(28),__webpack_require__(29),__webpack_require__(7),__webpack_require__(36),__webpack_require__(39),__webpack_require__(33),__webpack_require__(132),__webpack_require__(151),__webpack_require__(57),__webpack_require__(79),__webpack_require__(381),__webpack_require__(22),__webpack_require__(94),__webpack_require__(25),__webpack_require__(9),__webpack_require__(10),__webpack_require__(11),__webpack_require__(6),__webpack_require__(8),__webpack_require__(17);var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};Object.defineProperty(exports,"__esModule",{value:!0}),exports.GridProgram=void 0;var CoreTableUtils_1=__webpack_require__(320),isPresent_1=__webpack_require__(241),GridCell_1=__webpack_require__(1776),GridLangConstants_1=__webpack_require__(240),GridProgram=function(){function GridProgram(slug,tsv,lastCommit,grammar){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,GridProgram),this.guid=++GridProgram.guids,this.nodeDelimiter=GridLangConstants_1.GRID_NODE_DELIMITER,this.cellDelimiter=GridLangConstants_1.GRID_CELL_DELIMITER,this.edgeDelimiter=GridLangConstants_1.GRID_EDGE_DELIMITER,this.lines=tsv.replace(/\r/g,"").split(this.nodeDelimiter),this.slug=slug,this.lastCommit=lastCommit,this.grammar=grammar}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(GridProgram,[{key:"toJson",value:function toJson(){return{program:this.toString(),slug:this.slug,lastCommit:this.lastCommit}}},{key:"findNext",value:function findNext(position){var contents=this.getCell(position).contents;return this.grepFirst(contents,Object.assign(Object.assign({},position),{column:position.column+1}))}},{key:"findAll",value:function findAll(position){var contents=this.getCell(position).contents;return this.grep(contents,Object.assign(Object.assign({},position),{column:position.column+1}))}},{key:"ring",value:function ring(position){var _marked=regeneratorRuntime.mark(generator),matrix=this.asArrays,numRows=matrix.length;if(!numRows)return regeneratorRuntime.mark((function generator(){return regeneratorRuntime.wrap((function generator$(_context){for(;;)switch(_context.prev=_context.next){case 0:case"end":return _context.stop()}}),generator)}))();var pointer=Object.assign(Object.assign({},position),{started:!1,endRow:position.row,endCol:position.column});pointer.row>=numRows&&(pointer.endRow=numRows-1);var lastLine=matrix[pointer.endRow];function generator(){return regeneratorRuntime.wrap((function generator$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!pointer.started||pointer.row!==pointer.endRow||pointer.column!==pointer.endCol){_context2.next=3;break}return _context2.abrupt("return");case 3:if(pointer.started=!0,void 0!==matrix[pointer.row]&&void 0!==matrix[pointer.row][pointer.column]){_context2.next=9;break}return pointer.row++,pointer.column=0,pointer.row>=numRows&&(pointer.row=0),_context2.abrupt("continue",0);case 9:return _context2.next=11,{row:pointer.row,column:pointer.column};case 11:pointer.column++,_context2.next=0;break;case 14:case"end":return _context2.stop()}}),_marked)}return pointer.endCol=void 0===lastLine[pointer.endCol]?lastLine.length:pointer.endCol,generator()}},{key:"valuesFrom",value:function valuesFrom(){var _this=this,position=arguments.length>0&&void 0!==arguments[0]?arguments[0]:GridLangConstants_1.Origin;return Array.from(this.ring(position)).map((function(next){return _this.getCellContents(next)}))}},{key:"numRows",get:function get(){return this.lines.length}},{key:"patch",value:function patch(obj){var _this2=this;return Object.keys(obj).forEach((function(key){return _this2.setLineValue(key,obj[key])})),this}},{key:"grepFirst",value:function grepFirst(key){var _step,position=arguments.length>1&&void 0!==arguments[1]?arguments[1]:GridLangConstants_1.Origin,_iterator=_createForOfIteratorHelper(this.ring(position));try{for(_iterator.s();!(_step=_iterator.n()).done;){var next=_step.value;if(this.getCellContents(next)===key)return next}}catch(err){_iterator.e(err)}finally{_iterator.f()}}},{key:"grep",value:function grep(key){var _step2,position=arguments.length>1&&void 0!==arguments[1]?arguments[1]:GridLangConstants_1.Origin,hits=[],_iterator2=_createForOfIteratorHelper(this.ring(position));try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var next=_step2.value;this.getCellContents(next)===key&&hits.push(next)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}return hits}},{key:"tuplesObject",get:function get(){var _this3=this,obj={};return this.lines.filter((function(line){return!line.startsWith(_this3.edgeDelimiter)})).forEach((function(line){var words=line.split(_this3.cellDelimiter),key=words.shift();key&&(obj[key.trim()]=words.join(_this3.cellDelimiter).trim())})),obj}},{key:"getLine",value:function getLine(keyword){var _this4=this;return this.lines.find((function(line){return line.startsWith(keyword+_this4.cellDelimiter)}))}},{key:"getLineValue",value:function getLineValue(keyword){var line=this.getLine(keyword);return line?line.split(this.cellDelimiter)[1]:void 0}},{key:"getBlockLocation",value:function getBlockLocation(blockRowNumber){var _this5=this,startRow=blockRowNumber+1,numRows=this.lines.slice(startRow).findIndex((function(line){return line&&!line.startsWith(_this5.edgeDelimiter)}));return-1===numRows&&(numRows=this.lines.slice(startRow).length),{startRow:startRow,endRow:startRow+numRows,numRows:numRows}}},{key:"getKeywordIndex",value:function getKeywordIndex(key){var _this6=this;return this.lines.findIndex((function(line){return line.startsWith(key+_this6.cellDelimiter)||line===key}))}},{key:"getCell",value:function getCell(position){return new GridCell_1.GridCell(this.matrix,position,this.grammar)}},{key:"getCellContents",value:function getCellContents(position){var line=this.matrix[position.row];return line?line[position.column]:void 0}},{key:"matrix",get:function get(){var _this7=this;return this.lines.map((function(line){return line.split(_this7.cellDelimiter)}))}},{key:"deleteBlock",value:function deleteBlock(row){if(void 0===row)return this;var location=this.getBlockLocation(row);return location?(this.lines.splice(location.startRow,location.numRows),this):this}},{key:"deleteLine",value:function deleteLine(row){return void 0===row||this.lines.splice(row,1),this}},{key:"appendLine",value:function appendLine(line){return this.lines.push(line),this}},{key:"setCell",value:function setCell(row,col,value){var words=this.lines[row].split(this.cellDelimiter);return words[col]=value,this.lines[row]=words.join(this.cellDelimiter),this}},{key:"setLineValue",value:function setLineValue(key,value){var index=this.getKeywordIndex(key),newLine="".concat(key).concat(this.cellDelimiter).concat(value);return-1===index&&void 0!==value?this.lines.push(newLine):void 0===value?this.deleteLine(index):this.lines[index]=newLine,this}},{key:"getBlock",value:function getBlock(keywordIndex){var location=this.getBlockLocation(keywordIndex);return this.lines.slice(location.startRow,location.endRow).map((function(line){return line.substr(1)})).join(this.nodeDelimiter)}},{key:"updateBlock",value:function updateBlock(rowNumber,value){var _this$lines,_this8=this,location=this.getBlockLocation(rowNumber);return(_this$lines=this.lines).splice.apply(_this$lines,[location.startRow,location.numRows].concat(_toConsumableArray(value.split(this.nodeDelimiter).map((function(line){return _this8.edgeDelimiter+line}))))),this}},{key:"appendBlock",value:function appendBlock(key,value){var _this9=this;this.lines.push(key),value.split(this.nodeDelimiter).forEach((function(line){return _this9.lines.push(_this9.edgeDelimiter+line)}))}},{key:"getRowNumbersStartingWith",value:function getRowNumbersStartingWith(startsWith){var _this10=this;return this.lines.map((function(line,index){return line.startsWith(startsWith+_this10.cellDelimiter)||line===startsWith?index:null})).filter(isPresent_1.isPresent)}},{key:"getRowMatchingWords",value:function getRowMatchingWords(){for(var _len=arguments.length,words=new Array(_len),_key=0;_key<_len;_key++)words[_key]=arguments[_key];var matches=function matches(line){return words.every((function(word,index){return void 0===word||line[index]===word}))};return this.asArrays.findIndex(matches)}},{key:"asArrays",get:function get(){var _this11=this;return this.lines.map((function(line){return line.split(_this11.cellDelimiter)}))}},{key:"width",get:function get(){return Math.max.apply(Math,_toConsumableArray(this.asArrays.map((function(arr){return arr.length}))))}},{key:"toString",value:function toString(){return this.prettify()}},{key:"prettify",value:function prettify(){var _this12=this;return CoreTableUtils_1.trimMatrix(this.asArrays).map((function(line){return line.join(_this12.cellDelimiter)})).join(this.nodeDelimiter)}}]),GridProgram}();GridProgram.guids=0,__decorate([CoreTableUtils_1.imemo],GridProgram.prototype,"matrix",null),exports.GridProgram=GridProgram},1776:function(module,exports,__webpack_require__){"use strict";function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(39),__webpack_require__(48),__webpack_require__(55),__webpack_require__(25),__webpack_require__(57),__webpack_require__(28),__webpack_require__(9),__webpack_require__(10),__webpack_require__(33),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8);var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};Object.defineProperty(exports,"__esModule",{value:!0}),exports.GridCell=void 0;var CoreTableUtils_1=__webpack_require__(320),isPresent_1=__webpack_require__(241),GrammarUtils_1=__webpack_require__(1777),GridLangConstants_1=__webpack_require__(240),GridCell=function(){function GridCell(matrix,position,rootDefinition){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,GridCell),this.position=position,this.matrix=matrix,this.rootDefinition=rootDefinition}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(GridCell,[{key:"row",get:function get(){return this.position.row}},{key:"column",get:function get(){return this.position.column}},{key:"line",get:function get(){return this.matrix[this.row]}},{key:"isCommentCell",get:function get(){var contents=this.contents;return contents&&GridLangConstants_1.CommentCellDef.regex.test(contents)}},{key:"cellTerminalTypeDefinition",get:function get(){var rootDefinition=this.rootDefinition;if(this.isCommentCell)return GridLangConstants_1.CommentCellDef;var grammar=rootDefinition.grammar;if(0===this.column)return rootDefinition;var firstWordOnLine=this.line?this.line[0]:void 0,isFirstWordAKeyword=firstWordOnLine&&void 0!==grammar[firstWordOnLine];if(1===this.column&&firstWordOnLine&&isFirstWordAKeyword)return grammar[firstWordOnLine];if(isFirstWordAKeyword){var def=grammar[firstWordOnLine],positionalCellTypeDef=def.positionalCellDefs&&def.positionalCellDefs[this.column-2];return positionalCellTypeDef||(def.isHorizontalList&&this.contents?def:GridLangConstants_1.NothingGoesThereCellDef)}}},{key:"parentSubTableInfo",get:function get(){for(var row=this.row,matrix=this.matrix,pointerRow=row,subTableHeaderRow=-1;pointerRow>=0;){var line=matrix[pointerRow];if(!line)break;var parentKeyword=line[0];if(parentKeyword){if(-1===subTableHeaderRow)return;return{parentKeyword:parentKeyword,parentRow:pointerRow,subTableHeaderRow:subTableHeaderRow,isCellInHeader:row===subTableHeaderRow,headerKeyword:matrix[subTableHeaderRow][this.column]}}GrammarUtils_1.isBlankLine(line)||(subTableHeaderRow=pointerRow),pointerRow--}}},{key:"subTableParseResults",get:function get(){if(!this.cellTerminalTypeDefinition){var info=this.parentSubTableInfo;if(info){var parentKeyword=info.parentKeyword,isCellInHeader=info.isCellInHeader,subTableHeaderRow=info.subTableHeaderRow,headerKeyword=info.headerKeyword,subTableDef=this.rootDefinition.grammar[parentKeyword],headerCellDef=subTableDef&&subTableDef.headerCellDef;if(headerCellDef){var headerGrammar=headerCellDef.grammar,valueCellDef=!isCellInHeader&&headerGrammar?headerGrammar[headerKeyword]:void 0;return{isFrontierCell:this.isSubTableFrontierCell(subTableHeaderRow,subTableDef),def:isCellInHeader?headerCellDef:null!=valueCellDef?valueCellDef:GridLangConstants_1.SubTableValueCellDef}}}}}},{key:"isSubTableFrontierCell",value:function isSubTableFrontierCell(headerRow,subTableDef){var line=this.line,column=this.column,row=this.row,grammar=subTableDef.headerCellDef.grammar,isToTheImmediateRightOfLastFullCell=line&&CoreTableUtils_1.trimArray(line).length===column;return row===headerRow&&!GrammarUtils_1.isBlankLine(line)&&isToTheImmediateRightOfLastFullCell&&grammar&&Object.keys(grammar).length}},{key:"isFirstCellOnFrontierRow",get:function get(){var row=this.row,column=this.column,numRows=this.matrix.length;return!column&&(!!GrammarUtils_1.isBlankLine(this.line)&&(1===numRows?1===row?!GrammarUtils_1.isBlankLine(this.matrix[0]):0===row:row===numRows))}},{key:"suggestions",get:function get(){return[]}},{key:"definitionLinks",get:function get(){return[]}},{key:"implementationLinks",get:function get(){return[]}},{key:"cellDef",get:function get(){var _a,def=this.cellTerminalTypeDefinition;if(def)return def;var subTable=null===(_a=this.subTableParseResults)||void 0===_a?void 0:_a.def;return subTable||GridLangConstants_1.WorkInProgressCellDef}},{key:"errorMessage",get:function get(){if(!this.line)return"";var cellDef=this.cellDef,contents=this.contents,optionKeywords=this.optionKeywords,regex=cellDef.regex,requirementsDescription=cellDef.requirementsDescription,catchAllCellDef=cellDef.catchAllCellDef,catchAllKeywordRegex=null==catchAllCellDef?void 0:catchAllCellDef.regex;if(void 0===contents||""===contents)return"";var regexResult=regex?validate(contents,regex,requirementsDescription):void 0,catchAllRegexResult=catchAllKeywordRegex?validate(contents,catchAllKeywordRegex,catchAllCellDef.requirementsDescription):void 0;if(optionKeywords){if(optionKeywords.includes(contents))return"";if(regex)return regexResult;if(catchAllKeywordRegex)return catchAllRegexResult;var guess=GrammarUtils_1.didYouMean(contents,optionKeywords);return guess?"Did you mean '".concat(guess,"'?"):"Error: '".concat(contents,"' is not a valid option. Valid options are ").concat(optionKeywords.map((function(opt){return"'".concat(opt,"'")})).join(", "))}return regex?regexResult:catchAllKeywordRegex?catchAllRegexResult:""}},{key:"contents",get:function get(){return this.line?this.line[this.column]:void 0}},{key:"comment",get:function get(){var _a,contents=this.contents,errorMessage=this.errorMessage,cellDef=this.cellDef;if(!GrammarUtils_1.isEmpty(contents))return errorMessage||(cellDef.grammar?(null!==(_a=cellDef.grammar[contents])&&void 0!==_a?_a:cellDef.catchAllCellDef).description:[cellDef.description].join("\n"))}},{key:"cssClasses",get:function get(){var _a,errorMessage=this.errorMessage,cellDef=this.cellDef;if(errorMessage)return[GridLangConstants_1.CellHasErrorsClass];var showArrow=this.isFirstCellOnFrontierRow||(null===(_a=this.subTableParseResults)||void 0===_a?void 0:_a.isFrontierCell)?GridLangConstants_1.FrontierCellClass:void 0,hasSuggestions="table"===this.cellDef.keyword?"HasSuggestions":null;return[cellDef.cssClass,hasSuggestions,showArrow].filter(isPresent_1.isPresent)}},{key:"placeholder",get:function get(){var _a,contents=this.contents,cellDef=this.cellDef,terminalOptions=cellDef.terminalOptions,firstOption=terminalOptions&&terminalOptions[0],firstOptionName=firstOption&&firstOption.keyword,placeholder=null!==(_a=cellDef.valuePlaceholder)&&void 0!==_a?_a:firstOptionName;return GrammarUtils_1.isEmpty(contents)&&placeholder?'eg "'.concat(placeholder,'"'):void 0}},{key:"optionKeywords",get:function get(){var cellDef=this.cellDef,grammar=cellDef.grammar,headerCellDef=cellDef.headerCellDef,terminalOptions=cellDef.terminalOptions;return terminalOptions?terminalOptions.map((function(def){return def.keyword})):grammar?Object.keys(grammar):headerCellDef?Object.keys(headerCellDef.grammar):void 0}}]),GridCell}();__decorate([CoreTableUtils_1.imemo],GridCell.prototype,"subTableParseResults",null),__decorate([CoreTableUtils_1.imemo],GridCell.prototype,"cellDef",null),exports.GridCell=GridCell;var validate=function validate(value,regex,requirements){return"string"!=typeof value||regex.test(value)?"":"Error: ".concat(requirements||"'".concat(value,"' did not validate against ").concat(regex))}},1777:function(module,exports,__webpack_require__){"use strict";__webpack_require__(57),__webpack_require__(28),__webpack_require__(65),__webpack_require__(32),Object.defineProperty(exports,"__esModule",{value:!0}),exports.tsvToMatrix=exports.didYouMean=exports.isEmpty=exports.isBlankLine=void 0;exports.isBlankLine=function isBlankLine(line){return void 0===line||""===line.join("")};exports.isEmpty=function isEmpty(value){return""===value||void 0===value};exports.didYouMean=function didYouMean(){var str=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],caseSensitive=arguments.length>2&&void 0!==arguments[2]&&arguments[2],threshold=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.4,thresholdAbsolute=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20;caseSensitive||(str=str.toLowerCase());for(var closestMatch,maximumEditDistanceToBeBestMatch=Math.min(threshold*str.length,thresholdAbsolute),len=options.length,optionIndex=0;optionIndex<len;optionIndex++){var candidate=options[optionIndex];if(candidate){var editDistance=getEditDistance(str,caseSensitive?candidate:candidate.toLowerCase(),maximumEditDistanceToBeBestMatch);editDistance<maximumEditDistanceToBeBestMatch&&(maximumEditDistanceToBeBestMatch=editDistance,closestMatch=candidate)}}return closestMatch};var MAX_INT=Math.pow(2,32)-1,getEditDistance=function getEditDistance(stringA,stringB,maxInt){var aLength=stringA.length,bLength=stringB.length;if(0===aLength)return Math.min(maxInt+1,bLength);if(0===bLength)return Math.min(maxInt+1,aLength);if(Math.abs(aLength-bLength)>maxInt)return maxInt+1;for(var colMin,minJ,maxJ,matrix=[],bIndex=0;bIndex<=bLength;bIndex++)matrix[bIndex]=[bIndex];for(var aIndex=0;aIndex<=aLength;aIndex++)matrix[0][aIndex]=aIndex;for(var _bIndex=1;_bIndex<=bLength;_bIndex++){colMin=MAX_INT,minJ=1,_bIndex>maxInt&&(minJ=_bIndex-maxInt),(maxJ=bLength+1)>maxInt+_bIndex&&(maxJ=maxInt+_bIndex);for(var _aIndex=1;_aIndex<=aLength;_aIndex++)_aIndex<minJ||_aIndex>maxJ?matrix[_bIndex][_aIndex]=maxInt+1:stringB.charAt(_bIndex-1)===stringA.charAt(_aIndex-1)?matrix[_bIndex][_aIndex]=matrix[_bIndex-1][_aIndex-1]:matrix[_bIndex][_aIndex]=Math.min(matrix[_bIndex-1][_aIndex-1]+1,Math.min(matrix[_bIndex][_aIndex-1]+1,matrix[_bIndex-1][_aIndex]+1)),matrix[_bIndex][_aIndex]<colMin&&(colMin=matrix[_bIndex][_aIndex]);if(colMin>maxInt)return maxInt+1}return matrix[bLength][aLength]};exports.tsvToMatrix=function delimitedToMatrix(delimited){var rowDelimiter=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\n",columnDelimiter=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\t";return delimited.split(rowDelimiter).map((function(line){return line.split(columnDelimiter)}))}},1778:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(65),__webpack_require__(32),__webpack_require__(68),__webpack_require__(5),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(36),__webpack_require__(33),__webpack_require__(57),__webpack_require__(22),__webpack_require__(62),__webpack_require__(28),__webpack_require__(75),__webpack_require__(31),__webpack_require__(39),__webpack_require__(29),__webpack_require__(79),__webpack_require__(14),__webpack_require__(9),__webpack_require__(10),__webpack_require__(11);var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};Object.defineProperty(exports,"__esModule",{value:!0}),exports.DecisionMatrix=void 0;var mobx_1=__webpack_require__(41),UrlUtils_1=__webpack_require__(469),Util_1=__webpack_require__(40),CoreColumnDef_1=__webpack_require__(199),CoreTable_1=__webpack_require__(598),CoreTableUtils_1=__webpack_require__(320),GridLangConstants_1=__webpack_require__(240),ExplorerConstants_1=__webpack_require__(319),ExplorerProgram_1=__webpack_require__(979),GrapherGrammar_1=__webpack_require__(600),makeChoicesMap=function makeChoicesMap(delimited){var headerLine=delimited.split("\n")[0],map=new Map;return headerLine.split(CoreTableUtils_1.detectDelimiter(headerLine)).filter((function(name){return ExplorerConstants_1.ExplorerControlTypeRegex.test(name)})).forEach((function(choiceNameAndType){var words=choiceNameAndType.split(" "),_ref=[words.slice(0,-1).join(" "),words[words.length-1]],choiceName=_ref[0],choiceType=_ref[1];map.set(choiceName,choiceType)})),map},removeChoiceControlTypeInfo=function removeChoiceControlTypeInfo(label){return label.replace(ExplorerConstants_1.ExplorerControlTypeRegex,"")},dropColumnTypes=function dropColumnTypes(delimited){var rows=delimited.split("\n"),delimiter=CoreTableUtils_1.detectDelimiter(rows[0]);return rows[0]=rows[0].split(delimiter).map(removeChoiceControlTypeInfo).join(delimiter),rows.join("\n")},makeCheckBoxOption=function makeCheckBoxOption(options,choiceName){var checked=options.some((function(option){return!0===option.checked&&option.value===GridLangConstants_1.GridBoolean.true})),available=2===new Set(options.filter((function(opt){return opt.available})).map((function(opt){return opt.label}))).size;return[{label:choiceName,checked:checked,value:GridLangConstants_1.GridBoolean.true,available:available}]},DecisionMatrix=function(){function DecisionMatrix(delimited){var hash=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";_classCallCheck(this,DecisionMatrix),this.currentParams={},this.selectedRow={},this.choices=makeChoicesMap(delimited),this.table=new CoreTable_1.CoreTable(CoreTableUtils_1.parseDelimited(dropColumnTypes(delimited)),[{slug:GrapherGrammar_1.GrapherGrammar.grapherId.keyword,type:CoreColumnDef_1.ColumnTypeNames.Integer}]),this.hash=hash,this.setValuesFromChoiceParams()}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(DecisionMatrix,[{key:"allDecisionsAsQueryParams",value:function allDecisionsAsQueryParams(){var _this=this;return this.table.rows.map((function(row){var choiceParams={};return _this.choiceNames.forEach((function(name){choiceParams[name]=row[name]})),choiceParams}))}},{key:"numRows",get:function get(){return this.table.numRows}},{key:"requiredGrapherIds",get:function get(){return this.table.get(GrapherGrammar_1.GrapherGrammar.grapherId.keyword).uniqValues}},{key:"toConstrainedOptions",value:function toConstrainedOptions(){var _this2=this,settings=Object.assign({},this.currentParams);return this.choiceNames.forEach((function(choiceName){_this2.isOptionAvailable(choiceName,settings[choiceName],settings)||(settings[choiceName]=_this2.firstAvailableOptionForChoice(choiceName,settings))})),settings}},{key:"diffBetweenUserSettingsAndConstrained",get:function get(){return Util_1.differenceObj(this.toConstrainedOptions(),this.currentParams)}},{key:"setValueCommand",value:function setValueCommand(choiceName,value){var _this3=this;this._setValue(choiceName,value);var invalidState=this.diffBetweenUserSettingsAndConstrained;Object.keys(invalidState).forEach((function(key){_this3.availableChoiceOptions[key].length>1&&_this3._setValue(key,invalidState[key])}))}},{key:"_setValue",value:function _setValue(choiceName,value){""===value?delete this.currentParams[choiceName]:this.currentParams[choiceName]=value,this.selectedRow=ExplorerProgram_1.trimAndParseObject(this.table.rowsAt([this.selectedRowIndex])[0],GrapherGrammar_1.GrapherGrammar)}},{key:"setValuesFromChoiceParams",value:function setValuesFromChoiceParams(){var _this4=this,choiceParams=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.choiceNames.forEach((function(choiceName){void 0===choiceParams[choiceName]?_this4._setValue(choiceName,_this4.firstAvailableOptionForChoice(choiceName)):_this4._setValue(choiceName,choiceParams[choiceName])})),this}},{key:"choiceNames",get:function get(){return Array.from(this.choices.keys())}},{key:"allChoiceOptions",get:function get(){var _this5=this,choiceMap={};return this.choiceNames.forEach((function(choiceName){choiceMap[choiceName]=_this5.table.get(choiceName).uniqValues.filter((function(cell){return!CoreTableUtils_1.isCellEmpty(cell)}))})),choiceMap}},{key:"availableChoiceOptions",get:function get(){var _this6=this,result={};return this.choiceNames.forEach((function(choiceName){result[choiceName]=_this6.allChoiceOptions[choiceName].filter((function(option){return _this6.isOptionAvailable(choiceName,option)}))})),result}},{key:"firstAvailableOptionForChoice",value:function firstAvailableOptionForChoice(choiceName){var _this7=this,currentState=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.currentParams;return this.allChoiceOptions[choiceName].find((function(option){return _this7.isOptionAvailable(choiceName,option,currentState)}))}},{key:"isOptionAvailable",value:function isOptionAvailable(choiceName,option){var currentState=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.currentParams,query={};return this.choiceNames.slice(0,this.choiceNames.indexOf(choiceName)).forEach((function(name){query[name]=currentState[name]})),query[choiceName]=option,this.rowsWith(query,choiceName).length>0}},{key:"rowsWith",value:function rowsWith(query,choiceName){var modifiedQuery={};return Object.keys(Util_1.trimObject(query)).forEach((function(queryColumn){modifiedQuery[queryColumn]=queryColumn!==choiceName?[query[queryColumn],""]:query[queryColumn]})),this.table.findRows(modifiedQuery)}},{key:"firstMatch",get:function get(){var query=this.toConstrainedOptions();return this.rowsWith(query)[0]}},{key:"selectedRowIndex",get:function get(){return void 0===this.firstMatch?0:this.table.indexOf(this.firstMatch)}},{key:"toControlOption",value:function toControlOption(choiceName,optionName,currentValue,constrainedOptions){return{label:optionName,value:optionName,available:this.isOptionAvailable(choiceName,optionName,constrainedOptions),checked:currentValue===optionName}}},{key:"choicesWithAvailability",get:function get(){var _this8=this,selectedRow=this.selectedRow,constrainedOptions=this.toConstrainedOptions();return this.choiceNames.map((function(title){var value=void 0!==selectedRow[title]?selectedRow[title].toString():selectedRow[title],options=_this8.allChoiceOptions[title].map((function(optionName){return _this8.toControlOption(title,optionName,value,constrainedOptions)})),type=_this8.choices.get(title);return{title:title,displayTitle:title,type:type,value:value,options:type===ExplorerConstants_1.ExplorerControlType.Checkbox?makeCheckBoxOption(options,title):options}}))}},{key:"toString",value:function toString(){return UrlUtils_1.queryParamsToStr(this.currentParams)}}]),DecisionMatrix}();__decorate([mobx_1.observable],DecisionMatrix.prototype,"currentParams",void 0),__decorate([mobx_1.computed],DecisionMatrix.prototype,"diffBetweenUserSettingsAndConstrained",null),__decorate([mobx_1.action.bound],DecisionMatrix.prototype,"setValueCommand",null),__decorate([mobx_1.action.bound],DecisionMatrix.prototype,"_setValue",null),__decorate([mobx_1.action.bound],DecisionMatrix.prototype,"setValuesFromChoiceParams",null),__decorate([mobx_1.computed],DecisionMatrix.prototype,"choiceNames",null),__decorate([mobx_1.computed],DecisionMatrix.prototype,"allChoiceOptions",null),__decorate([mobx_1.computed],DecisionMatrix.prototype,"availableChoiceOptions",null),__decorate([mobx_1.observable],DecisionMatrix.prototype,"selectedRow",void 0),__decorate([mobx_1.computed],DecisionMatrix.prototype,"choicesWithAvailability",null),exports.DecisionMatrix=DecisionMatrix},1782:function(module,exports,__webpack_require__){"use strict";function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(5),__webpack_require__(14),__webpack_require__(9),__webpack_require__(10),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(18),__webpack_require__(21);var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ChartDimension=void 0;var mobx_1=__webpack_require__(41),Util_1=__webpack_require__(40),LegacyVariableCode_1=__webpack_require__(1783),Persistable_1=__webpack_require__(322),ChartDimensionDefaults=function ChartDimensionDefaults(){_classCallCheck(this,ChartDimensionDefaults),this.display=new LegacyVariableCode_1.LegacyVariableDisplayConfig,this.targetYear=void 0};__decorate([mobx_1.observable],ChartDimensionDefaults.prototype,"property",void 0),__decorate([mobx_1.observable],ChartDimensionDefaults.prototype,"variableId",void 0),__decorate([mobx_1.observable],ChartDimensionDefaults.prototype,"display",void 0),__decorate([mobx_1.observable],ChartDimensionDefaults.prototype,"targetYear",void 0);var ChartDimension=function(_ChartDimensionDefaul){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(ChartDimension,_ChartDimensionDefaul);var _super=_createSuper(ChartDimension);function ChartDimension(obj,manager){var _this;return _classCallCheck(this,ChartDimension),(_this=_super.call(this)).manager=manager,obj&&_this.updateFromObject(obj),_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(ChartDimension,[{key:"table",get:function get(){return this.manager.table}},{key:"updateFromObject",value:function updateFromObject(obj){obj.display&&Persistable_1.updatePersistables(this,{display:obj.display}),this.targetYear=obj.targetYear,this.variableId=obj.variableId,this.property=obj.property,this.slug=obj.slug}},{key:"toObject",value:function toObject(){return Util_1.trimObject(Persistable_1.deleteRuntimeAndUnchangedProps({property:this.property,variableId:this.variableId,display:this.display,targetYear:this.targetYear},new ChartDimensionDefaults))}},{key:"column",get:function get(){return this.table.get(this.columnSlug)}},{key:"columnSlug",get:function get(){var _a;return null!==(_a=this.slug)&&void 0!==_a?_a:this.variableId.toString()}}]),ChartDimension}(ChartDimensionDefaults);__decorate([mobx_1.computed],ChartDimension.prototype,"table",null),__decorate([mobx_1.observable],ChartDimension.prototype,"slug",void 0),__decorate([mobx_1.computed],ChartDimension.prototype,"column",null),__decorate([mobx_1.computed],ChartDimension.prototype,"columnSlug",null),exports.ChartDimension=ChartDimension},1783:function(module,exports,__webpack_require__){"use strict";function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(17),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(18),__webpack_require__(21);var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};Object.defineProperty(exports,"__esModule",{value:!0}),exports.LegacyVariableDisplayConfig=void 0;var mobx_1=__webpack_require__(41),Persistable_1=__webpack_require__(322),LegacyVariableDisplayConfigDefaults=function LegacyVariableDisplayConfigDefaults(){_classCallCheck(this,LegacyVariableDisplayConfigDefaults),this.name=void 0,this.unit=void 0,this.shortUnit=void 0,this.isProjection=void 0,this.conversionFactor=void 0,this.numDecimalPlaces=void 0,this.tolerance=void 0,this.yearIsDay=void 0,this.zeroDay=void 0,this.entityAnnotationsMap=void 0,this.includeInTable=!0,this.color=void 0};__decorate([mobx_1.observable],LegacyVariableDisplayConfigDefaults.prototype,"name",void 0),__decorate([mobx_1.observable],LegacyVariableDisplayConfigDefaults.prototype,"unit",void 0),__decorate([mobx_1.observable],LegacyVariableDisplayConfigDefaults.prototype,"shortUnit",void 0),__decorate([mobx_1.observable],LegacyVariableDisplayConfigDefaults.prototype,"isProjection",void 0),__decorate([mobx_1.observable],LegacyVariableDisplayConfigDefaults.prototype,"conversionFactor",void 0),__decorate([mobx_1.observable],LegacyVariableDisplayConfigDefaults.prototype,"numDecimalPlaces",void 0),__decorate([mobx_1.observable],LegacyVariableDisplayConfigDefaults.prototype,"tolerance",void 0),__decorate([mobx_1.observable],LegacyVariableDisplayConfigDefaults.prototype,"yearIsDay",void 0),__decorate([mobx_1.observable],LegacyVariableDisplayConfigDefaults.prototype,"zeroDay",void 0),__decorate([mobx_1.observable],LegacyVariableDisplayConfigDefaults.prototype,"entityAnnotationsMap",void 0),__decorate([mobx_1.observable],LegacyVariableDisplayConfigDefaults.prototype,"includeInTable",void 0),__decorate([mobx_1.observable],LegacyVariableDisplayConfigDefaults.prototype,"tableDisplay",void 0),__decorate([mobx_1.observable],LegacyVariableDisplayConfigDefaults.prototype,"color",void 0);var LegacyVariableDisplayConfig=function(_LegacyVariableDispla){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(LegacyVariableDisplayConfig,_LegacyVariableDispla);var _super=_createSuper(LegacyVariableDisplayConfig);function LegacyVariableDisplayConfig(obj){var _this;return _classCallCheck(this,LegacyVariableDisplayConfig),_this=_super.call(this),obj&&_this.updateFromObject(obj),_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(LegacyVariableDisplayConfig,[{key:"updateFromObject",value:function updateFromObject(obj){obj&&Persistable_1.updatePersistables(this,obj)}},{key:"toObject",value:function toObject(){return Persistable_1.deleteRuntimeAndUnchangedProps(Persistable_1.objectWithPersistablesToObject(this),new LegacyVariableDisplayConfigDefaults)}}]),LegacyVariableDisplayConfig}(LegacyVariableDisplayConfigDefaults);exports.LegacyVariableDisplayConfig=LegacyVariableDisplayConfig},1787:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.grapherKeysToSerialize=void 0,exports.grapherKeysToSerialize=["type","id","version","slug","title","subtitle","sourceDesc","note","hideTitleAnnotation","minTime","maxTime","timelineMinTime","timelineMaxTime","addCountryMode","highlightToggle","stackMode","hideLegend","logo","hideLogo","hideRelativeToggle","entityType","entityTypePlural","hideTimeline","zoomToSelection","minPopulationFilter","showYearLabels","hasChartTab","hasMapTab","tab","internalNotes","variantName","originUrl","isPublished","baseColorScheme","invertColorScheme","hideLinesOutsideTolerance","hideConnectedScatterLines","scatterPointLabelStrategy","compareEndPointsOnly","matchingEntitiesOnly","xAxis","yAxis","colorScale","map","dimensions","selectedEntityNames","selectedEntityColors","selectedEntityIds","sortBy","sortOrder","sortColumnSlug","excludedEntities","selectedFacetStrategy","hideFacetControl","comparisonLines","relatedQuestions"]},1788:function(module,exports,__webpack_require__){"use strict";function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(33),__webpack_require__(28),__webpack_require__(381),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8);var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};Object.defineProperty(exports,"__esModule",{value:!0}),exports.DimensionSlot=void 0;var mobx_1=__webpack_require__(41),Util_1=__webpack_require__(40),owidTypes_1=__webpack_require__(122),DimensionSlot=function(){function DimensionSlot(grapher,property){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DimensionSlot),this.grapher=grapher,this.property=property}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(DimensionSlot,[{key:"name",get:function get(){return{y:this.grapher.isDiscreteBar?"X axis":"Y axis",x:"X axis",size:"Size",color:"Color",filter:"Filter"}[this.property]||""}},{key:"allowMultiple",get:function get(){return this.property===owidTypes_1.DimensionProperty.y&&this.grapher.supportsMultipleYColumns}},{key:"isOptional",get:function get(){return this.allowMultiple}},{key:"dimensions",get:function get(){var _this=this;return this.grapher.dimensions.filter((function(d){return d.property===_this.property}))}},{key:"dimensionsOrderedAsInPersistedSelection",get:function get(){var _a,_b,_this2=this,legacyConfig=this.grapher.legacyConfigAsAuthored,variableIDsInSelectionOrder=Util_1.excludeUndefined(null!==(_b=null===(_a=legacyConfig.selectedData)||void 0===_a?void 0:_a.map((function(item){var _a,_b;return null===(_b=null===(_a=legacyConfig.dimensions)||void 0===_a?void 0:_a[item.index])||void 0===_b?void 0:_b.variableId})))&&void 0!==_b?_b:[]);return Util_1.sortBy(this.grapher.filledDimensions||[],(function(dim){return Util_1.findIndex(variableIDsInSelectionOrder,(function(variableId){return dim.variableId===variableId}))})).filter((function(dim){return dim.property===_this2.property}))}}]),DimensionSlot}();__decorate([mobx_1.computed],DimensionSlot.prototype,"name",null),__decorate([mobx_1.computed],DimensionSlot.prototype,"allowMultiple",null),__decorate([mobx_1.computed],DimensionSlot.prototype,"isOptional",null),__decorate([mobx_1.computed],DimensionSlot.prototype,"dimensions",null),__decorate([mobx_1.computed],DimensionSlot.prototype,"dimensionsOrderedAsInPersistedSelection",null),exports.DimensionSlot=DimensionSlot},1789:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.entityNameToCode=exports.codeToEntityName=exports.entityNamesToEntityCodes=exports.entityCodesToEntityNames=void 0;var Util_1=__webpack_require__(40);exports.entityCodesToEntityNames={ABW:"Aruba",AFG:"Afghanistan",AGO:"Angola",AIA:"Anguilla",ALA:"Ã…land Islands",ALB:"Albania",AND:"Andorra",ANT:"Netherlands Antilles",ARE:"United Arab Emirates",ARG:"Argentina",ARM:"Armenia",ASM:"American Samoa",ATA:"Antarctica",ATF:"French Southern Territories",ATG:"Antigua and Barbuda",AUS:"Australia",AUT:"Austria",AZE:"Azerbaijan",BDI:"Burundi",BEL:"Belgium",BEN:"Benin",BES:"Bonaire Sint Eustatius and Saba",BFA:"Burkina Faso",BGD:"Bangladesh",BGR:"Bulgaria",BHR:"Bahrain",BHS:"Bahamas",BIH:"Bosnia and Herzegovina",BLM:"Saint BarthÃ©lemy",BLR:"Belarus",BLZ:"Belize",BMU:"Bermuda",BOL:"Bolivia",BRA:"Brazil",BRB:"Barbados",BRN:"Brunei",BTN:"Bhutan",BVT:"Bouvet Island",BWA:"Botswana",CAF:"Central African Republic",CAN:"Canada",CCK:"Cocos Islands",CHE:"Switzerland",CHL:"Chile",CHN:"China",CIV:"Cote d'Ivoire",CMR:"Cameroon",COD:"Democratic Republic of Congo",COG:"Congo",COK:"Cook Islands",COL:"Colombia",COM:"Comoros",CPV:"Cape Verde",CRI:"Costa Rica",CUB:"Cuba",CUW:"Curacao",CXR:"Christmas Island",CYM:"Cayman Islands",CYP:"Cyprus",CZE:"Czechia",DEU:"Germany",DJI:"Djibouti",DMA:"Dominica",DNK:"Denmark",DOM:"Dominican Republic",DZA:"Algeria",ECU:"Ecuador",EGY:"Egypt",ERI:"Eritrea",ESH:"Western Sahara",ESP:"Spain",EST:"Estonia",ETH:"Ethiopia",FIN:"Finland",FJI:"Fiji",FLK:"Falkland Islands",FRA:"France",FRO:"Faeroe Islands",FSM:"Micronesia (country)",GAB:"Gabon",GBR:"United Kingdom",GEO:"Georgia",GGY:"Guernsey",GHA:"Ghana",GIB:"Gibraltar",GIN:"Guinea",GLP:"Guadeloupe",GMB:"Gambia",GNB:"Guinea-Bissau",GNQ:"Equatorial Guinea",GRC:"Greece",GRD:"Grenada",GRL:"Greenland",GTM:"Guatemala",GUF:"French Guiana",GUM:"Guam",GUY:"Guyana",HKG:"Hong Kong",HMD:"Heard Island and McDonald Islands",HND:"Honduras",HRV:"Croatia",HTI:"Haiti",HUN:"Hungary",IDN:"Indonesia",IMN:"Isle of Man",IND:"India",IOT:"British Indian Ocean Territory",IRL:"Ireland",IRN:"Iran",IRQ:"Iraq",ISL:"Iceland",ISR:"Israel",ITA:"Italy",JAM:"Jamaica",JEY:"Jersey",JOR:"Jordan",JPN:"Japan",KAZ:"Kazakhstan",KEN:"Kenya",KGZ:"Kyrgyzstan",KHM:"Cambodia",KIR:"Kiribati",KNA:"Saint Kitts and Nevis",KOR:"South Korea",KWT:"Kuwait",LAO:"Laos",LBN:"Lebanon",LBR:"Liberia",LBY:"Libya",LCA:"Saint Lucia",LIE:"Liechtenstein",LKA:"Sri Lanka",LSO:"Lesotho",LTU:"Lithuania",LUX:"Luxembourg",LVA:"Latvia",MAC:"Macao",MAF:"Saint Martin (French part)",MAR:"Morocco",MCO:"Monaco",MDA:"Moldova",MDG:"Madagascar",MDV:"Maldives",MEX:"Mexico",MHL:"Marshall Islands",MKD:"North Macedonia",MLI:"Mali",MLT:"Malta",MMR:"Myanmar",MNE:"Montenegro",MNG:"Mongolia",MNP:"Northern Mariana Islands",MOZ:"Mozambique",MRT:"Mauritania",MSR:"Montserrat",MTQ:"Martinique",MUS:"Mauritius",MWI:"Malawi",MYS:"Malaysia",MYT:"Mayotte",NAM:"Namibia",NCL:"New Caledonia",NER:"Niger",NFK:"Norfolk Island",NGA:"Nigeria",NIC:"Nicaragua",NIU:"Niue",NLD:"Netherlands",NOR:"Norway",NPL:"Nepal",NRU:"Nauru",NZL:"New Zealand",OMN:"Oman",OWID_ABK:"Abkhazia",OWID_AKD:"Akrotiri and Dhekelia",OWID_AUH:"Austria-Hungary",OWID_BAD:"Baden",OWID_BAV:"Bavaria",OWID_CIS:"Channel Islands",OWID_CYN:"Northern Cyprus",OWID_CZS:"Czechoslovakia",OWID_ERE:"Eritrea and Ethiopia",OWID_GDR:"East Germany",OWID_GFR:"West Germany",OWID_HAN:"Hanover",OWID_HSE:"Hesse Electoral",OWID_HSG:"Hesse Grand Ducal",OWID_KOS:"Kosovo",OWID_KRU:"United Korea",OWID_MEC:"Mecklenburg Schwerin",OWID_MNS:"Melanesia",OWID_MOD:"Modena",OWID_NAG:"Nagorno-Karabakh",OWID_NLC:"Caribbean Netherlands",OWID_PMA:"Parma",OWID_PYA:"Polynesia",OWID_RVN:"Republic of Vietnam",OWID_SAX:"Saxony",OWID_SEK:"Serbia excluding Kosovo",OWID_SIC:"Two Sicilies",OWID_SML:"Somaliland",OWID_SOS:"South Ossetia",OWID_SRM:"Serbia and Montenegro",OWID_TRS:"Transnistria",OWID_TUS:"Tuscany",OWID_USS:"USSR",OWID_WRL:"World",OWID_WRT:"Wuerttemburg",OWID_YAR:"Yemen Arab Republic",OWID_YGS:"Yugoslavia",OWID_YPR:"Yemen People's Republic",OWID_ZAN:"Zanzibar",PAK:"Pakistan",PAN:"Panama",PCN:"Pitcairn",PER:"Peru",PHL:"Philippines",PLW:"Palau",PNG:"Papua New Guinea",POL:"Poland",PRI:"Puerto Rico",PRK:"North Korea",PRT:"Portugal",PRY:"Paraguay",PSE:"Palestine",PYF:"French Polynesia",QAT:"Qatar",REU:"Reunion",ROU:"Romania",RUS:"Russia",RWA:"Rwanda",SAU:"Saudi Arabia",SDN:"Sudan",SEN:"Senegal",SGP:"Singapore",SGS:"South Georgia and the South Sandwich Islands",SHN:"Saint Helena",SJM:"Svalbard and Jan Mayen",SLB:"Solomon Islands",SLE:"Sierra Leone",SLV:"El Salvador",SMR:"San Marino",SOM:"Somalia",SPM:"Saint Pierre and Miquelon",SRB:"Serbia",SSD:"South Sudan",STP:"Sao Tome and Principe",SUR:"Suriname",SVK:"Slovakia",SVN:"Slovenia",SWE:"Sweden",SWZ:"Eswatini",SXM:"Sint Maarten (Dutch part)",SYC:"Seychelles",SYR:"Syria",TCA:"Turks and Caicos Islands",TCD:"Chad",TGO:"Togo",THA:"Thailand",TJK:"Tajikistan",TKL:"Tokelau",TKM:"Turkmenistan",TLS:"Timor",TON:"Tonga",TTO:"Trinidad and Tobago",TUN:"Tunisia",TUR:"Turkey",TUV:"Tuvalu",TWN:"Taiwan",TZA:"Tanzania",UGA:"Uganda",UKR:"Ukraine",UMI:"United States Minor Outlying Islands",URY:"Uruguay",USA:"United States",UZB:"Uzbekistan",VAT:"Vatican",VCT:"Saint Vincent and the Grenadines",VEN:"Venezuela",VGB:"British Virgin Islands",VIR:"United States Virgin Islands",VNM:"Vietnam",VUT:"Vanuatu",WLF:"Wallis and Futuna",WSM:"Samoa",YEM:"Yemen",ZAF:"South Africa",ZMB:"Zambia",ZWE:"Zimbabwe"},exports.entityNamesToEntityCodes=Util_1.invert(exports.entityCodesToEntityNames);exports.codeToEntityName=function codeToEntityName(codeOrEntityName){var _a;return null!==(_a=exports.entityCodesToEntityNames[codeOrEntityName])&&void 0!==_a?_a:codeOrEntityName};exports.entityNameToCode=function entityNameToCode(entityName){var _a;return null!==(_a=exports.entityNamesToEntityCodes[entityName])&&void 0!==_a?_a:entityName}},1793:function(module,exports,__webpack_require__){"use strict";__webpack_require__(33),__webpack_require__(28),Object.defineProperty(exports,"__esModule",{value:!0}),exports.getBinMaximums=exports.binningStrategyLabels=void 0;var simple_statistics_1=__webpack_require__(1794),d3_array_1=__webpack_require__(89),Util_1=__webpack_require__(40),BinningStrategy_1=__webpack_require__(468);function normalizeBinValues(binValues,minBinValue){var values=Util_1.uniq(Util_1.excludeUndefined(binValues));return void 0!==minBinValue?values.filter((function(v){return v>minBinValue})):values}exports.binningStrategyLabels={equalInterval:"Equal-interval",quantiles:"Quantiles",ckmeans:"Ckmeans",manual:"Manual"},exports.getBinMaximums=function getBinMaximums(args){var _a,binningStrategy=args.binningStrategy,sortedValues=args.sortedValues,binCount=args.binCount,minBinValue=args.minBinValue,valueCount=sortedValues.length;if(valueCount<1||binCount<1)return[];if(binningStrategy===BinningStrategy_1.BinningStrategy.ckmeans)return normalizeBinValues(simple_statistics_1.ckmeans(sortedValues,binCount>valueCount?valueCount:binCount).map(Util_1.last),minBinValue);if(binningStrategy===BinningStrategy_1.BinningStrategy.quantiles)return normalizeBinValues(d3_array_1.range(1,binCount+1).map((function(v){return d3_array_1.quantile(sortedValues,v/binCount)})),minBinValue);var minValue=null!==(_a=null!=minBinValue?minBinValue:Util_1.first(sortedValues))&&void 0!==_a?_a:0,binStepSize=function calcEqualIntervalStepSize(sortedValues,binCount,minBinValue){if(!sortedValues.length)return 10;var stepSizeInitial=(Util_1.last(sortedValues)-minBinValue)/binCount;return Util_1.roundSigFig(stepSizeInitial,1)}(sortedValues,binCount,minValue);return normalizeBinValues(d3_array_1.range(1,binCount+1).map((function(n){return minValue+n*binStepSize})),minBinValue)}},1801:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(106),__webpack_require__(5),__webpack_require__(9),__webpack_require__(10),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(18),__webpack_require__(21);var EmbedMenu_1,__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ShareMenu=void 0;var mobx_react_1=__webpack_require__(58),react_1=__importDefault(__webpack_require__(0)),mobx_1=__webpack_require__(41),copy_to_clipboard_1=__importDefault(__webpack_require__(1802)),react_fontawesome_1=__webpack_require__(123),faTwitter_1=__webpack_require__(1804),faFacebook_1=__webpack_require__(1805),faCode_1=__webpack_require__(1806),faShareAlt_1=__webpack_require__(999),faCopy_1=__webpack_require__(1807),faEdit_1=__webpack_require__(1808),ShareMenu=function(_react_1$default$Comp){_inherits(ShareMenu,_react_1$default$Comp);var _super=_createSuper(ShareMenu);function ShareMenu(props){var _this;return _classCallCheck(this,ShareMenu),(_this=_super.call(this,props)).dismissable=!0,_this.state={copied:!1},_this}return _createClass(ShareMenu,[{key:"manager",get:function get(){return this.props.manager}},{key:"title",get:function get(){var _a;return null!==(_a=this.manager.currentTitle)&&void 0!==_a?_a:""}},{key:"isDisabled",get:function get(){return!this.manager.slug}},{key:"canonicalUrl",get:function get(){return this.manager.canonicalUrl}},{key:"dismiss",value:function dismiss(){this.props.onDismiss()}},{key:"onClickSomewhere",value:function onClickSomewhere(){this.dismissable?this.dismiss():this.dismissable=!0}},{key:"componentDidMount",value:function componentDidMount(){document.addEventListener("click",this.onClickSomewhere)}},{key:"componentWillUnmount",value:function componentWillUnmount(){document.removeEventListener("click",this.onClickSomewhere)}},{key:"onEmbed",value:function onEmbed(){this.canonicalUrl&&(this.manager.addPopup(react_1.default.createElement(EmbedMenu,{key:"EmbedMenu",manager:this.manager})),this.dismiss())}},{key:"onNavigatorShare",value:function onNavigatorShare(){return __awaiter(this,void 0,void 0,regeneratorRuntime.mark((function _callee(){var shareData;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(this.canonicalUrl&&navigator.share){_context.next=2;break}return _context.abrupt("return");case 2:return shareData={title:this.title,url:this.canonicalUrl},_context.prev=3,_context.next=6,navigator.share(shareData);case 6:_context.next=11;break;case 8:_context.prev=8,_context.t0=_context.catch(3),console.error("couldn't share using navigator.share",_context.t0);case 11:case"end":return _context.stop()}}),_callee,this,[[3,8]])})))}},{key:"onCopy",value:function onCopy(){this.canonicalUrl&&copy_to_clipboard_1.default(this.canonicalUrl)&&this.setState({copied:!0})}},{key:"twitterHref",get:function get(){var href="https://twitter.com/intent/tweet/?text="+encodeURIComponent(this.title);return this.canonicalUrl&&(href+="&url="+encodeURIComponent(this.canonicalUrl)),href}},{key:"facebookHref",get:function get(){var href="https://www.facebook.com/dialog/share?app_id=1149943818390250&display=page";return this.canonicalUrl&&(href+="&href="+encodeURIComponent(this.canonicalUrl)),href}},{key:"render",value:function render(){var _this2=this,twitterHref=this.twitterHref,facebookHref=this.facebookHref,isDisabled=this.isDisabled,editUrl=this.manager.editUrl;return react_1.default.createElement("div",{className:"ShareMenu"+(isDisabled?" disabled":""),onClick:mobx_1.action((function(){return _this2.dismissable=!1}))},react_1.default.createElement("h2",null,"Share"),react_1.default.createElement("a",{className:"btn",target:"_blank",title:"Tweet a link","data-track-note":"chart-share-twitter",href:twitterHref,rel:"noopener"},react_1.default.createElement(react_fontawesome_1.FontAwesomeIcon,{icon:faTwitter_1.faTwitter})," Twitter"),react_1.default.createElement("a",{className:"btn",target:"_blank",title:"Share on Facebook","data-track-note":"chart-share-facebook",href:facebookHref,rel:"noopener"},react_1.default.createElement(react_fontawesome_1.FontAwesomeIcon,{icon:faFacebook_1.faFacebook})," Facebook"),react_1.default.createElement("a",{className:"btn",title:"Embed this visualization in another HTML document","data-track-note":"chart-share-embed",onClick:this.onEmbed},react_1.default.createElement(react_fontawesome_1.FontAwesomeIcon,{icon:faCode_1.faCode})," Embed"),"share"in navigator&&react_1.default.createElement("a",{className:"btn",title:"Share this visualization with an app on your device","data-track-note":"chart-share-navigator",onClick:this.onNavigatorShare},react_1.default.createElement(react_fontawesome_1.FontAwesomeIcon,{icon:faShareAlt_1.faShareAlt})," Share viaâ€¦"),react_1.default.createElement("a",{className:"btn",title:"Copy link to clipboard","data-track-note":"chart-share-copylink",onClick:this.onCopy},react_1.default.createElement(react_fontawesome_1.FontAwesomeIcon,{icon:faCopy_1.faCopy}),this.state.copied?"Copied!":"Copy link"),editUrl&&react_1.default.createElement("a",{className:"btn",target:"_blank",title:"Edit chart",href:editUrl,rel:"noopener"},react_1.default.createElement(react_fontawesome_1.FontAwesomeIcon,{icon:faEdit_1.faEdit})," Edit"))}}]),ShareMenu}(react_1.default.Component);__decorate([mobx_1.computed],ShareMenu.prototype,"manager",null),__decorate([mobx_1.computed],ShareMenu.prototype,"title",null),__decorate([mobx_1.computed],ShareMenu.prototype,"isDisabled",null),__decorate([mobx_1.computed],ShareMenu.prototype,"canonicalUrl",null),__decorate([mobx_1.action.bound],ShareMenu.prototype,"dismiss",null),__decorate([mobx_1.action.bound],ShareMenu.prototype,"onClickSomewhere",null),__decorate([mobx_1.action.bound],ShareMenu.prototype,"onEmbed",null),__decorate([mobx_1.action.bound],ShareMenu.prototype,"onNavigatorShare",null),__decorate([mobx_1.action.bound],ShareMenu.prototype,"onCopy",null),__decorate([mobx_1.computed],ShareMenu.prototype,"twitterHref",null),__decorate([mobx_1.computed],ShareMenu.prototype,"facebookHref",null),ShareMenu=__decorate([mobx_react_1.observer],ShareMenu),exports.ShareMenu=ShareMenu;var EmbedMenu=EmbedMenu_1=function(_react_1$default$Comp2){_inherits(EmbedMenu,_react_1$default$Comp2);var _super2=_createSuper(EmbedMenu);function EmbedMenu(){var _this3;return _classCallCheck(this,EmbedMenu),(_this3=_super2.apply(this,arguments)).dismissable=!0,_this3}return _createClass(EmbedMenu,[{key:"onClickSomewhere",value:function onClickSomewhere(){this.dismissable?this.manager.removePopup(EmbedMenu_1):this.dismissable=!0}},{key:"manager",get:function get(){return this.props.manager}},{key:"onClick",value:function onClick(){this.dismissable=!1}},{key:"componentDidMount",value:function componentDidMount(){document.addEventListener("click",this.onClickSomewhere)}},{key:"componentWillUnmount",value:function componentWillUnmount(){document.removeEventListener("click",this.onClickSomewhere)}},{key:"render",value:function render(){var _a,url=null!==(_a=this.manager.embedUrl)&&void 0!==_a?_a:this.manager.canonicalUrl;return react_1.default.createElement("div",{className:"embedMenu",onClick:this.onClick},react_1.default.createElement("h2",null,"Embed"),react_1.default.createElement("p",null,"Paste this into any HTML page:"),react_1.default.createElement("textarea",{readOnly:!0,onFocus:function onFocus(evt){return evt.currentTarget.select()},value:'<iframe src="'.concat(url,'" loading="lazy" style="width: 100%; height: 600px; border: 0px none;"></iframe>')}),this.manager.embedDialogAdditionalElements)}}]),EmbedMenu}(react_1.default.Component);__decorate([mobx_1.action.bound],EmbedMenu.prototype,"onClickSomewhere",null),__decorate([mobx_1.computed],EmbedMenu.prototype,"manager",null),__decorate([mobx_1.action.bound],EmbedMenu.prototype,"onClick",null),EmbedMenu=EmbedMenu_1=__decorate([mobx_react_1.observer],EmbedMenu)},1809:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(28),__webpack_require__(197),__webpack_require__(32),__webpack_require__(17),__webpack_require__(36),__webpack_require__(31),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(18),__webpack_require__(21);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.EntitySelectorModal=void 0;var React=__importStar(__webpack_require__(0)),mobx_react_1=__webpack_require__(58),mobx_1=__webpack_require__(41),Util_1=__webpack_require__(40),FuzzySearch_1=__webpack_require__(1e3),faTimes_1=__webpack_require__(473),react_fontawesome_1=__webpack_require__(123),EntitySelectorMulti=function(_React$Component){_inherits(EntitySelectorMulti,_React$Component);var _super=_createSuper(EntitySelectorMulti);function EntitySelectorMulti(){var _this;return _classCallCheck(this,EntitySelectorMulti),(_this=_super.apply(this,arguments)).base=React.createRef(),_this.dismissable=!0,_this}return _createClass(EntitySelectorMulti,[{key:"availableEntities",get:function get(){return this.props.selectionArray.availableEntityNames}},{key:"fuzzy",get:function get(){return new FuzzySearch_1.FuzzySearch(this.searchableEntities,"name")}},{key:"searchableEntities",get:function get(){return this.availableEntities.map((function(name){return{name:name}}))}},{key:"searchResults",get:function get(){return this.searchInput?this.fuzzy.search(this.searchInput):Util_1.sortBy(this.searchableEntities,(function(result){return result.name}))}},{key:"onClickOutside",value:function onClickOutside(e){this.dismissable&&this.props.onDismiss()}},{key:"componentDidMount",value:function componentDidMount(){var _this2=this;this.base.current.addEventListener("click",(function(){_this2.dismissable=!1,setTimeout((function(){return _this2.dismissable=!0}),100)})),setTimeout((function(){return document.addEventListener("click",_this2.onClickOutside)}),1),Util_1.isTouchDevice()||this.searchField.focus()}},{key:"componentWillUnmount",value:function componentWillUnmount(){document.removeEventListener("click",this.onClickOutside)}},{key:"onSearchKeyDown",value:function onSearchKeyDown(e){"Enter"===e.key&&this.searchResults.length>0?(this.props.selectionArray.selectEntity(this.searchResults[0].name),this.searchInput=""):"Escape"===e.key&&this.props.onDismiss()}},{key:"onClear",value:function onClear(){this.props.selectionArray.clearSelection()}},{key:"render",value:function render(){var _this3=this,selectionArray=this.props.selectionArray,searchResults=this.searchResults,searchInput=this.searchInput,selectedEntityNames=selectionArray.selectedEntityNames;return React.createElement("div",{className:"entitySelectorOverlay"},React.createElement("div",{ref:this.base,className:"EntitySelectorMulti"},React.createElement("header",{className:"wrapper"},React.createElement("h2",null,"Choose data to show"," ",React.createElement("button",{onClick:this.props.onDismiss},React.createElement(react_fontawesome_1.FontAwesomeIcon,{icon:faTimes_1.faTimes})))),React.createElement("div",{className:"entities wrapper"},React.createElement("div",{className:"searchResults"},React.createElement("input",{type:"search",placeholder:"Search...",value:searchInput,onInput:function onInput(e){_this3.searchInput=e.currentTarget.value},onKeyDown:this.onSearchKeyDown,ref:function ref(e){return _this3.searchField=e}}),React.createElement("ul",null,searchResults.map((function(result){return React.createElement("li",{key:result.name},React.createElement("label",{className:"clickable"},React.createElement("input",{type:"checkbox",checked:selectionArray.selectedSet.has(result.name),onChange:function onChange(){return selectionArray.toggleSelection(result.name)}})," ",result.name))})))),React.createElement("div",{className:"selectedData"},React.createElement("ul",null,selectedEntityNames.map((function(name){return React.createElement("li",{key:name},React.createElement("label",{className:"clickable"},React.createElement("input",{type:"checkbox",checked:!0,onChange:function onChange(){selectionArray.deselectEntity(name)}})," ",name))}))),selectedEntityNames.length>1?React.createElement("button",{className:"clearSelection",onClick:this.onClear},React.createElement("span",{className:"icon"},React.createElement(react_fontawesome_1.FontAwesomeIcon,{icon:faTimes_1.faTimes}))," ","Unselect all"):void 0))))}}]),EntitySelectorMulti}(React.Component);__decorate([mobx_1.observable],EntitySelectorMulti.prototype,"searchInput",void 0),__decorate([mobx_1.computed],EntitySelectorMulti.prototype,"availableEntities",null),__decorate([mobx_1.computed],EntitySelectorMulti.prototype,"fuzzy",null),__decorate([mobx_1.computed],EntitySelectorMulti.prototype,"searchableEntities",null),__decorate([mobx_1.computed],EntitySelectorMulti.prototype,"searchResults",null),__decorate([mobx_1.action.bound],EntitySelectorMulti.prototype,"onClickOutside",null),__decorate([mobx_1.action.bound],EntitySelectorMulti.prototype,"onSearchKeyDown",null),__decorate([mobx_1.action.bound],EntitySelectorMulti.prototype,"onClear",null),EntitySelectorMulti=__decorate([mobx_react_1.observer],EntitySelectorMulti);var EntitySelectorSingle=function(_React$Component2){_inherits(EntitySelectorSingle,_React$Component2);var _super2=_createSuper(EntitySelectorSingle);function EntitySelectorSingle(){var _this4;return _classCallCheck(this,EntitySelectorSingle),(_this4=_super2.apply(this,arguments)).base=React.createRef(),_this4.dismissable=!0,_this4}return _createClass(EntitySelectorSingle,[{key:"availableEntities",get:function get(){var availableItems=[];return this.props.selectionArray.availableEntityNames.forEach((function(name){availableItems.push({id:name,label:name})})),Util_1.uniqBy(availableItems,(function(d){return d.label}))}},{key:"fuzzy",get:function get(){return new FuzzySearch_1.FuzzySearch(this.availableEntities,"label")}},{key:"searchResults",get:function get(){return this.searchInput?this.fuzzy.search(this.searchInput):Util_1.sortBy(this.availableEntities,(function(result){return result.label}))}},{key:"onClickOutside",value:function onClickOutside(e){this.base&&!this.base.current.contains(e.target)&&this.props.onDismiss()}},{key:"componentDidMount",value:function componentDidMount(){var _this5=this;this.base.current.addEventListener("click",(function(){_this5.dismissable=!1,setTimeout((function(){return _this5.dismissable=!0}),100)})),setTimeout((function(){return document.addEventListener("click",_this5.onClickOutside)}),1),this.props.isMobile||this.searchField.focus()}},{key:"componentWillUnmount",value:function componentWillUnmount(){document.removeEventListener("click",this.onClickOutside)}},{key:"onSearchKeyDown",value:function onSearchKeyDown(e){"Enter"===e.key&&this.searchResults.length>0?(this.onSelect(this.searchResults[0].label),this.searchInput=""):"Escape"===e.key&&this.props.onDismiss()}},{key:"onSelect",value:function onSelect(entityName){this.props.selectionArray.setSelectedEntities([entityName]),this.props.onDismiss()}},{key:"render",value:function render(){var _this6=this,searchResults=this.searchResults,searchInput=this.searchInput;return React.createElement("div",{className:"entitySelectorOverlay"},React.createElement("div",{ref:this.base,className:"EntitySelectorSingle"},React.createElement("header",{className:"wrapper"},React.createElement("h2",null,"Choose data to show"," ",React.createElement("button",{onClick:this.props.onDismiss},React.createElement(react_fontawesome_1.FontAwesomeIcon,{icon:faTimes_1.faTimes})))),React.createElement("div",{className:"wrapper"},React.createElement("input",{type:"search",placeholder:"Search...",value:searchInput,onInput:function onInput(e){_this6.searchInput=e.currentTarget.value},onKeyDown:this.onSearchKeyDown,ref:function ref(e){return _this6.searchField=e}}),React.createElement("ul",null,searchResults.map((function(d){return React.createElement("li",{key:d.id,className:"clickable",onClick:function onClick(){return _this6.onSelect(d.id)}},d.label)}))))))}}]),EntitySelectorSingle}(React.Component);__decorate([mobx_1.observable],EntitySelectorSingle.prototype,"searchInput",void 0),__decorate([mobx_1.computed],EntitySelectorSingle.prototype,"availableEntities",null),__decorate([mobx_1.computed],EntitySelectorSingle.prototype,"fuzzy",null),__decorate([mobx_1.computed],EntitySelectorSingle.prototype,"searchResults",null),__decorate([mobx_1.action.bound],EntitySelectorSingle.prototype,"onClickOutside",null),__decorate([mobx_1.action.bound],EntitySelectorSingle.prototype,"onSearchKeyDown",null),__decorate([mobx_1.action.bound],EntitySelectorSingle.prototype,"onSelect",null),EntitySelectorSingle=__decorate([mobx_react_1.observer],EntitySelectorSingle);var EntitySelectorModal=function(_React$Component3){_inherits(EntitySelectorModal,_React$Component3);var _super3=_createSuper(EntitySelectorModal);function EntitySelectorModal(){return _classCallCheck(this,EntitySelectorModal),_super3.apply(this,arguments)}return _createClass(EntitySelectorModal,[{key:"render",value:function render(){return this.props.canChangeEntity?React.createElement(EntitySelectorSingle,Object.assign({},this.props)):React.createElement(EntitySelectorMulti,Object.assign({},this.props))}}]),EntitySelectorModal}(React.Component);EntitySelectorModal=__decorate([mobx_react_1.observer],EntitySelectorModal),exports.EntitySelectorModal=EntitySelectorModal},1847:function(module,exports,__webpack_require__){"use strict";function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=arr&&("undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"]);if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(28),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(18),__webpack_require__(21),__webpack_require__(22),__webpack_require__(17),__webpack_require__(29);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SparkBars=void 0;var BarState,React=__importStar(__webpack_require__(0)),mobx_1=__webpack_require__(41),mobx_react_1=__webpack_require__(58),d3_scale_1=__webpack_require__(279),decko_1=__webpack_require__(601),Util_1=__webpack_require__(40);!function(BarState){BarState.highlighted="highlighted",BarState.current="current",BarState.normal="normal",BarState.faint="faint"}(BarState||(BarState={}));var SparkBars=function(_React$Component){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(SparkBars,_React$Component);var _super=_createSuper(SparkBars);function SparkBars(){return _classCallCheck(this,SparkBars),_super.apply(this,arguments)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(SparkBars,[{key:"maxY",get:function get(){var _this=this;return Util_1.max(this.bars.map((function(d){var _a;return d&&null!==(_a=_this.props.y(d))&&void 0!==_a?_a:0})))}},{key:"barHeightScale",get:function get(){var maxY=this.maxY;return d3_scale_1.scaleLinear().domain([0,void 0!==maxY&&maxY>0?maxY:1]).range([0,1])}},{key:"barHeight",value:function barHeight(d){if(void 0!==d){var value=this.props.y(d);if(void 0!==value){var ratio=this.barHeightScale(value);return"".concat(100*ratio,"%")}}return"0%"}},{key:"barState",value:function barState(d){return d===this.props.highlightedX?BarState.highlighted:d===this.props.currentX?BarState.current:void 0!==this.props.highlightedX?BarState.faint:BarState.normal}},{key:"bars",get:function get(){for(var indexed=Util_1.keyBy(this.props.data,this.props.x),_this$props$xDomain=_slicedToArray(this.props.xDomain,2),start=_this$props$xDomain[0],end=_this$props$xDomain[1],result=[],i=start;i<=end;i++)result.push(indexed[i]);return result}},{key:"render",value:function render(){var _this2=this;return React.createElement("div",{className:this.props.className,onMouseLeave:function onMouseLeave(){var _a,_b;return null===(_b=(_a=_this2.props).onHover)||void 0===_b?void 0:_b.call(_a,void 0,void 0)}},this.bars.map((function(d,i){return React.createElement("div",{key:i,className:"bar-wrapper",onMouseEnter:function onMouseEnter(){var _a,_b;return null===(_b=(_a=_this2.props).onHover)||void 0===_b?void 0:_b.call(_a,d,i)}},_this2.props.highlightedX===i&&void 0!==d&&_this2.props.renderValue&&React.createElement("div",{className:"hanging-value highlighted highlighted-color"},_this2.props.renderValue(d)),React.createElement("div",{className:"bar ".concat(d?_this2.barState(_this2.props.x(d)):BarState.normal),style:{height:_this2.barHeight(d),backgroundColor:_this2.props.color}}))})))}}]),SparkBars}(React.Component);SparkBars.defaultProps={onHover:function onHover(){},className:"spark-bars"},__decorate([mobx_1.computed],SparkBars.prototype,"maxY",null),__decorate([mobx_1.computed],SparkBars.prototype,"barHeightScale",null),__decorate([decko_1.bind],SparkBars.prototype,"barHeight",null),__decorate([decko_1.bind],SparkBars.prototype,"barState",null),__decorate([mobx_1.computed],SparkBars.prototype,"bars",null),SparkBars=__decorate([mobx_react_1.observer],SparkBars),exports.SparkBars=SparkBars},1848:function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SparkBarTimeSeriesValue=void 0;var React=__importStar(__webpack_require__(0)),classnames_1=__importDefault(__webpack_require__(139)),react_fontawesome_1=__webpack_require__(123),faQuestionCircle_1=__webpack_require__(1849),Tippy_1=__webpack_require__(392);exports.SparkBarTimeSeriesValue=function SparkBarTimeSeriesValue(_ref){var value=_ref.value,latest=_ref.latest,tooltip=_ref.tooltip,className=_ref.className,displayDate=_ref.displayDate,valueColor=_ref.valueColor;return React.createElement("div",{className:classnames_1.default("time-series-value",className)},void 0!==value?React.createElement(React.Fragment,null,React.createElement("span",{className:"count"},React.createElement("span",{style:{color:valueColor}},value)," ",tooltip&&React.createElement(Tippy_1.Tippy,{content:tooltip,maxWidth:250},React.createElement("span",{className:"help-icon"},React.createElement(react_fontawesome_1.FontAwesomeIcon,{icon:faQuestionCircle_1.faQuestionCircle})))),React.createElement("span",{className:classnames_1.default("date",{latest:latest})},displayDate)):void 0)}},1850:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(28),__webpack_require__(119),__webpack_require__(79),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(18),__webpack_require__(21);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ProjectionChooser=void 0;var React=__importStar(__webpack_require__(0)),mobx_1=__webpack_require__(41),mobx_react_1=__webpack_require__(58),react_select_1=__importDefault(__webpack_require__(477)),Util_1=__webpack_require__(40),MapProjections_1=__webpack_require__(603),react_select_2=__webpack_require__(592),ProjectionChooser=function(_React$Component){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(ProjectionChooser,_React$Component);var _super=_createSuper(ProjectionChooser);function ProjectionChooser(){return _classCallCheck(this,ProjectionChooser),_super.apply(this,arguments)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(ProjectionChooser,[{key:"onChange",value:function onChange(selected){var _a,selectedValue=null===(_a=Util_1.first(react_select_2.asArray(selected)))||void 0===_a?void 0:_a.value;selectedValue&&this.props.onChange(selectedValue)}},{key:"options",get:function get(){return Object.values(MapProjections_1.MapProjectionName).map((function(projectName){return{value:projectName,label:MapProjections_1.MapProjectionLabels[projectName]}}))}},{key:"render",value:function render(){var value=this.props.value;return React.createElement("div",{style:{fontSize:"0.75rem",pointerEvents:"auto"}},React.createElement(react_select_1.default,{options:this.options,onChange:this.onChange,value:this.options.find((function(opt){return opt.value===value})),menuPlacement:"bottom",components:{IndicatorSeparator:null},styles:react_select_2.getStylesForTargetHeight(22),isSearchable:!1}))}}]),ProjectionChooser}(React.Component);__decorate([mobx_1.action.bound],ProjectionChooser.prototype,"onChange",null),__decorate([mobx_1.computed],ProjectionChooser.prototype,"options",null),ProjectionChooser=__decorate([mobx_react_1.observer],ProjectionChooser),exports.ProjectionChooser=ProjectionChooser},1851:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WorldRegionToProjection=void 0,function(WorldRegionToProjection){WorldRegionToProjection.Abkhazia="Asia",WorldRegionToProjection.Afghanistan="Asia",WorldRegionToProjection["Akrotiri and Dhekelia"]="Asia",WorldRegionToProjection.Albania="Europe",WorldRegionToProjection.Algeria="Africa",WorldRegionToProjection["American Samoa"]="Oceania",WorldRegionToProjection.Andorra="Europe",WorldRegionToProjection.Angola="Africa",WorldRegionToProjection.Anguilla="NorthAmerica",WorldRegionToProjection["Antigua and Barbuda"]="NorthAmerica",WorldRegionToProjection.Argentina="SouthAmerica",WorldRegionToProjection.Armenia="Asia",WorldRegionToProjection.Aruba="NorthAmerica",WorldRegionToProjection.Australia="Oceania",WorldRegionToProjection.Austria="Europe",WorldRegionToProjection["Austria-Hungary"]="Europe",WorldRegionToProjection.Azerbaijan="Asia",WorldRegionToProjection.Baden="Europe",WorldRegionToProjection.Bahamas="NorthAmerica",WorldRegionToProjection.Bahrain="Asia",WorldRegionToProjection.Bangladesh="Asia",WorldRegionToProjection.Barbados="NorthAmerica",WorldRegionToProjection.Bavaria="Europe",WorldRegionToProjection.Belarus="Europe",WorldRegionToProjection.Belgium="Europe",WorldRegionToProjection.Belize="NorthAmerica",WorldRegionToProjection.Benin="Africa",WorldRegionToProjection.Bermuda="NorthAmerica",WorldRegionToProjection.Bhutan="Asia",WorldRegionToProjection.Bolivia="SouthAmerica",WorldRegionToProjection["Bonaire Sint Eustatius and Saba"]="NorthAmerica",WorldRegionToProjection["Bosnia and Herzegovina"]="Europe",WorldRegionToProjection.Botswana="Africa",WorldRegionToProjection.Brazil="SouthAmerica",WorldRegionToProjection["British Indian Ocean Territory"]="Asia",WorldRegionToProjection["British Virgin Islands"]="NorthAmerica",WorldRegionToProjection.Brunei="Asia",WorldRegionToProjection.Bulgaria="Europe",WorldRegionToProjection["Burkina Faso"]="Africa",WorldRegionToProjection.Burundi="Africa",WorldRegionToProjection.Cambodia="Asia",WorldRegionToProjection.Cameroon="Africa",WorldRegionToProjection.Canada="NorthAmerica",WorldRegionToProjection["Cape Verde"]="Africa",WorldRegionToProjection["Cayman Islands"]="NorthAmerica",WorldRegionToProjection["Central African Republic"]="Africa",WorldRegionToProjection.Chad="Africa",WorldRegionToProjection["Channel Islands"]="Europe",WorldRegionToProjection.Chile="SouthAmerica",WorldRegionToProjection.China="Asia",WorldRegionToProjection["Christmas Island"]="Asia",WorldRegionToProjection["Cocos Islands"]="Asia",WorldRegionToProjection.Colombia="SouthAmerica",WorldRegionToProjection.Comoros="Africa",WorldRegionToProjection.Congo="Africa",WorldRegionToProjection["Cook Islands"]="Oceania",WorldRegionToProjection["Costa Rica"]="NorthAmerica",WorldRegionToProjection["Cote d'Ivoire"]="Africa",WorldRegionToProjection.Croatia="Europe",WorldRegionToProjection.Cuba="NorthAmerica",WorldRegionToProjection.Curacao="NorthAmerica",WorldRegionToProjection.Cyprus="Europe",WorldRegionToProjection.Czechia="Europe",WorldRegionToProjection.Czechoslovakia="Europe",WorldRegionToProjection["Democratic Republic of Congo"]="Africa",WorldRegionToProjection.Denmark="Europe",WorldRegionToProjection.Djibouti="Africa",WorldRegionToProjection.Dominica="NorthAmerica",WorldRegionToProjection["Dominican Republic"]="NorthAmerica",WorldRegionToProjection["East Germany"]="Europe",WorldRegionToProjection.Ecuador="SouthAmerica",WorldRegionToProjection.Egypt="Africa",WorldRegionToProjection["El Salvador"]="NorthAmerica",WorldRegionToProjection["Equatorial Guinea"]="Africa",WorldRegionToProjection.Eritrea="Africa",WorldRegionToProjection["Eritrea and Ethiopia"]="Africa",WorldRegionToProjection.Estonia="Europe",WorldRegionToProjection.Ethiopia="Africa",WorldRegionToProjection["Faeroe Islands"]="Europe",WorldRegionToProjection["Falkland Islands"]="SouthAmerica",WorldRegionToProjection.Fiji="Oceania",WorldRegionToProjection.Finland="Europe",WorldRegionToProjection.France="Europe",WorldRegionToProjection["French Guiana"]="SouthAmerica",WorldRegionToProjection["French Polynesia"]="Oceania",WorldRegionToProjection.Gabon="Africa",WorldRegionToProjection.Gambia="Africa",WorldRegionToProjection.Georgia="Asia",WorldRegionToProjection.Germany="Europe",WorldRegionToProjection.Ghana="Africa",WorldRegionToProjection.Gibraltar="Europe",WorldRegionToProjection.Greece="Europe",WorldRegionToProjection.Greenland="NorthAmerica",WorldRegionToProjection.Grenada="NorthAmerica",WorldRegionToProjection.Guadeloupe="NorthAmerica",WorldRegionToProjection.Guam="Oceania",WorldRegionToProjection.Guatemala="NorthAmerica",WorldRegionToProjection.Guernsey="Europe",WorldRegionToProjection.Guinea="Africa",WorldRegionToProjection["Guinea-Bissau"]="Africa",WorldRegionToProjection.Guyana="SouthAmerica",WorldRegionToProjection.Haiti="NorthAmerica",WorldRegionToProjection.Hanover="Europe",WorldRegionToProjection["Hesse Electoral"]="Europe",WorldRegionToProjection["Hesse Grand Ducal"]="Europe",WorldRegionToProjection.Honduras="NorthAmerica",WorldRegionToProjection["Hong Kong"]="Asia",WorldRegionToProjection.Hungary="Europe",WorldRegionToProjection.Iceland="Europe",WorldRegionToProjection.India="Asia",WorldRegionToProjection.Indonesia="Asia",WorldRegionToProjection.Iran="Asia",WorldRegionToProjection.Iraq="Asia",WorldRegionToProjection.Ireland="Europe",WorldRegionToProjection["Isle of Man"]="Europe",WorldRegionToProjection.Israel="Asia",WorldRegionToProjection.Italy="Europe",WorldRegionToProjection.Jamaica="NorthAmerica",WorldRegionToProjection.Japan="Asia",WorldRegionToProjection.Jersey="Europe",WorldRegionToProjection.Jordan="Asia",WorldRegionToProjection.Kazakhstan="Asia",WorldRegionToProjection.Kenya="Africa",WorldRegionToProjection.Kiribati="Oceania",WorldRegionToProjection.Kosovo="Europe",WorldRegionToProjection.Kuwait="Asia",WorldRegionToProjection.Kyrgyzstan="Asia",WorldRegionToProjection.Laos="Asia",WorldRegionToProjection.Latvia="Europe",WorldRegionToProjection.Lebanon="Asia",WorldRegionToProjection.Lesotho="Africa",WorldRegionToProjection.Liberia="Africa",WorldRegionToProjection.Libya="Africa",WorldRegionToProjection.Liechtenstein="Europe",WorldRegionToProjection.Lithuania="Europe",WorldRegionToProjection.Luxembourg="Europe",WorldRegionToProjection.Macao="Asia",WorldRegionToProjection["North Macedonia"]="Europe",WorldRegionToProjection.Madagascar="Africa",WorldRegionToProjection.Malawi="Africa",WorldRegionToProjection.Malaysia="Asia",WorldRegionToProjection.Maldives="Asia",WorldRegionToProjection.Mali="Africa",WorldRegionToProjection.Malta="Europe",WorldRegionToProjection["Marshall Islands"]="Oceania",WorldRegionToProjection.Martinique="NorthAmerica",WorldRegionToProjection.Mauritania="Africa",WorldRegionToProjection.Mauritius="Africa",WorldRegionToProjection.Mayotte="Africa",WorldRegionToProjection["Mecklenburg Schwerin"]="Europe",WorldRegionToProjection.Mexico="NorthAmerica",WorldRegionToProjection["Micronesia (country)"]="Oceania",WorldRegionToProjection.Modena="Europe",WorldRegionToProjection.Moldova="Europe",WorldRegionToProjection.Monaco="Europe",WorldRegionToProjection.Mongolia="Asia",WorldRegionToProjection.Montenegro="Europe",WorldRegionToProjection.Montserrat="NorthAmerica",WorldRegionToProjection.Morocco="Africa",WorldRegionToProjection.Mozambique="Africa",WorldRegionToProjection.Myanmar="Asia",WorldRegionToProjection["Nagorno-Karabakh"]="Asia",WorldRegionToProjection.Namibia="Africa",WorldRegionToProjection.Nauru="Oceania",WorldRegionToProjection.Nepal="Asia",WorldRegionToProjection.Netherlands="Europe",WorldRegionToProjection["Netherlands Antilles"]="NorthAmerica",WorldRegionToProjection["New Caledonia"]="Oceania",WorldRegionToProjection["New Zealand"]="Oceania",WorldRegionToProjection.Nicaragua="NorthAmerica",WorldRegionToProjection.Niger="Africa",WorldRegionToProjection.Nigeria="Africa",WorldRegionToProjection.Niue="Oceania",WorldRegionToProjection["Norfolk Island"]="Oceania",WorldRegionToProjection["North Korea"]="Asia",WorldRegionToProjection["Northern Cyprus"]="Asia",WorldRegionToProjection["Northern Mariana Islands"]="Oceania",WorldRegionToProjection.Norway="Europe",WorldRegionToProjection.Oman="Asia",WorldRegionToProjection.Pakistan="Asia",WorldRegionToProjection.Palau="Oceania",WorldRegionToProjection.Palestine="Asia",WorldRegionToProjection.Panama="NorthAmerica",WorldRegionToProjection["Papua New Guinea"]="Oceania",WorldRegionToProjection.Paraguay="SouthAmerica",WorldRegionToProjection.Parma="Europe",WorldRegionToProjection.Peru="SouthAmerica",WorldRegionToProjection.Philippines="Asia",WorldRegionToProjection.Pitcairn="Oceania",WorldRegionToProjection.Poland="Europe",WorldRegionToProjection.Portugal="Europe",WorldRegionToProjection["Puerto Rico"]="NorthAmerica",WorldRegionToProjection.Qatar="Asia",WorldRegionToProjection["Republic of Vietnam"]="Asia",WorldRegionToProjection.Reunion="Africa",WorldRegionToProjection.Romania="Europe",WorldRegionToProjection.Russia="Europe",WorldRegionToProjection.Rwanda="Africa",WorldRegionToProjection["Saint BarthÃ©lemy"]="NorthAmerica",WorldRegionToProjection["Saint Helena"]="Africa",WorldRegionToProjection["Saint Kitts and Nevis"]="NorthAmerica",WorldRegionToProjection["Saint Lucia"]="NorthAmerica",WorldRegionToProjection["Saint Martin (French part)"]="NorthAmerica",WorldRegionToProjection["Saint Pierre and Miquelon"]="NorthAmerica",WorldRegionToProjection["Saint Vincent and the Grenadines"]="NorthAmerica",WorldRegionToProjection.Samoa="Oceania",WorldRegionToProjection["San Marino"]="Europe",WorldRegionToProjection["Sao Tome and Principe"]="Africa",WorldRegionToProjection["Saudi Arabia"]="Asia",WorldRegionToProjection.Saxony="Europe",WorldRegionToProjection.Senegal="Africa",WorldRegionToProjection.Serbia="Europe",WorldRegionToProjection["Serbia and Montenegro"]="Europe",WorldRegionToProjection["Serbia excluding Kosovo"]="Europe",WorldRegionToProjection.Seychelles="Africa",WorldRegionToProjection["Sierra Leone"]="Africa",WorldRegionToProjection.Singapore="Asia",WorldRegionToProjection["Sint Maarten (Dutch part)"]="NorthAmerica",WorldRegionToProjection.Slovakia="Europe",WorldRegionToProjection.Slovenia="Europe",WorldRegionToProjection["Solomon Islands"]="Oceania",WorldRegionToProjection.Somalia="Africa",WorldRegionToProjection.Somaliland="Africa",WorldRegionToProjection["South Africa"]="Africa",WorldRegionToProjection["South Georgia and the South Sandwich Islands"]="SouthAmerica",WorldRegionToProjection["South Korea"]="Asia",WorldRegionToProjection["South Ossetia"]="Asia",WorldRegionToProjection["South Sudan"]="Africa",WorldRegionToProjection.Spain="Europe",WorldRegionToProjection["Sri Lanka"]="Asia",WorldRegionToProjection.Sudan="Africa",WorldRegionToProjection.Suriname="SouthAmerica",WorldRegionToProjection["Svalbard and Jan Mayen"]="Europe",WorldRegionToProjection.Eswatini="Africa",WorldRegionToProjection.Sweden="Europe",WorldRegionToProjection.Switzerland="Europe",WorldRegionToProjection.Syria="Asia",WorldRegionToProjection.Taiwan="Asia",WorldRegionToProjection.Tajikistan="Asia",WorldRegionToProjection.Tanzania="Africa",WorldRegionToProjection.Thailand="Asia",WorldRegionToProjection.Timor="Asia",WorldRegionToProjection.Togo="Africa",WorldRegionToProjection.Tokelau="Oceania",WorldRegionToProjection.Tonga="Oceania",WorldRegionToProjection.Transnistria="Europe",WorldRegionToProjection["Trinidad and Tobago"]="NorthAmerica",WorldRegionToProjection.Tunisia="Africa",WorldRegionToProjection.Turkey="Asia",WorldRegionToProjection.Turkmenistan="Asia",WorldRegionToProjection["Turks and Caicos Islands"]="NorthAmerica",WorldRegionToProjection.Tuscany="Europe",WorldRegionToProjection.Tuvalu="Oceania",WorldRegionToProjection["Two Sicilies"]="Europe",WorldRegionToProjection.USSR="Europe",WorldRegionToProjection.Uganda="Africa",WorldRegionToProjection.Ukraine="Europe",WorldRegionToProjection["United Arab Emirates"]="Asia",WorldRegionToProjection["United Kingdom"]="Europe",WorldRegionToProjection["United Korea"]="Asia",WorldRegionToProjection["United States"]="NorthAmerica",WorldRegionToProjection["United States Minor Outlying Islands"]="Oceania",WorldRegionToProjection["United States Virgin Islands"]="NorthAmerica",WorldRegionToProjection.Uruguay="SouthAmerica",WorldRegionToProjection.Uzbekistan="Asia",WorldRegionToProjection.Vanuatu="Oceania",WorldRegionToProjection.Vatican="Europe",WorldRegionToProjection.Venezuela="SouthAmerica",WorldRegionToProjection.Vietnam="Asia",WorldRegionToProjection["Wallis and Futuna"]="Oceania",WorldRegionToProjection["West Germany"]="Europe",WorldRegionToProjection["Western Sahara"]="Africa",WorldRegionToProjection.Wuerttemburg="Europe",WorldRegionToProjection.Yemen="Asia",WorldRegionToProjection["Yemen Arab Republic"]="Asia",WorldRegionToProjection["Yemen People's Republic"]="Asia",WorldRegionToProjection.Yugoslavia="Europe",WorldRegionToProjection.Zambia="Africa",WorldRegionToProjection.Zanzibar="Africa",WorldRegionToProjection.Zimbabwe="Africa",WorldRegionToProjection["Ã…land Islands"]="Europe"}(exports.WorldRegionToProjection||(exports.WorldRegionToProjection={}))},1853:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}__webpack_require__(18),__webpack_require__(21),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8);var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.BodyDiv=void 0;var react_1=__importDefault(__webpack_require__(0)),react_dom_1=__importDefault(__webpack_require__(90)),BodyDiv=function(_react_1$default$Comp){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(BodyDiv,_react_1$default$Comp);var _super=_createSuper(BodyDiv);function BodyDiv(props){var _this;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BodyDiv),(_this=_super.call(this,props)).el=document.createElement("div"),_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(BodyDiv,[{key:"componentDidMount",value:function componentDidMount(){document.body.appendChild(this.el)}},{key:"componentWillUnmount",value:function componentWillUnmount(){document.body.removeChild(this.el)}},{key:"render",value:function render(){return react_dom_1.default.createPortal(this.props.children,this.el)}}]),BodyDiv}(react_1.default.Component);exports.BodyDiv=BodyDiv,BodyDiv.__docgenInfo={description:"",methods:[],displayName:"BodyDiv"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["itsJustJavascript/grapher/bodyDiv/BodyDiv.js"]={name:"BodyDiv",docgenInfo:BodyDiv.__docgenInfo,path:"itsJustJavascript/grapher/bodyDiv/BodyDiv.js"})},1854:function(module,exports,__webpack_require__){"use strict";function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(103),__webpack_require__(32),__webpack_require__(25),__webpack_require__(202),__webpack_require__(31),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Logo=exports.LogoOption=void 0;var React=__importStar(__webpack_require__(0)),mobx_1=__webpack_require__(41),LogosSVG_1=__webpack_require__(1855);!function(LogoOption){LogoOption.owid="owid",LogoOption["core+owid"]="core+owid",LogoOption["gv+owid"]="gv+owid"}(exports.LogoOption||(exports.LogoOption={}));var logos={owid:{svg:LogosSVG_1.OWID_LOGO_SVG,width:210,height:120,targetHeight:35,url:"https://ourworldindata.org"},"core+owid":{svg:LogosSVG_1.CORE_LOGO_SVG,width:102,height:37,targetHeight:35},"gv+owid":{svg:LogosSVG_1.GV_LOGO_SVG,width:420,height:350,targetHeight:52}},Logo=function(){function Logo(props){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Logo),this.props=props}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Logo,[{key:"spec",get:function get(){return void 0!==this.props.logo?logos[this.props.logo]:logos.owid}},{key:"scale",get:function get(){return this.spec.targetHeight/this.spec.height}},{key:"width",get:function get(){return this.spec.width*this.scale}},{key:"height",get:function get(){return this.spec.height*this.scale}},{key:"renderSVG",value:function renderSVG(targetX,targetY){var scale=this.scale,svg=(this.spec.svg.match(/<svg>(.*)<\/svg>/)||"")[1]||this.spec.svg;return React.createElement("g",{transform:"translate(".concat(Math.round(targetX),", ").concat(targetY,") scale(").concat(parseFloat(scale.toFixed(2)),")"),dangerouslySetInnerHTML:{__html:svg}})}},{key:"renderHTML",value:function renderHTML(){var spec=this.spec,props={className:"logo",dangerouslySetInnerHTML:{__html:spec.svg},style:{height:"".concat(spec.targetHeight,"px")}};return this.props.isLink||!spec.url?React.createElement("div",Object.assign({},props)):React.createElement("a",Object.assign({},props,{href:spec.url,target:"_blank",rel:"noopener"}))}}]),Logo}();__decorate([mobx_1.computed],Logo.prototype,"spec",null),__decorate([mobx_1.computed],Logo.prototype,"scale",null),__decorate([mobx_1.computed],Logo.prototype,"width",null),__decorate([mobx_1.computed],Logo.prototype,"height",null),exports.Logo=Logo},1855:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GV_LOGO_SVG=exports.CORE_LOGO_SVG=exports.OWID_LOGO_SVG=void 0,exports.OWID_LOGO_SVG='<svg className="owidLog" width="210" height="120" viewBox="0 0 210 120" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g clip-path="url(#clip0)">\n  <path d="M0 0h210v107.89H0V0z" fill="#002147" />\n  <path\n    d="M40.98 32.25c0 2.36-.38 4.53-1.12 6.51a14.26 14.26 0 0 1-8.1 8.4c-1.9.78-4.02 1.17-6.34 1.17-2.31 0-4.42-.39-6.33-1.17a14.31 14.31 0 0 1-8.08-8.4 18.29 18.29 0 0 1-1.12-6.51c0-2.36.38-4.53 1.12-6.5.75-1.97 1.8-3.67 3.17-5.1a14.32 14.32 0 0 1 4.9-3.34c1.92-.8 4.03-1.19 6.34-1.19 2.32 0 4.43.4 6.34 1.19 1.92.8 3.56 1.9 4.93 3.34a14.87 14.87 0 0 1 3.17 5.1 18.1 18.1 0 0 1 1.12 6.5zm-4.38 0c0-1.94-.26-3.68-.8-5.22a10.91 10.91 0 0 0-2.24-3.89 9.68 9.68 0 0 0-3.52-2.46 11.95 11.95 0 0 0-4.62-.86c-1.68 0-3.21.28-4.6.86a9.88 9.88 0 0 0-3.54 2.46 10.91 10.91 0 0 0-2.24 3.9c-.53 1.53-.8 3.27-.8 5.2 0 1.94.27 3.68.8 5.22a11.17 11.17 0 0 0 2.24 3.9 10.01 10.01 0 0 0 3.55 2.44c1.38.56 2.9.83 4.6.83s3.24-.27 4.61-.83a9.8 9.8 0 0 0 3.52-2.44 11.17 11.17 0 0 0 2.25-3.9c.53-1.54.8-3.28.8-5.21zm26.22-6.54V48H60.5c-.56 0-.9-.27-1.05-.81l-.31-2.4a12.45 12.45 0 0 1-3.26 2.6c-1.2.64-2.58.96-4.13.96-1.22 0-2.3-.2-3.24-.6a6.52 6.52 0 0 1-2.33-1.7 7.37 7.37 0 0 1-1.43-2.67c-.3-1.04-.46-2.2-.46-3.45V25.7h3.91v14.22c0 1.68.38 2.99 1.15 3.91.77.93 1.96 1.39 3.54 1.39 1.16 0 2.24-.27 3.23-.82a10.42 10.42 0 0 0 2.8-2.28V25.7h3.91zm8.61 4.47a9.94 9.94 0 0 1 2.6-3.56 5.64 5.64 0 0 1 3.76-1.3c.47 0 .92.05 1.34.15.44.1.83.27 1.17.49l-.3 2.92c-.09.37-.3.55-.66.55-.2 0-.5-.04-.9-.13a6.21 6.21 0 0 0-3.24.18 4.23 4.23 0 0 0-1.47.92c-.42.4-.81.9-1.17 1.5-.33.58-.64 1.26-.92 2.02V48H67.7V25.71h2.25c.42 0 .72.08.88.25.16.16.27.44.33.83l.26 3.39zm61.16-13.7L122.75 48h-3.82l-7.99-24.05a21.95 21.95 0 0 1-.42-1.58 38.36 38.36 0 0 1-.44 1.58L102.05 48h-3.83L88.4 16.47h3.54c.38 0 .7.1.95.29.26.2.43.43.5.73l6.52 21.9.28 1.28.29 1.46.3-1.46.38-1.27 7.41-21.91c.1-.25.26-.48.51-.69.27-.22.58-.33.95-.33h1.23c.38 0 .69.1.92.29a1.77 1.77 0 0 1 .53.73l7.4 21.9a28.4 28.4 0 0 1 .68 2.62 29.52 29.52 0 0 1 .52-2.61l6.54-21.91a1.31 1.31 0 0 1 .48-.7c.27-.21.58-.32.95-.32h3.32zm9.35 8.88c1.63 0 3.1.27 4.4.82a9.43 9.43 0 0 1 5.46 5.94c.5 1.4.74 2.98.74 4.73 0 1.76-.25 3.34-.74 4.75a9.43 9.43 0 0 1-5.46 5.92c-1.3.52-2.77.79-4.4.79-1.64 0-3.12-.27-4.44-.8a9.42 9.42 0 0 1-3.35-2.3c-.92-1-1.63-2.2-2.13-3.61-.49-1.41-.73-3-.73-4.75s.24-3.33.73-4.73c.5-1.43 1.2-2.64 2.13-3.63.93-1 2.04-1.77 3.35-2.31 1.32-.55 2.8-.82 4.44-.82zm0 19.89c2.2 0 3.84-.73 4.93-2.2 1.08-1.48 1.63-3.54 1.63-6.18 0-2.66-.55-4.72-1.63-6.2-1.09-1.49-2.73-2.23-4.93-2.23-1.12 0-2.09.2-2.93.57a5.71 5.71 0 0 0-2.06 1.65c-.55.72-.96 1.61-1.24 2.67-.26 1.04-.4 2.22-.4 3.54 0 2.64.55 4.7 1.64 6.18 1.1 1.47 2.76 2.2 4.99 2.2zm17.97-15.07a9.94 9.94 0 0 1 2.6-3.56 5.64 5.64 0 0 1 3.76-1.3c.47 0 .91.05 1.34.15.44.1.83.27 1.16.49l-.28 2.92c-.09.37-.31.55-.66.55-.2 0-.5-.04-.9-.13a6.2 6.2 0 0 0-3.24.18 4.23 4.23 0 0 0-1.47.92c-.43.4-.82.9-1.17 1.5a13.1 13.1 0 0 0-.92 2.02V48h-3.94V25.71h2.24c.43 0 .72.08.88.25.17.16.28.44.33.83l.27 3.39zm15.04-14.59V48h-3.92V15.6h3.92zm19.55 15.43a6.22 6.22 0 0 0-2.38-2.05 6.7 6.7 0 0 0-2.86-.6c-2.07 0-3.66.75-4.77 2.23-1.12 1.48-1.68 3.6-1.68 6.33 0 1.46.13 2.7.38 3.74a7.29 7.29 0 0 0 1.1 2.56 4.35 4.35 0 0 0 1.78 1.45c.7.3 1.5.46 2.4.46 1.29 0 2.41-.3 3.36-.88a9.6 9.6 0 0 0 2.67-2.49V31.02zm3.91-15.43V48h-2.33c-.56 0-.9-.27-1.06-.81l-.35-2.71a12.13 12.13 0 0 1-3.25 2.77 8.28 8.28 0 0 1-4.23 1.06 7.31 7.31 0 0 1-6.14-2.9c-.73-.96-1.3-2.15-1.69-3.57a18.35 18.35 0 0 1 .07-9.48 11.29 11.29 0 0 1 1.89-3.7 8.7 8.7 0 0 1 7.06-3.34 7.96 7.96 0 0 1 6.12 2.62V15.59h3.91zM46.61 70.71V93H42.7V70.71h3.91zm.84-7c0 .39-.08.75-.24 1.09-.15.32-.35.61-.62.88-.25.25-.55.44-.9.59a2.67 2.67 0 0 1-2.16 0 2.9 2.9 0 0 1-1.45-1.47 2.67 2.67 0 0 1 0-2.16c.15-.35.35-.65.6-.9.25-.27.53-.47.85-.62a2.67 2.67 0 0 1 2.16 0c.35.15.65.35.9.62.27.25.47.55.62.9.16.34.24.7.24 1.08zm7.97 10.24c.49-.54 1-1.04 1.54-1.48a9.85 9.85 0 0 1 3.66-1.84 8.96 8.96 0 0 1 5.43.35c.94.4 1.72.97 2.33 1.71.63.74 1.11 1.62 1.43 2.67.32 1.04.49 2.19.49 3.45V93h-3.94V78.81c0-1.69-.4-3-1.17-3.92-.76-.93-1.93-1.4-3.5-1.4-1.15 0-2.24.27-3.25.83-1 .56-1.92 1.31-2.77 2.27V93h-3.94V70.71h2.35c.56 0 .9.28 1.04.82l.3 2.42zm57.7 3.3c0 2.36-.37 4.5-1.11 6.44a14.3 14.3 0 0 1-3.17 4.98c-1.37 1.37-3 2.45-4.93 3.2-1.9.76-4.02 1.13-6.33 1.13H85.8V61.47h11.77c2.31 0 4.42.39 6.33 1.15a13.8 13.8 0 0 1 8.1 8.18 17.75 17.75 0 0 1 1.12 6.45zm-4.37 0c0-1.94-.26-3.67-.8-5.2a10.94 10.94 0 0 0-2.23-3.87 9.57 9.57 0 0 0-3.53-2.42 12.23 12.23 0 0 0-4.61-.83h-7.5v24.62h7.5c1.7 0 3.24-.28 4.61-.84a9.7 9.7 0 0 0 3.53-2.4 10.94 10.94 0 0 0 2.24-3.87c.53-1.53.8-3.26.8-5.2zm19.8 5.72c-1.8.06-3.34.2-4.62.44-1.26.22-2.3.51-3.1.88-.8.36-1.37.8-1.74 1.3-.35.5-.53 1.05-.53 1.67 0 .58.1 1.1.3 1.52a3 3 0 0 0 .76 1.05c.34.27.73.46 1.17.6a6.13 6.13 0 0 0 1.45.17 7.28 7.28 0 0 0 3.5-.81 11.95 11.95 0 0 0 2.82-2.2v-4.62zm-12.65-9.11a12.73 12.73 0 0 1 3.98-2.66c1.43-.59 3-.88 4.73-.88 1.25 0 2.36.2 3.33.61a6.81 6.81 0 0 1 3.94 4.38c.33 1.04.5 2.19.5 3.43V93h-1.74a1.8 1.8 0 0 1-.88-.18c-.2-.13-.36-.38-.48-.74l-.44-2.12-1.72 1.46a9.48 9.48 0 0 1-3.74 1.7c-.69.15-1.46.23-2.3.23-.87 0-1.69-.12-2.45-.35a5.34 5.34 0 0 1-3.34-2.93 6.64 6.64 0 0 1-.49-2.64c0-.88.25-1.72.73-2.53a6.33 6.33 0 0 1 2.35-2.17c1.09-.63 2.5-1.15 4.25-1.54 1.75-.41 3.89-.65 6.42-.7v-1.75c0-1.73-.37-3.03-1.12-3.91-.75-.9-1.84-1.34-3.28-1.34-.97 0-1.78.12-2.44.37-.64.23-1.2.5-1.7.81l-1.23.82c-.33.23-.67.35-1 .35-.27 0-.5-.07-.69-.2a2.1 2.1 0 0 1-.48-.53l-.7-1.25zm27.67 19.5c-1.76 0-3.12-.5-4.07-1.48-.94-.98-1.41-2.4-1.41-4.25V74h-2.68a.9.9 0 0 1-.6-.2c-.16-.14-.24-.36-.24-.66v-1.56l3.65-.46.9-6.89c.05-.22.14-.4.29-.52a.88.88 0 0 1 .62-.22H142v7.67h6.44V74H142v13.38c0 .94.22 1.63.68 2.09.45.45 1.04.68 1.76.68a3.21 3.21 0 0 0 1.85-.53l.55-.35c.16-.12.3-.18.41-.18.2 0 .4.13.55.38l1.15 1.87a7.45 7.45 0 0 1-2.44 1.5 8.53 8.53 0 0 1-2.95.52zm19.68-10.4c-1.8.07-3.34.21-4.62.45-1.26.22-2.3.51-3.1.88-.8.36-1.37.8-1.74 1.3-.35.5-.53 1.05-.53 1.67 0 .58.1 1.1.3 1.52a2.9 2.9 0 0 0 .76 1.05c.34.27.73.46 1.17.6a6.13 6.13 0 0 0 1.45.17 7.3 7.3 0 0 0 3.5-.81 12.04 12.04 0 0 0 2.82-2.2v-4.62zm-12.65-9.1a12.72 12.72 0 0 1 3.99-2.66c1.42-.59 3-.88 4.72-.88 1.25 0 2.36.2 3.33.61a6.81 6.81 0 0 1 3.94 4.38c.33 1.04.5 2.19.5 3.43V93h-1.74a1.8 1.8 0 0 1-.88-.18c-.2-.13-.36-.38-.48-.74l-.44-2.12-1.72 1.46a9.48 9.48 0 0 1-3.74 1.7c-.69.15-1.46.23-2.3.23-.87 0-1.69-.12-2.45-.35a5.33 5.33 0 0 1-3.34-2.93 6.62 6.62 0 0 1-.49-2.64c0-.88.25-1.72.73-2.53a6.33 6.33 0 0 1 2.35-2.17c1.09-.63 2.5-1.15 4.25-1.54 1.74-.41 3.89-.65 6.42-.7v-1.75c0-1.73-.37-3.03-1.12-3.91-.75-.9-1.84-1.34-3.28-1.34-.97 0-1.78.12-2.44.37-.64.23-1.2.5-1.7.81l-1.22.82c-.34.23-.68.35-1.02.35-.26 0-.49-.07-.68-.2a1.88 1.88 0 0 1-.48-.53l-.7-1.25zM40.98 32.25c0 2.36-.38 4.53-1.12 6.51a14.26 14.26 0 0 1-8.1 8.4c-1.9.78-4.02 1.17-6.34 1.17-2.31 0-4.42-.39-6.33-1.17a14.31 14.31 0 0 1-8.08-8.4 18.29 18.29 0 0 1-1.12-6.51c0-2.36.38-4.53 1.12-6.5.75-1.97 1.8-3.67 3.17-5.1a14.32 14.32 0 0 1 4.9-3.34c1.92-.8 4.03-1.19 6.34-1.19 2.32 0 4.43.4 6.34 1.19 1.92.8 3.56 1.9 4.93 3.34a14.87 14.87 0 0 1 3.17 5.1 18.1 18.1 0 0 1 1.12 6.5zm-4.38 0c0-1.94-.26-3.68-.8-5.22a10.91 10.91 0 0 0-2.24-3.89 9.68 9.68 0 0 0-3.52-2.46 11.95 11.95 0 0 0-4.62-.86c-1.68 0-3.21.28-4.6.86a9.88 9.88 0 0 0-3.54 2.46 10.91 10.91 0 0 0-2.24 3.9c-.53 1.53-.8 3.27-.8 5.2 0 1.94.27 3.68.8 5.22a11.17 11.17 0 0 0 2.24 3.9 10.01 10.01 0 0 0 3.55 2.44c1.38.56 2.9.83 4.6.83s3.24-.27 4.61-.83a9.8 9.8 0 0 0 3.52-2.44 11.17 11.17 0 0 0 2.25-3.9c.53-1.54.8-3.28.8-5.21zm26.22-6.54V48H60.5c-.56 0-.9-.27-1.05-.81l-.31-2.4a12.45 12.45 0 0 1-3.26 2.6c-1.2.64-2.58.96-4.13.96-1.22 0-2.3-.2-3.24-.6a6.52 6.52 0 0 1-2.33-1.7 7.37 7.37 0 0 1-1.43-2.67c-.3-1.04-.46-2.2-.46-3.45V25.7h3.91v14.22c0 1.68.38 2.99 1.15 3.91.77.93 1.96 1.39 3.54 1.39 1.16 0 2.24-.27 3.23-.82a10.42 10.42 0 0 0 2.8-2.28V25.7h3.91zm8.61 4.47a9.94 9.94 0 0 1 2.6-3.56 5.64 5.64 0 0 1 3.76-1.3c.47 0 .92.05 1.34.15.44.1.83.27 1.17.49l-.3 2.92c-.09.37-.3.55-.66.55-.2 0-.5-.04-.9-.13a6.21 6.21 0 0 0-3.24.18 4.23 4.23 0 0 0-1.47.92c-.42.4-.81.9-1.17 1.5-.33.58-.64 1.26-.92 2.02V48H67.7V25.71h2.25c.42 0 .72.08.88.25.16.16.27.44.33.83l.26 3.39zm61.16-13.7L122.75 48h-3.82l-7.99-24.05a21.95 21.95 0 0 1-.42-1.58 38.36 38.36 0 0 1-.44 1.58L102.05 48h-3.83L88.4 16.47h3.54c.38 0 .7.1.95.29.26.2.43.43.5.73l6.52 21.9.28 1.28.29 1.46.3-1.46.38-1.27 7.41-21.91c.1-.25.26-.48.51-.69.27-.22.58-.33.95-.33h1.23c.38 0 .69.1.92.29a1.77 1.77 0 0 1 .53.73l7.4 21.9a28.4 28.4 0 0 1 .68 2.62 29.52 29.52 0 0 1 .52-2.61l6.54-21.91a1.31 1.31 0 0 1 .48-.7c.27-.21.58-.32.95-.32h3.32zm9.35 8.88c1.63 0 3.1.27 4.4.82a9.43 9.43 0 0 1 5.46 5.94c.5 1.4.74 2.98.74 4.73 0 1.76-.25 3.34-.74 4.75a9.43 9.43 0 0 1-5.46 5.92c-1.3.52-2.77.79-4.4.79-1.64 0-3.12-.27-4.44-.8a9.42 9.42 0 0 1-3.35-2.3c-.92-1-1.63-2.2-2.13-3.61-.49-1.41-.73-3-.73-4.75s.24-3.33.73-4.73c.5-1.43 1.2-2.64 2.13-3.63.93-1 2.04-1.77 3.35-2.31 1.32-.55 2.8-.82 4.44-.82zm0 19.89c2.2 0 3.84-.73 4.93-2.2 1.08-1.48 1.63-3.54 1.63-6.18 0-2.66-.55-4.72-1.63-6.2-1.09-1.49-2.73-2.23-4.93-2.23-1.12 0-2.09.2-2.93.57a5.71 5.71 0 0 0-2.06 1.65c-.55.72-.96 1.61-1.24 2.67-.26 1.04-.4 2.22-.4 3.54 0 2.64.55 4.7 1.64 6.18 1.1 1.47 2.76 2.2 4.99 2.2zm17.97-15.07a9.94 9.94 0 0 1 2.6-3.56 5.64 5.64 0 0 1 3.76-1.3c.47 0 .91.05 1.34.15.44.1.83.27 1.16.49l-.28 2.92c-.09.37-.31.55-.66.55-.2 0-.5-.04-.9-.13a6.2 6.2 0 0 0-3.24.18 4.23 4.23 0 0 0-1.47.92c-.43.4-.82.9-1.17 1.5a13.1 13.1 0 0 0-.92 2.02V48h-3.94V25.71h2.24c.43 0 .72.08.88.25.17.16.28.44.33.83l.27 3.39zm15.04-14.59V48h-3.92V15.6h3.92zm19.55 15.43a6.22 6.22 0 0 0-2.38-2.05 6.7 6.7 0 0 0-2.86-.6c-2.07 0-3.66.75-4.77 2.23-1.12 1.48-1.68 3.6-1.68 6.33 0 1.46.13 2.7.38 3.74a7.29 7.29 0 0 0 1.1 2.56 4.35 4.35 0 0 0 1.78 1.45c.7.3 1.5.46 2.4.46 1.29 0 2.41-.3 3.36-.88a9.6 9.6 0 0 0 2.67-2.49V31.02zm3.91-15.43V48h-2.33c-.56 0-.9-.27-1.06-.81l-.35-2.71a12.13 12.13 0 0 1-3.25 2.77 8.28 8.28 0 0 1-4.23 1.06 7.31 7.31 0 0 1-6.14-2.9c-.73-.96-1.3-2.15-1.69-3.57a18.35 18.35 0 0 1 .07-9.48 11.29 11.29 0 0 1 1.89-3.7 8.7 8.7 0 0 1 7.06-3.34 7.96 7.96 0 0 1 6.12 2.62V15.59h3.91zM46.61 70.71V93H42.7V70.71h3.91zm.84-7c0 .39-.08.75-.24 1.09-.15.32-.35.61-.62.88-.25.25-.55.44-.9.59a2.67 2.67 0 0 1-2.16 0 2.9 2.9 0 0 1-1.45-1.47 2.67 2.67 0 0 1 0-2.16c.15-.35.35-.65.6-.9.25-.27.53-.47.85-.62a2.67 2.67 0 0 1 2.16 0c.35.15.65.35.9.62.27.25.47.55.62.9.16.34.24.7.24 1.08zm7.97 10.24c.49-.54 1-1.04 1.54-1.48a9.85 9.85 0 0 1 3.66-1.84 8.96 8.96 0 0 1 5.43.35c.94.4 1.72.97 2.33 1.71.63.74 1.11 1.62 1.43 2.67.32 1.04.49 2.19.49 3.45V93h-3.94V78.81c0-1.69-.4-3-1.17-3.92-.76-.93-1.93-1.4-3.5-1.4-1.15 0-2.24.27-3.25.83-1 .56-1.92 1.31-2.77 2.27V93h-3.94V70.71h2.35c.56 0 .9.28 1.04.82l.3 2.42zm57.7 3.3c0 2.36-.37 4.5-1.11 6.44a14.3 14.3 0 0 1-3.17 4.98c-1.37 1.37-3 2.45-4.93 3.2-1.9.76-4.02 1.13-6.33 1.13H85.8V61.47h11.77c2.31 0 4.42.39 6.33 1.15a13.8 13.8 0 0 1 8.1 8.18 17.75 17.75 0 0 1 1.12 6.45zm-4.37 0c0-1.94-.26-3.67-.8-5.2a10.94 10.94 0 0 0-2.23-3.87 9.57 9.57 0 0 0-3.53-2.42 12.23 12.23 0 0 0-4.61-.83h-7.5v24.62h7.5c1.7 0 3.24-.28 4.61-.84a9.7 9.7 0 0 0 3.53-2.4 10.94 10.94 0 0 0 2.24-3.87c.53-1.53.8-3.26.8-5.2zm19.8 5.72c-1.8.06-3.34.2-4.62.44-1.26.22-2.3.51-3.1.88-.8.36-1.37.8-1.74 1.3-.35.5-.53 1.05-.53 1.67 0 .58.1 1.1.3 1.52a3 3 0 0 0 .76 1.05c.34.27.73.46 1.17.6a6.13 6.13 0 0 0 1.45.17 7.28 7.28 0 0 0 3.5-.81 11.95 11.95 0 0 0 2.82-2.2v-4.62zm-12.65-9.11a12.73 12.73 0 0 1 3.98-2.66c1.43-.59 3-.88 4.73-.88 1.25 0 2.36.2 3.33.61a6.81 6.81 0 0 1 3.94 4.38c.33 1.04.5 2.19.5 3.43V93h-1.74a1.8 1.8 0 0 1-.88-.18c-.2-.13-.36-.38-.48-.74l-.44-2.12-1.72 1.46a9.48 9.48 0 0 1-3.74 1.7c-.69.15-1.46.23-2.3.23-.87 0-1.69-.12-2.45-.35a5.34 5.34 0 0 1-3.34-2.93 6.64 6.64 0 0 1-.49-2.64c0-.88.25-1.72.73-2.53a6.33 6.33 0 0 1 2.35-2.17c1.09-.63 2.5-1.15 4.25-1.54 1.75-.41 3.89-.65 6.42-.7v-1.75c0-1.73-.37-3.03-1.12-3.91-.75-.9-1.84-1.34-3.28-1.34-.97 0-1.78.12-2.44.37-.64.23-1.2.5-1.7.81l-1.23.82c-.33.23-.67.35-1 .35-.27 0-.5-.07-.69-.2a2.1 2.1 0 0 1-.48-.53l-.7-1.25zm27.67 19.5c-1.76 0-3.12-.5-4.07-1.48-.94-.98-1.41-2.4-1.41-4.25V74h-2.68a.9.9 0 0 1-.6-.2c-.16-.14-.24-.36-.24-.66v-1.56l3.65-.46.9-6.89c.05-.22.14-.4.29-.52a.88.88 0 0 1 .62-.22H142v7.67h6.44V74H142v13.38c0 .94.22 1.63.68 2.09.45.45 1.04.68 1.76.68a3.21 3.21 0 0 0 1.85-.53l.55-.35c.16-.12.3-.18.41-.18.2 0 .4.13.55.38l1.15 1.87a7.45 7.45 0 0 1-2.44 1.5 8.53 8.53 0 0 1-2.95.52zm19.68-10.4c-1.8.07-3.34.21-4.62.45-1.26.22-2.3.51-3.1.88-.8.36-1.37.8-1.74 1.3-.35.5-.53 1.05-.53 1.67 0 .58.1 1.1.3 1.52a2.9 2.9 0 0 0 .76 1.05c.34.27.73.46 1.17.6a6.13 6.13 0 0 0 1.45.17 7.3 7.3 0 0 0 3.5-.81 12.04 12.04 0 0 0 2.82-2.2v-4.62zm-12.65-9.1a12.72 12.72 0 0 1 3.99-2.66c1.42-.59 3-.88 4.72-.88 1.25 0 2.36.2 3.33.61a6.81 6.81 0 0 1 3.94 4.38c.33 1.04.5 2.19.5 3.43V93h-1.74a1.8 1.8 0 0 1-.88-.18c-.2-.13-.36-.38-.48-.74l-.44-2.12-1.72 1.46a9.48 9.48 0 0 1-3.74 1.7c-.69.15-1.46.23-2.3.23-.87 0-1.69-.12-2.45-.35a5.33 5.33 0 0 1-3.34-2.93 6.62 6.62 0 0 1-.49-2.64c0-.88.25-1.72.73-2.53a6.33 6.33 0 0 1 2.35-2.17c1.09-.63 2.5-1.15 4.25-1.54 1.74-.41 3.89-.65 6.42-.7v-1.75c0-1.73-.37-3.03-1.12-3.91-.75-.9-1.84-1.34-3.28-1.34-.97 0-1.78.12-2.44.37-.64.23-1.2.5-1.7.81l-1.22.82c-.34.23-.68.35-1.02.35-.26 0-.49-.07-.68-.2a1.88 1.88 0 0 1-.48-.53l-.7-1.25zM40.98 32.25c0 2.36-.38 4.53-1.12 6.51a14.26 14.26 0 0 1-8.1 8.4c-1.9.78-4.02 1.17-6.34 1.17-2.31 0-4.42-.39-6.33-1.17a14.31 14.31 0 0 1-8.08-8.4 18.29 18.29 0 0 1-1.12-6.51c0-2.36.38-4.53 1.12-6.5.75-1.97 1.8-3.67 3.17-5.1a14.32 14.32 0 0 1 4.9-3.34c1.92-.8 4.03-1.19 6.34-1.19 2.32 0 4.43.4 6.34 1.19 1.92.8 3.56 1.9 4.93 3.34a14.87 14.87 0 0 1 3.17 5.1 18.1 18.1 0 0 1 1.12 6.5zm-4.38 0c0-1.94-.26-3.68-.8-5.22a10.91 10.91 0 0 0-2.24-3.89 9.68 9.68 0 0 0-3.52-2.46 11.95 11.95 0 0 0-4.62-.86c-1.68 0-3.21.28-4.6.86a9.88 9.88 0 0 0-3.54 2.46 10.91 10.91 0 0 0-2.24 3.9c-.53 1.53-.8 3.27-.8 5.2 0 1.94.27 3.68.8 5.22a11.17 11.17 0 0 0 2.24 3.9 10.01 10.01 0 0 0 3.55 2.44c1.38.56 2.9.83 4.6.83s3.24-.27 4.61-.83a9.8 9.8 0 0 0 3.52-2.44 11.17 11.17 0 0 0 2.25-3.9c.53-1.54.8-3.28.8-5.21zm26.22-6.54V48H60.5c-.56 0-.9-.27-1.05-.81l-.31-2.4a12.45 12.45 0 0 1-3.26 2.6c-1.2.64-2.58.96-4.13.96-1.22 0-2.3-.2-3.24-.6a6.52 6.52 0 0 1-2.33-1.7 7.37 7.37 0 0 1-1.43-2.67c-.3-1.04-.46-2.2-.46-3.45V25.7h3.91v14.22c0 1.68.38 2.99 1.15 3.91.77.93 1.96 1.39 3.54 1.39 1.16 0 2.24-.27 3.23-.82a10.42 10.42 0 0 0 2.8-2.28V25.7h3.91zm8.61 4.47a9.94 9.94 0 0 1 2.6-3.56 5.64 5.64 0 0 1 3.76-1.3c.47 0 .92.05 1.34.15.44.1.83.27 1.17.49l-.3 2.92c-.09.37-.3.55-.66.55-.2 0-.5-.04-.9-.13a6.21 6.21 0 0 0-3.24.18 4.23 4.23 0 0 0-1.47.92c-.42.4-.81.9-1.17 1.5-.33.58-.64 1.26-.92 2.02V48H67.7V25.71h2.25c.42 0 .72.08.88.25.16.16.27.44.33.83l.26 3.39zm61.16-13.7L122.75 48h-3.82l-7.99-24.05a21.95 21.95 0 0 1-.42-1.58 38.36 38.36 0 0 1-.44 1.58L102.05 48h-3.83L88.4 16.47h3.54c.38 0 .7.1.95.29.26.2.43.43.5.73l6.52 21.9.28 1.28.29 1.46.3-1.46.38-1.27 7.41-21.91c.1-.25.26-.48.51-.69.27-.22.58-.33.95-.33h1.23c.38 0 .69.1.92.29a1.77 1.77 0 0 1 .53.73l7.4 21.9a28.4 28.4 0 0 1 .68 2.62 29.52 29.52 0 0 1 .52-2.61l6.54-21.91a1.31 1.31 0 0 1 .48-.7c.27-.21.58-.32.95-.32h3.32zm9.35 8.88c1.63 0 3.1.27 4.4.82a9.43 9.43 0 0 1 5.46 5.94c.5 1.4.74 2.98.74 4.73 0 1.76-.25 3.34-.74 4.75a9.43 9.43 0 0 1-5.46 5.92c-1.3.52-2.77.79-4.4.79-1.64 0-3.12-.27-4.44-.8a9.42 9.42 0 0 1-3.35-2.3c-.92-1-1.63-2.2-2.13-3.61-.49-1.41-.73-3-.73-4.75s.24-3.33.73-4.73c.5-1.43 1.2-2.64 2.13-3.63.93-1 2.04-1.77 3.35-2.31 1.32-.55 2.8-.82 4.44-.82zm0 19.89c2.2 0 3.84-.73 4.93-2.2 1.08-1.48 1.63-3.54 1.63-6.18 0-2.66-.55-4.72-1.63-6.2-1.09-1.49-2.73-2.23-4.93-2.23-1.12 0-2.09.2-2.93.57a5.71 5.71 0 0 0-2.06 1.65c-.55.72-.96 1.61-1.24 2.67-.26 1.04-.4 2.22-.4 3.54 0 2.64.55 4.7 1.64 6.18 1.1 1.47 2.76 2.2 4.99 2.2zm17.97-15.07a9.94 9.94 0 0 1 2.6-3.56 5.64 5.64 0 0 1 3.76-1.3c.47 0 .91.05 1.34.15.44.1.83.27 1.16.49l-.28 2.92c-.09.37-.31.55-.66.55-.2 0-.5-.04-.9-.13a6.2 6.2 0 0 0-3.24.18 4.23 4.23 0 0 0-1.47.92c-.43.4-.82.9-1.17 1.5a13.1 13.1 0 0 0-.92 2.02V48h-3.94V25.71h2.24c.43 0 .72.08.88.25.17.16.28.44.33.83l.27 3.39zm15.04-14.59V48h-3.92V15.6h3.92zm19.55 15.43a6.22 6.22 0 0 0-2.38-2.05 6.7 6.7 0 0 0-2.86-.6c-2.07 0-3.66.75-4.77 2.23-1.12 1.48-1.68 3.6-1.68 6.33 0 1.46.13 2.7.38 3.74a7.29 7.29 0 0 0 1.1 2.56 4.35 4.35 0 0 0 1.78 1.45c.7.3 1.5.46 2.4.46 1.29 0 2.41-.3 3.36-.88a9.6 9.6 0 0 0 2.67-2.49V31.02zm3.91-15.43V48h-2.33c-.56 0-.9-.27-1.06-.81l-.35-2.71a12.13 12.13 0 0 1-3.25 2.77 8.28 8.28 0 0 1-4.23 1.06 7.31 7.31 0 0 1-6.14-2.9c-.73-.96-1.3-2.15-1.69-3.57a18.35 18.35 0 0 1 .07-9.48 11.29 11.29 0 0 1 1.89-3.7 8.7 8.7 0 0 1 7.06-3.34 7.96 7.96 0 0 1 6.12 2.62V15.59h3.91zM46.61 70.71V93H42.7V70.71h3.91zm.84-7c0 .39-.08.75-.24 1.09-.15.32-.35.61-.62.88-.25.25-.55.44-.9.59a2.67 2.67 0 0 1-2.16 0 2.9 2.9 0 0 1-1.45-1.47 2.67 2.67 0 0 1 0-2.16c.15-.35.35-.65.6-.9.25-.27.53-.47.85-.62a2.67 2.67 0 0 1 2.16 0c.35.15.65.35.9.62.27.25.47.55.62.9.16.34.24.7.24 1.08zm7.97 10.24c.49-.54 1-1.04 1.54-1.48a9.85 9.85 0 0 1 3.66-1.84 8.96 8.96 0 0 1 5.43.35c.94.4 1.72.97 2.33 1.71.63.74 1.11 1.62 1.43 2.67.32 1.04.49 2.19.49 3.45V93h-3.94V78.81c0-1.69-.4-3-1.17-3.92-.76-.93-1.93-1.4-3.5-1.4-1.15 0-2.24.27-3.25.83-1 .56-1.92 1.31-2.77 2.27V93h-3.94V70.71h2.35c.56 0 .9.28 1.04.82l.3 2.42zm57.7 3.3c0 2.36-.37 4.5-1.11 6.44a14.3 14.3 0 0 1-3.17 4.98c-1.37 1.37-3 2.45-4.93 3.2-1.9.76-4.02 1.13-6.33 1.13H85.8V61.47h11.77c2.31 0 4.42.39 6.33 1.15a13.8 13.8 0 0 1 8.1 8.18 17.75 17.75 0 0 1 1.12 6.45zm-4.37 0c0-1.94-.26-3.67-.8-5.2a10.94 10.94 0 0 0-2.23-3.87 9.57 9.57 0 0 0-3.53-2.42 12.23 12.23 0 0 0-4.61-.83h-7.5v24.62h7.5c1.7 0 3.24-.28 4.61-.84a9.7 9.7 0 0 0 3.53-2.4 10.94 10.94 0 0 0 2.24-3.87c.53-1.53.8-3.26.8-5.2zm19.8 5.72c-1.8.06-3.34.2-4.62.44-1.26.22-2.3.51-3.1.88-.8.36-1.37.8-1.74 1.3-.35.5-.53 1.05-.53 1.67 0 .58.1 1.1.3 1.52a3 3 0 0 0 .76 1.05c.34.27.73.46 1.17.6a6.13 6.13 0 0 0 1.45.17 7.28 7.28 0 0 0 3.5-.81 11.95 11.95 0 0 0 2.82-2.2v-4.62zm-12.65-9.11a12.73 12.73 0 0 1 3.98-2.66c1.43-.59 3-.88 4.73-.88 1.25 0 2.36.2 3.33.61a6.81 6.81 0 0 1 3.94 4.38c.33 1.04.5 2.19.5 3.43V93h-1.74a1.8 1.8 0 0 1-.88-.18c-.2-.13-.36-.38-.48-.74l-.44-2.12-1.72 1.46a9.48 9.48 0 0 1-3.74 1.7c-.69.15-1.46.23-2.3.23-.87 0-1.69-.12-2.45-.35a5.34 5.34 0 0 1-3.34-2.93 6.64 6.64 0 0 1-.49-2.64c0-.88.25-1.72.73-2.53a6.33 6.33 0 0 1 2.35-2.17c1.09-.63 2.5-1.15 4.25-1.54 1.75-.41 3.89-.65 6.42-.7v-1.75c0-1.73-.37-3.03-1.12-3.91-.75-.9-1.84-1.34-3.28-1.34-.97 0-1.78.12-2.44.37-.64.23-1.2.5-1.7.81l-1.23.82c-.33.23-.67.35-1 .35-.27 0-.5-.07-.69-.2a2.1 2.1 0 0 1-.48-.53l-.7-1.25zm27.67 19.5c-1.76 0-3.12-.5-4.07-1.48-.94-.98-1.41-2.4-1.41-4.25V74h-2.68a.9.9 0 0 1-.6-.2c-.16-.14-.24-.36-.24-.66v-1.56l3.65-.46.9-6.89c.05-.22.14-.4.29-.52a.88.88 0 0 1 .62-.22H142v7.67h6.44V74H142v13.38c0 .94.22 1.63.68 2.09.45.45 1.04.68 1.76.68a3.21 3.21 0 0 0 1.85-.53l.55-.35c.16-.12.3-.18.41-.18.2 0 .4.13.55.38l1.15 1.87a7.45 7.45 0 0 1-2.44 1.5 8.53 8.53 0 0 1-2.95.52zm19.68-10.4c-1.8.07-3.34.21-4.62.45-1.26.22-2.3.51-3.1.88-.8.36-1.37.8-1.74 1.3-.35.5-.53 1.05-.53 1.67 0 .58.1 1.1.3 1.52a2.9 2.9 0 0 0 .76 1.05c.34.27.73.46 1.17.6a6.13 6.13 0 0 0 1.45.17 7.3 7.3 0 0 0 3.5-.81 12.04 12.04 0 0 0 2.82-2.2v-4.62zm-12.65-9.1a12.72 12.72 0 0 1 3.99-2.66c1.42-.59 3-.88 4.72-.88 1.25 0 2.36.2 3.33.61a6.81 6.81 0 0 1 3.94 4.38c.33 1.04.5 2.19.5 3.43V93h-1.74a1.8 1.8 0 0 1-.88-.18c-.2-.13-.36-.38-.48-.74l-.44-2.12-1.72 1.46a9.48 9.48 0 0 1-3.74 1.7c-.69.15-1.46.23-2.3.23-.87 0-1.69-.12-2.45-.35a5.33 5.33 0 0 1-3.34-2.93 6.62 6.62 0 0 1-.49-2.64c0-.88.25-1.72.73-2.53a6.33 6.33 0 0 1 2.35-2.17c1.09-.63 2.5-1.15 4.25-1.54 1.74-.41 3.89-.65 6.42-.7v-1.75c0-1.73-.37-3.03-1.12-3.91-.75-.9-1.84-1.34-3.28-1.34-.97 0-1.78.12-2.44.37-.64.23-1.2.5-1.7.81l-1.22.82c-.34.23-.68.35-1.02.35-.26 0-.49-.07-.68-.2a1.88 1.88 0 0 1-.48-.53l-.7-1.25z"\n    fill="#fff"\n  />\n  <path fill="#D42B21" d="M0 106.79h210V120H0z" />\n</g>\n<defs>\n  <clipPath id="clip0"><path fill="#fff" d="M0 0h210v120H0z" /></clipPath>\n</defs>\n</svg>',exports.CORE_LOGO_SVG='<svg className="coreLogo" width="102" height="37" viewBox="0 0 102 37" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M47 0H0v37h47V0z" fill="#EA4148" />\n<path\n  d="M3.78 11.85c0-3.55 2.67-5.6 5.68-5.6a4.63 4.63 0 013.09 1.1l-1.7 2.36c-.31-.32-.74-.5-1.18-.52-1.36 0-2.16 1.03-2.16 2.66 0 1.62.89 2.65 2.03 2.65a2.93 2.93 0 001.7-.69l1.4 2.4a5.29 5.29 0 01-3.52 1.24c-3 0-5.34-2.05-5.34-5.6z"\n  fill="#fff"\n/>\n<path\n  d="M18.85 11.85c0-1.63-.42-2.66-1.52-2.66s-1.52 1.03-1.52 2.66c0 1.62.42 2.65 1.52 2.65s1.52-1.03 1.52-2.65zm-6.77 0c0-3.55 2.54-5.6 5.25-5.6 2.7 0 5.25 2.05 5.25 5.6s-2.54 5.6-5.25 5.6-5.25-2.05-5.25-5.6M23.34 6.5h2.97l.25 1.84h.09c.78-1.46 1.97-2.1 3-2.1.45-.02.9.05 1.32.22l-.6 3.16c-.38-.1-.78-.16-1.18-.17-.76 0-1.7.47-2.2 1.8v5.94h-3.65V6.5zM36.98 10.56c0-.81-.34-1.54-1.44-1.54-.8 0-1.49.47-1.7 1.54h3.14zm-6.6 1.29c0-3.47 2.49-5.6 5.07-5.6 3.13 0 4.62 2.3 4.62 5.17 0 .52-.05 1.03-.15 1.54h-6.04c.34 1.28 1.27 1.71 2.46 1.71a4.3 4.3 0 002.16-.64l1.18 2.18a7.08 7.08 0 01-3.85 1.24c-3.09 0-5.46-2.05-5.46-5.6"\n  fill="#fff"\n/>\n<path\n  d="M10.43 23.87c0-.81-.34-1.54-1.44-1.54-.8 0-1.48.47-1.69 1.54h3.13zm-6.6 1.28c0-3.46 2.5-5.6 5.08-5.6 3.13 0 4.61 2.3 4.61 5.18 0 .51-.05 1.03-.15 1.54H7.34c.34 1.28 1.27 1.7 2.46 1.7.76-.01 1.5-.23 2.16-.63l1.18 2.18a7.08 7.08 0 01-3.85 1.24c-3.1 0-5.46-2.06-5.46-5.6M13.9 25.15c0-3.55 2.67-5.6 5.68-5.6a4.63 4.63 0 013.09 1.11l-1.7 2.35c-.32-.31-.74-.5-1.18-.51-1.36 0-2.16 1.03-2.16 2.65 0 1.63.89 2.66 2.03 2.66a2.93 2.93 0 001.7-.69l1.39 2.4a5.29 5.29 0 01-3.51 1.24c-3 0-5.34-2.06-5.34-5.6"\n  fill="#1A1818"\n/>\n<path\n  d="M28.97 25.15c0-1.62-.42-2.65-1.52-2.65s-1.52 1.03-1.52 2.65c0 1.63.42 2.66 1.52 2.66s1.52-1.03 1.52-2.66zm-6.77 0c0-3.55 2.54-5.6 5.25-5.6 2.7 0 5.25 2.05 5.25 5.6s-2.54 5.6-5.25 5.6-5.25-2.04-5.25-5.6M33.54 19.8h2.97l.25 1.29h.09a4.76 4.76 0 013.34-1.54c2.33 0 3.3 1.71 3.3 4.36v6.6h-3.64v-6.13c0-1.37-.34-1.7-1.06-1.7-.67 0-1.05.3-1.6.8v7.02h-3.65V19.8z"\n  fill="#1A1818"\n/>\n<path fill="#fff" d="M48 0h54v37H48z" />\n<path d="M48 0h53.93v33H48V0z" fill="#002147" />\n<path\n  d="M58.42 10.86c0 .61-.1 1.18-.3 1.7a3.83 3.83 0 01-2.15 2.21c-.5.21-1.07.32-1.7.32-.6 0-1.17-.1-1.68-.32a3.9 3.9 0 01-2.15-2.21c-.2-.52-.3-1.09-.3-1.7 0-.61.1-1.18.3-1.7a3.93 3.93 0 012.15-2.22 4.38 4.38 0 011.69-.31c.62 0 1.18.1 1.69.31a3.79 3.79 0 012.15 2.22c.2.52.3 1.09.3 1.7zm-1.38 0c0-.48-.06-.9-.2-1.28A2.38 2.38 0 0055.43 8a2.97 2.97 0 00-1.14-.21c-.42 0-.8.07-1.15.21-.34.14-.63.35-.87.61-.24.27-.43.59-.56.97-.13.38-.2.8-.2 1.28s.07.9.2 1.29a2.46 2.46 0 001.43 1.57c.35.14.73.2 1.15.2.42 0 .8-.06 1.15-.2a2.4 2.4 0 001.42-1.57c.13-.38.2-.81.2-1.29zm7.14-1.72V15h-.74c-.17 0-.27-.08-.32-.24l-.1-.54a3.42 3.42 0 01-.81.63 2.3 2.3 0 01-1.06.24c-.32 0-.6-.05-.85-.16a1.72 1.72 0 01-1-1.15 3.1 3.1 0 01-.12-.91V9.14h1.24v3.73c0 .4.09.7.27.92.18.22.46.32.83.32.27 0 .53-.06.76-.18.24-.13.46-.3.67-.52V9.13h1.23zm2.33 1.08c.18-.37.4-.66.66-.87.27-.22.58-.32.94-.32a1.34 1.34 0 01.66.17l-.09.93c-.01.06-.04.11-.07.14a.2.2 0 01-.13.03c-.06 0-.14 0-.25-.03a1.62 1.62 0 00-.8.04c-.13.05-.25.13-.35.22-.1.1-.2.21-.28.35-.08.14-.15.3-.22.47V15h-1.24V9.13h.72c.13 0 .22.03.27.08.05.05.08.13.1.25l.08.76zm16-3.5L79.94 15h-1.21l-1.95-5.95a4.7 4.7 0 01-.12-.46 3.32 3.32 0 01-.13.46L74.57 15h-1.22l-2.57-8.28h1.13c.11 0 .2.03.28.09.08.05.14.12.16.22l1.56 5.3a6.11 6.11 0 01.16.8 10 10 0 01.2-.8l1.78-5.3a.48.48 0 01.16-.21c.08-.07.17-.1.28-.1h.4c.11 0 .21.03.28.1.08.05.13.12.17.21l1.77 5.3.1.37.1.4a59.35 59.35 0 00.16-.76L81 7.03a.4.4 0 01.16-.22c.08-.06.18-.09.3-.09h1.04zm2.41 2.32c.44 0 .83.07 1.18.22a2.49 2.49 0 011.47 1.55c.13.37.2.79.2 1.25 0 .47-.07.88-.2 1.26-.14.37-.33.69-.58.95-.24.26-.54.46-.9.6-.34.15-.73.22-1.17.22-.43 0-.83-.07-1.18-.22a2.55 2.55 0 01-1.47-1.55c-.14-.38-.2-.8-.2-1.26 0-.46.06-.88.2-1.25a2.55 2.55 0 011.47-1.55c.35-.15.75-.22 1.18-.22zm0 5.08c.53 0 .92-.18 1.18-.53.26-.36.4-.86.4-1.52s-.14-1.17-.4-1.53c-.26-.36-.65-.54-1.18-.54-.53 0-.93.18-1.2.54-.25.36-.38.87-.38 1.53s.13 1.16.39 1.52c.26.35.66.53 1.2.53zm4.86-3.9c.18-.37.4-.66.67-.87.26-.22.57-.32.93-.32a1.34 1.34 0 01.66.17l-.09.93c-.01.06-.04.11-.07.14a.2.2 0 01-.13.03c-.06 0-.14 0-.25-.03a1.62 1.62 0 00-.8.04c-.13.05-.24.13-.35.22-.1.1-.2.21-.28.35-.08.14-.15.3-.22.47V15H88.6V9.13h.72c.13 0 .22.03.27.08.05.05.08.13.1.25l.08.76zm4-3.73V15h-1.25V6.49h1.24zm4.91 4.09a1.45 1.45 0 00-1.24-.6c-.48 0-.86.18-1.13.54-.27.35-.4.87-.4 1.56 0 .37.02.67.08.93.07.25.15.46.27.62.11.16.25.28.42.35.16.08.35.11.56.11.31 0 .58-.07.8-.2.24-.14.45-.33.64-.58v-2.73zm1.24-4.09V15h-.75c-.16 0-.27-.08-.31-.24l-.11-.63c-.25.28-.53.52-.84.7-.31.17-.67.26-1.09.26a1.96 1.96 0 01-1.59-.78c-.19-.25-.34-.57-.44-.94a4.86 4.86 0 01.01-2.5c.12-.37.3-.7.51-.96a2.3 2.3 0 011.85-.88c.34 0 .63.05.88.16.24.11.45.26.64.46V6.49h1.24zm-39.9 14.65V27h-1.24v-5.86h1.24zm.2-1.78c0 .12-.02.22-.06.32a.83.83 0 01-1.34.26.8.8 0 01-.24-.58c0-.11.02-.22.06-.32a.89.89 0 01.43-.43.76.76 0 01.64 0 .81.81 0 01.45.43c.04.1.06.2.06.32zm2.16 2.55a3.67 3.67 0 01.83-.63 2.32 2.32 0 011.9-.08c.24.11.45.26.61.46.17.2.3.43.38.7.09.28.13.58.13.9V27H65v-3.73c0-.4-.1-.7-.28-.92-.18-.22-.45-.33-.83-.33-.27 0-.53.06-.77.19-.23.13-.45.3-.66.52V27h-1.23v-5.86h.74c.17 0 .28.07.33.23l.08.54zm14.96.95c0 .61-.1 1.17-.3 1.68a3.78 3.78 0 01-2.15 2.16c-.5.2-1.07.3-1.69.3H70.1v-8.28h3.12c.62 0 1.19.1 1.7.3a3.71 3.71 0 012.14 2.16c.2.5.3 1.07.3 1.68zm-1.37 0c0-.48-.07-.9-.2-1.28a2.6 2.6 0 00-.55-.96 2.35 2.35 0 00-.87-.6 2.97 2.97 0 00-1.15-.21h-1.77v6.1h1.77c.43 0 .81-.07 1.15-.2.34-.14.63-.34.87-.6.24-.27.43-.59.55-.96.13-.38.2-.81.2-1.29zm5.27 1.58a7.5 7.5 0 00-1.12.1c-.3.06-.55.13-.73.22a.97.97 0 00-.41.3.68.68 0 00-.12.4c0 .13.02.25.06.35.05.1.1.18.18.24.08.06.18.1.28.14a1.78 1.78 0 001.18-.14c.23-.12.46-.3.68-.53v-1.08zm-3.28-2.49a3.36 3.36 0 012.37-.92c.34 0 .63.05.9.16.26.11.48.26.66.46.18.2.31.44.4.72.1.27.15.57.15.9V27h-.55a.56.56 0 01-.27-.05c-.06-.04-.12-.11-.16-.23l-.12-.47-.44.36c-.15.1-.3.2-.46.26a2.77 2.77 0 01-1.75.12c-.2-.06-.38-.16-.53-.29a1.46 1.46 0 01-.48-1.18c0-.23.06-.45.18-.66.12-.22.32-.41.6-.58.27-.17.64-.31 1.1-.43a8.03 8.03 0 011.68-.19v-.39c0-.42-.1-.73-.27-.94-.18-.2-.45-.3-.8-.3-.23-.01-.43.02-.6.08a6.05 6.05 0 00-.74.39.54.54 0 01-.28.08.38.38 0 01-.22-.06.6.6 0 01-.15-.17l-.22-.4zm7.38 5.14c-.48 0-.86-.13-1.12-.4-.26-.28-.4-.67-.4-1.17v-3.41h-.64a.27.27 0 01-.18-.07c-.05-.04-.07-.11-.07-.2v-.5l.95-.14.27-1.7a.31.31 0 01.1-.15c.04-.04.1-.06.18-.06h.63v1.93h1.63v.89h-1.63v3.33c0 .2.05.37.16.48.1.11.24.17.41.17a.79.79 0 00.43-.12 4 4 0 00.12-.08.2.2 0 01.11-.04c.07 0 .13.04.17.11l.37.6c-.2.18-.42.3-.68.4a2.5 2.5 0 01-.8.13zm5.11-2.65a7.5 7.5 0 00-1.11.1 3 3 0 00-.74.22.97.97 0 00-.4.3.68.68 0 00-.13.4c0 .13.02.25.06.35.05.1.11.18.19.24s.17.1.28.14a1.78 1.78 0 001.18-.14c.23-.12.45-.3.67-.53v-1.08zm-3.28-2.49a3.36 3.36 0 012.37-.92c.34 0 .64.05.9.16.27.11.49.26.66.46.18.2.32.44.41.72.1.27.14.57.14.9V27h-.55a.56.56 0 01-.27-.05c-.06-.04-.11-.11-.15-.23l-.12-.47-.45.36c-.14.1-.3.2-.45.26a2.77 2.77 0 01-1.75.12c-.2-.06-.38-.16-.53-.29a1.46 1.46 0 01-.49-1.18c0-.23.06-.45.18-.66.12-.22.32-.41.6-.58.28-.17.65-.31 1.1-.43a8.03 8.03 0 011.68-.19v-.39c0-.42-.09-.73-.27-.94-.18-.2-.44-.3-.8-.3-.23-.01-.43.02-.59.08a6.09 6.09 0 00-.74.39.54.54 0 01-.29.08.38.38 0 01-.22-.06.6.6 0 01-.14-.17l-.23-.4z"\n  fill="#fff"\n/>\n<path fill="#D42B21" d="M48 32.65h54V37H48z" />\n</svg>',exports.GV_LOGO_SVG='<svg className="gvLogo" width="420" height="350" viewBox="0 0 420 350" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g clip-path="url(#clip0)">\n  <path fill="#fff" d="M0 0h420v350H0z" />\n  <path d="M0 0h420v214H0V0z" fill="#002147" />\n  <path\n    d="M80.1 63.5c0 4.7-.7 9-2.2 13a28.5 28.5 0 01-16.2 16.8c-3.8 1.6-8 2.4-12.7 2.4-4.6 0-8.8-.8-12.6-2.4a28.6 28.6 0 01-16.2-16.8c-1.5-4-2.2-8.3-2.2-13 0-4.7.7-9 2.2-13a29.7 29.7 0 0116.2-16.9c3.8-1.6 8-2.4 12.6-2.4 4.7 0 8.9.8 12.7 2.4a28.2 28.2 0 0116.2 17c1.5 3.8 2.2 8.2 2.2 12.9zm-8.7 0a32 32 0 00-1.6-10.4c-1-3.1-2.6-5.7-4.5-7.8-2-2.2-4.3-3.8-7-5a23.9 23.9 0 00-9.3-1.7c-3.4 0-6.4.6-9.2 1.8A19.8 19.8 0 0028.3 53a32 32 0 00-1.6 10.4c0 3.9.5 7.3 1.6 10.4 1 3 2.5 5.7 4.4 7.8a20 20 0 007.1 4.9c2.8 1.1 5.8 1.7 9.2 1.7 3.4 0 6.5-.6 9.3-1.7a19.6 19.6 0 0011.5-12.7c1-3 1.6-6.5 1.6-10.4zm23.3-13v28.4c0 3.3.8 6 2.3 7.8 1.6 1.8 4 2.8 7 2.8 2.3 0 4.5-.6 6.5-1.7 2-1 4-2.6 5.6-4.5V50.4h7.8V95h-4.6c-1.1 0-1.8-.5-2.1-1.6l-.7-4.8c-1.9 2.1-4 3.8-6.5 5.2-2.4 1.3-5.1 1.9-8.2 1.9-2.5 0-4.6-.4-6.5-1.2a13 13 0 01-4.7-3.4 14.7 14.7 0 01-2.8-5.3c-.6-2.1-1-4.4-1-7V50.5h7.9zM134.2 95V50.4h4.5c.8 0 1.4.2 1.7.5.3.3.6.9.7 1.7l.5 7c1.5-3.2 3.4-5.6 5.6-7.3 2.3-1.8 5-2.7 8-2.7a11.8 11.8 0 016 1.6l-1 5.9c-.1.7-.6 1-1.3 1-.4 0-1 0-1.9-.3-.8-.3-2-.5-3.6-.5-2.7 0-5 .8-6.8 2.4a18 18 0 00-4.6 7V95h-7.8zm41.4-63h7a3 3 0 012 .5c.5.4.8.9 1 1.5l13 43.8.6 2.5.6 3a162.5 162.5 0 011.3-5.5L215.9 34c.2-.5.5-1 1-1.4.6-.4 1.2-.7 2-.7h2.4c.8 0 1.4.2 1.8.6.5.4.9.9 1.1 1.5l14.7 43.8c.6 1.5 1 3.3 1.5 5.2a183 183 0 001-5.2l13-43.8a3 3 0 012.9-2h6.7l-19.7 63h-7.6l-16-48-.9-3.3a126.5 126.5 0 01-.8 3.2L203 95h-7.7l-19.7-63zM285 49.6c3.2 0 6.1.6 8.8 1.7 2.6 1 4.8 2.6 6.6 4.6a20 20 0 014.3 7.2c1 2.8 1.5 6 1.5 9.5s-.5 6.7-1.5 9.5a20 20 0 01-4.3 7.2c-1.8 2-4 3.5-6.6 4.6-2.7 1-5.6 1.6-8.8 1.6-3.3 0-6.3-.5-8.9-1.6a18.9 18.9 0 01-11-11.8c-1-2.8-1.4-6-1.4-9.5s.5-6.7 1.4-9.5c1-2.8 2.5-5.2 4.3-7.2 1.9-2 4.1-3.6 6.7-4.6a23 23 0 018.9-1.7zm0 39.8c4.3 0 7.6-1.5 9.8-4.4 2.2-3 3.3-7 3.3-12.4 0-5.3-1.1-9.4-3.3-12.4-2.2-3-5.4-4.4-9.8-4.4-2.3 0-4.2.4-5.9 1.1a11 11 0 00-4 3.3c-1.2 1.5-2 3.2-2.6 5.4a28.9 28.9 0 000 14.2c.6 2 1.4 3.8 2.5 5.2 1.1 1.4 2.5 2.5 4.1 3.3 1.7.7 3.6 1.1 5.9 1.1zm28.2 5.5V50.4h4.5c.8 0 1.4.2 1.7.5.3.3.6.9.7 1.7l.5 7c1.5-3.2 3.4-5.6 5.6-7.3 2.3-1.8 5-2.7 8-2.7a11.8 11.8 0 016 1.6l-1 5.9c-.1.7-.6 1-1.3 1-.4 0-1 0-1.9-.3-.8-.3-2-.5-3.6-.5-2.7 0-5 .8-6.8 2.4a18 18 0 00-4.6 7V95h-7.8zm41.5-64.8V95H347V30.2h7.8zM397.4 95c-1.1 0-1.8-.5-2.1-1.6l-.7-5.4c-2 2.3-4.1 4.1-6.6 5.5-2.4 1.4-5.2 2.1-8.4 2.1-2.6 0-4.9-.5-7-1.4-2-1-3.8-2.5-5.3-4.4-1.4-1.9-2.6-4.3-3.4-7.1a36.7 36.7 0 01.2-19c.8-2.8 2.1-5.3 3.7-7.4a17.8 17.8 0 0114.2-6.7 16 16 0 0112.2 5.3V30.2h7.8V95h-4.6zm-15.2-5.7c2.5 0 4.8-.6 6.7-1.8 2-1.2 3.7-2.8 5.3-5V61a12.2 12.2 0 00-10.4-5.2c-4.2 0-7.4 1.4-9.6 4.4-2.2 3-3.4 7.2-3.4 12.7 0 2.9.3 5.4.8 7.4.5 2.1 1.2 3.8 2.2 5.2 1 1.3 2.1 2.2 3.5 2.9 1.5.6 3 .9 4.9.9zM96 140.4V185h-7.8v-44.6H96zm1.8-14a5 5 0 01-.5 2.2 6 6 0 01-3 3 5.4 5.4 0 01-4.3 0l-1.8-1.2-1.2-1.8a5.3 5.3 0 010-4.3 6 6 0 013-3 5.4 5.4 0 014.3 0c.7.2 1.3.6 1.8 1.2.5.5.9 1 1.2 1.8.3.7.5 1.4.5 2.1zm9.4 58.6v-44.6h4.6c1.2 0 1.9.6 2.2 1.7l.6 4.8c2-2.1 4-3.9 6.4-5.2a17 17 0 018.4-2c2.4 0 4.5.4 6.4 1.3 1.9.7 3.4 1.9 4.6 3.4 1.3 1.5 2.3 3.2 2.9 5.3.6 2 1 4.4 1 7V185h-7.9v-28.4c0-3.4-.7-6-2.3-7.8-1.5-1.9-3.9-2.8-7-2.8-2.3 0-4.5.5-6.5 1.6-2 1.2-3.9 2.7-5.6 4.6V185h-7.8zm116.5-31.5c0 4.7-.8 9-2.3 12.9a28.6 28.6 0 01-16.1 16.4c-3.8 1.5-8 2.2-12.7 2.2H169v-63h23.6c4.7 0 8.9.7 12.7 2.2a27.7 27.7 0 0116.1 16.4c1.5 3.9 2.3 8.2 2.3 12.9zm-8.8 0c0-3.9-.5-7.3-1.5-10.4-1.1-3-2.6-5.6-4.5-7.7-2-2.1-4.3-3.8-7-4.9a24.3 24.3 0 00-9.3-1.6h-15V178h15c3.4 0 6.5-.6 9.2-1.7a19.4 19.4 0 0011.6-12.5c1-3 1.5-6.5 1.5-10.4zm49.3 31.5h-3.5c-.8 0-1.4-.1-1.9-.4-.4-.2-.7-.7-.9-1.4l-.9-4.2-3.4 2.9a19 19 0 01-12.1 3.8c-1.7 0-3.4-.2-4.9-.7a10.6 10.6 0 01-6.6-5.9c-.6-1.4-1-3.2-1-5.2 0-1.8.5-3.5 1.5-5 1-1.7 2.5-3.2 4.7-4.4 2.1-1.3 5-2.3 8.5-3.1 3.5-.8 7.7-1.3 12.8-1.4v-3.5c0-3.5-.8-6-2.3-7.8-1.4-1.8-3.6-2.7-6.5-2.7-2 0-3.6.2-4.9.7-1.3.5-2.4 1-3.4 1.6L237 150c-.7.4-1.4.7-2 .7-.6 0-1-.2-1.5-.4l-.9-1-1.4-2.6a24.6 24.6 0 0117.4-7c2.5 0 4.7.3 6.7 1.2a13.6 13.6 0 017.9 8.7c.6 2.1 1 4.4 1 6.9V185zm-20.4-4.8c1.4 0 2.7-.1 3.8-.4a16 16 0 006.1-3 24 24 0 002.8-2.6V165c-3.6.2-6.7.4-9.2 1-2.6.4-4.6 1-6.2 1.7a8.8 8.8 0 00-3.5 2.6c-.7 1-1 2-1 3.3 0 1.2.2 2.2.6 3a6 6 0 001.5 2.2c.6.5 1.4.9 2.3 1.2.9.2 1.8.3 2.8.3zm43.1 5.5c-3.5 0-6.2-1-8.1-3-2-2-2.9-4.7-2.9-8.4V147h-5.3c-.5 0-.9-.1-1.2-.4-.3-.3-.5-.7-.5-1.3V142l7.3-.9 1.8-13.8c0-.4.3-.7.6-1 .3-.3.7-.4 1.2-.4h4v15.3h12.7v5.7h-12.7v26.7c0 2 .4 3.3 1.3 4.2 1 1 2.1 1.4 3.6 1.4a6.4 6.4 0 003.7-1l1-.8.9-.3c.4 0 .8.2 1 .7l2.4 3.8c-1.4 1.2-3 2.2-4.9 3-2 .7-3.9 1-5.9 1zm49.4-.7h-3.5c-.7 0-1.3-.1-1.8-.4-.5-.2-.8-.7-1-1.4l-.8-4.2-3.4 2.9c-1.2.8-2.3 1.5-3.6 2a19 19 0 01-8.5 1.8c-1.8 0-3.4-.2-5-.7a10.6 10.6 0 01-6.6-5.9c-.6-1.4-.9-3.2-.9-5.2 0-1.8.5-3.5 1.5-5 1-1.7 2.5-3.2 4.6-4.4 2.2-1.3 5-2.3 8.5-3.1 3.5-.8 7.8-1.3 12.8-1.4v-3.5c0-3.5-.7-6-2.2-7.8-1.5-1.8-3.7-2.7-6.6-2.7-1.9 0-3.5.2-4.8.7-1.3.5-2.4 1-3.4 1.6L309 150c-.6.4-1.3.7-2 .7-.5 0-1-.2-1.4-.4l-1-1-1.3-2.6a24.6 24.6 0 0117.4-7c2.5 0 4.7.3 6.6 1.2a13.6 13.6 0 018 8.7c.6 2.1 1 4.4 1 6.9V185zm-20.3-4.8c1.4 0 2.6-.1 3.8-.4a16 16 0 006-3 24 24 0 002.8-2.6V165c-3.6.2-6.7.4-9.2 1-2.5.4-4.6 1-6.1 1.7a8.8 8.8 0 00-3.5 2.6c-.7 1-1 2-1 3.3 0 1.2.1 2.2.5 3a6 6 0 001.5 2.2c.7.5 1.4.9 2.3 1.2 1 .2 1.9.3 2.9.3z"\n    fill="#fff"\n  />\n  <path fill="#D42B21" d="M0 213.6h420V240H0z" />\n  <path\n    d="M55.6 284.6l-16-9.1-16 9.1 16 9.2 16-9.2zM37 316.7v-18.5l-16-9.1v18.5l16 9zM58.1 307.6V289l-16 9.1-.1 18.5 16.1-9.1z"\n    fill="#FF6400"\n  />\n  <path\n    d="M79.1 319.6v-42.8l-16 9.4v42.7l16-9.3zM58.1 331.9v-18.5L42 322.7v18.5l16.1-9.3zM37 341v-18.5L0 301.1v18.5L37 341zM16 304.4v-18.2l-16-9.4v18.5l16 9.1zM60.6 281.7l16-9.3-16-9.2-15.9 9.2 16 9.3zM39.6 251l-37 21.4 15.9 9.3 37-21.4-15.9-9.3z"\n    fill="#0098A7"\n  />\n  <path\n    d="M103.8 267.5h24v7.2h-15.7v6.4h12.7v7.2H112v7.2H128v7.2h-24.1v-35.2zM146.3 284.6l-10.6-17h9.3l6.2 10.6 6.2-10.7h9l-11 17.3 11.2 17.7h-9.4l-6.6-10.9-6.6 10.9h-8.7l11-17.9zM174.5 267.5h24.1v7.2H183v6.4h12.6v7.2H183v7.2h15.7v7.2h-24v-35.2zM207.6 267.5h9.3l8.6 19.5 8.5-19.5h9.1v35H235v-21.2l-7 16.7h-5.5l-7-16.7v21.2h-8v-35zM252.9 267.5h19.4c4.7 0 7 2.2 7 7v10c0 4.6-2.3 7-7 7H261v11.2h-8.3v-35.2h.2zm17.3 16.5c.7 0 1-.2 1-1v-7.5c0-.8-.3-1-1-1h-9v9.5h9zM288 267.5h8.4v27.8H311v7.4h-23v-35.2zM339.1 295.1h-11l-2 7.4h-8.5l10.7-35h11.4l10.7 35h-9l-2.3-7.4zm-1.9-7l-3.7-13.8-3.7 13.8h7.4zM386 302.5h-8.8l-5.8-12h-4.8v12h-8.4v-35h19.4c4.7 0 7 2.2 7 7v8.8c0 3.8-1.5 6-4.8 6.6l6.2 12.6zm-10.5-19c.8 0 1-.2 1-1v-7.2c0-.8-.2-1-1-1h-9v9h9v.2zM393.4 295.5v-4.7h8.1v3.5c0 .8.2 1 1 1h8c.8 0 1-.2 1-1v-3.7c0-.7-.4-1-1.4-1.3l-9.3-2.3c-4.7-1.2-7.2-2.6-7.2-7.2v-5.9c0-4.6 2.3-7 7-7h11.8c4.7 0 7 2.2 7 7v4.3h-8.1v-3.1c0-.8-.2-1-1-1H403c-.8 0-1 .2-1 1v3.3c0 .8.4 1 1.4 1.4l9.3 2.3c4.7 1.2 7.2 2.5 7.2 7.2v6.2c0 4.7-2.3 7-7 7h-12.4c-4.9 0-7.2-2.3-7.2-7zM106 326h-2.2v-14h2.1v14zM123.6 326h-2.1l-6.6-10h-.2v10h-2.2v-14h2.2l6.6 10.3h.2V312h2.1v14zM148.5 320.8c0 3.3-2.5 5.4-5.6 5.4-3.7 0-6.3-2.7-6.3-7.2 0-4.4 2.6-7.2 6-7.2 2.8 0 5 1.6 5.7 4.5l-2.1.2c-.6-1.8-2-2.7-3.5-2.7-2.2 0-4 1.7-4 5.2s1.8 5.3 4.2 5.3c2 0 3.6-1.4 3.6-3.5h-3V319h5.2v1.8h-.2zM162.9 326h-8.4v-14h2.2v12h6.2v2zM174 326.2c-3.6 0-6.3-2.7-6.3-7.2 0-4.4 2.6-7.2 6.2-7.2 3.5 0 6.3 2.8 6.3 7.2-.2 4.5-2.8 7.2-6.3 7.2zm0-12.2c-2.4 0-4.1 1.7-4.1 5.2s1.7 5.3 4 5.3c2.4 0 4.1-1.8 4.1-5.3s-2-5.2-4-5.2zM186 326v-14h5c3.2 0 4.5 1.6 4.5 3.7 0 1.8-1 2.5-2.3 3v.1c1.3.2 2.7 1.4 2.7 3.5 0 2.2-1.5 3.7-4.7 3.7H186zm2.1-7.8h2.8c1.5 0 2.5-.7 2.5-2s-.8-2-2.5-2H188v4zm3.1 1.6h-3v4.5h3c2 0 2.8-.8 2.8-2 0-1.3-1-2.5-2.8-2.5zM200.8 326l5-14h2.4l5 14H211l-1.2-3.3h-5.6l-1.2 3.3h-2.1zm4-5h4.3l-2.1-6h-.2l-2 6zM227 326h-8.4v-14h2.2v12h6.2v2zM242.2 318.2h6.6v-6h2.1v14h-2.1v-6h-6.6v6H240v-14h2.2v6zM266.3 326h-8.8v-14h8.8v2h-6.6v4.2h5.8v2h-5.8v4.3h6.6v1.5zM271.5 326l5-14h2.4l5 14h-2.3l-1.1-3.3h-5.7l-1.1 3.3h-2.2zm4.1-5h4.3l-2.2-6h-.2l-1.9 6zM298 326h-8.4v-14h2.1v12h6.2v2zM311.7 314h-4.2v12h-2.2v-12h-4.2v-2h10.6v2zM319.5 318.2h6.6v-6h2.2v14H326v-6h-6.6v6h-2.1v-14h2.1v6z"\n    fill="#00416B"\n  />\n</g>\n<defs>\n  <clipPath id="clip0"><path fill="#fff" d="M0 0h420v350H0z" /></clipPath>\n</defs>\n</svg>'},1856:function(module,exports,__webpack_require__){"use strict";function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(31),__webpack_require__(25),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConnectedScatterLegend=void 0;var React=__importStar(__webpack_require__(0)),mobx_1=__webpack_require__(41),Triangle_1=__webpack_require__(611),TextWrap_1=__webpack_require__(242),GrapherConstants_1=__webpack_require__(64),ConnectedScatterLegend=function(){function ConnectedScatterLegend(manager){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ConnectedScatterLegend),this.manager=manager}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(ConnectedScatterLegend,[{key:"fontSize",get:function get(){var _a;return.7*(null!==(_a=this.manager.fontSize)&&void 0!==_a?_a:GrapherConstants_1.BASE_FONT_SIZE)}},{key:"fontColor",get:function get(){return"#333"}},{key:"maxLabelWidth",get:function get(){return this.manager.sidebarWidth/3}},{key:"startLabel",get:function get(){var manager=this.manager,maxLabelWidth=this.maxLabelWidth,fontSize=this.fontSize;return new TextWrap_1.TextWrap({text:manager.displayStartTime,fontSize:fontSize,maxWidth:maxLabelWidth})}},{key:"endLabel",get:function get(){var manager=this.manager,maxLabelWidth=this.maxLabelWidth,fontSize=this.fontSize;return new TextWrap_1.TextWrap({text:manager.displayEndTime,fontSize:fontSize,maxWidth:maxLabelWidth})}},{key:"width",get:function get(){return this.manager.sidebarWidth}},{key:"height",get:function get(){return Math.max(this.startLabel.height,this.endLabel.height)}},{key:"render",value:function render(targetX,targetY){var renderOptions=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},manager=this.manager,startLabel=this.startLabel,endLabel=this.endLabel,fontColor=this.fontColor,lineLeft=targetX+startLabel.width+5,lineRight=targetX+manager.sidebarWidth-endLabel.width-5,lineY=targetY+this.height/2-.5;return React.createElement("g",Object.assign({className:"ConnectedScatterLegend"},renderOptions),React.createElement("rect",{x:targetX,y:targetY,width:this.width,height:this.height,fill:"#fff",opacity:0}),startLabel.render(targetX,targetY,{fill:fontColor}),endLabel.render(targetX+manager.sidebarWidth-endLabel.width,targetY,{fill:fontColor}),React.createElement("line",{x1:lineLeft,y1:lineY,x2:lineRight,y2:lineY,stroke:"#666",strokeWidth:1}),React.createElement("circle",{cx:lineLeft,cy:lineY,r:2,fill:"#666",stroke:"#ccc",strokeWidth:.2}),!manager.compareEndPointsOnly&&React.createElement(React.Fragment,null,React.createElement("circle",{cx:lineLeft+(lineRight-lineLeft)/3,cy:lineY,r:2,fill:"#666",stroke:"#ccc",strokeWidth:.2}),React.createElement("circle",{cx:lineLeft+2*(lineRight-lineLeft)/3,cy:lineY,r:2,fill:"#666",stroke:"#ccc",strokeWidth:.2})),React.createElement(Triangle_1.Triangle,{cx:lineRight,cy:lineY,r:3,fill:"#666",stroke:"#ccc",strokeWidth:.2,transform:"rotate(".concat(90,", ",lineRight,", ").concat(lineY,")")}))}}]),ConnectedScatterLegend}();__decorate([mobx_1.computed],ConnectedScatterLegend.prototype,"fontSize",null),__decorate([mobx_1.computed],ConnectedScatterLegend.prototype,"fontColor",null),__decorate([mobx_1.computed],ConnectedScatterLegend.prototype,"maxLabelWidth",null),__decorate([mobx_1.computed],ConnectedScatterLegend.prototype,"startLabel",null),__decorate([mobx_1.computed],ConnectedScatterLegend.prototype,"endLabel",null),__decorate([mobx_1.computed],ConnectedScatterLegend.prototype,"width",null),__decorate([mobx_1.computed],ConnectedScatterLegend.prototype,"height",null),exports.ConnectedScatterLegend=ConnectedScatterLegend},1857:function(module,exports,__webpack_require__){"use strict";__webpack_require__(791),__webpack_require__(104),Object.defineProperty(exports,"__esModule",{value:!0}),exports.generateComparisonLinePoints=void 0;var expr_eval_1=__webpack_require__(1858),d3_scale_1=__webpack_require__(279),GrapherConstants_1=__webpack_require__(64);function evalExpression(expr,context,defaultOnError){if(void 0===expr)return defaultOnError;try{return expr.evaluate(context)}catch(e){return defaultOnError}}function parseEquation(equation){try{return expr_eval_1.Parser.parse(equation)}catch(e){return void console.error(e)}}exports.generateComparisonLinePoints=function generateComparisonLinePoints(){for(var _a,lineFunction=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"x",xScaleDomain=arguments.length>1?arguments[1]:void 0,yScaleDomain=arguments.length>2?arguments[2]:void 0,xScaleType=arguments.length>3?arguments[3]:void 0,yScaleType=arguments.length>4?arguments[4]:void 0,expr=null===(_a=parseEquation(lineFunction))||void 0===_a?void 0:_a.simplify({e:Math.E,pi:Math.PI}),yFunc=function yFunc(x){return evalExpression(expr,{x:x},void 0)},numPoints=500,scaleFunction=xScaleType===GrapherConstants_1.ScaleType.log?d3_scale_1.scaleLog:d3_scale_1.scaleLinear,scale=scaleFunction().domain(xScaleDomain).range([0,numPoints]),controlData=[],i=0;i<numPoints;i++){var x=scale.invert(i),y=yFunc(x);void 0===y||Number.isNaN(x)||Number.isNaN(y)||(xScaleType===GrapherConstants_1.ScaleType.log&&x<=0||yScaleType===GrapherConstants_1.ScaleType.log&&y<=0||y>yScaleDomain[1]||controlData.push([x,y]))}return controlData}},1859:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(36),__webpack_require__(25),__webpack_require__(28),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(18),__webpack_require__(21);var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ScatterTooltip=void 0;var react_1=__importDefault(__webpack_require__(0)),TextWrap_1=__webpack_require__(242),Util_1=__webpack_require__(40),mobx_react_1=__webpack_require__(58),ScatterTooltip=function(_react_1$default$Comp){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(ScatterTooltip,_react_1$default$Comp);var _super=_createSuper(ScatterTooltip);function ScatterTooltip(){return _classCallCheck(this,ScatterTooltip),_super.apply(this,arguments)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(ScatterTooltip,[{key:"formatValueY",value:function formatValueY(value){return"Y Axis: "+this.props.yColumn.formatValueLong(value.y)}},{key:"formatValueX",value:function formatValueX(value){var s="X Axis: ".concat(this.props.xColumn.formatValueLong(value.x));return value.time.span||value.time.y===value.time.x||(s+=" (data from ".concat(this.props.xColumn.originalTimeColumn.formatValue(value.time.x),")")),s}},{key:"render",value:function render(){var _this=this,_this$props=this.props,x=_this$props.x,y=_this$props.y,maxWidth=_this$props.maxWidth,fontSize=_this$props.fontSize,series=_this$props.series,firstValue=Util_1.first(series.points),lastValue=Util_1.last(series.points),values=Util_1.compact(Util_1.uniq([firstValue,lastValue])),elements=[],offset=0,heading={x:x,y:y+offset,wrap:new TextWrap_1.TextWrap({maxWidth:maxWidth,fontSize:.75*fontSize,text:series.label})};elements.push(heading),offset+=heading.wrap.height+5;var yColumn=this.props.yColumn;return values.forEach((function(v){var year={x:x,y:y+offset,wrap:new TextWrap_1.TextWrap({maxWidth:maxWidth,fontSize:.65*fontSize,text:v.time.span?"".concat(yColumn.table.formatTime(v.time.span[0])," to ").concat(yColumn.originalTimeColumn.formatValue(v.time.span[1])):yColumn.originalTimeColumn.formatValue(v.time.y)})};offset+=year.wrap.height;var line1={x:x,y:y+offset,wrap:new TextWrap_1.TextWrap({maxWidth:maxWidth,fontSize:.55*fontSize,text:_this.formatValueY(v)})};offset+=line1.wrap.height;var line2={x:x,y:y+offset,wrap:new TextWrap_1.TextWrap({maxWidth:maxWidth,fontSize:.55*fontSize,text:_this.formatValueX(v)})};offset+=line2.wrap.height+5,elements.push.apply(elements,[year,line1,line2])})),react_1.default.createElement("g",{className:"scatterTooltip"},elements.map((function(el,i){return el.wrap.render(el.x,el.y,{key:i})})))}}]),ScatterTooltip}(react_1.default.Component);ScatterTooltip=__decorate([mobx_react_1.observer],ScatterTooltip),exports.ScatterTooltip=ScatterTooltip},1860:function(module,exports,__webpack_require__){"use strict";function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(28),__webpack_require__(48),__webpack_require__(55),__webpack_require__(33),__webpack_require__(25),__webpack_require__(36),__webpack_require__(22),__webpack_require__(79),__webpack_require__(202),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(18),__webpack_require__(21),__webpack_require__(17),__webpack_require__(29);var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ScatterPointsWithLabels=void 0;var d3_scale_1=__webpack_require__(279),d3_selection_1=__webpack_require__(135),NoDataModal_1=__webpack_require__(203),CoreTableConstants_1=__webpack_require__(276),PointVector_1=__webpack_require__(239),Util_1=__webpack_require__(40),mobx_1=__webpack_require__(41),mobx_react_1=__webpack_require__(58),react_1=__importDefault(__webpack_require__(0)),Halos_1=__webpack_require__(1020),MultiColorPolyline_1=__webpack_require__(1021),ScatterPlotChartConstants_1=__webpack_require__(1022),ScatterPoints_1=__webpack_require__(1861),ScatterUtils_1=__webpack_require__(1862),Triangle_1=__webpack_require__(611),ScatterPointsWithLabels=function(_react_1$default$Comp){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(ScatterPointsWithLabels,_react_1$default$Comp);var _super=_createSuper(ScatterPointsWithLabels);function ScatterPointsWithLabels(){var _this;return _classCallCheck(this,ScatterPointsWithLabels),(_this=_super.apply(this,arguments)).base=react_1.default.createRef(),_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(ScatterPointsWithLabels,[{key:"seriesArray",get:function get(){return this.props.seriesArray}},{key:"isConnected",get:function get(){return this.seriesArray.some((function(g){return g.points.length>1}))}},{key:"focusedSeriesNames",get:function get(){return Util_1.intersection(this.props.focusedSeriesNames||[],this.seriesArray.map((function(g){return g.seriesName})))}},{key:"hoveredSeriesNames",get:function get(){return this.props.hoveredSeriesNames}},{key:"isLayerMode",get:function get(){return this.focusedSeriesNames.length>0||this.hoveredSeriesNames.length>0}},{key:"bounds",get:function get(){return this.props.dualAxis.innerBounds}},{key:"isSubtleForeground",get:function get(){return this.focusedSeriesNames.length>1&&this.props.seriesArray.some((function(series){return series.points.length>2}))}},{key:"colorScale",get:function get(){return this.props.colorScale}},{key:"sizeScale",get:function get(){return d3_scale_1.scaleLinear().range([10,1e3]).domain(this.props.sizeDomain)}},{key:"fontScale",get:function get(){return d3_scale_1.scaleLinear().range([10,13]).domain(this.sizeScale.domain())}},{key:"hideConnectedScatterLines",get:function get(){return this.props.hideConnectedScatterLines}},{key:"initialRenderSeries",get:function get(){var seriesArray=this.seriesArray,sizeScale=this.sizeScale,fontScale=this.fontScale,colorScale=this.colorScale,bounds=this.bounds,xAxis=this.props.dualAxis.horizontalAxis.clone();xAxis.range=bounds.xRange();var yAxis=this.props.dualAxis.verticalAxis.clone();return yAxis.range=this.bounds.yRange(),Util_1.sortNumeric(seriesArray.map((function(series){var points=series.points.map((function(point){var area=sizeScale(point.size||4),scaleColor=void 0!==colorScale?colorScale.getColor(point.color):void 0;return{position:new PointVector_1.PointVector(Math.floor(xAxis.place(point.x)),Math.floor(yAxis.place(point.y))),color:null!=scaleColor?scaleColor:series.color,size:Math.sqrt(area/Math.PI),fontSize:fontScale(series.size||1),time:point.time,label:point.label}}));return{seriesName:series.seriesName,displayKey:"key-"+Util_1.makeSafeForCSS(series.seriesName),color:series.color,size:Util_1.last(points).size,points:points,text:series.label,midLabels:[],allLabels:[],offsetVector:PointVector_1.PointVector.zero}})),(function(d){return d.size}),CoreTableConstants_1.SortOrder.desc)}},{key:"renderSeries",get:function get(){var _step,renderData=this.initialRenderSeries,_iterator=_createForOfIteratorHelper(renderData);try{for(_iterator.s();!(_step=_iterator.n()).done;){var series=_step.value;series.isHover=this.hoveredSeriesNames.includes(series.seriesName),series.isFocus=this.focusedSeriesNames.includes(series.seriesName),series.isForeground=series.isHover||series.isFocus,series.isHover&&(series.size+=1)}}catch(err){_iterator.e(err)}finally{_iterator.f()}var _step2,_iterator2=_createForOfIteratorHelper(renderData);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _series=_step2.value;_series.startLabel=ScatterUtils_1.makeStartLabel(_series,this.isSubtleForeground,this.hideConnectedScatterLines),_series.midLabels=ScatterUtils_1.makeMidLabels(_series,this.isSubtleForeground,this.hideConnectedScatterLines),_series.endLabel=ScatterUtils_1.makeEndLabel(_series,this.isSubtleForeground,this.hideConnectedScatterLines),_series.allLabels=[_series.startLabel].concat(_series.midLabels).concat([_series.endLabel]).filter((function(x){return x}))}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}var labels=Util_1.flatten(renderData.map((function(series){return series.allLabels})));this.moveLabelsInsideChartBounds(labels,this.bounds);var labelsByPriority=Util_1.sortNumeric(labels,(function(l){return ScatterUtils_1.labelPriority(l)}),CoreTableConstants_1.SortOrder.desc);return this.focusedSeriesNames.length>0&&this.hideUnselectedLabels(labelsByPriority),this.hideCollidingLabelsByPriority(labelsByPriority),renderData}},{key:"hideUnselectedLabels",value:function hideUnselectedLabels(labelsByPriority){labelsByPriority.filter((function(label){return!label.series.isFocus&&!label.series.isHover})).forEach((function(label){return label.isHidden=!0}))}},{key:"hideCollidingLabelsByPriority",value:function hideCollidingLabelsByPriority(labelsByPriority){for(var i=0;i<labelsByPriority.length;i++){var higherPriorityLabel=labelsByPriority[i];if(!higherPriorityLabel.isHidden)for(var j=i+1;j<labelsByPriority.length;j++){var lowerPriorityLabel=labelsByPriority[j];if(!lowerPriorityLabel.isHidden)(lowerPriorityLabel.isEnd&&(lowerPriorityLabel.series.isHover||lowerPriorityLabel.series.isFocus)&&higherPriorityLabel.series.isHover===lowerPriorityLabel.series.isHover&&higherPriorityLabel.series.isFocus===lowerPriorityLabel.series.isFocus?higherPriorityLabel.bounds.pad(6).intersects(lowerPriorityLabel.bounds):higherPriorityLabel.bounds.pad(-6).intersects(lowerPriorityLabel.bounds))&&(lowerPriorityLabel.isHidden=!0)}}}},{key:"moveLabelsInsideChartBounds",value:function moveLabelsInsideChartBounds(labels,bounds){var _step3,_iterator3=_createForOfIteratorHelper(labels);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var label=_step3.value;label.bounds.left<bounds.left-1?label.bounds=label.bounds.set({x:label.bounds.x+label.bounds.width}):label.bounds.right>bounds.right+1&&(label.bounds=label.bounds.set({x:label.bounds.x-label.bounds.width})),label.bounds.top<bounds.top-1?label.bounds=label.bounds.set({y:bounds.top}):label.bounds.bottom>bounds.bottom+1&&(label.bounds=label.bounds.set({y:bounds.bottom-label.bounds.height}))}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}}},{key:"onMouseLeave",value:function onMouseLeave(){void 0!==this.mouseFrame&&cancelAnimationFrame(this.mouseFrame),this.props.onMouseLeave&&this.props.onMouseLeave()}},{key:"onMouseMove",value:function onMouseMove(ev){var _this2=this;void 0!==this.mouseFrame&&cancelAnimationFrame(this.mouseFrame);var nativeEvent=ev.nativeEvent;this.mouseFrame=requestAnimationFrame((function(){if(_this2.base.current){var mouse=Util_1.getRelativeMouse(_this2.base.current,nativeEvent),closestSeries=Util_1.minBy(_this2.renderSeries,(function(series){return series.points.length>1?Util_1.min(series.points.slice(0,-1).map((function(d,i){return PointVector_1.PointVector.distanceFromPointToLineSq(mouse,d.position,series.points[i+1].position)}))):Util_1.min(series.points.map((function(v){return PointVector_1.PointVector.distanceSq(v.position,mouse)})))}));if(closestSeries&&_this2.props.onMouseOver){var series=_this2.seriesArray.find((function(series){return series.seriesName===closestSeries.seriesName}));series&&_this2.props.onMouseOver(series)}}}))}},{key:"onClick",value:function onClick(){this.props.onClick&&this.props.onClick()}},{key:"backgroundSeries",get:function get(){return this.renderSeries.filter((function(series){return!series.isForeground}))}},{key:"foregroundSeries",get:function get(){return this.renderSeries.filter((function(series){return!!series.isForeground}))}},{key:"renderBackgroundSeries",value:function renderBackgroundSeries(){var backgroundSeries=this.backgroundSeries,isLayerMode=this.isLayerMode,isConnected=this.isConnected;return this.hideConnectedScatterLines?[]:backgroundSeries.map((function(series){return react_1.default.createElement(ScatterPoints_1.ScatterLine,{key:series.seriesName,series:series,isLayerMode:isLayerMode,isConnected:isConnected})}))}},{key:"renderBackgroundLabels",value:function renderBackgroundLabels(){var isLayerMode=this.isLayerMode;return react_1.default.createElement("g",{className:"backgroundLabels",fill:isLayerMode?"#aaa":"#333"},this.backgroundSeries.map((function(series){return series.allLabels.filter((function(label){return!label.isHidden})).map((function(label){return Halos_1.getElementWithHalo(series.displayKey+"-endLabel",react_1.default.createElement("text",{x:label.bounds.x.toFixed(2),y:(label.bounds.y+label.bounds.height).toFixed(2),fontSize:label.fontSize.toFixed(2),fontWeight:label.fontWeight,fill:isLayerMode?"#aaa":label.color},label.text))}))})))}},{key:"renderUid",get:function get(){return Util_1.guid()}},{key:"renderForegroundSeries",value:function renderForegroundSeries(){var isSubtleForeground=this.isSubtleForeground,hideConnectedScatterLines=this.hideConnectedScatterLines;return this.foregroundSeries.map((function(series){var lastValue=Util_1.last(series.points),strokeWidth=(hideConnectedScatterLines||series.isHover?3:isSubtleForeground?1.5:2)+.05*lastValue.size;if(1===series.points.length)return react_1.default.createElement(ScatterPoints_1.ScatterPoint,{key:series.displayKey,series:series});var firstValue=Util_1.first(series.points),opacity=isSubtleForeground?.9:1,radius=hideConnectedScatterLines?strokeWidth:strokeWidth/2+1,rotation=PointVector_1.PointVector.angle(series.offsetVector,PointVector_1.PointVector.up);return series.offsetVector.x<0&&(rotation=-rotation),react_1.default.createElement("g",{key:series.displayKey,className:series.displayKey},!hideConnectedScatterLines&&react_1.default.createElement(MultiColorPolyline_1.MultiColorPolyline,{points:series.points.map((function(point){return{x:point.position.x,y:point.position.y,color:point.color}})),strokeWidth:strokeWidth,opacity:opacity}),(series.isFocus||hideConnectedScatterLines)&&firstValue&&react_1.default.createElement("circle",{cx:firstValue.position.x.toFixed(2),cy:firstValue.position.y.toFixed(2),r:radius,fill:firstValue.color,opacity:opacity,stroke:firstValue.color,strokeOpacity:.6}),(series.isHover||hideConnectedScatterLines)&&series.points.slice(1,hideConnectedScatterLines?void 0:-1).map((function(v,index){return react_1.default.createElement("circle",{key:index,cx:v.position.x,cy:v.position.y,r:radius,fill:v.color,stroke:"none"})})),!hideConnectedScatterLines&&react_1.default.createElement(Triangle_1.Triangle,{transform:"rotate(".concat(rotation,", ").concat(lastValue.position.x.toFixed(2),", ").concat(lastValue.position.y.toFixed(2),")"),cx:lastValue.position.x,cy:lastValue.position.y,r:2*strokeWidth,fill:lastValue.color,opacity:opacity}))}))}},{key:"renderForegroundLabels",value:function renderForegroundLabels(){return this.foregroundSeries.map((function(series){return series.allLabels.filter((function(label){return!label.isHidden})).map((function(label,index){return Halos_1.getElementWithHalo("".concat(series.displayKey,"-label-").concat(index),react_1.default.createElement("text",{x:label.bounds.x.toFixed(2),y:(label.bounds.y+label.bounds.height).toFixed(2),fontSize:label.fontSize,fontFamily:ScatterPlotChartConstants_1.ScatterLabelFontFamily,fontWeight:label.fontWeight,fill:label.color},label.text))}))}))}},{key:"runAnimation",value:function runAnimation(){var _this3=this,radiuses=[];this.animSelection=d3_selection_1.select(this.base.current).selectAll("circle"),this.animSelection.each((function(){radiuses.push(this.getAttribute("r")),this.setAttribute("r","0")})).transition().duration(500).attr("r",(function(_,i){return radiuses[i]})).on("end",(function(){return _this3.forceUpdate()}))}},{key:"componentDidMount",value:function componentDidMount(){this.runAnimation()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.animSelection&&this.animSelection.interrupt()}},{key:"render",value:function render(){var bounds=this.bounds,renderSeries=this.renderSeries,renderUid=this.renderUid,clipBounds=bounds.pad(-10);return Util_1.isEmpty(renderSeries)?react_1.default.createElement(NoDataModal_1.NoDataModal,{manager:this.props.noDataModalManager,bounds:bounds}):react_1.default.createElement("g",{ref:this.base,className:"PointsWithLabels clickable",clipPath:"url(#scatterBounds-".concat(renderUid,")"),onMouseMove:this.onMouseMove,onMouseLeave:this.onMouseLeave,onClick:this.onClick,fontFamily:ScatterPlotChartConstants_1.ScatterLabelFontFamily},react_1.default.createElement("rect",{key:"background",x:bounds.x,y:bounds.y,width:bounds.width,height:bounds.height,fill:"rgba(255,255,255,0)"}),react_1.default.createElement("defs",null,react_1.default.createElement("clipPath",{id:"scatterBounds-".concat(renderUid)},react_1.default.createElement("rect",{x:clipBounds.x,y:clipBounds.y,width:clipBounds.width,height:clipBounds.height}))),this.renderBackgroundSeries(),this.renderBackgroundLabels(),this.renderForegroundSeries(),this.renderForegroundLabels())}}]),ScatterPointsWithLabels}(react_1.default.Component);__decorate([mobx_1.computed],ScatterPointsWithLabels.prototype,"seriesArray",null),__decorate([mobx_1.computed],ScatterPointsWithLabels.prototype,"isConnected",null),__decorate([mobx_1.computed],ScatterPointsWithLabels.prototype,"focusedSeriesNames",null),__decorate([mobx_1.computed],ScatterPointsWithLabels.prototype,"hoveredSeriesNames",null),__decorate([mobx_1.computed],ScatterPointsWithLabels.prototype,"isLayerMode",null),__decorate([mobx_1.computed],ScatterPointsWithLabels.prototype,"bounds",null),__decorate([mobx_1.computed],ScatterPointsWithLabels.prototype,"isSubtleForeground",null),__decorate([mobx_1.computed],ScatterPointsWithLabels.prototype,"colorScale",null),__decorate([mobx_1.computed],ScatterPointsWithLabels.prototype,"sizeScale",null),__decorate([mobx_1.computed],ScatterPointsWithLabels.prototype,"fontScale",null),__decorate([mobx_1.computed],ScatterPointsWithLabels.prototype,"hideConnectedScatterLines",null),__decorate([mobx_1.computed],ScatterPointsWithLabels.prototype,"initialRenderSeries",null),__decorate([mobx_1.computed],ScatterPointsWithLabels.prototype,"renderSeries",null),__decorate([mobx_1.action.bound],ScatterPointsWithLabels.prototype,"onMouseLeave",null),__decorate([mobx_1.action.bound],ScatterPointsWithLabels.prototype,"onMouseMove",null),__decorate([mobx_1.action.bound],ScatterPointsWithLabels.prototype,"onClick",null),__decorate([mobx_1.computed],ScatterPointsWithLabels.prototype,"backgroundSeries",null),__decorate([mobx_1.computed],ScatterPointsWithLabels.prototype,"foregroundSeries",null),__decorate([mobx_1.computed],ScatterPointsWithLabels.prototype,"renderUid",null),ScatterPointsWithLabels=__decorate([mobx_react_1.observer],ScatterPointsWithLabels),exports.ScatterPointsWithLabels=ScatterPointsWithLabels},1861:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(202),__webpack_require__(28),__webpack_require__(25),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(18),__webpack_require__(21);var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ScatterLine=exports.ScatterPoint=void 0;var PointVector_1=__webpack_require__(239),Util_1=__webpack_require__(40),mobx_react_1=__webpack_require__(58),react_1=__importDefault(__webpack_require__(0)),MultiColorPolyline_1=__webpack_require__(1021),Triangle_1=__webpack_require__(611),ScatterPoint=function(_react_1$default$Comp){_inherits(ScatterPoint,_react_1$default$Comp);var _super=_createSuper(ScatterPoint);function ScatterPoint(){return _classCallCheck(this,ScatterPoint),_super.apply(this,arguments)}return _createClass(ScatterPoint,[{key:"render",value:function render(){var _this$props=this.props,series=_this$props.series,isLayerMode=_this$props.isLayerMode,isConnected=_this$props.isConnected,value=Util_1.first(series.points);if(void 0===value)return null;var color=series.isFocus||!isLayerMode?value.color:"#e2e2e2",isLabelled=series.allLabels.some((function(label){return!label.isHidden})),size=!series.isFocus&&isConnected?1+value.size/16:value.size,cx=value.position.x.toFixed(2),cy=value.position.y.toFixed(2),stroke=isLayerMode?"#bbb":isLabelled?"#333":"#666";return react_1.default.createElement("g",{key:series.displayKey,className:series.displayKey},series.isFocus&&react_1.default.createElement("circle",{cx:cx,cy:cy,fill:"none",stroke:color,r:(size+3).toFixed(2)}),react_1.default.createElement("circle",{cx:cx,cy:cy,r:size.toFixed(2),fill:color,opacity:.8,stroke:stroke,strokeWidth:.5}))}}]),ScatterPoint}(react_1.default.Component);ScatterPoint=__decorate([mobx_react_1.observer],ScatterPoint),exports.ScatterPoint=ScatterPoint;var ScatterLine=function(_react_1$default$Comp2){_inherits(ScatterLine,_react_1$default$Comp2);var _super2=_createSuper(ScatterLine);function ScatterLine(){return _classCallCheck(this,ScatterLine),_super2.apply(this,arguments)}return _createClass(ScatterLine,[{key:"render",value:function render(){var _this$props2=this.props,series=_this$props2.series,isLayerMode=_this$props2.isLayerMode,isConnected=_this$props2.isConnected;if(1===series.points.length)return react_1.default.createElement(ScatterPoint,{series:series,isLayerMode:isLayerMode,isConnected:isConnected});var firstValue=Util_1.first(series.points),lastValue=Util_1.last(series.points);if(void 0===firstValue||void 0===lastValue)return null;var rotation=PointVector_1.PointVector.angle(series.offsetVector,PointVector_1.PointVector.up);series.offsetVector.x<0&&(rotation=-rotation);return react_1.default.createElement("g",{key:series.displayKey,className:series.displayKey},react_1.default.createElement("circle",{cx:firstValue.position.x.toFixed(2),cy:firstValue.position.y.toFixed(2),r:(1+firstValue.size/25).toFixed(1),fill:isLayerMode?"#e2e2e2":firstValue.color,stroke:"none",opacity:.7}),react_1.default.createElement(MultiColorPolyline_1.MultiColorPolyline,{points:series.points.map((function(v){return{x:v.position.x,y:v.position.y,color:isLayerMode?"#ccc":v.color}})),strokeWidth:(.3+series.size/16).toFixed(2),opacity:.7}),react_1.default.createElement(Triangle_1.Triangle,{transform:"rotate(".concat(rotation,", ").concat(lastValue.position.x.toFixed(2),", ").concat(lastValue.position.y.toFixed(2),")"),cx:lastValue.position.x,cy:lastValue.position.y,r:1.5+lastValue.size/16,fill:isLayerMode?"#e2e2e2":lastValue.color,opacity:.7}))}}]),ScatterLine}(react_1.default.Component);ScatterLine=__decorate([mobx_react_1.observer],ScatterLine),exports.ScatterLine=ScatterLine},1862:function(module,exports,__webpack_require__){"use strict";__webpack_require__(28),__webpack_require__(22),Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeEndLabel=exports.makeMidLabels=exports.makeStartLabel=exports.labelPriority=void 0;var Bounds_1=__webpack_require__(73),PointVector_1=__webpack_require__(239),Util_1=__webpack_require__(40),ScatterPlotChartConstants_1=__webpack_require__(1022);exports.labelPriority=function labelPriority(label){var priority=label.fontSize;return label.series.isHover&&(priority+=1e4),label.series.isFocus&&(priority+=1e3),label.isEnd&&(priority+=100),priority};exports.makeStartLabel=function makeStartLabel(series,isSubtleForeground,hideConnectedScatterLines){if(series.isForeground&&!(series.points.length<=1)){var fontSize=hideConnectedScatterLines?12:series.isForeground?isSubtleForeground?8:9:7,firstValue=series.points[0],nextSegment=series.points[1].position.subtract(firstValue.position),pos=firstValue.position.subtract(nextSegment.normalize().times(5)),bounds=Bounds_1.Bounds.forText(firstValue.label,{x:pos.x,y:pos.y,fontSize:fontSize,fontFamily:ScatterPlotChartConstants_1.ScatterLabelFontFamily});return pos.x<firstValue.position.x&&(bounds=new Bounds_1.Bounds(bounds.x-bounds.width+2,bounds.y,bounds.width,bounds.height)),pos.y>firstValue.position.y&&(bounds=new Bounds_1.Bounds(bounds.x,bounds.y+bounds.height/2,bounds.width,bounds.height)),{text:firstValue.label,fontSize:fontSize,fontWeight:400,color:firstValue.color,bounds:bounds,series:series,isStart:!0}}};exports.makeMidLabels=function makeMidLabels(series,isSubtleForeground,hideConnectedScatterLines){if(!series.isForeground||series.points.length<=1||!series.isHover&&isSubtleForeground)return[];var fontSize=hideConnectedScatterLines?12:series.isForeground?isSubtleForeground?8:9:7;return series.points.slice(1,-1).map((function(v,i){var prevPos=i>0&&series.points[i-1].position,prevSegment=prevPos&&v.position.subtract(prevPos),nextPos=series.points[i+1].position,nextSegment=nextPos.subtract(v.position),pos=v.position;if(prevPos&&prevSegment){var potentialSpots=prevSegment.add(nextSegment).normalize().normals().map((function(x){return x.times(5)})).map((function(n){return v.position.add(n)}));pos=Util_1.maxBy(potentialSpots,(function(p){return PointVector_1.PointVector.distance(p,prevPos)+PointVector_1.PointVector.distance(p,nextPos)}))}else pos=v.position.subtract(nextSegment.normalize().times(5));var bounds=Bounds_1.Bounds.forText(v.label,{x:pos.x,y:pos.y,fontSize:fontSize,fontWeight:400,fontFamily:ScatterPlotChartConstants_1.ScatterLabelFontFamily});return pos.x<v.position.x&&(bounds=new Bounds_1.Bounds(bounds.x-bounds.width+2,bounds.y,bounds.width,bounds.height)),pos.y>v.position.y&&(bounds=new Bounds_1.Bounds(bounds.x,bounds.y+bounds.height/2,bounds.width,bounds.height)),{text:v.label,fontSize:fontSize,fontWeight:400,color:v.color,bounds:bounds,series:series,isMid:!0}}))};exports.makeEndLabel=function makeEndLabel(series,isSubtleForeground,hideConnectedScatterLines){var lastValue=Util_1.last(series.points),lastPos=lastValue.position,fontSize=hideConnectedScatterLines?12:lastValue.fontSize*(series.isForeground?isSubtleForeground?1.2:1.3:1.1),fontWeight=series.isForeground&&!hideConnectedScatterLines?700:400,offsetVector=PointVector_1.PointVector.up;if(series.points.length>1){var prevPos=series.points[series.points.length-2].position;offsetVector=lastPos.subtract(prevPos)}series.offsetVector=offsetVector;var labelPos=lastPos.add(offsetVector.normalize().times(1===series.points.length?lastValue.size+1:5)),labelBounds=Bounds_1.Bounds.forText(series.text,{x:labelPos.x,y:labelPos.y,fontSize:fontSize,fontFamily:ScatterPlotChartConstants_1.ScatterLabelFontFamily});return labelPos.x<lastPos.x&&(labelBounds=labelBounds.set({x:labelBounds.x-labelBounds.width})),labelPos.y>lastPos.y&&(labelBounds=labelBounds.set({y:labelBounds.y+labelBounds.height/2})),{text:hideConnectedScatterLines&&series.isForeground?lastValue.label:series.text,fontSize:fontSize,fontWeight:fontWeight,color:lastValue.color,bounds:labelBounds,series:series,isEnd:!0}}},1863:function(module,exports,__webpack_require__){"use strict";function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(18),__webpack_require__(21);var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};Object.defineProperty(exports,"__esModule",{value:!0}),exports.TimeScatterChart=void 0;var mobx_react_1=__webpack_require__(58),TimeScatterChart=function(_ScatterPlotChart_1$S){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(TimeScatterChart,_ScatterPlotChart_1$S);var _super=_createSuper(TimeScatterChart);function TimeScatterChart(props){return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TimeScatterChart),_super.call(this,props)}return TimeScatterChart}(__webpack_require__(610).ScatterPlotChart);TimeScatterChart=__decorate([mobx_react_1.observer],TimeScatterChart),exports.TimeScatterChart=TimeScatterChart},1864:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_SLOPE_CHART_COLOR=void 0,exports.DEFAULT_SLOPE_CHART_COLOR="#ff7f0e"},1865:function(module,exports,__webpack_require__){"use strict";__webpack_require__(29),__webpack_require__(7),__webpack_require__(5),__webpack_require__(6),__webpack_require__(8),__webpack_require__(28),__webpack_require__(25),Object.defineProperty(exports,"__esModule",{value:!0}),exports.columnToLineChartSeriesArray=void 0;var GrapherConstants_1=__webpack_require__(64);exports.columnToLineChartSeriesArray=function columnToLineChartSeriesArray(col,seriesStrategy,canSelectMultipleEntities){var isProjection=col.isProjection,owidRowsByEntityName=col.owidRowsByEntityName;return Array.from(owidRowsByEntityName.keys()).map((function(entityName){var seriesName;return seriesName=seriesStrategy===GrapherConstants_1.SeriesStrategy.entity?entityName:canSelectMultipleEntities?"".concat(entityName," - ").concat(col.displayName):col.displayName,{points:owidRowsByEntityName.get(entityName).map((function(row){return{x:row.time,y:row.value}})),seriesName:seriesName,isProjection:isProjection,color:"#000"}}))}},1866:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_BAR_COLOR=void 0,exports.DEFAULT_BAR_COLOR="#2E5778"},1867:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getChartPadding=exports.getFontSize=void 0;var GrapherConstants_1=__webpack_require__(64);exports.getFontSize=function getFontSize(count){var baseFontSize=arguments.length>1&&void 0!==arguments[1]?arguments[1]:GrapherConstants_1.BASE_FONT_SIZE,minSize=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8;return count<=2?Math.max(minSize,1*baseFontSize):count<=4?Math.max(minSize,.90625*baseFontSize):count<=9?Math.max(minSize,baseFontSize*(13/16)):count<=16?Math.max(minSize,.75*baseFontSize):count<=25?Math.max(minSize,baseFontSize*(11/16)):minSize};exports.getChartPadding=function getChartPadding(count,baseFontSize){return{rowPadding:Math.round(3.5*baseFontSize),columnPadding:Math.round(baseFontSize),outerPadding:0}}},1869:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(18),__webpack_require__(21);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.AddEntityButton=void 0;var React=__importStar(__webpack_require__(0)),mobx_react_1=__webpack_require__(58),mobx_1=__webpack_require__(41),AddEntityButton=function(_React$Component){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(AddEntityButton,_React$Component);var _super=_createSuper(AddEntityButton);function AddEntityButton(){return _classCallCheck(this,AddEntityButton),_super.apply(this,arguments)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(AddEntityButton,[{key:"render",value:function render(){var _this=this;return React.createElement("button",{className:"addEntityButton clickable",onClick:function onClick(){return mobx_1.runInAction((function(){return _this.props.manager.isSelectingData=!0}))},"data-track-note":"chart-add-entity"},React.createElement("span",{className:"icon"},React.createElement("svg",{width:16,height:16},React.createElement("path",{d:"M3,8 h10 m-5,-5 v10"}))),React.createElement("span",{className:"label"},"Add ".concat(this.props.manager.entityType||"data")))}}]),AddEntityButton}(React.Component);AddEntityButton=__decorate([mobx_react_1.observer],AddEntityButton),exports.AddEntityButton=AddEntityButton},1871:function(module,exports,__webpack_require__){"use strict";function _toArray(arr){return _arrayWithHoles(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||_nonIterableRest()}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||function _iterableToArrayLimit(arr,i){var _i=arr&&("undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"]);if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}__webpack_require__(68),__webpack_require__(5),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(36),__webpack_require__(33),__webpack_require__(14),__webpack_require__(28),__webpack_require__(31),__webpack_require__(25),__webpack_require__(17),__webpack_require__(29),__webpack_require__(48),__webpack_require__(55),__webpack_require__(9),__webpack_require__(10),__webpack_require__(65),__webpack_require__(32),__webpack_require__(22),__webpack_require__(151),__webpack_require__(57),__webpack_require__(11),Object.defineProperty(exports,"__esModule",{value:!0}),exports.legacyToOwidTableAndDimensions=void 0;var GrapherConstants_1=__webpack_require__(64),CoreColumnDef_1=__webpack_require__(199),Util_1=__webpack_require__(40),OwidTableConstants_1=__webpack_require__(172),OwidTable_1=__webpack_require__(201),owidTypes_1=__webpack_require__(122);exports.legacyToOwidTableAndDimensions=function legacyToOwidTableAndDimensions(json,grapherConfig){var _a,entityMetaById=json.entityKey,entityColorMap=new Map,columnColorMap=new Map,dimensions=grapherConfig.dimensions||[];null===(_a=grapherConfig.selectedData)||void 0===_a||_a.filter((function(item){return item.entityId&&item.color})).forEach((function(item){var _a;entityColorMap.set(item.entityId,item.color);var varId=null===(_a=dimensions[item.index])||void 0===_a?void 0:_a.variableId;varId&&columnColorMap.set(varId.toString(),item.color)}));var baseColumnDefs=new Map;OwidTableConstants_1.StandardOwidColumnDefs.forEach((function(def){baseColumnDefs.set(def.slug,def)}));var colorColumnSlug=entityColorMap.size>0||grapherConfig.selectedEntityColors?OwidTableConstants_1.OwidTableSlugs.entityColor:void 0;colorColumnSlug&&baseColumnDefs.set(colorColumnSlug,{slug:colorColumnSlug,type:CoreColumnDef_1.ColumnTypeNames.Color,name:colorColumnSlug});for(var newDimensions=dimensions.map((function(dimension){return Object.assign(Object.assign({},dimension),{slug:dimension.targetYear?"".concat(dimension.variableId,"-").concat(dimension.targetYear):"".concat(dimension.variableId)})})),variableTables=Util_1.uniqBy(newDimensions,(function(dim){return dim.slug})).map((function(dimension){var _columnStore,_a,_b,_c,_d,_e,variable=json.variables[dimension.variableId],columnDefs=new Map(baseColumnDefs),timeColumnDef=timeColumnDefFromLegacyVariable(variable);columnDefs.set(timeColumnDef.slug,timeColumnDef);var valueColumnDef=columnDefFromLegacyVariable(variable),valueColumnColor=null!==(_b=null===(_a=dimension.display)||void 0===_a?void 0:_a.color)&&void 0!==_b?_b:columnColorMap.get(dimension.variableId.toString());valueColumnDef.slug=dimension.slug,valueColumnColor&&(valueColumnDef.color=valueColumnColor),dimension&&(valueColumnDef.display=Object.assign(Object.assign({},Util_1.trimObject(valueColumnDef.display)),Util_1.trimObject(dimension.display))),columnDefs.set(valueColumnDef.slug,valueColumnDef);var _annotationMapAndDefF2=_slicedToArray(annotationMapAndDefFromLegacyVariable(variable),2),annotationMap=_annotationMapAndDefF2[0],annotationColumnDef=_annotationMapAndDefF2[1],times=timeColumnValuesFromLegacyVariable(variable),entityIds=null!==(_c=variable.entities)&&void 0!==_c?_c:[],entityNames=entityIds.map((function(id){return entityMetaById[id].name})),entityCodes=entityIds.map((function(id){return entityMetaById[id].code})),values=variable.values||[],conversionFactor=null===(_d=valueColumnDef.display)||void 0===_d?void 0:_d.conversionFactor;void 0!==conversionFactor&&(values=values.map((function(value){return Util_1.isNumber(value)?value*conversionFactor:value})));var columnStore=(_defineProperty(_columnStore={},OwidTableConstants_1.OwidTableSlugs.entityId,entityIds),_defineProperty(_columnStore,OwidTableConstants_1.OwidTableSlugs.entityCode,entityCodes),_defineProperty(_columnStore,OwidTableConstants_1.OwidTableSlugs.entityName,entityNames),_defineProperty(_columnStore,timeColumnDef.slug,times),_defineProperty(_columnStore,valueColumnDef.slug,values),_columnStore);annotationColumnDef&&(columnStore[annotationColumnDef.slug]=entityNames.map((function(entityName){return annotationMap.get(entityName)}))),colorColumnSlug&&(columnStore[colorColumnSlug]=entityIds.map((function(entityId){var _a,_b;return null!==(_b=null===(_a=grapherConfig.selectedEntityColors)||void 0===_a?void 0:_a[entityMetaById[entityId].name])&&void 0!==_b?_b:entityColorMap.get(entityId)})));var variableTable=new OwidTable_1.OwidTable(columnStore,Array.from(columnDefs.values()),{skipParsing:!0}),targetTime=null==dimension?void 0:dimension.targetYear;return grapherConfig.type===GrapherConstants_1.ChartTypeName.ScatterPlot&&Util_1.isNumber(targetTime)&&(variableTable=variableTable.filterByTargetTimes([targetTime],null===(_e=valueColumnDef.display)||void 0===_e?void 0:_e.tolerance).interpolateColumnWithTolerance(valueColumnDef.slug,0).dropColumns([timeColumnDef.slug])),variableTable})),joinedVariablesTable=variableTables.length?fullJoinTables(variableTables):new OwidTable_1.OwidTable,_i2=0,_arr2=[OwidTableConstants_1.OwidTableSlugs.day,OwidTableConstants_1.OwidTableSlugs.year];_i2<_arr2.length;_i2++){var dayOrYearSlug=_arr2[_i2];if(joinedVariablesTable.columnSlugs.includes(dayOrYearSlug)){joinedVariablesTable=joinedVariablesTable.duplicateColumn(dayOrYearSlug,{slug:OwidTableConstants_1.OwidTableSlugs.time,name:OwidTableConstants_1.OwidTableSlugs.time});break}}return{dimensions:newDimensions,table:joinedVariablesTable}};var fullJoinTables=function fullJoinTables(tables){return tables.reduce((function(joinedTable,table){return joinedTable.fullJoin(table)}))},columnDefFromLegacyVariable=function columnDefFromLegacyVariable(variable){var _a,slug=variable.id.toString(),unit=variable.unit,shortUnit=variable.shortUnit,description=variable.description,coverage=variable.coverage,datasetId=variable.datasetId,datasetName=variable.datasetName,source=variable.source,display=variable.display,isContinent=123==variable.id;return{name:isContinent?"Continent":variable.name,slug:slug,isDailyMeasurement:null===(_a=variable.display)||void 0===_a?void 0:_a.yearIsDay,unit:unit,shortUnit:shortUnit,description:description,coverage:coverage,datasetId:datasetId,datasetName:datasetName,display:display,source:source,owidVariableId:variable.id,type:isContinent?CoreColumnDef_1.ColumnTypeNames.Continent:CoreColumnDef_1.ColumnTypeNames.Numeric}},timeColumnDefFromLegacyVariable=function timeColumnDefFromLegacyVariable(variable){var _a;return(null===(_a=variable.display)||void 0===_a?void 0:_a.yearIsDay)?{slug:OwidTableConstants_1.OwidTableSlugs.day,type:CoreColumnDef_1.ColumnTypeNames.Day,name:"Day"}:{slug:OwidTableConstants_1.OwidTableSlugs.year,type:CoreColumnDef_1.ColumnTypeNames.Year,name:"Year"}},timeColumnValuesFromLegacyVariable=function timeColumnValuesFromLegacyVariable(variable){var display=variable.display,yearsRaw=variable.years||[];return display&&display.yearIsDay&&void 0!==display.zeroDay&&display.zeroDay!==owidTypes_1.EPOCH_DATE?convertLegacyYears(yearsRaw,display.zeroDay):yearsRaw},convertLegacyYears=function convertLegacyYears(years,zeroDay){var diff=Util_1.diffDateISOStringInDays(zeroDay,owidTypes_1.EPOCH_DATE);return years.map((function(y){return y+diff}))},annotationMapAndDefFromLegacyVariable=function annotationMapAndDefFromLegacyVariable(variable){var _a;if(null===(_a=variable.display)||void 0===_a?void 0:_a.entityAnnotationsMap){var slug=Util_1.makeAnnotationsSlug(variable.id.toString());return[annotationsToMap(variable.display.entityAnnotationsMap),{slug:slug,type:CoreColumnDef_1.ColumnTypeNames.SeriesAnnotation,name:slug}]}return[]},annotationsToMap=function annotationsToMap(annotations){var entityAnnotationsMap=new Map;return annotations.split("\n").forEach((function(line){var _line$split2=_toArray(line.split(":")),key=_line$split2[0],words=_line$split2.slice(1);entityAnnotationsMap.set(key.trim(),words.join(":").trim())})),entityAnnotationsMap}},1873:function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});var path_1=__importDefault(__webpack_require__(1038)),fs_1=__importDefault(__webpack_require__(1037));exports.default=function findProjectBaseDir(from){if(fs_1.default.existsSync)for(var dir=path_1.default.dirname(from);dir.length;){if(fs_1.default.existsSync(path_1.default.resolve(dir,"package.json")))return dir;var parentDir=path_1.default.resolve(dir,"..");if(parentDir===dir)break;dir=parentDir}}},1876:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8);var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SlideShowController=void 0;var mobx_1=__webpack_require__(41),SlideShowController=function(){function SlideShowController(){var slides=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],currentIndex=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,manager=arguments.length>2?arguments[2]:void 0;_classCallCheck(this,SlideShowController),this.currentIndex=currentIndex,this.slides=slides,this.manager=manager}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(SlideShowController,[{key:"isEmpty",get:function get(){return 0===this.slides.length}},{key:"playIndexCommand",value:function playIndexCommand(index){var slides=this.slides,slide=slides[index=(index=index>=slides.length?index-slides.length:index)<0?slides.length+index:index];this.manager&&this.manager.setSlide(slide)}},{key:"playNext",value:function playNext(){this.playIndexCommand(++this.currentIndex)}},{key:"playPrevious",value:function playPrevious(){this.playIndexCommand(--this.currentIndex)}}]),SlideShowController}();__decorate([mobx_1.action.bound],SlideShowController.prototype,"playIndexCommand",null),__decorate([mobx_1.action.bound],SlideShowController.prototype,"playNext",null),__decorate([mobx_1.action.bound],SlideShowController.prototype,"playPrevious",null),exports.SlideShowController=SlideShowController},1879:function(module,exports,__webpack_require__){"use strict";function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=arr&&("undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"]);if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}__webpack_require__(9),__webpack_require__(36),__webpack_require__(31),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(22),__webpack_require__(17),__webpack_require__(29);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result},__rest=this&&this.__rest||function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.VerticalScrollContainer=void 0;var react_1=__importStar(__webpack_require__(0)),classnames_1=__importDefault(__webpack_require__(139));function getShadowOpacity(maxOpacity,maxDistance,scrollDistance){return(void 0!==scrollDistance?Math.min(scrollDistance,maxDistance):0)/maxDistance*maxOpacity}exports.VerticalScrollContainer=react_1.default.forwardRef((function(props,ref){var scrollingShadows=props.scrollingShadows,scrollLock=props.scrollLock,className=props.className,children=props.children,contentsId=props.contentsId,style=props.style,rest=__rest(props,["scrollingShadows","scrollLock","className","children","contentsId","style"]);scrollingShadows=null==scrollingShadows||scrollingShadows,scrollLock=null==scrollLock||scrollLock;var scrollContainerRef=function useCombinedRefs(){for(var _len=arguments.length,refs=new Array(_len),_key=0;_key<_len;_key++)refs[_key]=arguments[_key];var targetRef=react_1.default.useRef(null);return react_1.default.useEffect((function(){refs.forEach((function(ref){ref&&("function"==typeof ref?ref(targetRef.current||null):ref.current=targetRef.current||null)}))}),[refs]),targetRef}(ref),_useScrollBounds=function useScrollBounds(ref,contentsId){var _react_1$useState2=_slicedToArray(react_1.useState(void 0),2),scrollTop=_react_1$useState2[0],onScrollTop=_react_1$useState2[1],_react_1$useState4=_slicedToArray(react_1.useState(void 0),2),scrollBottom=_react_1$useState4[0],onScrollBottom=_react_1$useState4[1];return react_1.useEffect((function(){var el=ref.current;if(el){var pendingUpdate=!1;function onScroll(){var scrollTop=el.scrollTop,scrollHeight=el.scrollHeight,offsetHeight=el.offsetHeight;onScrollTop(scrollTop),onScrollBottom(scrollHeight-offsetHeight-scrollTop),pendingUpdate=!1}onScroll();var onScrollThrottled=function onScrollThrottled(){pendingUpdate||(window.requestAnimationFrame(onScroll),pendingUpdate=!0)};return el.addEventListener("scroll",onScrollThrottled),function(){el.removeEventListener("scroll",onScrollThrottled)}}}),[contentsId]),[scrollTop,scrollBottom]}(scrollContainerRef,contentsId),_useScrollBounds2=_slicedToArray(_useScrollBounds,2),scrollTop=_useScrollBounds2[0],scrollBottom=_useScrollBounds2[1];return scrollLock&&function useScrollLock(ref,opts){react_1.useEffect((function(){var el=ref.current,options=Object.assign({doNotLockIfNoScroll:!1},opts);if(el){function onWheel(ev){var el=ref.current;if(el){var delta=ev.deltaY,up=delta<0,scrollTop=el.scrollTop,scrollHeight=el.scrollHeight,offsetHeight=el.offsetHeight;if(options.doNotLockIfNoScroll&&scrollHeight<=offsetHeight)return;function prevent(){ev.stopPropagation(),ev.preventDefault()}if(!up&&delta>scrollHeight-offsetHeight-scrollTop)return el.scrollTop=scrollHeight,prevent();if(up&&-delta>scrollTop)return el.scrollTop=0,prevent()}}return el.addEventListener("mousewheel",onWheel,{passive:!1}),function(){el&&el.removeEventListener("mousewheel",onWheel)}}}),[])}(scrollContainerRef,{doNotLockIfNoScroll:!0}),react_1.default.createElement("div",{className:"VerticalScrollContainerShadows",style:{position:"relative",height:"100%"}},scrollingShadows&&react_1.default.createElement(ScrollingShadow,{direction:"down",size:10,opacity:getShadowOpacity(.15,80,scrollTop)}),react_1.default.createElement("div",Object.assign({className:classnames_1.default(className,"VerticalScrollContainer"),style:Object.assign({overflowY:"auto",position:"absolute",top:0,right:0,bottom:0,left:0},style),ref:scrollContainerRef},rest),children),scrollingShadows&&react_1.default.createElement(ScrollingShadow,{direction:"up",size:10,opacity:getShadowOpacity(.15,80,scrollBottom)}))}));var ScrollingShadow=function ScrollingShadow(props){var _style,background="linear-gradient(\n        to ".concat("up"===props.direction?"bottom":"top",",\n        hsla(0, 0%, 0%, 0) 0%,\n        hsla(0, 0%, 0%, 0.104) 25.8%,\n        hsla(0, 0%, 0%, 0.45) 60.9%,\n        hsla(0, 0%, 0%, 0.825) 88.7%,\n        hsl(0, 0%, 0%) 100%\n    )");return react_1.default.createElement("div",{style:(_style={position:"absolute",left:0,right:0},_defineProperty(_style,"up"===props.direction?"bottom":"top",0),_defineProperty(_style,"height","".concat(props.size,"px")),_defineProperty(_style,"background",background),_defineProperty(_style,"opacity",props.opacity),_defineProperty(_style,"pointerEvents","none"),_defineProperty(_style,"zIndex",10),_style)})}},1880:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.migrateExplorerUrl=exports.explorerUrlMigrationsById=exports.ExplorerUrlMigrationId=void 0;var UrlMigration_1=__webpack_require__(602),LegacyCovidUrlMigration_1=__webpack_require__(1881),CO2UrlMigration_1=__webpack_require__(1882),EnergyUrlMigration_1=__webpack_require__(1883),CovidUrlMigration_1=__webpack_require__(1884);!function(ExplorerUrlMigrationId){ExplorerUrlMigrationId.legacyToGridCovidExplorer="legacyToGridCovidExplorer"}(exports.ExplorerUrlMigrationId||(exports.ExplorerUrlMigrationId={})),exports.explorerUrlMigrationsById={legacyToGridCovidExplorer:LegacyCovidUrlMigration_1.legacyCovidMigrationSpec};var explorerUrlMigrations=[CO2UrlMigration_1.co2UrlMigration,EnergyUrlMigration_1.energyUrlMigration,CovidUrlMigration_1.covidUrlMigration];exports.migrateExplorerUrl=function migrateExplorerUrl(url){return UrlMigration_1.performUrlMigrations(explorerUrlMigrations,url)}},1881:function(module,exports,__webpack_require__){"use strict";function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=arr&&("undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"]);if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}__webpack_require__(31),__webpack_require__(28),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(22),__webpack_require__(17),__webpack_require__(29),Object.defineProperty(exports,"__esModule",{value:!0}),exports.legacyCovidMigrationSpec=void 0;var Util_1=__webpack_require__(40),GrapherUrlMigrations_1=__webpack_require__(476),Url_1=__webpack_require__(395),ExplorerConstants_1=__webpack_require__(319),covidMetricFromLegacyQueryParams=function covidMetricFromLegacyQueryParams(queryParams){return queryParams.casesMetric?"Confirmed cases":queryParams.deathsMetric?"Confirmed deaths":queryParams.cfrMetric?"Case fatality rate":queryParams.testsMetric?"Tests":queryParams.testsPerCaseMetric?"Tests per confirmed case":queryParams.positiveTestRate?"Share of positive tests":queryParams.vaccinationsMetric?"Vaccinations":void 0},legacyIntervalToNewValue={daily:"New per day",weekly:"Weekly",total:"Cumulative",smoothed:"7-day rolling average",biweekly:"Biweekly",weeklyChange:"Weekly change",biweeklyChange:"Biweekly change"},covidIntervalFromLegacyQueryParams=function covidIntervalFromLegacyQueryParams(queryParams){var legacyInterval=void 0;if(queryParams.interval?legacyInterval=queryParams.interval:queryParams.totalFreq?legacyInterval="total":queryParams.dailyFreq?legacyInterval="daily":queryParams.smoothing&&(legacyInterval="smoothed"),legacyInterval)return legacyIntervalToNewValue[legacyInterval]},boolParamToString=function boolParamToString(bool){return bool?"true":"false"};exports.legacyCovidMigrationSpec={explorerSlug:"coronavirus-data-explorer",migrateUrl:function migrateUrl(url,baseQueryStr){var _map2=_slicedToArray([url,Url_1.Url.fromQueryStr(baseQueryStr)].map(GrapherUrlMigrations_1.legacyToCurrentGrapherUrl),2),explorerUrl=_map2[0],baseUrl=_map2[1];return explorerUrl.setQueryParams(function legacyToCurrentCovidQueryParams(queryParams){var _a,_b,baseQueryParams=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},restQueryParams=Util_1.omit(Object.assign(Object.assign({},baseQueryParams),queryParams),"casesMetric","deathsMetric","cfrMetric","testsMetric","testsPerCaseMetric","positiveTestRate","vaccinationsMetric","interval","smoothing","totalFreq","dailyFreq","aligned","perCapita"),urlContainsMetric=!!covidMetricFromLegacyQueryParams(queryParams),explorerQueryParams={Metric:null!==(_a=covidMetricFromLegacyQueryParams(queryParams))&&void 0!==_a?_a:covidMetricFromLegacyQueryParams(baseQueryParams),Interval:null!==(_b=covidIntervalFromLegacyQueryParams(queryParams))&&void 0!==_b?_b:covidIntervalFromLegacyQueryParams(baseQueryParams),"Align outbreaks":boolParamToString(urlContainsMetric?queryParams.aligned:baseQueryParams.aligned),"Relative to Population":boolParamToString(urlContainsMetric?queryParams.perCapita:baseQueryParams.perCapita)};return Object.assign(Object.assign({},restQueryParams),explorerQueryParams)}(explorerUrl.queryParams,baseUrl.queryParams)).update({pathname:"/".concat(ExplorerConstants_1.EXPLORERS_ROUTE_FOLDER,"/coronavirus-data-explorer")})}}},1882:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.co2UrlMigration=void 0;var GrapherUrlMigrations_1=__webpack_require__(476),ExplorerUrlMigrationUtils_1=__webpack_require__(614),co2QueryParamTransformMap={"Gas ":{newName:"Gas",transformValue:ExplorerUrlMigrationUtils_1.decodeURIComponentOrUndefined},"Accounting ":{newName:"Accounting",transformValue:ExplorerUrlMigrationUtils_1.decodeURIComponentOrUndefined},"Fuel ":{newName:"Fuel",transformValue:ExplorerUrlMigrationUtils_1.decodeURIComponentOrUndefined},"Count ":{newName:"Count",transformValue:ExplorerUrlMigrationUtils_1.decodeURIComponentOrUndefined},"Relative to world total ":{newName:"Relative to world total",transformValue:function transformValue(value){return value?"true":"false"}}};exports.co2UrlMigration=function co2UrlMigration(url){if("co2"!==ExplorerUrlMigrationUtils_1.getExplorerSlugFromUrl(url))return url;url=GrapherUrlMigrations_1.legacyToCurrentGrapherUrl(url);var queryParams=ExplorerUrlMigrationUtils_1.transformQueryParams(url.queryParams,co2QueryParamTransformMap);return url.setQueryParams(queryParams)}},1883:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.energyUrlMigration=void 0;var GrapherUrlMigrations_1=__webpack_require__(476),ExplorerUrlMigrationUtils_1=__webpack_require__(614),energyQueryParamTransformMap={"Total or Breakdown ":{newName:"Total or Breakdown",transformValue:ExplorerUrlMigrationUtils_1.decodeURIComponentOrUndefined},"Select a source ":{newName:"Select a source",transformValue:ExplorerUrlMigrationUtils_1.decodeURIComponentOrUndefined},"Energy or Electricity ":{newName:"Energy or Electricity",transformValue:ExplorerUrlMigrationUtils_1.decodeURIComponentOrUndefined},"Metric ":{newName:"Metric",transformValue:ExplorerUrlMigrationUtils_1.decodeURIComponentOrUndefined}};exports.energyUrlMigration=function energyUrlMigration(url){if("energy"!==ExplorerUrlMigrationUtils_1.getExplorerSlugFromUrl(url))return url;url=GrapherUrlMigrations_1.legacyToCurrentGrapherUrl(url);var queryParams=ExplorerUrlMigrationUtils_1.transformQueryParams(url.queryParams,energyQueryParamTransformMap);return url.setQueryParams(queryParams)}},1884:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.covidUrlMigration=void 0;var ExplorerUrlMigrationUtils_1=__webpack_require__(614),transformMap={Metric:{transformValue:function transformValue(value){return"Vaccinations"===value?"Vaccine doses":"Tests per confirmed case"===value?"Tests per case":value}}};exports.covidUrlMigration=function covidUrlMigration(url){return"coronavirus-data-explorer"!==ExplorerUrlMigrationUtils_1.getExplorerSlugFromUrl(url)?url:url.setQueryParams(ExplorerUrlMigrationUtils_1.transformQueryParams(url.queryParams,transformMap))}},1885:function(module,exports,__webpack_require__){"use strict";function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}__webpack_require__(106),__webpack_require__(5);var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PromiseSwitcher=void 0;var PromiseSwitcher=function(){function PromiseSwitcher(arg){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PromiseSwitcher),this.onResolve=arg.onResolve,this.onReject=arg.onReject}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(PromiseSwitcher,[{key:"set",value:function set(promise){var _a,_b;return __awaiter(this,void 0,void 0,regeneratorRuntime.mark((function _callee(){var result;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return this.pendingPromise=promise,_context.prev=1,_context.next=4,promise;case 4:result=_context.sent,this.pendingPromise===promise&&(null===(_a=this.onResolve)||void 0===_a||_a.call(this,result)),_context.next=11;break;case 8:_context.prev=8,_context.t0=_context.catch(1),this.pendingPromise===promise&&(null===(_b=this.onReject)||void 0===_b||_b.call(this,_context.t0));case 11:case"end":return _context.stop()}}),_callee,this,[[1,8]])})))}},{key:"clear",value:function clear(){this.pendingPromise=void 0}}]),PromiseSwitcher}();exports.PromiseSwitcher=PromiseSwitcher},1886:function(module,exports,__webpack_require__){"use strict";__webpack_require__(31);var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SampleInlineDataExplorer=exports.SampleExplorerOfGraphers=void 0;var react_1=__importDefault(__webpack_require__(0)),owidTypes_1=__webpack_require__(122),GrapherConstants_1=__webpack_require__(64),Explorer_1=__webpack_require__(819);exports.SampleExplorerOfGraphers=function SampleExplorerOfGraphers(props){var first={id:488,title:"AlphaBeta",dimensions:[{variableId:142609,property:owidTypes_1.DimensionProperty.y}],tab:GrapherConstants_1.GrapherTabOption.chart,owidDataset:{variables:{142609:{years:[-1,0,1,2],entities:[1,2,1,2],values:[51,52,53,54],id:142609,display:{zeroDay:"2020-01-21",yearIsDay:!0}}},entityKey:{1:{name:"United Kingdom",code:"GBR",id:1},2:{name:"Ireland",code:"IRL",id:2}}}},grapherConfigs=[first,Object.assign(Object.assign({},first),{id:4147,title:"Switched to Something Else"})];return react_1.default.createElement(Explorer_1.Explorer,Object.assign({slug:"test-slug",program:'explorerTitle\tCOâ‚‚ Data Explorer\nisPublished\tfalse\nexplorerSubtitle\tDownload the complete <i>Our World in Data</i> <a href="https://github.com/owid/co2-data">COâ‚‚ and GHG Emissions Dataset</a>.\nsubNavId\tco2\ntime\tearliest..latest\nselection\tChina\tUnited States\tIndia\tUnited Kingdom\tWorld\nGas Radio\tCOâ‚‚\nAccounting Radio\tProduction-based\nsubNavCurrentId\tco2-data-explorer\ngraphers\n\tgrapherId\tGas Radio\tAccounting Radio\tFuel Dropdown\tCount Dropdown\tRelative to world total Checkbox\n\t488\tCOâ‚‚\tProduction-based\tTotal\tPer country\tfalse\n\t3219\tCOâ‚‚\tProduction-based\tTotal\tPer country\tShare of global emissions\n\t486\tCOâ‚‚\tProduction-based\tTotal\tPer capita\n\t485\tCOâ‚‚\tProduction-based\tTotal\tCumulative\tfalse\n\t3218\tCOâ‚‚\tProduction-based\tTotal\tCumulative\tShare of global emissions\n\t4267\tCOâ‚‚\tProduction-based\tTotal\tPer MWh of energy\n\t530\tCOâ‚‚\tProduction-based\tTotal\tPer $ of GDP\n\t3621\tCOâ‚‚\tConsumption-based\t\tPer country\n\t3488\tCOâ‚‚\tConsumption-based\t\tPer capita\n\t4331\tCOâ‚‚\tConsumption-based\t\tPer $ of GDP\n\t696\tCOâ‚‚\tConsumption-based\t\tShare of emissions embedded in trade\n\t4250\tCOâ‚‚\tProduction-based\tCoal\tPer country\n\t4251\tCOâ‚‚\tProduction-based\tOil\tPer country\n\t4253\tCOâ‚‚\tProduction-based\tGas\tPer country\n\t4255\tCOâ‚‚\tProduction-based\tCement\tPer country\n\t4332\tCOâ‚‚\tProduction-based\tFlaring\tPer country\n\t4249\tCOâ‚‚\tProduction-based\tCoal\tPer capita\n\t4252\tCOâ‚‚\tProduction-based\tOil\tPer capita\n\t4254\tCOâ‚‚\tProduction-based\tGas\tPer capita\n\t4256\tCOâ‚‚\tProduction-based\tCement\tPer capita\n\t4333\tCOâ‚‚\tProduction-based\tFlaring\tPer capita\n\t4147\tAll GHGs (COâ‚‚eq)\tProduction-based\t\tPer country\n\t4239\tAll GHGs (COâ‚‚eq)\tProduction-based\t\tPer capita\n\t4222\tMethane\tProduction-based\t\tPer country\n\t4243\tMethane\tProduction-based\t\tPer capita\n\t4224\tNitrous oxide\tProduction-based\t\tPer country\n\t4244\tNitrous oxide\tProduction-based\t\tPer capita',grapherConfigs:grapherConfigs},props))};exports.SampleInlineDataExplorer=function SampleInlineDataExplorer(props){return react_1.default.createElement(Explorer_1.Explorer,Object.assign({slug:"test-slug-inline-data",program:"explorerTitle\tSample Explorer\nselection\tArgentina\ngraphers\n\tTest Radio\txSlug\tySlugs\tcolorSlug\tsizeSlug\ttype\n\tScatter\tx\ty\tcolor\tsize\tScatterPlot\n\tLine\t\ty\t\t\tLineChart\n\ncolumns\n\tslug\ttype\tname\n\tCountry\tEntityName\tCountry\n\tQuarter\tQuarter\tQuarter\n\tx\tNumeric\tx\n\ty\tNumeric\ty\n\tcolor\tNumeric\tcolor\n\tsize\tNumeric\tsize\n\ntable\n\tCountry\tYear\tx\ty\tcolor\tsize\n\tArgentina\t2020\t1\t1\t1\t1\n\tArgentina\t2021\t1\t1\t1\t1"},props))}},1887:function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ColumnsAsSeries=exports.EntitiesAsSeriesWithTolerance=exports.EntitiesAsSeries=void 0;var React=__importStar(__webpack_require__(0)),DiscreteBarChart_1=__webpack_require__(1028),OwidTableSynthesizers_1=__webpack_require__(140);exports.default={title:"DiscreteBarChart",component:DiscreteBarChart_1.DiscreteBarChart};exports.EntitiesAsSeries=function EntitiesAsSeries(){var table=OwidTableSynthesizers_1.SynthesizeGDPTable({timeRange:[2009,2010],entityCount:10}),manager={table:table,selection:table.availableEntityNames,yColumnSlug:OwidTableSynthesizers_1.SampleColumnSlugs.Population};return React.createElement("svg",{width:600,height:600},React.createElement(DiscreteBarChart_1.DiscreteBarChart,{manager:manager}))};exports.EntitiesAsSeriesWithTolerance=function EntitiesAsSeriesWithTolerance(){var table=OwidTableSynthesizers_1.SynthesizeGDPTable({timeRange:[2009,2011],entityCount:10}).rowFilter((function(row){return 2010===row.year||Math.random()>.5}),"Remove 50% of 2009 rows").interpolateColumnWithTolerance(OwidTableSynthesizers_1.SampleColumnSlugs.Population,1).filterByTargetTimes([2009]),manager={table:table,transformedTable:table,selection:table.availableEntityNames,yColumnSlug:OwidTableSynthesizers_1.SampleColumnSlugs.Population,endTime:2009};return React.createElement("svg",{width:600,height:600},React.createElement(DiscreteBarChart_1.DiscreteBarChart,{manager:manager}))};exports.ColumnsAsSeries=function ColumnsAsSeries(){var table=OwidTableSynthesizers_1.SynthesizeFruitTable({entityCount:1}),manager={table:table,selection:table.availableEntityNames};return React.createElement("svg",{width:600,height:600},React.createElement(DiscreteBarChart_1.DiscreteBarChart,{manager:manager}))}},1888:function(module,exports,__webpack_require__){"use strict";__webpack_require__(31),__webpack_require__(28);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Scatter=exports.StackedArea=exports.MapChart=exports.StaticLineChartForExport=exports.LineChart=void 0;var OwidTableSynthesizers_1=__webpack_require__(140),GrapherConstants_1=__webpack_require__(64),Bounds_1=__webpack_require__(73),React=__importStar(__webpack_require__(0)),CaptionedChart_1=__webpack_require__(1016);exports.default={title:"CaptionedChart",component:CaptionedChart_1.CaptionedChart};var table=OwidTableSynthesizers_1.SynthesizeGDPTable({entityCount:5}),manager={tabBounds:Bounds_1.DEFAULT_BOUNDS,table:table,selection:table.availableEntityNames,currentTitle:"This is the Title",subtitle:"A Subtitle",note:"Here are some footer notes",populateFromQueryParams:function populateFromQueryParams(){},isReady:!0,availableFacetStrategies:[GrapherConstants_1.FacetStrategy.none]};exports.LineChart=function LineChart(){return React.createElement(CaptionedChart_1.CaptionedChart,{manager:manager})};exports.StaticLineChartForExport=function StaticLineChartForExport(){return React.createElement(CaptionedChart_1.StaticCaptionedChart,{manager:Object.assign(Object.assign({},manager),{isExportingtoSvgOrPng:!0})})};exports.MapChart=function MapChart(){return React.createElement(CaptionedChart_1.CaptionedChart,{manager:Object.assign(Object.assign({},manager),{tab:GrapherConstants_1.GrapherTabOption.map})})};exports.StackedArea=function StackedArea(){return React.createElement(CaptionedChart_1.CaptionedChart,{manager:Object.assign(Object.assign({},manager),{type:GrapherConstants_1.ChartTypeName.StackedArea,seriesStrategy:GrapherConstants_1.SeriesStrategy.entity})})};exports.Scatter=function Scatter(){return React.createElement(CaptionedChart_1.CaptionedChart,{manager:Object.assign(Object.assign({},manager),{type:GrapherConstants_1.ChartTypeName.ScatterPlot,table:table.filterByTargetTimes([1999],0)})})}},1889:function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MoreButtonComponent=exports.CollapsibleListComponent=void 0;var React=__importStar(__webpack_require__(0)),CollapsibleList_1=__webpack_require__(1032),CollapsibleList_sampleInput_1=__webpack_require__(1890);exports.default={title:"CollapsibleList",component:CollapsibleList_1.CollapsibleList};exports.CollapsibleListComponent=function CollapsibleListComponent(){return React.createElement(CollapsibleList_1.CollapsibleList,null,CollapsibleList_sampleInput_1.collapsibleListSampleItems)};exports.MoreButtonComponent=function MoreButtonComponent(){var options=[React.createElement("div",{key:"option1"},"option1"),React.createElement("div",{key:"option2"},"option2"),React.createElement("div",{key:"option3"},"option3")];return React.createElement(CollapsibleList_1.MoreButton,{options:options})}},1890:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(28),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(18),__webpack_require__(21);var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.collapsibleListSampleItems=void 0;var react_1=__importDefault(__webpack_require__(0)),mobx_react_1=__webpack_require__(58),mobx_1=__webpack_require__(41),Util_1=__webpack_require__(40),SampleCheckBox=function(_react_1$default$Comp){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(SampleCheckBox,_react_1$default$Comp);var _super=_createSuper(SampleCheckBox);function SampleCheckBox(){var _this;return _classCallCheck(this,SampleCheckBox),(_this=_super.apply(this,arguments)).checked=!1,_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(SampleCheckBox,[{key:"onToggle",value:function onToggle(){this.checked=!this.checked}},{key:"render",value:function render(){return react_1.default.createElement("label",{className:"clickable"},react_1.default.createElement("input",{type:"checkbox",checked:this.checked,onChange:this.onToggle})," checkbox ".concat(this.props.id))}}]),SampleCheckBox}(react_1.default.Component);__decorate([mobx_1.observable],SampleCheckBox.prototype,"checked",void 0),__decorate([mobx_1.action.bound],SampleCheckBox.prototype,"onToggle",null),SampleCheckBox=__decorate([mobx_react_1.observer],SampleCheckBox),exports.collapsibleListSampleItems=Util_1.range(0,12).map((function(i){return react_1.default.createElement(SampleCheckBox,{key:i,id:i})}))},1891:function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.WithCommands=void 0;var React=__importStar(__webpack_require__(0)),CommandPalette_1=__webpack_require__(1015);exports.default={title:"CommandPalette",component:CommandPalette_1.CommandPalette};exports.WithCommands=function WithCommands(){return React.createElement(CommandPalette_1.CommandPalette,{commands:[{combo:"ctrl+o",fn:function fn(){},title:"Open",category:"File"},{combo:"ctrl+s",fn:function fn(){},title:"Save",category:"File"},{combo:"ctrl+c",fn:function fn(){},title:"Copy",category:"Edit"}],display:"block"})}},1892:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Default=void 0;var React=__importStar(__webpack_require__(0)),ScaleSelector_1=__webpack_require__(1033),GrapherConstants_1=__webpack_require__(64),mobx_1=__webpack_require__(41);exports.default={title:"ScaleSelector",component:ScaleSelector_1.ScaleSelector};var MockScaleSelectorManager=function MockScaleSelectorManager(){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MockScaleSelectorManager),this.scaleType=GrapherConstants_1.ScaleType.log};__decorate([mobx_1.observable],MockScaleSelectorManager.prototype,"scaleType",void 0);exports.Default=function Default(){return React.createElement(ScaleSelector_1.ScaleSelector,{manager:new MockScaleSelectorManager})}},1893:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(18),__webpack_require__(21);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.WithExistingSelectionChoices=exports.WithPickerMetricsChoices=exports.WithChoices=exports.Empty=void 0;var React=__importStar(__webpack_require__(0)),EntityPicker_1=__webpack_require__(1039),mobx_react_1=__webpack_require__(58),OwidTableSynthesizers_1=__webpack_require__(140),OwidTableConstants_1=__webpack_require__(172),mobx_1=__webpack_require__(41),SelectionArray_1=__webpack_require__(394),PickerHolder=function(_React$Component){_inherits(PickerHolder,_React$Component);var _super=_createSuper(PickerHolder);function PickerHolder(){return _classCallCheck(this,PickerHolder),_super.apply(this,arguments)}return _createClass(PickerHolder,[{key:"render",value:function render(){return React.createElement("div",{style:{padding:"20px",height:"500px",width:"300px",display:"grid"}},this.props.children)}}]),PickerHolder}(React.Component),defaultSlugs=[OwidTableConstants_1.OwidTableSlugs.entityName,OwidTableSynthesizers_1.SampleColumnSlugs.GDP,OwidTableSynthesizers_1.SampleColumnSlugs.Population],SomeThingWithAPicker=function(_React$Component2){_inherits(SomeThingWithAPicker,_React$Component2);var _super2=_createSuper(SomeThingWithAPicker);function SomeThingWithAPicker(){var _this,_a;return _classCallCheck(this,SomeThingWithAPicker),(_this=_super2.apply(this,arguments)).entityPickerTable=OwidTableSynthesizers_1.SynthesizeGDPTable({entityCount:30},1),_this.selection=new SelectionArray_1.SelectionArray(null!==(_a=_this.props.selection)&&void 0!==_a?_a:[],_this.entityPickerTable.availableEntities),_this.requiredColumnSlugs=defaultSlugs,_this}return _createClass(SomeThingWithAPicker,[{key:"pickerColumnSlugs",get:function get(){return this.props.pickerSlugs}},{key:"render",value:function render(){return React.createElement(PickerHolder,null,React.createElement(EntityPicker_1.EntityPicker,{manager:this}))}}]),SomeThingWithAPicker}(React.Component);__decorate([mobx_1.observable],SomeThingWithAPicker.prototype,"entityPickerMetric",void 0),__decorate([mobx_1.observable],SomeThingWithAPicker.prototype,"entityPickerSort",void 0),__decorate([mobx_1.computed],SomeThingWithAPicker.prototype,"pickerColumnSlugs",null),SomeThingWithAPicker=__decorate([mobx_react_1.observer],SomeThingWithAPicker),exports.default={title:"EntityPicker",component:EntityPicker_1.EntityPicker};exports.Empty=function Empty(){return React.createElement(PickerHolder,null,React.createElement(EntityPicker_1.EntityPicker,{manager:{selection:new SelectionArray_1.SelectionArray}}))};exports.WithChoices=function WithChoices(){return React.createElement(SomeThingWithAPicker,null)};exports.WithPickerMetricsChoices=function WithPickerMetricsChoices(){return React.createElement(SomeThingWithAPicker,{pickerSlugs:defaultSlugs})};exports.WithExistingSelectionChoices=function WithExistingSelectionChoices(){return React.createElement(SomeThingWithAPicker,{pickerSlugs:defaultSlugs,selection:["Japan","Samoa"]})}},1894:function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.WithNoGraphers=void 0;var React=__importStar(__webpack_require__(0)),SelectionArray_1=__webpack_require__(394),GlobalEntitySelector_1=__webpack_require__(1895);exports.default={title:"GlobalEntitySelector",component:GlobalEntitySelector_1.GlobalEntitySelector};exports.WithNoGraphers=function WithNoGraphers(){return React.createElement(GlobalEntitySelector_1.GlobalEntitySelector,{selection:new SelectionArray_1.SelectionArray})}},1895:function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(106),__webpack_require__(5),__webpack_require__(25),__webpack_require__(17),__webpack_require__(31),__webpack_require__(28),__webpack_require__(36),__webpack_require__(79),__webpack_require__(57),__webpack_require__(29),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(9),__webpack_require__(10),__webpack_require__(11),__webpack_require__(18),__webpack_require__(21),__webpack_require__(22);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.hydrateGlobalEntitySelectorIfAny=exports.GlobalEntitySelector=void 0;var GlobalEntitySelectionModes,React=__importStar(__webpack_require__(0)),ReactDOM=__importStar(__webpack_require__(90)),mobx_1=__webpack_require__(41),mobx_react_1=__webpack_require__(58),react_select_1=__importStar(__webpack_require__(477)),classnames_1=__importDefault(__webpack_require__(139)),react_fontawesome_1=__webpack_require__(123),faTimes_1=__webpack_require__(473),countries_1=__webpack_require__(1040),Util_1=__webpack_require__(40),GrapherAnalytics_1=__webpack_require__(1035),GrapherConstants_1=__webpack_require__(64),GlobalEntitySelectorConstants_1=__webpack_require__(1896),EntityUrlBuilder_1=__webpack_require__(471),Url_1=__webpack_require__(395);!function(GlobalEntitySelectionModes){GlobalEntitySelectionModes.none="none",GlobalEntitySelectionModes.override="override"}(GlobalEntitySelectionModes||(GlobalEntitySelectionModes={}));var allEntities=Util_1.sortBy(countries_1.countries,(function(c){return c.name})).concat([{name:GrapherConstants_1.WorldEntityName,code:"OWID_WRL",slug:"world"}]),SelectOptions={components:{IndicatorSeparator:null,Option:function Option(props){return React.createElement("div",null,React.createElement(react_select_1.components.Option,Object.assign({},props),React.createElement("input",{type:"checkbox",checked:props.isSelected,readOnly:!0})," ",React.createElement("label",null,props.label)))}},menuPlacement:"bottom",isClearable:!1,isMulti:!0,backspaceRemovesValue:!1,blurInputOnSelect:!1,closeMenuOnSelect:!1,controlShouldRenderValue:!1,hideSelectedOptions:!1,placeholder:"Add a country to all charts...",styles:{placeholder:function placeholder(base){return Object.assign(Object.assign({},base),{whiteSpace:"nowrap"})},valueContainer:function valueContainer(base){return Object.assign(Object.assign({},base),{paddingTop:0,paddingBottom:0})},control:function control(base){return Object.assign(Object.assign({},base),{minHeight:"initial"})},dropdownIndicator:function dropdownIndicator(base){return Object.assign(Object.assign({},base),{padding:"0 5px"})}}};function SelectedItems(props){var _a,canRemove=(null===(_a=props.canRemove)||void 0===_a||_a)&&void 0!==props.onRemove,onRemove=props.onRemove||Util_1.noop,isEmpty=0===props.selectedEntityNames.length;return React.createElement("div",{className:"selected-items-container"},isEmpty?React.createElement("div",{className:"empty"},props.emptyLabel):React.createElement("div",{className:"selected-items"},props.selectedEntityNames.map((function(entityName){return React.createElement("div",{key:entityName,className:classnames_1.default("selected-item",{removable:canRemove})},React.createElement("div",{className:"label"},entityName),canRemove&&React.createElement("div",{className:"remove-icon",onClick:function onClick(){return onRemove(entityName)}},React.createElement(react_fontawesome_1.FontAwesomeIcon,{icon:faTimes_1.faTimes})))}))))}var GlobalEntitySelector=function(_React$Component){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(GlobalEntitySelector,_React$Component);var _super=_createSuper(GlobalEntitySelector);function GlobalEntitySelector(){var _this,_a;return _classCallCheck(this,GlobalEntitySelector),(_this=_super.apply(this,arguments)).refContainer=React.createRef(),_this.disposers=[],_this.mode=GlobalEntitySelectionModes.none,_this.isNarrow=!0,_this.isOpen=!1,_this.selection=_this.props.selection,_this.optionGroups=[],_this.onResizeThrottled=Util_1.throttle(_this.onResize,200),_this.analytics=new GrapherAnalytics_1.GrapherAnalytics(null!==(_a=_this.props.environment)&&void 0!==_a?_a:"development"),_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(GlobalEntitySelector,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this;this.onResize(),window.addEventListener("resize",this.onResizeThrottled),this.disposers.push(mobx_1.reaction((function(){return _this2.isOpen}),(function(){return _this2.prepareOptionGroups()}))),this.populateLocalEntity()}},{key:"componentWillUnmount",value:function componentWillUnmount(){window.removeEventListener("resize",this.onResizeThrottled),this.disposers.forEach((function(dispose){return dispose()}))}},{key:"onResize",value:function onResize(){var container=this.refContainer.current;container&&(this.isNarrow=container.offsetWidth<=640)}},{key:"populateLocalEntity",value:function populateLocalEntity(){return __awaiter(this,void 0,void 0,regeneratorRuntime.mark((function _callee(){var localCountryCode,country;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,Util_1.getCountryCodeFromNetlifyRedirect();case 3:if(localCountryCode=_context.sent){_context.next=6;break}return _context.abrupt("return");case 6:(country=allEntities.find((function(entity){return entity.code===localCountryCode})))&&(this.localEntityName=country.name),_context.next=12;break;case 10:_context.prev=10,_context.t0=_context.catch(0);case 12:case"end":return _context.stop()}}),_callee,this,[[0,10]])})))}},{key:"prepareOptionGroups",value:function prepareOptionGroups(){var optionGroups=[];return this.localEntityName&&!this.selection.selectedSet.has(this.localEntityName)&&(optionGroups=optionGroups.concat([{label:"Suggestions",options:[entityNameToOption(this.localEntityName)]}])),this.selection.hasSelection&&(optionGroups=optionGroups.concat([{label:"Selected",options:this.selection.selectedEntityNames.map(entityNameToOption)}])),optionGroups=optionGroups.concat([{label:"All countries",options:allEntities.map((function(entity){return entity.name})).map(entityNameToOption)}]),this.optionGroups=optionGroups,optionGroups}},{key:"updateURL",value:function updateURL(){Url_1.setWindowUrl(EntityUrlBuilder_1.setSelectedEntityNamesParam(Url_1.getWindowUrl(),this.selection.selectedEntityNames))}},{key:"updateSelection",value:function updateSelection(newSelectedEntities){this.selection.setSelectedEntities(newSelectedEntities),this.updateAllGraphersAndExplorersOnPage(),this.updateURL()}},{key:"onChange",value:function onChange(options){this.updateSelection(options.map((function(option){return option.label}))),this.analytics.logGlobalEntitySelector("change",this.selection.selectedEntityNames.join(","))}},{key:"updateAllGraphersAndExplorersOnPage",value:function updateAllGraphersAndExplorersOnPage(){var _this3=this;this.props.graphersAndExplorersToUpdate&&Array.from(this.props.graphersAndExplorersToUpdate.values()).forEach((function(value){value.setSelectedEntities(_this3.selection.selectedEntityNames)}))}},{key:"onRemove",value:function onRemove(option){this.selection.toggleSelection(option),this.updateAllGraphersAndExplorersOnPage(),this.updateURL()}},{key:"onMenuOpen",value:function onMenuOpen(){this.isOpen=!0}},{key:"onMenuClose",value:function onMenuClose(){this.isOpen=!1}},{key:"onButtonOpen",value:function onButtonOpen(event){this.analytics.logGlobalEntitySelector("open",event.currentTarget.innerText),this.onMenuOpen()}},{key:"onButtonClose",value:function onButtonClose(event){this.analytics.logGlobalEntitySelector("close",event.currentTarget.innerText),this.onMenuClose()}},{key:"selectedOptions",get:function get(){return this.selection.selectedEntityNames.map(entityNameToOption)}},{key:"renderNarrow",value:function renderNarrow(){return React.createElement(React.Fragment,null,React.createElement("div",{className:classnames_1.default("narrow-summary",{"narrow-summary-selected-items":!this.isOpen})},this.isOpen?React.createElement(react_select_1.default,Object.assign({},SelectOptions,{options:this.optionGroups,value:this.selectedOptions,onChange:this.onChange,menuIsOpen:this.isOpen,autoFocus:!0})):React.createElement(React.Fragment,null,this.selection.hasSelection?this.selection.selectedEntityNames.map((function(entityName){return React.createElement("span",{className:"narrow-summary-selected-item",key:entityName},entityName)})).reduce((function(acc,item){return 0===acc.length?[item]:[].concat(_toConsumableArray(acc),[", ",item])}),[]):"None selected")),React.createElement("div",{className:"narrow-actions"},this.isOpen?React.createElement("button",{className:"button",onClick:this.onButtonClose},"Done"):React.createElement("button",{className:"button",onClick:this.onButtonOpen},this.selection.hasSelection?"Edit":"Select countries")))}},{key:"renderWide",value:function renderWide(){return React.createElement(React.Fragment,null,React.createElement("div",{className:"select-dropdown-container"},React.createElement(react_select_1.default,Object.assign({},SelectOptions,{options:this.optionGroups,onChange:this.onChange,value:this.selectedOptions,onMenuOpen:this.onMenuOpen,onMenuClose:this.onMenuClose}))),React.createElement(SelectedItems,{selectedEntityNames:this.selection.selectedEntityNames,onRemove:this.onRemove,emptyLabel:"Select countries to show on all charts"}))}},{key:"render",value:function render(){return React.createElement("div",{className:classnames_1.default("global-entity-control",{"is-narrow":this.isNarrow,"is-wide":!this.isNarrow}),ref:this.refContainer,onClick:this.isNarrow&&!this.isOpen?this.onMenuOpen:void 0},this.isNarrow?this.renderNarrow():this.renderWide())}}]),GlobalEntitySelector}(React.Component);__decorate([mobx_1.observable],GlobalEntitySelector.prototype,"mode",void 0),__decorate([mobx_1.observable],GlobalEntitySelector.prototype,"isNarrow",void 0),__decorate([mobx_1.observable],GlobalEntitySelector.prototype,"isOpen",void 0),__decorate([mobx_1.observable],GlobalEntitySelector.prototype,"localEntityName",void 0),__decorate([mobx_1.observable.ref],GlobalEntitySelector.prototype,"optionGroups",void 0),__decorate([mobx_1.action.bound],GlobalEntitySelector.prototype,"onResize",null),__decorate([mobx_1.action.bound],GlobalEntitySelector.prototype,"populateLocalEntity",null),__decorate([mobx_1.action.bound],GlobalEntitySelector.prototype,"prepareOptionGroups",null),__decorate([mobx_1.action.bound],GlobalEntitySelector.prototype,"updateURL",null),__decorate([mobx_1.action.bound],GlobalEntitySelector.prototype,"updateSelection",null),__decorate([mobx_1.action.bound],GlobalEntitySelector.prototype,"onChange",null),__decorate([mobx_1.action.bound],GlobalEntitySelector.prototype,"updateAllGraphersAndExplorersOnPage",null),__decorate([mobx_1.action.bound],GlobalEntitySelector.prototype,"onRemove",null),__decorate([mobx_1.action.bound],GlobalEntitySelector.prototype,"onMenuOpen",null),__decorate([mobx_1.action.bound],GlobalEntitySelector.prototype,"onMenuClose",null),__decorate([mobx_1.action.bound],GlobalEntitySelector.prototype,"onButtonOpen",null),__decorate([mobx_1.action.bound],GlobalEntitySelector.prototype,"onButtonClose",null),__decorate([mobx_1.computed],GlobalEntitySelector.prototype,"selectedOptions",null),GlobalEntitySelector=__decorate([mobx_react_1.observer],GlobalEntitySelector),exports.GlobalEntitySelector=GlobalEntitySelector;exports.hydrateGlobalEntitySelectorIfAny=function hydrateGlobalEntitySelectorIfAny(selection,graphersAndExplorersToUpdate){var element=document.querySelector(GlobalEntitySelectorConstants_1.GLOBAL_ENTITY_SELECTOR_ELEMENT);element&&ReactDOM.hydrate(React.createElement(GlobalEntitySelector,{selection:selection,graphersAndExplorersToUpdate:graphersAndExplorersToUpdate}),element)};var entityNameToOption=function entityNameToOption(label){return{label:label,value:label}}},1896:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GLOBAL_ENTITY_SELECTOR_DEFAULT_COUNTRY=exports.GLOBAL_ENTITY_SELECTOR_ELEMENT=exports.GLOBAL_ENTITY_SELECTOR_DATA_ATTR=void 0,exports.GLOBAL_ENTITY_SELECTOR_DATA_ATTR="data-global-entity-control",exports.GLOBAL_ENTITY_SELECTOR_ELEMENT="*[".concat(exports.GLOBAL_ENTITY_SELECTOR_DATA_ATTR,"]"),exports.GLOBAL_ENTITY_SELECTOR_DEFAULT_COUNTRY="data-default-country"},1897:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(31),__webpack_require__(28),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(18),__webpack_require__(21);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Perf=exports.WithAuthorTimeFilter=exports.Faceting=exports.NoMap=exports.BlankGrapher=exports.MapFirst=exports.StackedArea=exports.StackedBar=exports.DiscreteBar=exports.ScatterPlot=exports.SlopeChart=exports.Line=void 0;var React=__importStar(__webpack_require__(0)),Grapher_1=__webpack_require__(470),OwidTableSynthesizers_1=__webpack_require__(140),GrapherConstants_1=__webpack_require__(64),OwidTable_1=__webpack_require__(201),mobx_1=__webpack_require__(41),mobx_react_1=__webpack_require__(58),ChartTypeSwitcher_1=__webpack_require__(1041),owidTypes_1=__webpack_require__(122);exports.default={title:"Grapher",component:Grapher_1.Grapher};var table=OwidTableSynthesizers_1.SynthesizeGDPTable({entityCount:10}),basics={table:table,selectedEntityNames:table.sampleEntityName(5),hasMapTab:!0,yAxis:{canChangeScaleType:!0},xAxis:{canChangeScaleType:!0},dimensions:[{slug:OwidTableSynthesizers_1.SampleColumnSlugs.GDP,property:owidTypes_1.DimensionProperty.y,variableId:OwidTableSynthesizers_1.SampleColumnSlugs.GDP},{slug:OwidTableSynthesizers_1.SampleColumnSlugs.Population,property:owidTypes_1.DimensionProperty.x,variableId:OwidTableSynthesizers_1.SampleColumnSlugs.Population}]};exports.Line=function Line(){return React.createElement(Grapher_1.Grapher,Object.assign({},basics))};exports.SlopeChart=function SlopeChart(){var model=Object.assign({type:GrapherConstants_1.ChartTypeName.SlopeChart},basics);return React.createElement(Grapher_1.Grapher,Object.assign({},model))};exports.ScatterPlot=function ScatterPlot(){var model=Object.assign({type:GrapherConstants_1.ChartTypeName.ScatterPlot},basics);return React.createElement(Grapher_1.Grapher,Object.assign({},model))};exports.DiscreteBar=function DiscreteBar(){var model=Object.assign({type:GrapherConstants_1.ChartTypeName.DiscreteBar},basics);return React.createElement(Grapher_1.Grapher,Object.assign({},model))};exports.StackedBar=function StackedBar(){var model=Object.assign({type:GrapherConstants_1.ChartTypeName.StackedBar},basics);return React.createElement(Grapher_1.Grapher,Object.assign({},model))};exports.StackedArea=function StackedArea(){var model=Object.assign({type:GrapherConstants_1.ChartTypeName.StackedArea},basics);return React.createElement(Grapher_1.Grapher,Object.assign({},model))};exports.MapFirst=function MapFirst(){var model=Object.assign(Object.assign({},basics),{tab:GrapherConstants_1.GrapherTabOption.map});return React.createElement(Grapher_1.Grapher,Object.assign({},model))};exports.BlankGrapher=function BlankGrapher(){var model={type:GrapherConstants_1.ChartTypeName.WorldMap,tab:GrapherConstants_1.GrapherTabOption.map,table:OwidTable_1.BlankOwidTable(),hasMapTab:!0};return React.createElement(Grapher_1.Grapher,Object.assign({},model))};exports.NoMap=function NoMap(){var model=Object.assign(Object.assign({},basics),{hasMapTab:!1});return React.createElement(Grapher_1.Grapher,Object.assign({},model))};exports.Faceting=function Faceting(){var model=Object.assign({type:GrapherConstants_1.ChartTypeName.StackedArea,facet:GrapherConstants_1.FacetStrategy.entity},basics);return React.createElement(Grapher_1.Grapher,Object.assign({},model))};exports.WithAuthorTimeFilter=function WithAuthorTimeFilter(){var model=Object.assign(Object.assign({},basics),{timelineMinTime:1993,timelineMaxTime:1996});return React.createElement(Grapher_1.Grapher,Object.assign({},model))};var PerfGrapher=function(_React$Component){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(PerfGrapher,_React$Component);var _super=_createSuper(PerfGrapher);function PerfGrapher(){var _this;return _classCallCheck(this,PerfGrapher),(_this=_super.apply(this,arguments)).table=basics.table,_this.chartTypeName=GrapherConstants_1.ChartTypeName.LineChart,_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(PerfGrapher,[{key:"loadBigTable",value:function loadBigTable(){this.table=OwidTableSynthesizers_1.SynthesizeGDPTable({entityCount:200,timeRange:[1500,2e3]})}},{key:"changeChartType",value:function changeChartType(type){this.chartTypeName=type}},{key:"render",value:function render(){var key=Math.random();return React.createElement("div",null,React.createElement("div",null,React.createElement("button",{onClick:this.loadBigTable},"Big Table for Perf"),React.createElement(ChartTypeSwitcher_1.ChartTypeSwitcher,{onChange:this.changeChartType})),React.createElement(Grapher_1.Grapher,Object.assign({},basics,{table:this.table,type:this.chartTypeName,key:key})))}}]),PerfGrapher}(React.Component);__decorate([mobx_1.action.bound],PerfGrapher.prototype,"loadBigTable",null),__decorate([mobx_1.observable.ref],PerfGrapher.prototype,"table",void 0),__decorate([mobx_1.action.bound],PerfGrapher.prototype,"changeChartType",null),__decorate([mobx_1.observable],PerfGrapher.prototype,"chartTypeName",void 0),PerfGrapher=__decorate([mobx_react_1.observer],PerfGrapher);exports.Perf=function Perf(){return React.createElement(PerfGrapher,null)}},1898:function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.IncompleteDataTableComponent=exports.FromLegacyWithTimeRange=exports.FromLegacy=exports.WithTolerance=exports.WithTimeRange=exports.Default=void 0;var React=__importStar(__webpack_require__(0)),DataTable_1=__webpack_require__(1009),OwidTableSynthesizers_1=__webpack_require__(140),DataTable_sample_1=__webpack_require__(1899),GrapherConstants_1=__webpack_require__(64);exports.default={title:"DataTable",component:DataTable_1.DataTable};var table=OwidTableSynthesizers_1.SynthesizeGDPTable({timeRange:[1950,2010],entityCount:7});exports.Default=function Default(){var manager={table:table};return React.createElement(DataTable_1.DataTable,{manager:manager})};exports.WithTimeRange=function WithTimeRange(){var manager={table:table,startTime:1950,endTime:2e3};return React.createElement(DataTable_1.DataTable,{manager:manager})};exports.WithTolerance=function WithTolerance(){var table=OwidTableSynthesizers_1.SynthesizeGDPTable({timeRange:[2010,2020],entityCount:3},3,{tolerance:1}),filteredTable=table.dropRowsAt([0,10,11]);return React.createElement("div",null,React.createElement(DataTable_1.DataTable,{manager:{table:table,startTime:2010,endTime:2010}}),React.createElement("div",null,"One country with data, one with data within tolerance, one outside tolerance:"),React.createElement(DataTable_1.DataTable,{manager:{startTime:2010,endTime:2010,table:filteredTable}}))};exports.FromLegacy=function FromLegacy(){var grapher=DataTable_sample_1.childMortalityGrapher();return React.createElement(DataTable_1.DataTable,{manager:grapher})};exports.FromLegacyWithTimeRange=function FromLegacyWithTimeRange(){var grapher=DataTable_sample_1.childMortalityGrapher({type:GrapherConstants_1.ChartTypeName.LineChart,tab:GrapherConstants_1.GrapherTabOption.chart});return grapher.startHandleTimeBound=1950,grapher.endHandleTimeBound=2019,React.createElement(DataTable_1.DataTable,{manager:grapher})};exports.IncompleteDataTableComponent=function IncompleteDataTableComponent(){var grapher=DataTable_sample_1.IncompleteDataTable();return grapher.timelineHandleTimeBounds=[2e3,2e3],React.createElement(DataTable_1.DataTable,{manager:grapher})}},1899:function(module,exports,__webpack_require__){"use strict";__webpack_require__(31),__webpack_require__(28),Object.defineProperty(exports,"__esModule",{value:!0}),exports.IncompleteDataTable=exports.childMortalityGrapher=void 0;var owidTypes_1=__webpack_require__(122),Grapher_1=__webpack_require__(470),GrapherConstants_1=__webpack_require__(64);exports.childMortalityGrapher=function childMortalityGrapher(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Grapher_1.Grapher(Object.assign(Object.assign({hasMapTab:!0,tab:GrapherConstants_1.GrapherTabOption.map,dimensions:[{variableId:104402,property:owidTypes_1.DimensionProperty.y}]},props),{owidDataset:{variables:{104402:{years:[1950,1950,2005,2005,2019,2019],entities:[15,207,15,207,15,207],values:[224.45,333.68,295.59,246.12,215.59,226.12],id:104402,display:{name:"Child mortality",unit:"%",shortUnit:"%",conversionFactor:.1}}},entityKey:{15:{name:"Afghanistan",id:15,code:"AFG"},207:{name:"Iceland",id:207,code:"ICE"}}}}))};exports.IncompleteDataTable=function IncompleteDataTable(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Grapher_1.Grapher(Object.assign(Object.assign({tab:GrapherConstants_1.GrapherTabOption.table,dimensions:[{variableId:3512,property:owidTypes_1.DimensionProperty.y,display:{name:"",unit:"% of children under 5",tolerance:1,isProjection:!1}}]},props),{owidDataset:{variables:{3512:{years:[2e3,2001,2010,2010],entities:[207,33,15,207],values:[4,22,20,34],id:3512,shortUnit:"%"}},entityKey:{15:{name:"Afghanistan",id:15,code:"AFG"},207:{name:"Iceland",id:207,code:"ISL"},33:{name:"France",id:33,code:"FRA"}}}}))}},1900:function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Default=void 0;var React=__importStar(__webpack_require__(0)),DownloadTab_1=__webpack_require__(1001);exports.default={title:"DownloadTab",component:DownloadTab_1.DownloadTab};exports.Default=function Default(){return React.createElement(DownloadTab_1.DownloadTab,{manager:{displaySlug:"some-graph",staticSVG:'<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="850" height="600" viewBox="0 0 850 600">\n<rect x="10" y="10" width="30" height="30" fill="blue"/>\n</svg>'}})}},1901:function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.OneChartPerMetric=exports.MultipleMetricsOneCountryPerChart=exports.OneMetricOneCountryPerChart=void 0;var React=__importStar(__webpack_require__(0)),FacetChart_1=__webpack_require__(1031),OwidTableSynthesizers_1=__webpack_require__(140),Bounds_1=__webpack_require__(73),GrapherConstants_1=__webpack_require__(64),CSF={title:"FacetChart",component:FacetChart_1.FacetChart};exports.default=CSF;var bounds=new Bounds_1.Bounds(0,0,1e3,500);exports.OneMetricOneCountryPerChart=function OneMetricOneCountryPerChart(){var table=OwidTableSynthesizers_1.SynthesizeGDPTable({entityCount:4}),manager={table:table,selection:table.availableEntityNames,yColumnSlug:OwidTableSynthesizers_1.SampleColumnSlugs.GDP,xColumnSlug:OwidTableSynthesizers_1.SampleColumnSlugs.Population};return React.createElement("svg",{width:bounds.width,height:bounds.height},React.createElement(FacetChart_1.FacetChart,{bounds:bounds,chartTypeName:GrapherConstants_1.ChartTypeName.LineChart,manager:manager}))};exports.MultipleMetricsOneCountryPerChart=function MultipleMetricsOneCountryPerChart(){var table=OwidTableSynthesizers_1.SynthesizeFruitTable({entityCount:4});return React.createElement("svg",{width:bounds.width,height:bounds.height},React.createElement(FacetChart_1.FacetChart,{bounds:bounds,chartTypeName:GrapherConstants_1.ChartTypeName.LineChart,manager:{selection:table.availableEntityNames,table:table}}))};exports.OneChartPerMetric=function OneChartPerMetric(){var table=OwidTableSynthesizers_1.SynthesizeGDPTable({entityCount:2});return React.createElement("svg",{width:bounds.width,height:bounds.height},React.createElement(FacetChart_1.FacetChart,{bounds:bounds,chartTypeName:GrapherConstants_1.ChartTypeName.LineChart,manager:{facetStrategy:GrapherConstants_1.FacetStrategy.column,yColumnSlugs:table.numericColumnSlugs,selection:table.availableEntityNames,table:table}}))}},1902:function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Default=void 0;var React=__importStar(__webpack_require__(0)),Footer_1=__webpack_require__(1018);exports.default={title:"Footer",component:Footer_1.Footer};var manager={originUrlWithProtocol:"https://localhost",note:"This is a note",sourcesLine:"These are my sources"};exports.Default=function Default(){return React.createElement(Footer_1.Footer,{manager:manager})}},1903:function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Default=void 0;var React=__importStar(__webpack_require__(0)),Header_1=__webpack_require__(1017);exports.default={title:"Header",component:Header_1.Header};var manager={currentTitle:"Hello world",subtitle:"This is my chart subtitle"};exports.Default=function Default(){return React.createElement(Header_1.Header,{manager:manager})}},1904:function(module,exports,__webpack_require__){"use strict";__webpack_require__(28),__webpack_require__(5),__webpack_require__(6),__webpack_require__(8);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MultiColumnMultiCountry=exports.MultiColumnSingleCountry=exports.WithAnnotations=exports.WithoutCirclesOnPoints=exports.WithLogScaleAndNegativeAndZeroValues=exports.SingleColumnMultiCountry=void 0;var React=__importStar(__webpack_require__(0)),LineChart_1=__webpack_require__(1025),OwidTableSynthesizers_1=__webpack_require__(140),GrapherConstants_1=__webpack_require__(64),Bounds_1=__webpack_require__(73),Util_1=__webpack_require__(40),OwidTableConstants_1=__webpack_require__(172);exports.default={title:"LineChart",component:LineChart_1.LineChart};exports.SingleColumnMultiCountry=function SingleColumnMultiCountry(){var table=OwidTableSynthesizers_1.SynthesizeGDPTable(),bounds=new Bounds_1.Bounds(0,0,500,250);return React.createElement("div",null,React.createElement("svg",{width:500,height:250},React.createElement(LineChart_1.LineChart,{bounds:bounds,manager:{table:table,yColumnSlugs:[OwidTableSynthesizers_1.SampleColumnSlugs.GDP],selection:table.availableEntityNames}})),React.createElement("div",null,"With missing data:"),React.createElement("svg",{width:500,height:250},React.createElement(LineChart_1.LineChart,{bounds:bounds,manager:{table:table.dropRandomRows(50),selection:table.availableEntityNames,yColumnSlugs:[OwidTableSynthesizers_1.SampleColumnSlugs.GDP]}})))};exports.WithLogScaleAndNegativeAndZeroValues=function WithLogScaleAndNegativeAndZeroValues(){var table=OwidTableSynthesizers_1.SynthesizeFruitTableWithNonPositives({entityCount:2,timeRange:[1900,2e3]}),bounds=new Bounds_1.Bounds(0,0,500,250),bounds2=new Bounds_1.Bounds(0,270,500,250);return React.createElement("svg",{width:500,height:550},React.createElement(LineChart_1.LineChart,{bounds:bounds,manager:{table:table,selection:table.availableEntityNames,yColumnSlugs:[OwidTableSynthesizers_1.SampleColumnSlugs.Fruit]}}),React.createElement(LineChart_1.LineChart,{bounds:bounds2,manager:{table:table,selection:table.availableEntityNames,yColumnSlugs:[OwidTableSynthesizers_1.SampleColumnSlugs.Fruit],yAxisConfig:{scaleType:GrapherConstants_1.ScaleType.log}}}))};exports.WithoutCirclesOnPoints=function WithoutCirclesOnPoints(){var table=OwidTableSynthesizers_1.SynthesizeGDPTable({entityCount:6,timeRange:[1900,2e3]});return React.createElement("div",null,React.createElement("svg",{width:600,height:600},React.createElement(LineChart_1.LineChart,{manager:{table:table,yColumnSlugs:[OwidTableSynthesizers_1.SampleColumnSlugs.GDP],selection:table.availableEntityNames}})))};exports.WithAnnotations=function WithAnnotations(){var table=OwidTableSynthesizers_1.SynthesizeGDPTable({entityCount:6,timeRange:[1900,2e3]});return table=table.appendColumns([{slug:Util_1.makeAnnotationsSlug(OwidTableSynthesizers_1.SampleColumnSlugs.GDP),values:table.get(OwidTableConstants_1.OwidTableSlugs.entityName).values.map((function(name){return"".concat(name," is a country")}))}]),React.createElement("div",null,React.createElement("svg",{width:600,height:600},React.createElement(LineChart_1.LineChart,{manager:{table:table,yColumnSlugs:[OwidTableSynthesizers_1.SampleColumnSlugs.GDP],selection:table.availableEntityNames}})))};exports.MultiColumnSingleCountry=function MultiColumnSingleCountry(){var table=OwidTableSynthesizers_1.SynthesizeGDPTable(),bounds=new Bounds_1.Bounds(0,0,500,250);return React.createElement("div",null,React.createElement("svg",{width:500,height:250},React.createElement(LineChart_1.LineChart,{bounds:bounds,manager:{table:table,selection:table.sampleEntityName(1)}})),React.createElement("div",null,"With missing data:"),React.createElement("svg",{width:500,height:250},React.createElement(LineChart_1.LineChart,{bounds:bounds,manager:{table:table.dropRandomRows(100),selection:table.sampleEntityName(1)}})))};exports.MultiColumnMultiCountry=function MultiColumnMultiCountry(){var table=OwidTableSynthesizers_1.SynthesizeFruitTable({entityCount:5}),bounds=new Bounds_1.Bounds(0,0,500,250);return React.createElement("svg",{width:500,height:250},React.createElement(LineChart_1.LineChart,{bounds:bounds,manager:{table:table,selection:table.availableEntityNames}}))}},1905:function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.TestCollisionDetection=void 0;var Axis_1=__webpack_require__(389),AxisConfig_1=__webpack_require__(216),React=__importStar(__webpack_require__(0)),LineLegend_1=__webpack_require__(612);exports.default={title:"LineLegend",component:LineLegend_1.LineLegend};var verticalAxis=new AxisConfig_1.AxisConfig({min:0,max:100}).toVerticalAxis(),horizontalAxis=new AxisConfig_1.AxisConfig({min:0,max:100}).toHorizontalAxis(),manager={labelSeries:[{seriesName:"Canada",label:"Canada",color:"red",yValue:50,annotation:"A country in North America"},{seriesName:"USA",label:"USA",color:"blue",yValue:50,annotation:"In between"},{seriesName:"Mexico",label:"Mexico",color:"green",yValue:20,annotation:"Below"}],legendX:200,focusedSeriesNames:[],yAxis:new Axis_1.DualAxis({verticalAxis:verticalAxis,horizontalAxis:horizontalAxis}).verticalAxis};exports.TestCollisionDetection=function TestCollisionDetection(){return React.createElement("svg",{width:600,height:400},React.createElement(LineLegend_1.LineLegend,{manager:manager}))}},1906:function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Default=void 0;var React=__importStar(__webpack_require__(0)),LoadingIndicator_1=__webpack_require__(608);exports.default={title:"LoadingIndicator",component:LoadingIndicator_1.LoadingIndicator};exports.Default=function Default(){return React.createElement("div",null,React.createElement(LoadingIndicator_1.LoadingIndicator,null))}},1907:function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.AutoColors=void 0;var React=__importStar(__webpack_require__(0)),MapChart_1=__webpack_require__(609),OwidTableSynthesizers_1=__webpack_require__(140);exports.default={title:"MapChart",component:MapChart_1.MapChart};exports.AutoColors=function AutoColors(){var table=OwidTableSynthesizers_1.SynthesizeGDPTable({timeRange:[2e3,2010],entityCount:200});return React.createElement("svg",{width:600,height:600},React.createElement(MapChart_1.MapChart,{manager:{table:table}}))}},1908:function(module,exports,__webpack_require__){"use strict";__webpack_require__(31);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.WithSparkChart=void 0;var React=__importStar(__webpack_require__(0)),MapTooltip_1=__webpack_require__(1013),Grapher_1=__webpack_require__(470),MapChart_sample_1=__webpack_require__(1909);exports.default={title:"MapTooltip",component:MapTooltip_1.MapTooltip};exports.WithSparkChart=function WithSparkChart(){return React.createElement(Grapher_1.Grapher,Object.assign({},MapChart_sample_1.legacyMapGrapher))}},1909:function(module,exports,__webpack_require__){"use strict";__webpack_require__(28),Object.defineProperty(exports,"__esModule",{value:!0}),exports.legacyMapGrapher=void 0;var owidTypes_1=__webpack_require__(122),GrapherConstants_1=__webpack_require__(64);exports.legacyMapGrapher={hasMapTab:!0,tab:GrapherConstants_1.GrapherTabOption.map,map:{timeTolerance:5},dimensions:[{variableId:3512,property:owidTypes_1.DimensionProperty.y,display:{name:"",unit:"% of children under 5",tolerance:5,isProjection:!1}}],owidDataset:{variables:{3512:{years:[2e3,2010,2010],entities:[207,15,207],values:[4,20,34],id:3512,shortUnit:"%"}},entityKey:{15:{name:"Afghanistan",id:15,code:"AFG"},207:{name:"Iceland",id:207,code:"ISL"}}},queryStr:"?time=2002"}},1910:function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.WithAddDataButtons=void 0;var React=__importStar(__webpack_require__(0)),NoDataModal_1=__webpack_require__(203);exports.default={title:"NoDataModal",component:NoDataModal_1.NoDataModal};exports.WithAddDataButtons=function WithAddDataButtons(){return React.createElement("div",{className:"chart",style:{width:640,height:480}},React.createElement("svg",null,React.createElement(NoDataModal_1.NoDataModal,{message:"You have no data, but this is only a test",manager:{canChangeEntity:!0,canAddData:!0,isSelectingData:!1,entityType:"Country"}})))}},1911:function(module,exports,__webpack_require__){"use strict";__webpack_require__(31);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.CustomColors=exports.AverageAnnualChange=exports.OneYearWithSizeAndColorColumn=exports.MultipleYearsWithConnectedLinesAndBackgroundLines=exports.MultipleYearsWithConnectedLines=exports.LogScaleWithNonPositives=exports.LogScales=exports.WithComparisonLinesAndSelection=exports.OneYearWithSizeColumn=void 0;var OwidTableSynthesizers_1=__webpack_require__(140),GrapherConstants_1=__webpack_require__(64),Bounds_1=__webpack_require__(73),React=__importStar(__webpack_require__(0)),ScatterPlotChart_1=__webpack_require__(610);exports.default={title:"ScatterPlotChart",component:ScatterPlotChart_1.ScatterPlotChart};var table=OwidTableSynthesizers_1.SynthesizeGDPTable({entityCount:20}),basicSetup={table:table,selection:table.availableEntityNames,yColumnSlug:OwidTableSynthesizers_1.SampleColumnSlugs.GDP,xColumnSlug:OwidTableSynthesizers_1.SampleColumnSlugs.Population,yAxisConfig:{min:0},xAxisConfig:{min:0}},table2=OwidTableSynthesizers_1.SynthesizeGDPTable({entityCount:20}).filterByTargetTimes([2e3],0),oneYear=Object.assign(Object.assign({},basicSetup),{selection:table2.availableEntityNames,table:table2}),oneYearWithSizeColumn=Object.assign(Object.assign({},oneYear),{sizeColumnSlug:OwidTableSynthesizers_1.SampleColumnSlugs.LifeExpectancy}),oneYearWithComparisons=Object.assign(Object.assign({},oneYear),{comparisonLines:[{label:"GDP = Population * 1000",yEquals:"1000*x"}]}),size={width:Bounds_1.DEFAULT_BOUNDS.width,height:Bounds_1.DEFAULT_BOUNDS.height};exports.OneYearWithSizeColumn=function OneYearWithSizeColumn(){return React.createElement("svg",Object.assign({},size),React.createElement(ScatterPlotChart_1.ScatterPlotChart,{manager:oneYearWithSizeColumn}))};exports.WithComparisonLinesAndSelection=function WithComparisonLinesAndSelection(){var table=OwidTableSynthesizers_1.SynthesizeGDPTable({entityCount:200}).filterByTargetTimes([2e3],0),manager=Object.assign(Object.assign({},oneYearWithComparisons),{table:table,selection:table.sampleEntityName(5)});return React.createElement(React.Fragment,null,React.createElement("svg",Object.assign({},size),React.createElement(ScatterPlotChart_1.ScatterPlotChart,{manager:manager})),React.createElement("svg",Object.assign({},size),React.createElement(ScatterPlotChart_1.ScatterPlotChart,{manager:Object.assign(Object.assign({},manager),{backgroundSeriesLimit:10})})))};exports.LogScales=function LogScales(){var yAxisConfig={scaleType:GrapherConstants_1.ScaleType.log,min:0},xAxisConfig={scaleType:GrapherConstants_1.ScaleType.log,min:0};return React.createElement(React.Fragment,null,React.createElement("svg",Object.assign({},size),React.createElement(ScatterPlotChart_1.ScatterPlotChart,{manager:oneYearWithComparisons})),React.createElement("svg",Object.assign({},size),React.createElement(ScatterPlotChart_1.ScatterPlotChart,{manager:Object.assign(Object.assign({},oneYearWithComparisons),{yAxisConfig:yAxisConfig})})),React.createElement("svg",Object.assign({},size),React.createElement(ScatterPlotChart_1.ScatterPlotChart,{manager:Object.assign(Object.assign({},oneYearWithComparisons),{xAxisConfig:xAxisConfig})})),React.createElement("svg",Object.assign({},size),React.createElement(ScatterPlotChart_1.ScatterPlotChart,{manager:Object.assign(Object.assign({},oneYearWithComparisons),{yAxisConfig:yAxisConfig,xAxisConfig:xAxisConfig})})))};exports.LogScaleWithNonPositives=function LogScaleWithNonPositives(){var manager={table:OwidTableSynthesizers_1.SynthesizeFruitTableWithNonPositives(),selection:table.availableEntityNames,yColumnSlug:OwidTableSynthesizers_1.SampleColumnSlugs.Fruit,xColumnSlug:OwidTableSynthesizers_1.SampleColumnSlugs.Vegetables,yAxisConfig:{min:0,scaleType:GrapherConstants_1.ScaleType.log},xAxisConfig:{min:0,scaleType:GrapherConstants_1.ScaleType.log}};return React.createElement("svg",Object.assign({},size),React.createElement(ScatterPlotChart_1.ScatterPlotChart,{manager:manager}))};exports.MultipleYearsWithConnectedLines=function MultipleYearsWithConnectedLines(){return React.createElement("svg",Object.assign({},size),React.createElement(ScatterPlotChart_1.ScatterPlotChart,{manager:basicSetup}))};exports.MultipleYearsWithConnectedLinesAndBackgroundLines=function MultipleYearsWithConnectedLinesAndBackgroundLines(){var table=OwidTableSynthesizers_1.SynthesizeGDPTable({entityCount:20});return React.createElement("svg",Object.assign({},size),React.createElement(ScatterPlotChart_1.ScatterPlotChart,{manager:Object.assign(Object.assign({},basicSetup),{table:table,selection:table.sampleEntityName(2)})}))};exports.OneYearWithSizeAndColorColumn=function OneYearWithSizeAndColorColumn(){return React.createElement("svg",Object.assign({},size),React.createElement(ScatterPlotChart_1.ScatterPlotChart,{manager:Object.assign(Object.assign({},oneYearWithSizeColumn),{colorColumnSlug:OwidTableSynthesizers_1.SampleColumnSlugs.LifeExpectancy})}))};exports.AverageAnnualChange=function AverageAnnualChange(){return React.createElement("svg",Object.assign({},size),React.createElement(ScatterPlotChart_1.ScatterPlotChart,{manager:oneYear}))};exports.CustomColors=function CustomColors(){return React.createElement("svg",Object.assign({},size),React.createElement(ScatterPlotChart_1.ScatterPlotChart,{manager:oneYear}))}},1912:function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.BlankSlopeChart=exports.WithColorColumn=exports.Default=void 0;var React=__importStar(__webpack_require__(0)),SlopeChart_1=__webpack_require__(1023),OwidTableSynthesizers_1=__webpack_require__(140),OwidTable_1=__webpack_require__(201);exports.default={title:"SlopeChart",component:SlopeChart_1.SlopeChart};var table=OwidTableSynthesizers_1.SynthesizeGDPTable({entityCount:10});exports.Default=function Default(){return React.createElement("svg",{width:600,height:600},React.createElement(SlopeChart_1.SlopeChart,{manager:{table:table}}))};exports.WithColorColumn=function WithColorColumn(){return React.createElement("svg",{width:600,height:600},React.createElement(SlopeChart_1.SlopeChart,{manager:{table:table,colorColumnSlug:OwidTableSynthesizers_1.SampleColumnSlugs.Population,yColumnSlug:OwidTableSynthesizers_1.SampleColumnSlugs.GDP}}))};exports.BlankSlopeChart=function BlankSlopeChart(){return React.createElement("svg",{width:600,height:600},React.createElement(SlopeChart_1.SlopeChart,{manager:{table:OwidTable_1.BlankOwidTable()}}))}},1913:function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.NoSources=exports.WithSources=void 0;var OwidTableSynthesizers_1=__webpack_require__(140),React=__importStar(__webpack_require__(0)),SourcesTab_1=__webpack_require__(1006);exports.default={title:"SourcesTab",component:SourcesTab_1.SourcesTab};exports.WithSources=function WithSources(){return React.createElement(SourcesTab_1.SourcesTab,{manager:{columnsWithSources:OwidTableSynthesizers_1.SynthesizeGDPTable().columnsAsArray}})};exports.NoSources=function NoSources(){return React.createElement(SourcesTab_1.SourcesTab,{manager:{columnsWithSources:[]}})}},1914:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(18),__webpack_require__(21);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Default=void 0;var React=__importStar(__webpack_require__(0)),OwidTableSynthesizers_1=__webpack_require__(140),Spreadsheet_1=__webpack_require__(1915),mobx_1=__webpack_require__(41),mobx_react_1=__webpack_require__(58),Bounds_1=__webpack_require__(73),GrapherConstants_1=__webpack_require__(64),ChartTypeMap_1=__webpack_require__(474),OwidTableConstants_1=__webpack_require__(172),ChartTypeSwitcher_1=__webpack_require__(1041);exports.default={title:"Spreadsheet",component:Spreadsheet_1.Spreadsheet};var getRandomTable=function getRandomTable(){return OwidTableSynthesizers_1.SynthesizeGDPTable({entityCount:2,timeRange:[2020,2024]}).dropColumns([OwidTableSynthesizers_1.SampleColumnSlugs.GDP,OwidTableSynthesizers_1.SampleColumnSlugs.Population,OwidTableConstants_1.OwidTableSlugs.entityCode,OwidTableConstants_1.OwidTableSlugs.entityId]).sortColumns([OwidTableConstants_1.OwidTableSlugs.entityName,OwidTableConstants_1.OwidTableSlugs.year])},Editor=function(_React$Component){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(Editor,_React$Component);var _super=_createSuper(Editor);function Editor(){var _this;return _classCallCheck(this,Editor),(_this=_super.apply(this,arguments)).table=getRandomTable(),_this.chartTypeName=GrapherConstants_1.ChartTypeName.LineChart,_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Editor,[{key:"shuffleTable",value:function shuffleTable(){this.table=getRandomTable()}},{key:"yColumnSlugs",get:function get(){return this.table.suggestedYColumnSlugs}},{key:"xColumnSlug",get:function get(){var _a;return null===(_a=this.table.timeColumn)||void 0===_a?void 0:_a.slug}},{key:"selection",get:function get(){return this.table.availableEntityNames}},{key:"changeChartType",value:function changeChartType(type){this.chartTypeName=type}},{key:"render",value:function render(){var _a,ChartClass=null!==(_a=ChartTypeMap_1.ChartComponentClassMap.get(this.chartTypeName))&&void 0!==_a?_a:ChartTypeMap_1.DefaultChartClass;return React.createElement("div",null,React.createElement(Spreadsheet_1.Spreadsheet,{manager:this}),React.createElement("svg",{width:400,height:300},React.createElement(ChartClass,{manager:this,bounds:new Bounds_1.Bounds(0,0,400,300)})),React.createElement("button",{onClick:this.shuffleTable},"Shuffle"),React.createElement(ChartTypeSwitcher_1.ChartTypeSwitcher,{onChange:this.changeChartType}))}}]),Editor}(React.Component);__decorate([mobx_1.observable.ref],Editor.prototype,"table",void 0),__decorate([mobx_1.action.bound],Editor.prototype,"shuffleTable",null),__decorate([mobx_1.computed],Editor.prototype,"yColumnSlugs",null),__decorate([mobx_1.computed],Editor.prototype,"xColumnSlug",null),__decorate([mobx_1.observable],Editor.prototype,"chartTypeName",void 0),__decorate([mobx_1.computed],Editor.prototype,"selection",null),__decorate([mobx_1.action.bound],Editor.prototype,"changeChartType",null),Editor=__decorate([mobx_react_1.observer],Editor);exports.Default=function Default(){return React.createElement(Editor,null)}},1915:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(18),__webpack_require__(21);var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Spreadsheet=void 0;var mobx_react_1=__webpack_require__(58),react_1=__importDefault(__webpack_require__(0)),react_2=__webpack_require__(1931),mobx_1=__webpack_require__(41),Util_1=__webpack_require__(40),OwidTable_1=__webpack_require__(201),Spreadsheet=function(_react_1$default$Comp){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(Spreadsheet,_react_1$default$Comp);var _super=_createSuper(Spreadsheet);function Spreadsheet(){var _this;return _classCallCheck(this,Spreadsheet),(_this=_super.apply(this,arguments)).hotTableComponent=react_1.default.createRef(),_this._version="",_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Spreadsheet,[{key:"updateFromHot",value:function updateFromHot(){var _a,newVersion=null===(_a=this.hotTableComponent.current)||void 0===_a?void 0:_a.hotInstance.getData();newVersion&&this.isChanged(newVersion)&&(this.manager.table=new OwidTable_1.OwidTable(newVersion))}},{key:"isChanged",value:function isChanged(newVersion){return new OwidTable_1.OwidTable(newVersion).toDelimited()!==this._version}},{key:"componentDidMount",value:function componentDidMount(){Util_1.exposeInstanceOnWindow(this,"spreadsheet")}},{key:"manager",get:function get(){return this.props.manager}},{key:"render",value:function render(){var _this2=this,table=this.manager.table;this._version=table.toDelimited();var hotSettings={afterChange:function afterChange(){return _this2.updateFromHot()},allowInsertColumn:!0,allowInsertRow:!0,autoColumnSize:!0,colHeaders:!1,contextMenu:!0,data:table.toMatrix(),height:250,minSpareRows:2,minSpareCols:2,rowHeaders:!0,rowHeights:23,stretchH:"all",width:"100%",wordWrap:!1};return react_1.default.createElement(react_2.HotTable,{settings:hotSettings,ref:this.hotTableComponent,licenseKey:"non-commercial-and-evaluation"})}}]),Spreadsheet}(react_1.default.Component);__decorate([mobx_1.action.bound],Spreadsheet.prototype,"updateFromHot",null),__decorate([mobx_1.computed],Spreadsheet.prototype,"manager",null),Spreadsheet=__decorate([mobx_react_1.observer],Spreadsheet),exports.Spreadsheet=Spreadsheet},1919:function(module,exports,__webpack_require__){var map={"./af":1043,"./af.js":1043,"./ar":1044,"./ar-dz":1045,"./ar-dz.js":1045,"./ar-kw":1046,"./ar-kw.js":1046,"./ar-ly":1047,"./ar-ly.js":1047,"./ar-ma":1048,"./ar-ma.js":1048,"./ar-sa":1049,"./ar-sa.js":1049,"./ar-tn":1050,"./ar-tn.js":1050,"./ar.js":1044,"./az":1051,"./az.js":1051,"./be":1052,"./be.js":1052,"./bg":1053,"./bg.js":1053,"./bm":1054,"./bm.js":1054,"./bn":1055,"./bn.js":1055,"./bo":1056,"./bo.js":1056,"./br":1057,"./br.js":1057,"./bs":1058,"./bs.js":1058,"./ca":1059,"./ca.js":1059,"./cs":1060,"./cs.js":1060,"./cv":1061,"./cv.js":1061,"./cy":1062,"./cy.js":1062,"./da":1063,"./da.js":1063,"./de":1064,"./de-at":1065,"./de-at.js":1065,"./de-ch":1066,"./de-ch.js":1066,"./de.js":1064,"./dv":1067,"./dv.js":1067,"./el":1068,"./el.js":1068,"./en-SG":1069,"./en-SG.js":1069,"./en-au":1070,"./en-au.js":1070,"./en-ca":1071,"./en-ca.js":1071,"./en-gb":1072,"./en-gb.js":1072,"./en-ie":1073,"./en-ie.js":1073,"./en-il":1074,"./en-il.js":1074,"./en-nz":1075,"./en-nz.js":1075,"./eo":1076,"./eo.js":1076,"./es":1077,"./es-do":1078,"./es-do.js":1078,"./es-us":1079,"./es-us.js":1079,"./es.js":1077,"./et":1080,"./et.js":1080,"./eu":1081,"./eu.js":1081,"./fa":1082,"./fa.js":1082,"./fi":1083,"./fi.js":1083,"./fo":1084,"./fo.js":1084,"./fr":1085,"./fr-ca":1086,"./fr-ca.js":1086,"./fr-ch":1087,"./fr-ch.js":1087,"./fr.js":1085,"./fy":1088,"./fy.js":1088,"./ga":1089,"./ga.js":1089,"./gd":1090,"./gd.js":1090,"./gl":1091,"./gl.js":1091,"./gom-latn":1092,"./gom-latn.js":1092,"./gu":1093,"./gu.js":1093,"./he":1094,"./he.js":1094,"./hi":1095,"./hi.js":1095,"./hr":1096,"./hr.js":1096,"./hu":1097,"./hu.js":1097,"./hy-am":1098,"./hy-am.js":1098,"./id":1099,"./id.js":1099,"./is":1100,"./is.js":1100,"./it":1101,"./it-ch":1102,"./it-ch.js":1102,"./it.js":1101,"./ja":1103,"./ja.js":1103,"./jv":1104,"./jv.js":1104,"./ka":1105,"./ka.js":1105,"./kk":1106,"./kk.js":1106,"./km":1107,"./km.js":1107,"./kn":1108,"./kn.js":1108,"./ko":1109,"./ko.js":1109,"./ku":1110,"./ku.js":1110,"./ky":1111,"./ky.js":1111,"./lb":1112,"./lb.js":1112,"./lo":1113,"./lo.js":1113,"./lt":1114,"./lt.js":1114,"./lv":1115,"./lv.js":1115,"./me":1116,"./me.js":1116,"./mi":1117,"./mi.js":1117,"./mk":1118,"./mk.js":1118,"./ml":1119,"./ml.js":1119,"./mn":1120,"./mn.js":1120,"./mr":1121,"./mr.js":1121,"./ms":1122,"./ms-my":1123,"./ms-my.js":1123,"./ms.js":1122,"./mt":1124,"./mt.js":1124,"./my":1125,"./my.js":1125,"./nb":1126,"./nb.js":1126,"./ne":1127,"./ne.js":1127,"./nl":1128,"./nl-be":1129,"./nl-be.js":1129,"./nl.js":1128,"./nn":1130,"./nn.js":1130,"./pa-in":1131,"./pa-in.js":1131,"./pl":1132,"./pl.js":1132,"./pt":1133,"./pt-br":1134,"./pt-br.js":1134,"./pt.js":1133,"./ro":1135,"./ro.js":1135,"./ru":1136,"./ru.js":1136,"./sd":1137,"./sd.js":1137,"./se":1138,"./se.js":1138,"./si":1139,"./si.js":1139,"./sk":1140,"./sk.js":1140,"./sl":1141,"./sl.js":1141,"./sq":1142,"./sq.js":1142,"./sr":1143,"./sr-cyrl":1144,"./sr-cyrl.js":1144,"./sr.js":1143,"./ss":1145,"./ss.js":1145,"./sv":1146,"./sv.js":1146,"./sw":1147,"./sw.js":1147,"./ta":1148,"./ta.js":1148,"./te":1149,"./te.js":1149,"./tet":1150,"./tet.js":1150,"./tg":1151,"./tg.js":1151,"./th":1152,"./th.js":1152,"./tl-ph":1153,"./tl-ph.js":1153,"./tlh":1154,"./tlh.js":1154,"./tr":1155,"./tr.js":1155,"./tzl":1156,"./tzl.js":1156,"./tzm":1157,"./tzm-latn":1158,"./tzm-latn.js":1158,"./tzm.js":1157,"./ug-cn":1159,"./ug-cn.js":1159,"./uk":1160,"./uk.js":1160,"./ur":1161,"./ur.js":1161,"./uz":1162,"./uz-latn":1163,"./uz-latn.js":1163,"./uz.js":1162,"./vi":1164,"./vi.js":1164,"./x-pseudo":1165,"./x-pseudo.js":1165,"./yo":1166,"./yo.js":1166,"./zh-cn":1167,"./zh-cn.js":1167,"./zh-hk":1168,"./zh-hk.js":1168,"./zh-tw":1169,"./zh-tw.js":1169};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=1919},1922:function(module,exports,__webpack_require__){"use strict";__webpack_require__(31),__webpack_require__(22),__webpack_require__(5),__webpack_require__(6),__webpack_require__(8);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ColumnsAsSeriesWithMissingRowsAndInterpolationRelative=exports.ColumnsAsSeriesWithMissingCells=exports.ColumnsAsSeriesRelative=exports.ColumnsAsSeries=exports.EntitiesAsSeriesWithMissingRowsNoInterpolationRelative=exports.EntitiesAsSeriesWithMissingRowsAndInterpolationRelative=exports.EntitiesAsSeriesWithMissingRowsNoInterpolation=exports.EntitiesAsSeriesWithMissingRowsAndInterpolation=exports.EntitiesAsSeries=exports.EntitiesAsSeriesRelative=void 0;var OwidTableSynthesizers_1=__webpack_require__(140),React=__importStar(__webpack_require__(0)),StackedAreaChart_1=__webpack_require__(1026);exports.default={title:"StackedAreaChart",component:StackedAreaChart_1.StackedAreaChart};var seed=Date.now(),table=OwidTableSynthesizers_1.SynthesizeGDPTable({entityCount:10,timeRange:[1950,2010]},seed),entitiesChart={table:table,selection:table.sampleEntityName(5),yColumnSlugs:[OwidTableSynthesizers_1.SampleColumnSlugs.GDP]};exports.EntitiesAsSeriesRelative=function EntitiesAsSeriesRelative(){return React.createElement("svg",{width:600,height:600},React.createElement(StackedAreaChart_1.StackedAreaChart,{manager:Object.assign(Object.assign({},entitiesChart),{isRelativeMode:!0})}))};exports.EntitiesAsSeries=function EntitiesAsSeries(){return React.createElement("svg",{width:600,height:600},React.createElement(StackedAreaChart_1.StackedAreaChart,{manager:Object.assign(Object.assign({},entitiesChart),{isRelativeMode:!1})}))};exports.EntitiesAsSeriesWithMissingRowsAndInterpolation=function EntitiesAsSeriesWithMissingRowsAndInterpolation(){return React.createElement("svg",{width:600,height:600},React.createElement(StackedAreaChart_1.StackedAreaChart,{manager:Object.assign(Object.assign({},entitiesChart),{table:table.dropRandomRows(30,seed)})}))};exports.EntitiesAsSeriesWithMissingRowsNoInterpolation=function EntitiesAsSeriesWithMissingRowsNoInterpolation(){return React.createElement("svg",{width:600,height:600},React.createElement(StackedAreaChart_1.StackedAreaChart,{disableLinearInterpolation:!0,manager:Object.assign(Object.assign({},entitiesChart),{table:table.dropRandomRows(30,seed)})}))};exports.EntitiesAsSeriesWithMissingRowsAndInterpolationRelative=function EntitiesAsSeriesWithMissingRowsAndInterpolationRelative(){return React.createElement("svg",{width:600,height:600},React.createElement(StackedAreaChart_1.StackedAreaChart,{manager:Object.assign(Object.assign({},entitiesChart),{table:table.dropRandomRows(30,seed),isRelativeMode:!0})}))};exports.EntitiesAsSeriesWithMissingRowsNoInterpolationRelative=function EntitiesAsSeriesWithMissingRowsNoInterpolationRelative(){return React.createElement("svg",{width:600,height:600},React.createElement(StackedAreaChart_1.StackedAreaChart,{disableLinearInterpolation:!0,manager:Object.assign(Object.assign({},entitiesChart),{table:table.dropRandomRows(30,seed),isRelativeMode:!0})}))};var colTable=OwidTableSynthesizers_1.SynthesizeFruitTable(),columnsChart={table:colTable,selection:colTable.sampleEntityName(1)};exports.ColumnsAsSeries=function ColumnsAsSeries(){return React.createElement("svg",{width:600,height:600},React.createElement(StackedAreaChart_1.StackedAreaChart,{manager:columnsChart}))};exports.ColumnsAsSeriesRelative=function ColumnsAsSeriesRelative(){return React.createElement("svg",{width:600,height:600},React.createElement(StackedAreaChart_1.StackedAreaChart,{manager:Object.assign(Object.assign({},columnsChart),{isRelativeMode:!0})}))};exports.ColumnsAsSeriesWithMissingCells=function ColumnsAsSeriesWithMissingCells(){var table=OwidTableSynthesizers_1.SynthesizeFruitTable().replaceRandomCells(200,[OwidTableSynthesizers_1.SampleColumnSlugs.Fruit]);return React.createElement("svg",{width:600,height:600},React.createElement(StackedAreaChart_1.StackedAreaChart,{manager:{selection:table.sampleEntityName(1),table:table}}))};exports.ColumnsAsSeriesWithMissingRowsAndInterpolationRelative=function ColumnsAsSeriesWithMissingRowsAndInterpolationRelative(){var table=OwidTableSynthesizers_1.SynthesizeFruitTable().dropRandomRows(30,seed),firstCol=table.columnsAsArray[0],junkFoodColumn=Object.assign(Object.assign({},firstCol.def),{slug:"junkFood",name:"JunkFood",values:firstCol.values.slice().reverse()});return table=table.appendColumns([junkFoodColumn]),React.createElement("svg",{width:600,height:600},React.createElement(StackedAreaChart_1.StackedAreaChart,{manager:{selection:table.sampleEntityName(1),table:table,isRelativeMode:!0}}))}},1923:function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.EntitiesAsSeriesWithMissingRows=exports.EntitiesAsSeries=exports.ColumnsAsSeries=void 0;var React=__importStar(__webpack_require__(0)),StackedBarChart_1=__webpack_require__(1029),OwidTableSynthesizers_1=__webpack_require__(140);exports.default={title:"StackedBarChart",component:StackedBarChart_1.StackedBarChart};exports.ColumnsAsSeries=function ColumnsAsSeries(){var table=OwidTableSynthesizers_1.SynthesizeFruitTable();return React.createElement("svg",{width:600,height:600},React.createElement(StackedBarChart_1.StackedBarChart,{manager:{table:table,selection:table.sampleEntityName(1)}}))};exports.EntitiesAsSeries=function EntitiesAsSeries(){var table=OwidTableSynthesizers_1.SynthesizeGDPTable({entityCount:5}),manager={table:table,selection:table.availableEntityNames,yColumnSlugs:[OwidTableSynthesizers_1.SampleColumnSlugs.Population]};return React.createElement("svg",{width:600,height:600},React.createElement(StackedBarChart_1.StackedBarChart,{manager:manager}))};exports.EntitiesAsSeriesWithMissingRows=function EntitiesAsSeriesWithMissingRows(){var table=OwidTableSynthesizers_1.SynthesizeGDPTable({entityCount:5}).dropRandomRows(30),manager={table:table,selection:table.availableEntityNames,yColumnSlugs:[OwidTableSynthesizers_1.SampleColumnSlugs.Population]};return React.createElement("svg",{width:600,height:600},React.createElement(StackedBarChart_1.StackedBarChart,{manager:manager}))}},1924:function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ColumnsAsSeriesRelative=exports.ColumnsAsSeries=void 0;var React=__importStar(__webpack_require__(0)),StackedDiscreteBarChart_1=__webpack_require__(1030),OwidTableSynthesizers_1=__webpack_require__(140);exports.default={title:"StackedDiscreteBarChart",component:StackedDiscreteBarChart_1.StackedDiscreteBarChart};exports.ColumnsAsSeries=function ColumnsAsSeries(){var table=OwidTableSynthesizers_1.SynthesizeFruitTable({timeRange:[2e3,2001],entityCount:5});return React.createElement("svg",{width:640,height:600},React.createElement(StackedDiscreteBarChart_1.StackedDiscreteBarChart,{manager:{table:table,selection:table.sampleEntityName(5)}}))};exports.ColumnsAsSeriesRelative=function ColumnsAsSeriesRelative(){var table=OwidTableSynthesizers_1.SynthesizeFruitTable({timeRange:[2e3,2001],entityCount:5});return React.createElement("svg",{width:640,height:600},React.createElement(StackedDiscreteBarChart_1.StackedDiscreteBarChart,{manager:{table:table,selection:table.sampleEntityName(5),isRelativeMode:!0}}))}},1925:function(module,exports,__webpack_require__){"use strict";function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(18),__webpack_require__(21);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.DisablePlayButton=exports.OneYearAtATime=exports.StartPartialRange=exports.Default=void 0;var React=__importStar(__webpack_require__(0)),TimelineComponent_1=__webpack_require__(997),mobx_1=__webpack_require__(41),Util_1=__webpack_require__(40),TimelineController_1=__webpack_require__(1034),TimelineManagerMock=function(){function TimelineManagerMock(){_classCallCheck(this,TimelineManagerMock),this.isPlaying=!1,this.userHasSetTimeline=!0,this.times=Util_1.range(1900,2021),this._endTime=2020,this._startTime=1950,this.disablePlay=!1}return _createClass(TimelineManagerMock,[{key:"endHandleTimeBound",get:function get(){return this._endTime},set:function set(num){this.updateEndTime(num)}},{key:"updateEndTime",value:function updateEndTime(num){this._endTime=num}},{key:"startHandleTimeBound",get:function get(){return this._startTime},set:function set(num){this.updateStartTime(num)}},{key:"updateStartTime",value:function updateStartTime(num){this._startTime=num}}]),TimelineManagerMock}();__decorate([mobx_1.observable],TimelineManagerMock.prototype,"isPlaying",void 0),__decorate([mobx_1.observable],TimelineManagerMock.prototype,"userHasSetTimeline",void 0),__decorate([mobx_1.observable],TimelineManagerMock.prototype,"times",void 0),__decorate([mobx_1.observable],TimelineManagerMock.prototype,"_endTime",void 0),__decorate([mobx_1.computed],TimelineManagerMock.prototype,"endHandleTimeBound",null),__decorate([mobx_1.action.bound],TimelineManagerMock.prototype,"updateEndTime",null),__decorate([mobx_1.observable],TimelineManagerMock.prototype,"_startTime",void 0),__decorate([mobx_1.computed],TimelineManagerMock.prototype,"startHandleTimeBound",null),__decorate([mobx_1.action.bound],TimelineManagerMock.prototype,"updateStartTime",null),__decorate([mobx_1.observable],TimelineManagerMock.prototype,"disablePlay",void 0),exports.default={title:"TimelineControl",component:TimelineComponent_1.TimelineComponent};var SingleYearManager=function(_TimelineManagerMock){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(SingleYearManager,_TimelineManagerMock);var _super=_createSuper(SingleYearManager);function SingleYearManager(){var _this;return _classCallCheck(this,SingleYearManager),(_this=_super.apply(this,arguments))._endTime=1950,_this}return _createClass(SingleYearManager,[{key:"updateEndTime",value:function updateEndTime(num){this._endTime=num,this._startTime=num}},{key:"updateStartTime",value:function updateStartTime(num){this._endTime=num,this._startTime=num}}]),SingleYearManager}(TimelineManagerMock);__decorate([mobx_1.action.bound],SingleYearManager.prototype,"updateEndTime",null),__decorate([mobx_1.action.bound],SingleYearManager.prototype,"updateStartTime",null),__decorate([mobx_1.observable],SingleYearManager.prototype,"_endTime",void 0);exports.Default=function Default(){var manager=new TimelineManagerMock;manager.startHandleTimeBound=1900;var timelineController=new TimelineController_1.TimelineController(manager);return React.createElement(TimelineComponent_1.TimelineComponent,{timelineController:timelineController})};exports.StartPartialRange=function StartPartialRange(){return React.createElement(TimelineComponent_1.TimelineComponent,{timelineController:new TimelineController_1.TimelineController(new TimelineManagerMock)})};exports.OneYearAtATime=function OneYearAtATime(){return React.createElement(TimelineComponent_1.TimelineComponent,{timelineController:new TimelineController_1.TimelineController(new SingleYearManager)})};exports.DisablePlayButton=function DisablePlayButton(){var manager=new TimelineManagerMock;return manager.disablePlay=!0,React.createElement(TimelineComponent_1.TimelineComponent,{timelineController:new TimelineController_1.TimelineController(manager)})}},1926:function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.CategoricalBins=void 0;var React=__importStar(__webpack_require__(0)),VerticalColorLegend_1=__webpack_require__(475);exports.default={title:"VerticalColorLegend",component:VerticalColorLegend_1.VerticalColorLegend};var manager={maxLegendWidth:500,title:"Legend Title",legendItems:[{label:"Canada",color:"red"},{label:"Mexico",color:"green"}],activeColors:["red","green"]};exports.CategoricalBins=function CategoricalBins(){return React.createElement("svg",{width:600,height:400},React.createElement(VerticalColorLegend_1.VerticalColorLegend,{manager:manager}))}},1927:function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Default=void 0;var React=__importStar(__webpack_require__(0)),Feedback_1=__webpack_require__(1928);exports.default={title:"FeedbackForm",component:Feedback_1.FeedbackForm};exports.Default=function Default(){return React.createElement(Feedback_1.FeedbackForm,{autofocus:!1})}},1928:function(module,exports,__webpack_require__){"use strict";function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(106),__webpack_require__(5),__webpack_require__(25),__webpack_require__(17),__webpack_require__(9),__webpack_require__(10),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(18),__webpack_require__(21);var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.runFeedbackPage=exports.FeedbackPrompt=exports.FeedbackForm=void 0;var react_1=__importDefault(__webpack_require__(0)),react_dom_1=__importDefault(__webpack_require__(90)),mobx_react_1=__webpack_require__(58),react_fontawesome_1=__webpack_require__(123),faCommentAlt_1=__webpack_require__(1929),faTimes_1=__webpack_require__(473),mobx_1=__webpack_require__(41),classnames_1=__importDefault(__webpack_require__(139)),faPaperPlane_1=__webpack_require__(1930),sendFeedback=function sendFeedback(feedback){return new Promise((function(resolve,reject){var json=mobx_1.toJS(feedback),req=new XMLHttpRequest;json.environment="Current URL: ".concat(window.location.href,"\nUser Agent: ").concat(navigator.userAgent,"\nViewport: ").concat(window.innerWidth,"x").concat(window.innerHeight),req.addEventListener("readystatechange",(function(){4===req.readyState&&(200!==req.status?reject("".concat(req.status," ").concat(req.statusText)):resolve(void 0))})),req.open("POST","https://owid-feedback.netlify.app/.netlify/functions/hello"),req.setRequestHeader("Content-Type","application/json;charset=UTF-8"),req.send(JSON.stringify(json))}))},Feedback=function(){function Feedback(){_classCallCheck(this,Feedback),this.name="",this.email="",this.message="",this.environment=""}return _createClass(Feedback,[{key:"clear",value:function clear(){this.name="",this.email="",this.message=""}}]),Feedback}();__decorate([mobx_1.observable],Feedback.prototype,"name",void 0),__decorate([mobx_1.observable],Feedback.prototype,"email",void 0),__decorate([mobx_1.observable],Feedback.prototype,"message",void 0),__decorate([mobx_1.action.bound],Feedback.prototype,"clear",null);var FeedbackForm=function(_react_1$default$Comp){_inherits(FeedbackForm,_react_1$default$Comp);var _super=_createSuper(FeedbackForm);function FeedbackForm(){var _this;return _classCallCheck(this,FeedbackForm),(_this=_super.apply(this,arguments)).feedback=new Feedback,_this.loading=!1,_this.done=!1,_this}return _createClass(FeedbackForm,[{key:"submit",value:function submit(){return __awaiter(this,void 0,void 0,regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,sendFeedback(this.feedback);case 3:this.feedback.clear(),this.done=!0,_context.next=10;break;case 7:_context.prev=7,_context.t0=_context.catch(0),this.error=_context.t0;case 10:return _context.prev=10,this.loading=!1,_context.finish(10);case 13:case"end":return _context.stop()}}),_callee,this,[[0,7,10,13]])})))}},{key:"onSubmit",value:function onSubmit(e){e.preventDefault(),this.done=!1,this.error=void 0,this.loading=!0,this.submit()}},{key:"onName",value:function onName(e){this.feedback.name=e.currentTarget.value}},{key:"onEmail",value:function onEmail(e){this.feedback.email=e.currentTarget.value}},{key:"onMessage",value:function onMessage(e){this.feedback.message=e.currentTarget.value}},{key:"onClose",value:function onClose(){this.props.onClose&&this.props.onClose(),this.done=!1}},{key:"renderBody",value:function renderBody(){var _a,loading=this.loading,done=this.done,autofocus=null===(_a=this.props.autofocus)||void 0===_a||_a;return done?react_1.default.createElement("div",{className:"doneMessage"},react_1.default.createElement("div",{className:"icon"},react_1.default.createElement(react_fontawesome_1.FontAwesomeIcon,{icon:faPaperPlane_1.faPaperPlane})),react_1.default.createElement("div",{className:"message"},react_1.default.createElement("h3",null,"Thank you for your feedback"),react_1.default.createElement("p",null,"We read all feedback, but due to a high volume of messages we are not able to reply to all.")),react_1.default.createElement("div",{className:"actions"},react_1.default.createElement("button",{onClick:this.onClose},"Close"))):react_1.default.createElement(react_1.default.Fragment,null,react_1.default.createElement("div",{className:"header"},"Leave us feedback"),react_1.default.createElement("div",{className:"notice"},react_1.default.createElement("p",null,"We read and consider all feedback, but due to a high volume of messages we are not able to reply to all.")),react_1.default.createElement("div",{className:"formBody"},react_1.default.createElement("div",{className:"formSection"},react_1.default.createElement("label",{htmlFor:"feedback.name"},"Your name"),react_1.default.createElement("input",{id:"feedback.name",onChange:this.onName,autoFocus:autofocus,disabled:loading})),react_1.default.createElement("div",{className:"formSection"},react_1.default.createElement("label",{htmlFor:"feedback.email"},"Email address"),react_1.default.createElement("input",{id:"feedback.email",onChange:this.onEmail,type:"email",required:!0,disabled:loading})),react_1.default.createElement("div",{className:"formSection formSectionExpand"},react_1.default.createElement("label",{htmlFor:"feedback.message"},"Message"),react_1.default.createElement("textarea",{id:"feedback.message",onChange:this.onMessage,rows:5,minLength:30,required:!0,disabled:loading})),this.error?react_1.default.createElement("div",{style:{color:"red"}},this.error):void 0,this.done?react_1.default.createElement("div",{style:{color:"green"}},"Thanks for your feedback!"):void 0),react_1.default.createElement("div",{className:"footer"},react_1.default.createElement("button",{type:"submit",disabled:loading},"Send message")))}},{key:"render",value:function render(){return react_1.default.createElement("form",{className:classnames_1.default("FeedbackForm",{loading:this.loading}),onSubmit:this.onSubmit},this.renderBody())}}]),FeedbackForm}(react_1.default.Component);__decorate([mobx_1.observable],FeedbackForm.prototype,"loading",void 0),__decorate([mobx_1.observable],FeedbackForm.prototype,"done",void 0),__decorate([mobx_1.observable],FeedbackForm.prototype,"error",void 0),__decorate([mobx_1.action.bound],FeedbackForm.prototype,"onSubmit",null),__decorate([mobx_1.action.bound],FeedbackForm.prototype,"onName",null),__decorate([mobx_1.action.bound],FeedbackForm.prototype,"onEmail",null),__decorate([mobx_1.action.bound],FeedbackForm.prototype,"onMessage",null),__decorate([mobx_1.action.bound],FeedbackForm.prototype,"onClose",null),FeedbackForm=__decorate([mobx_react_1.observer],FeedbackForm),exports.FeedbackForm=FeedbackForm;var FeedbackPrompt=function(_react_1$default$Comp2){_inherits(FeedbackPrompt,_react_1$default$Comp2);var _super2=_createSuper(FeedbackPrompt);function FeedbackPrompt(){var _this2;return _classCallCheck(this,FeedbackPrompt),(_this2=_super2.apply(this,arguments)).isOpen=!1,_this2}return _createClass(FeedbackPrompt,[{key:"toggleOpen",value:function toggleOpen(){this.isOpen=!this.isOpen}},{key:"onClose",value:function onClose(){this.isOpen=!1}},{key:"onClickOutside",value:function onClickOutside(){this.onClose()}},{key:"render",value:function render(){return react_1.default.createElement("div",{className:"feedbackPromptContainer".concat(this.isOpen?" active":"")},react_1.default.createElement("div",{style:{display:this.isOpen?"block":"none"}},react_1.default.createElement("div",{className:"overlay",onClick:this.onClickOutside}),react_1.default.createElement("div",{className:"box"},react_1.default.createElement(FeedbackForm,{onClose:this.onClose}))),this.isOpen?react_1.default.createElement("button",{className:"prompt",onClick:this.toggleOpen},react_1.default.createElement(react_fontawesome_1.FontAwesomeIcon,{icon:faTimes_1.faTimes})," Close"):react_1.default.createElement("button",{className:"prompt","data-track-note":"page-open-feedback",onClick:this.toggleOpen},react_1.default.createElement(react_fontawesome_1.FontAwesomeIcon,{icon:faCommentAlt_1.faCommentAlt})," Feedback"))}}]),FeedbackPrompt}(react_1.default.Component);__decorate([mobx_1.observable],FeedbackPrompt.prototype,"isOpen",void 0),__decorate([mobx_1.action.bound],FeedbackPrompt.prototype,"toggleOpen",null),__decorate([mobx_1.action.bound],FeedbackPrompt.prototype,"onClose",null),__decorate([mobx_1.action.bound],FeedbackPrompt.prototype,"onClickOutside",null),FeedbackPrompt=__decorate([mobx_react_1.observer],FeedbackPrompt),exports.FeedbackPrompt=FeedbackPrompt,exports.runFeedbackPage=function runFeedbackPage(){react_dom_1.default.render(react_1.default.createElement("div",{className:"box"},react_1.default.createElement(FeedbackForm,null)),document.querySelector(".FeedbackPage main"))}},199:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ColumnTypeNames=void 0,function(ColumnTypeNames){ColumnTypeNames.Numeric="Numeric",ColumnTypeNames.String="String",ColumnTypeNames.Region="Region",ColumnTypeNames.SeriesAnnotation="SeriesAnnotation",ColumnTypeNames.Categorical="Categorical",ColumnTypeNames.Continent="Continent",ColumnTypeNames.EntityName="EntityName",ColumnTypeNames.EntityId="EntityId",ColumnTypeNames.EntityCode="EntityCode",ColumnTypeNames.Boolean="Boolean",ColumnTypeNames.Currency="Currency",ColumnTypeNames.Percentage="Percentage",ColumnTypeNames.RelativePercentage="RelativePercentage",ColumnTypeNames.DecimalPercentage="DecimalPercentage",ColumnTypeNames.Integer="Integer",ColumnTypeNames.PercentChangeOverTime="PercentChangeOverTime",ColumnTypeNames.Ratio="Ratio",ColumnTypeNames.Year="Year",ColumnTypeNames.Day="Day",ColumnTypeNames.Date="Date",ColumnTypeNames.Color="Color",ColumnTypeNames.Population="Population",ColumnTypeNames.PopulationDensity="PopulationDensity",ColumnTypeNames.Age="Age",ColumnTypeNames.Quarter="Quarter"}(exports.ColumnTypeNames||(exports.ColumnTypeNames={}))},201:function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=arr&&("undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"]);if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(29),__webpack_require__(7),__webpack_require__(75),__webpack_require__(5),__webpack_require__(6),__webpack_require__(8),__webpack_require__(28),__webpack_require__(33),__webpack_require__(25),__webpack_require__(36),__webpack_require__(57),__webpack_require__(68),__webpack_require__(31),__webpack_require__(48),__webpack_require__(55),__webpack_require__(467),__webpack_require__(119),__webpack_require__(22),__webpack_require__(79),__webpack_require__(132),__webpack_require__(9),__webpack_require__(10),__webpack_require__(11),__webpack_require__(18),__webpack_require__(21),__webpack_require__(17);var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};Object.defineProperty(exports,"__esModule",{value:!0}),exports.BlankOwidTable=exports.OwidTable=void 0;var Util_1=__webpack_require__(40),isPresent_1=__webpack_require__(241),CoreTableConstants_1=__webpack_require__(276),CoreColumnDef_1=__webpack_require__(199),CoreTable_1=__webpack_require__(598),PopulationMap_1=__webpack_require__(988),OwidTableConstants_1=__webpack_require__(172),ErrorValues_1=__webpack_require__(277),OwidTableUtil_1=__webpack_require__(980),CoreTableUtils_1=__webpack_require__(320),CoreTableColumns_1=__webpack_require__(466),OwidTable=function(_CoreTable_1$CoreTabl){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(OwidTable,_CoreTable_1$CoreTabl);var _super=_createSuper(OwidTable);function OwidTable(){var _this;return _classCallCheck(this,OwidTable),(_this=_super.apply(this,arguments)).entityType="Country",_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(OwidTable,[{key:"availableEntityNames",get:function get(){return Array.from(this.availableEntityNameSet)}},{key:"availableEntityNameSet",get:function get(){return new Set(this.entityNameColumn.uniqValues)}},{key:"entityIdToNameMap",get:function get(){return this.valueIndex(this.entityIdColumn.slug,this.entityNameColumn.slug)}},{key:"entityCodeToNameMap",get:function get(){return this.valueIndex(this.entityCodeColumn.slug,this.entityNameColumn.slug)}},{key:"entityNameToIdMap",get:function get(){return this.valueIndex(this.entityNameColumn.slug,this.entityIdColumn.slug)}},{key:"entityNameToCodeMap",get:function get(){return this.valueIndex(this.entityNameColumn.slug,this.entityCodeColumn.slug)}},{key:"maxTime",get:function get(){return Util_1.last(this.allTimes)}},{key:"entityIdColumn",get:function get(){var _a;return null!==(_a=this.getFirstColumnWithType(CoreColumnDef_1.ColumnTypeNames.EntityId))&&void 0!==_a?_a:this.get(OwidTableConstants_1.OwidTableSlugs.entityId)}},{key:"entityCodeColumn",get:function get(){var _a;return null!==(_a=this.getFirstColumnWithType(CoreColumnDef_1.ColumnTypeNames.EntityCode))&&void 0!==_a?_a:this.get(OwidTableConstants_1.OwidTableSlugs.entityCode)}},{key:"minTime",get:function get(){return this.allTimes[0]}},{key:"allTimes",get:function get(){return this.sortedByTime.get(this.timeColumn.slug).values}},{key:"rowIndicesByEntityName",get:function get(){return this.rowIndex([this.entityNameSlug])}},{key:"getAnnotationColumnSlug",value:function getAnnotationColumnSlug(columnDef){return Util_1.isEmpty(null==columnDef?void 0:columnDef.annotationsColumnSlug)?Util_1.makeAnnotationsSlug(columnDef.slug):columnDef.annotationsColumnSlug}},{key:"getAnnotationColumnForColumn",value:function getAnnotationColumnForColumn(columnSlug){var def=this.get(columnSlug).def,slug=this.getAnnotationColumnSlug(def);return this.get(slug)}},{key:"getTimesUniqSortedAscForColumns",value:function getTimesUniqSortedAscForColumns(columnSlugs){return Util_1.sortNumeric(Util_1.uniq(Util_1.flatten(this.getColumns(columnSlugs).filter((function(col){return col})).map((function(col){return col.uniqTimesAsc})))))}},{key:"timeDomainFor",value:function timeDomainFor(slugs){var cols=this.getColumns(slugs),mins=cols.map((function(col){return col.minTime})),maxes=cols.map((function(col){return col.maxTime}));return[Util_1.min(mins),Util_1.max(maxes)]}},{key:"originalTimeDomainFor",value:function originalTimeDomainFor(slugs){var cols=this.getColumns(slugs),mins=cols.map((function(col){return Util_1.min(col.originalTimes)})),maxes=cols.map((function(col){return Util_1.max(col.originalTimes)}));return[Util_1.min(mins),Util_1.max(maxes)]}},{key:"filterByEntityNames",value:function filterByEntityNames(names){var namesSet=new Set(names);return this.columnFilter(this.entityNameSlug,(function(value){return namesSet.has(value)}),"Filter out all entities except '".concat(names,"'"))}},{key:"sortedByTime",get:function get(){return this.timeColumn.isMissing?this:this.sortBy([this.timeColumn.slug])}},{key:"filterByTimeRange",value:function filterByTimeRange(start,end){var _a,adjustedStart=start===1/0?this.maxTime:start,adjustedEnd=end===-1/0?this.minTime:end,timeColumnSlug=(null===(_a=this.timeColumn)||void 0===_a?void 0:_a.slug)||OwidTableConstants_1.OwidTableSlugs.time;return this.sortedByTime.columnFilter(timeColumnSlug,(function(time){return time>=adjustedStart&&time<=adjustedEnd}),"Keep only rows with Time between ".concat(adjustedStart," - ").concat(adjustedEnd))}},{key:"filterByTargetTimes",value:function filterByTargetTimes(targetTimes){var tolerance=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,timeColumn=this.timeColumn,timeValues=timeColumn.valuesIncludingErrorValues,entityNameToIndices=this.rowIndicesByEntityName,matchingIndices=new Set;return this.availableEntityNames.forEach((function(entityName){var indices=entityNameToIndices.get(entityName)||[],allTimes=indices.map((function(index){return timeValues[index]}));targetTimes.forEach((function(targetTime){var index=Util_1.findClosestTimeIndex(allTimes,targetTime,tolerance);void 0!==index&&matchingIndices.add(indices[index])}))})),this.columnFilter(this.entityNameSlug,(function(row,index){return matchingIndices.has(index)}),"Keep a row for each entity for each of the closest times ".concat(targetTimes.join(", ")," with tolerance ").concat(tolerance))}},{key:"dropRowsWithErrorValuesForColumn",value:function dropRowsWithErrorValuesForColumn(slug){return this.columnFilter(slug,(function(value){return ErrorValues_1.isNotErrorValue(value)}),"Drop rows with empty or ErrorValues in ".concat(slug," column"))}},{key:"dropRowsWithErrorValuesForAnyColumn",value:function dropRowsWithErrorValuesForAnyColumn(slugs){return this.rowFilter((function(row){return slugs.every((function(slug){return ErrorValues_1.isNotErrorValue(row[slug])}))}),"Drop rows with empty or ErrorValues in any column: ".concat(slugs.join(", ")))}},{key:"dropRowsWithErrorValuesForAllColumns",value:function dropRowsWithErrorValuesForAllColumns(slugs){return this.rowFilter((function(row){return slugs.some((function(slug){return ErrorValues_1.isNotErrorValue(row[slug])}))}),"Drop rows with empty or ErrorValues in every column: ".concat(slugs.join(", ")))}},{key:"sumsByTime",value:function sumsByTime(columnSlug){var timeValues=this.timeColumn.values,values=this.get(columnSlug).values,map=new Map;return timeValues.forEach((function(time,index){var _a;return map.set(time,(null!==(_a=map.get(time))&&void 0!==_a?_a:0)+values[index])})),map}},{key:"toPercentageFromEachEntityForEachTime",value:function toPercentageFromEachEntityForEachTime(columnSlug){if(!this.has(columnSlug))return this;var timeColumn=this.timeColumn,col=this.get(columnSlug),timeTotals=this.sumsByTime(columnSlug),timeValues=timeColumn.values,newDefs=CoreTableUtils_1.replaceDef(this.defs,[OwidTableUtil_1.toPercentageColumnDef(col.def,CoreColumnDef_1.ColumnTypeNames.RelativePercentage)]),newColumnStore=Object.assign(Object.assign({},this.columnStore),_defineProperty({},columnSlug,this.columnStore[columnSlug].map((function(val,index){var timeTotal=timeTotals.get(timeValues[index]);return 0===timeTotal?ErrorValues_1.ErrorValueTypes.DivideByZeroError:100*val/timeTotal}))));return this.transform(newColumnStore,newDefs,"Transformed ".concat(columnSlug," column to be % contribution of each entity for that time"),CoreTableConstants_1.TransformType.UpdateColumnDefsAndApply)}},{key:"toPercentageFromEachColumnForEachEntityAndTime",value:function toPercentageFromEachColumnForEachEntityAndTime(columnSlugs){var _this2=this;if(!(columnSlugs=columnSlugs.filter((function(slug){return _this2.has(slug)}))).length)return this;var newDefs=this.defs.map((function(def){return columnSlugs.includes(def.slug)?OwidTableUtil_1.toPercentageColumnDef(def,CoreColumnDef_1.ColumnTypeNames.RelativePercentage):def})),columnStore=this.columnStore,columnStorePatch={},totals=new Array(this.numRows).fill(0).map((function(_,i){return Util_1.sumBy(columnSlugs,(function(slug){var value=columnStore[slug][i];return Util_1.isNumber(value)?Math.abs(value):0}))}));columnSlugs.forEach((function(slug){columnStorePatch[slug]=columnStore[slug].map((function(value,i){var total=totals[i];return Util_1.isNumber(value)&&Util_1.isNumber(total)?0===total?ErrorValues_1.ErrorValueTypes.DivideByZeroError:100*Math.abs(value)/total:value}))}));var newColumnStore=Object.assign(Object.assign({},columnStore),columnStorePatch);return this.transform(newColumnStore,newDefs,"Transformed columns from absolute numbers to % of abs sum of ".concat(columnSlugs.join(",")," "),CoreTableConstants_1.TransformType.UpdateColumnDefs)}},{key:"toTotalGrowthForEachColumnComparedToStartTime",value:function toTotalGrowthForEachColumnComparedToStartTime(startTimeBound,columnSlugs){var _this3=this;if(this.timeColumn.isMissing)return this;var timeColumnSlug=this.timeColumn.slug,newDefs=this.defs.map((function(def){return columnSlugs.includes(def.slug)?OwidTableUtil_1.toPercentageColumnDef(def,CoreColumnDef_1.ColumnTypeNames.PercentChangeOverTime):def})),newRows=Util_1.flatten(Object.values(Util_1.groupBy(this.sortedByTime.rows,(function(row){return row[_this3.entityNameSlug]}))).map((function(rowsForSingleEntity){return columnSlugs.forEach((function(valueSlug){var comparisonValue;rowsForSingleEntity=rowsForSingleEntity.map((function(row){var newRow=Object.assign({},row),value=row[valueSlug];return row[timeColumnSlug]<startTimeBound?newRow[valueSlug]=ErrorValues_1.ErrorValueTypes.MissingValuePlaceholder:Util_1.isNumber(value)?void 0!==comparisonValue?newRow[valueSlug]=100*(value-comparisonValue)/Math.abs(comparisonValue):0===value?newRow[valueSlug]=ErrorValues_1.ErrorValueTypes.MissingValuePlaceholder:(comparisonValue=value,newRow[valueSlug]=0):newRow[valueSlug]=ErrorValues_1.ErrorValueTypes.NaNButShouldBeNumber,newRow}))})),rowsForSingleEntity})));return this.transform(newRows,newDefs,"Transformed columns from absolute values to % of time ".concat(startTimeBound," for columns ").concat(columnSlugs.join(",")," "),CoreTableConstants_1.TransformType.UpdateColumnDefs)}},{key:"keepMinTimeAndMaxTimeForEachEntityOnly",value:function keepMinTimeAndMaxTimeForEachEntityOnly(){var indexMap=this.rowIndicesByEntityName,timeColumn=this.timeColumn;if(timeColumn.isMissing)return this;var timeValues=timeColumn.valuesIncludingErrorValues,matchingIndices=new Set;return indexMap.forEach((function(indices){return[Util_1.minBy,Util_1.maxBy].map((function(f){return f(indices,(function(index){return timeValues[index]}))})).filter(isPresent_1.isPresent).forEach((function(index){return matchingIndices.add(index)}))})),this.columnFilter(timeColumn.slug,(function(row,index){return matchingIndices.has(index)}),"Keep minTime & maxTime rows only for each entity")}},{key:"getAverageAnnualChangeIndicesByEntity",value:function getAverageAnnualChangeIndicesByEntity(columnSlugs){var _this4=this,columns=columnSlugs.map((function(slug){return _this4.get(slug)})),indexMap=this.rowIndicesByEntityName,timeValues=this.timeColumn.valuesIncludingErrorValues,entityNameToIndices=new Map;return indexMap.forEach((function(indices,entityName){var nonZeroValueIndices=indices.filter((function(index){return columns.every((function(col){var value=col.valuesIncludingErrorValues[index];return Util_1.isNumber(value)&&0!==value}))})),minIndex=Util_1.minBy(nonZeroValueIndices,(function(index){return timeValues[index]})),maxIndex=Util_1.maxBy(indices,(function(index){return timeValues[index]}));void 0!==minIndex&&void 0!==maxIndex&&(columns.every((function(col){var originalTimes=_this4.columnStore[col.originalTimeColumnSlug];return originalTimes[minIndex]!==originalTimes[maxIndex]}))&&entityNameToIndices.set(entityName,[minIndex,maxIndex]))})),entityNameToIndices}},{key:"toAverageAnnualChangeForEachEntity",value:function toAverageAnnualChangeForEachEntity(columnSlugs){var _this5=this;if(columnSlugs=columnSlugs.filter((function(slug){return _this5.has(slug)})),this.timeColumn.isMissing||!(this.timeColumn instanceof CoreTableColumns_1.ColumnTypeMap.Year)||0===columnSlugs.length)return this;var columns=columnSlugs.map((function(slug){return _this5.get(slug)})),entityNameToIndices=this.getAverageAnnualChangeIndicesByEntity(columnSlugs),rows=[];entityNameToIndices.forEach((function(indices){var _this5$rowsAt2=_slicedToArray(_this5.rowsAt(indices),2),startRow=_this5$rowsAt2[0],endRow=_this5$rowsAt2[1],newRow=Object.assign({},endRow);columns.forEach((function(col){var timeSlug=col.originalTimeColumnSlug,yearsElapsed=endRow[timeSlug]-startRow[timeSlug];newRow[col.slug]=Util_1.cagr(startRow[col.slug],endRow[col.slug],yearsElapsed)})),rows.push(newRow)}));var newDefs=CoreTableUtils_1.replaceDef(this.defs,columns.map((function(col){return OwidTableUtil_1.toPercentageColumnDef(col.def,CoreColumnDef_1.ColumnTypeNames.PercentChangeOverTime)})));return this.transform(rows,newDefs,"Average annual change for columns: ".concat(columnSlugs.join(", ")),CoreTableConstants_1.TransformType.UpdateRows)}},{key:"suggestedYColumnSlugs",get:function get(){var skips=new Set([OwidTableConstants_1.OwidTableSlugs.entityId,OwidTableConstants_1.OwidTableSlugs.time,OwidTableConstants_1.OwidTableSlugs.year,OwidTableConstants_1.OwidTableSlugs.day]);return this.numericColumnSlugs.filter((function(slug){return!skips.has(slug)}))}},{key:"toPrettyCsv",value:function toPrettyCsv(){return this.dropColumns([OwidTableConstants_1.OwidTableSlugs.entityId,OwidTableConstants_1.OwidTableSlugs.time,OwidTableConstants_1.OwidTableSlugs.entityColor]).sortBy([this.entityNameSlug]).toCsvWithColumnNames()}},{key:"entityNameColorIndex",get:function get(){return this.valueIndex(this.entityNameSlug,OwidTableConstants_1.OwidTableSlugs.entityColor)}},{key:"getColorForEntityName",value:function getColorForEntityName(entityName){return this.entityNameColorIndex.get(entityName)}},{key:"columnDisplayNameToColorMap",get:function get(){return new Map(this.columnsAsArray.filter((function(col){return col.def.color})).map((function(col){return[col.displayName,col.def.color]})))}},{key:"getColorForColumnByDisplayName",value:function getColorForColumnByDisplayName(displayName){return this.columnDisplayNameToColorMap.get(displayName)}},{key:"getLatestValueForEntity",value:function getLatestValueForEntity(entityName,columnSlug){var indices=this.rowIndicesByEntityName.get(entityName);if(indices){var values=this.get(columnSlug).valuesIncludingErrorValues,index=indices.slice().reverse().find((function(index){return!(values[index]instanceof ErrorValues_1.ErrorValue)}));return void 0!==index?values[index]:void 0}}},{key:"entitiesWith",value:function entitiesWith(columnSlugs){var _this6=this;return columnSlugs.length?1===columnSlugs.length?new Set(this.get(columnSlugs[0]).uniqEntityNames):Util_1.intersectionOfSets(columnSlugs.map((function(slug){return new Set(_this6.get(slug).uniqEntityNames)}))):new Set}},{key:"interpolate",value:function interpolate(withAllRows,columnSlug,timeColumnSlug,interpolation,context){var groupBoundaries=withAllRows.groupBoundaries(this.entityNameSlug),newValues=withAllRows.get(columnSlug).valuesIncludingErrorValues.slice(),newTimes=withAllRows.get(timeColumnSlug).valuesIncludingErrorValues.slice();return groupBoundaries.forEach((function(_,index){interpolation(newValues,newTimes,context,groupBoundaries[index],groupBoundaries[index+1])})),{values:newValues,times:newTimes}}},{key:"interpolateColumnWithTolerance",value:function interpolateColumnWithTolerance(columnSlug,toleranceOverride){var _a,_b;if(!this.has(columnSlug))return this;var columnStore,column=this.get(columnSlug),columnDef=column.def,tolerance=null!==(_a=null!=toleranceOverride?toleranceOverride:column.tolerance)&&void 0!==_a?_a:0,timeColumnOfTable=this.timeColumn.isMissing?this.get(OwidTableConstants_1.OwidTableSlugs.time):this.timeColumn,maybeTimeColumnOfValue=null!==(_b=OwidTableUtil_1.getOriginalTimeColumnSlug(this,columnSlug))&&void 0!==_b?_b:OwidTableUtil_1.timeColumnSlugFromColumnDef(columnDef),timeColumnOfValue=this.get(maybeTimeColumnOfValue),originalTimeSlug=OwidTableUtil_1.makeOriginalTimeSlugFromColumnSlug(columnSlug);if(tolerance){var _Object$assign2,withAllRows=this.complete([this.entityNameSlug,timeColumnOfTable.slug]).sortBy([this.entityNameSlug,timeColumnOfTable.slug]),interpolationResult=this.interpolate(withAllRows,columnSlug,timeColumnOfValue.slug,CoreTableUtils_1.toleranceInterpolation,{timeTolerance:tolerance});columnStore=Object.assign(Object.assign({},withAllRows.columnStore),(_defineProperty(_Object$assign2={},columnSlug,interpolationResult.values),_defineProperty(_Object$assign2,originalTimeSlug,interpolationResult.times),_Object$assign2))}else columnStore=Object.assign(Object.assign({},this.columnStore),_defineProperty({},originalTimeSlug,timeColumnOfValue.valuesIncludingErrorValues));return this.transform(columnStore,[].concat(_toConsumableArray(this.defs),[Object.assign(Object.assign({},timeColumnOfValue.def),{slug:originalTimeSlug})]),"Interpolated values in column ".concat(columnSlug," with tolerance ").concat(tolerance," and appended column ").concat(originalTimeSlug," with the original times"),CoreTableConstants_1.TransformType.UpdateColumnDefs)}},{key:"interpolateColumnLinearly",value:function interpolateColumnLinearly(columnSlug){var _a,_b,extrapolate=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.has(columnSlug))return this;var column=this.get(columnSlug),columnDef=null==column?void 0:column.def,maybeTimeColumnSlug=null!==(_a=OwidTableUtil_1.getOriginalTimeColumnSlug(this,columnSlug))&&void 0!==_a?_a:OwidTableUtil_1.timeColumnSlugFromColumnDef(columnDef),timeColumn=null!==(_b=this.get(maybeTimeColumnSlug))&&void 0!==_b?_b:this.get(OwidTableConstants_1.OwidTableSlugs.time),withAllRows=this.complete([this.entityNameSlug,timeColumn.slug]).sortBy([this.entityNameSlug,timeColumn.slug]),interpolationResult=this.interpolate(withAllRows,columnSlug,timeColumn.slug,CoreTableUtils_1.linearInterpolation,{extrapolateAtStart:extrapolate,extrapolateAtEnd:extrapolate}),columnStore=Object.assign(Object.assign({},withAllRows.columnStore),_defineProperty({},columnSlug,interpolationResult.values));return this.transform(columnStore,[].concat(_toConsumableArray(this.defs),[Object.assign({},timeColumn.def)]),"Interpolated values in column ".concat(columnSlug," linearly"),CoreTableConstants_1.TransformType.UpdateColumnDefs)}},{key:"interpolateColumnsByClosestTimeMatch",value:function interpolateColumnsByClosestTimeMatch(columnSlugA,columnSlugB){var _Object$assign5,_a,_b;if(!this.has(columnSlugA)||!this.has(columnSlugB))return this;var columnA=this.get(columnSlugA),columnB=this.get(columnSlugB),toleranceA=null!==(_a=columnA.tolerance)&&void 0!==_a?_a:0,toleranceB=null!==(_b=columnB.tolerance)&&void 0!==_b?_b:0;if(this.timeColumn.isMissing||this.timeColumn.slug!==columnA.originalTimeColumnSlug||this.timeColumn.slug!==columnB.originalTimeColumnSlug||0===toleranceA&&0===toleranceB)return this;var maxDiff=Math.max(toleranceA,toleranceB),withAllRows=this.complete([this.entityNameSlug,this.timeColumn.slug]).sortBy([this.entityNameSlug,this.timeColumn.slug]),valuesA=withAllRows.get(columnA.slug).valuesIncludingErrorValues,valuesB=withAllRows.get(columnB.slug).valuesIncludingErrorValues,times=withAllRows.timeColumn.valuesIncludingErrorValues,newValuesA=new Array(times.length).fill(ErrorValues_1.ErrorValueTypes.NoValueWithinTolerance),newValuesB=new Array(times.length).fill(ErrorValues_1.ErrorValueTypes.NoValueWithinTolerance),newTimesA=new Array(times.length).fill(ErrorValues_1.ErrorValueTypes.NoValueWithinTolerance),newTimesB=new Array(times.length).fill(ErrorValues_1.ErrorValueTypes.NoValueWithinTolerance),groupBoundaries=withAllRows.groupBoundaries(this.entityNameSlug);Util_1.pairs(groupBoundaries).forEach((function(_ref){for(var _ref2=_slicedToArray(_ref,2),startIndex=_ref2[0],endIndex=_ref2[1],availableTimesA=[],availableTimesB=[],index=startIndex;index<endIndex;index++)ErrorValues_1.isNotErrorValue(valuesA[index])&&availableTimesA.push(times[index]),ErrorValues_1.isNotErrorValue(valuesB[index])&&availableTimesB.push(times[index]);for(var timePairs=Util_1.getClosestTimePairs(availableTimesA,availableTimesB,maxDiff),timeAtoTimeB=new Map(timePairs),pairedTimesInA=Util_1.sortNumeric(Array.from(timeAtoTimeB.keys())),_index=startIndex;_index<endIndex;_index++){var currentTime=times[_index],candidateTimeA=Util_1.sortedFindClosest(pairedTimesInA,currentTime);if(void 0!==candidateTimeA){var candidateIndexA=times.indexOf(candidateTimeA,startIndex);if(!(Math.abs(currentTime-candidateTimeA)>toleranceA)){var candidateTimeB=timeAtoTimeB.get(candidateTimeA);if(!(void 0===candidateTimeB||Math.abs(currentTime-candidateTimeB)>toleranceB)){var candidateIndexB=times.indexOf(candidateTimeB,startIndex);newValuesA[_index]=valuesA[candidateIndexA],newValuesB[_index]=valuesB[candidateIndexB],newTimesA[_index]=times[candidateIndexA],newTimesB[_index]=times[candidateIndexB]}}}}}));var originalTimeColumnASlug=OwidTableUtil_1.makeOriginalTimeSlugFromColumnSlug(columnA.slug),originalTimeColumnBSlug=OwidTableUtil_1.makeOriginalTimeSlugFromColumnSlug(columnB.slug),columnStore=Object.assign(Object.assign({},withAllRows.columnStore),(_defineProperty(_Object$assign5={},columnA.slug,newValuesA),_defineProperty(_Object$assign5,columnB.slug,newValuesB),_defineProperty(_Object$assign5,originalTimeColumnASlug,newTimesA),_defineProperty(_Object$assign5,originalTimeColumnBSlug,newTimesB),_Object$assign5));return withAllRows.transform(columnStore,[].concat(_toConsumableArray(withAllRows.defs),[Object.assign(Object.assign({},withAllRows.timeColumn.def),{slug:originalTimeColumnASlug}),Object.assign(Object.assign({},withAllRows.timeColumn.def),{slug:originalTimeColumnBSlug})]),"Interpolated values",CoreTableConstants_1.TransformType.UpdateColumnDefs)}},{key:"getClosestIndexForEachEntity",value:function getClosestIndexForEachEntity(entityNames,targetTime,tolerance){var indexMap=this.rowIndicesByEntityName,timeColumn=this.timeColumn;if(this.timeColumn.isMissing)return[];var timeValues=timeColumn.valuesIncludingErrorValues;return entityNames.map((function(name){var rowIndices=indexMap.get(name);if(!rowIndices)return null;var rowIndex=Util_1.findClosestTimeIndex(rowIndices.map((function(index){return timeValues[index]})),targetTime,tolerance);return rowIndex?rowIndices[rowIndex]:null})).filter(isPresent_1.isPresent)}},{key:"filterByPopulationExcept",value:function filterByPopulationExcept(minPop){var entityNames=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],set=new Set(entityNames);return this.columnFilter(this.entityNameSlug,(function(value){var name=value,pop=PopulationMap_1.populationMap[name];return!pop||set.has(name)||pop>=minPop}),"Filter out countries with population less than ".concat(minPop))}},{key:"availableEntities",get:function get(){var entityNameToCodeMap=this.entityNameToCodeMap,entityNameToIdMap=this.entityNameToIdMap;return this.availableEntityNames.map((function(entityName){return{entityName:entityName,entityId:entityNameToIdMap.get(entityName),entityCode:entityNameToCodeMap.get(entityName)}}))}},{key:"sampleEntityName",value:function sampleEntityName(){var howMany=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.availableEntityNames.slice(0,howMany)}},{key:"isBlank",get:function get(){return this.tableDescription.startsWith(BLANK_TABLE_MESSAGE)&&!this.numRows}}]),OwidTable}(CoreTable_1.CoreTable);__decorate([CoreTableUtils_1.imemo],OwidTable.prototype,"availableEntityNames",null),__decorate([CoreTableUtils_1.imemo],OwidTable.prototype,"availableEntityNameSet",null),__decorate([CoreTableUtils_1.imemo],OwidTable.prototype,"entityIdToNameMap",null),__decorate([CoreTableUtils_1.imemo],OwidTable.prototype,"entityCodeToNameMap",null),__decorate([CoreTableUtils_1.imemo],OwidTable.prototype,"entityNameToIdMap",null),__decorate([CoreTableUtils_1.imemo],OwidTable.prototype,"entityNameToCodeMap",null),__decorate([CoreTableUtils_1.imemo],OwidTable.prototype,"maxTime",null),__decorate([CoreTableUtils_1.imemo],OwidTable.prototype,"entityIdColumn",null),__decorate([CoreTableUtils_1.imemo],OwidTable.prototype,"entityCodeColumn",null),__decorate([CoreTableUtils_1.imemo],OwidTable.prototype,"minTime",null),__decorate([CoreTableUtils_1.imemo],OwidTable.prototype,"allTimes",null),__decorate([CoreTableUtils_1.imemo],OwidTable.prototype,"rowIndicesByEntityName",null),__decorate([CoreTableUtils_1.imemo],OwidTable.prototype,"sortedByTime",null),__decorate([CoreTableUtils_1.imemo],OwidTable.prototype,"suggestedYColumnSlugs",null),__decorate([CoreTableUtils_1.imemo],OwidTable.prototype,"entityNameColorIndex",null),__decorate([CoreTableUtils_1.imemo],OwidTable.prototype,"columnDisplayNameToColorMap",null),__decorate([CoreTableUtils_1.imemo],OwidTable.prototype,"availableEntities",null),exports.OwidTable=OwidTable;var BLANK_TABLE_MESSAGE="Table is empty.";exports.BlankOwidTable=function BlankOwidTable(){var tableSlug=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"blankOwidTable",extraTableDescription=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new OwidTable(void 0,[{slug:OwidTableConstants_1.OwidTableSlugs.entityName},{slug:OwidTableConstants_1.OwidTableSlugs.year,type:CoreColumnDef_1.ColumnTypeNames.Year}],{tableDescription:BLANK_TABLE_MESSAGE+extraTableDescription,tableSlug:tableSlug})}},203:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(18),__webpack_require__(21);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.NoDataModal=void 0;var React=__importStar(__webpack_require__(0)),mobx_1=__webpack_require__(41),mobx_react_1=__webpack_require__(58),Bounds_1=__webpack_require__(73),react_fontawesome_1=__webpack_require__(123),faPlus_1=__webpack_require__(1852),faExchangeAlt_1=__webpack_require__(1014),NoDataModal=function(_React$Component){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(NoDataModal,_React$Component);var _super=_createSuper(NoDataModal);function NoDataModal(){return _classCallCheck(this,NoDataModal),_super.apply(this,arguments)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(NoDataModal,[{key:"onDataSelect",value:function onDataSelect(){this.props.manager.isSelectingData=!0}},{key:"bounds",get:function get(){var _a;return null!==(_a=this.props.bounds)&&void 0!==_a?_a:Bounds_1.DEFAULT_BOUNDS}},{key:"render",value:function render(){var _this$props=this.props,message=_this$props.message,manager=_this$props.manager,entityType=manager.entityType,bounds=this.bounds;return React.createElement("foreignObject",{x:bounds.left,y:bounds.top,width:bounds.width,height:bounds.height},React.createElement("div",{className:"NoData"},React.createElement("p",{className:"message"},message||"No available data"),React.createElement("div",{className:"actions"},manager.canAddData&&React.createElement("button",{className:"action",onClick:this.onDataSelect},React.createElement(react_fontawesome_1.FontAwesomeIcon,{icon:faPlus_1.faPlus})," Add"," ",entityType),manager.canChangeEntity&&React.createElement("button",{className:"action",onClick:this.onDataSelect},React.createElement(react_fontawesome_1.FontAwesomeIcon,{icon:faExchangeAlt_1.faExchangeAlt})," Change"," ",entityType))))}}]),NoDataModal}(React.Component);__decorate([mobx_1.action.bound],NoDataModal.prototype,"onDataSelect",null),__decorate([mobx_1.computed],NoDataModal.prototype,"bounds",null),NoDataModal=__decorate([mobx_react_1.observer],NoDataModal),exports.NoDataModal=NoDataModal},216:function(module,exports,__webpack_require__){"use strict";function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(18),__webpack_require__(21);var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};Object.defineProperty(exports,"__esModule",{value:!0}),exports.AxisConfig=void 0;var GrapherConstants_1=__webpack_require__(64),Util_1=__webpack_require__(40),mobx_1=__webpack_require__(41),Axis_1=__webpack_require__(389),Persistable_1=__webpack_require__(322),AxisConfigDefaults=function AxisConfigDefaults(){_classCallCheck(this,AxisConfigDefaults),this.min=void 0,this.max=void 0,this.canChangeScaleType=void 0,this.removePointsOutsideDomain=void 0,this.minSize=void 0,this.hideAxis=void 0,this.labelPadding=void 0,this.nice=void 0,this.maxTicks=void 0,this.compactLabels=void 0,this.scaleType=GrapherConstants_1.ScaleType.linear,this.facetDomain=GrapherConstants_1.FacetAxisDomain.shared,this.label=""};__decorate([mobx_1.observable.ref],AxisConfigDefaults.prototype,"min",void 0),__decorate([mobx_1.observable.ref],AxisConfigDefaults.prototype,"max",void 0),__decorate([mobx_1.observable.ref],AxisConfigDefaults.prototype,"canChangeScaleType",void 0),__decorate([mobx_1.observable.ref],AxisConfigDefaults.prototype,"removePointsOutsideDomain",void 0),__decorate([mobx_1.observable.ref],AxisConfigDefaults.prototype,"minSize",void 0),__decorate([mobx_1.observable.ref],AxisConfigDefaults.prototype,"hideAxis",void 0),__decorate([mobx_1.observable.ref],AxisConfigDefaults.prototype,"labelPadding",void 0),__decorate([mobx_1.observable.ref],AxisConfigDefaults.prototype,"nice",void 0),__decorate([mobx_1.observable.ref],AxisConfigDefaults.prototype,"maxTicks",void 0),__decorate([mobx_1.observable.ref],AxisConfigDefaults.prototype,"compactLabels",void 0),__decorate([mobx_1.observable.ref],AxisConfigDefaults.prototype,"scaleType",void 0),__decorate([mobx_1.observable.ref],AxisConfigDefaults.prototype,"facetDomain",void 0),__decorate([mobx_1.observable.ref],AxisConfigDefaults.prototype,"label",void 0);var AxisConfig=function(_AxisConfigDefaults){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(AxisConfig,_AxisConfigDefaults);var _super=_createSuper(AxisConfig);function AxisConfig(props,fontSizeManager){var _this;return _classCallCheck(this,AxisConfig),(_this=_super.call(this)).updateFromObject(props),_this.fontSizeManager=fontSizeManager,_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(AxisConfig,[{key:"updateFromObject",value:function updateFromObject(props){props&&Util_1.extend(this,props)}},{key:"toObject",value:function toObject(){var obj=Util_1.trimObject({min:this.min,max:this.max,canChangeScaleType:this.canChangeScaleType,removePointsOutsideDomain:this.removePointsOutsideDomain,minSize:this.minSize,hideAxis:this.hideAxis,labelPadding:this.labelPadding,nice:this.nice,maxTicks:this.maxTicks,compactLabels:this.compactLabels,scaleType:this.scaleType,label:this.label?this.label:void 0,facetDomain:this.facetDomain});return Persistable_1.deleteRuntimeAndUnchangedProps(obj,new AxisConfigDefaults),obj}},{key:"fontSize",get:function get(){var _a;return(null===(_a=this.fontSizeManager)||void 0===_a?void 0:_a.fontSize)||GrapherConstants_1.BASE_FONT_SIZE}},{key:"constrainedMin",get:function get(){var _a,_b;return this.scaleType===GrapherConstants_1.ScaleType.log&&(null!==(_a=this.min)&&void 0!==_a?_a:0)<=0?1/0:null!==(_b=this.min)&&void 0!==_b?_b:1/0}},{key:"shouldRemovePoint",value:function shouldRemovePoint(value){return!!this.removePointsOutsideDomain&&(void 0!==this.min&&value<this.min||void 0!==this.max&&value>this.max)}},{key:"constrainedMax",get:function get(){var _a;return this.scaleType===GrapherConstants_1.ScaleType.log&&(this.max||0)<=0?-1/0:null!==(_a=this.max)&&void 0!==_a?_a:-1/0}},{key:"domain",get:function get(){return[this.constrainedMin,this.constrainedMax]}},{key:"toHorizontalAxis",value:function toHorizontalAxis(){return new Axis_1.HorizontalAxis(this)}},{key:"toVerticalAxis",value:function toVerticalAxis(){return new Axis_1.VerticalAxis(this)}}]),AxisConfig}(AxisConfigDefaults);__decorate([mobx_1.computed],AxisConfig.prototype,"fontSize",null),__decorate([mobx_1.computed],AxisConfig.prototype,"constrainedMin",null),__decorate([mobx_1.computed],AxisConfig.prototype,"constrainedMax",null),__decorate([mobx_1.computed],AxisConfig.prototype,"domain",null),exports.AxisConfig=AxisConfig},239:function(module,exports,__webpack_require__){"use strict";function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}__webpack_require__(25),Object.defineProperty(exports,"__esModule",{value:!0}),exports.PointVector=void 0;var PointVector=function(){function PointVector(x,y){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PointVector),this.x=x,this.y=y}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(PointVector,[{key:"subtract",value:function subtract(v){return new PointVector(this.x-v.x,this.y-v.y)}},{key:"add",value:function add(v){return new PointVector(this.x+v.x,this.y+v.y)}},{key:"times",value:function times(n){return new PointVector(this.x*n,this.y*n)}},{key:"magnitude",get:function get(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))}},{key:"normalize",value:function normalize(){var magnitude=this.magnitude;return magnitude>1e-5?new PointVector(this.x/magnitude,this.y/magnitude):new PointVector(0,0)}},{key:"normals",value:function normals(){return[new PointVector(-this.y,this.x),new PointVector(this.y,-this.x)]}},{key:"toString",value:function toString(){return"PointVector<".concat(this.x,", ").concat(this.y,">")}}],[{key:"distanceSq",value:function distanceSq(a,b){return Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2)}},{key:"distance",value:function distance(a,b){return Math.sqrt(PointVector.distanceSq(a,b))}},{key:"angle",value:function angle(a,b){return 57.29578*Math.acos(Math.max(Math.min(PointVector.dot(a.normalize(),b.normalize()),1),-1))}},{key:"dot",value:function dot(lhs,rhs){return lhs.x*rhs.x+lhs.y*rhs.y}},{key:"distanceFromPointToLineSq",value:function distanceFromPointToLineSq(p,v,w){var l2=PointVector.distanceSq(v,w);if(0===l2)return PointVector.distanceSq(p,v);var t=((p.x-v.x)*(w.x-v.x)+(p.y-v.y)*(w.y-v.y))/l2;return t=Math.max(0,Math.min(1,t)),PointVector.distanceSq(p,new PointVector(v.x+t*(w.x-v.x),v.y+t*(w.y-v.y)))}}]),PointVector}();exports.PointVector=PointVector,PointVector.up=new PointVector(0,-1),PointVector.zero=new PointVector(0,0)},240:function(module,exports,__webpack_require__){"use strict";var GridBoolean;Object.defineProperty(exports,"__esModule",{value:!0}),exports.JSONObjectCellDef=exports.SlugsDeclarationCellDef=exports.FrontierCellClass=exports.SlugDeclarationCellDef=exports.WorkInProgressCellDef=exports.CommentCellDef=exports.NothingGoesThereCellDef=exports.QueryStringCellDef=exports.UrlCellDef=exports.SubTableValueCellDef=exports.SubTableHeaderCellDef=exports.IntegerCellDef=exports.NumericCellDef=exports.RootKeywordCellDef=exports.EnumCellDef=exports.StringDeclarationDef=exports.StringCellDef=exports.BooleanCellDef=exports.Origin=exports.GRID_EDGE_DELIMITER=exports.GRID_CELL_DELIMITER=exports.GRID_NODE_DELIMITER=exports.GridBoolean=exports.CellHasErrorsClass=void 0,exports.CellHasErrorsClass="CellHasErrorsClass",function(GridBoolean){GridBoolean.true="true",GridBoolean.false="false"}(GridBoolean=exports.GridBoolean||(exports.GridBoolean={})),exports.GRID_NODE_DELIMITER="\n",exports.GRID_CELL_DELIMITER="\t",exports.GRID_EDGE_DELIMITER="\t",exports.Origin={row:0,column:0},exports.BooleanCellDef={keyword:"",terminalOptions:[{keyword:GridBoolean.true,cssClass:"",description:""},{keyword:GridBoolean.false,cssClass:"",description:""}],cssClass:"BooleanCellDef",description:"Boolean",parse:function parse(value){return value===GridBoolean.true}},exports.StringCellDef={keyword:"",cssClass:"StringCellDef",description:""},exports.StringDeclarationDef={keyword:"",cssClass:"StringDeclarationDef",description:""},exports.EnumCellDef={keyword:"",cssClass:"EnumCellDef",description:""},exports.RootKeywordCellDef={keyword:"",cssClass:"KeywordCellDef",description:"Keyword"},exports.NumericCellDef={keyword:"",cssClass:"NumericCellDef",description:"",regex:/^-?\d+\.?\d*$/,requirementsDescription:"Must be a number",valuePlaceholder:"98.6",parse:function parse(value){return parseFloat(value)}},exports.IntegerCellDef={keyword:"",cssClass:"IntegerCellDef",description:"",regex:/^[0-9]+$/,requirementsDescription:"Must be an integer",valuePlaceholder:"12345",parse:function parse(value){return parseInt(value)}},exports.SubTableHeaderCellDef={keyword:"",cssClass:"SubTableHeaderCellDef",description:""},exports.SubTableValueCellDef={keyword:"",cssClass:"SubTableValueCellDef",description:""};exports.UrlCellDef={keyword:"",cssClass:"UrlCellDef",description:"",regex:/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)/},exports.QueryStringCellDef={keyword:"",cssClass:"QueryStringCellDef",description:""},exports.NothingGoesThereCellDef={keyword:"",cssClass:"NothingGoesThereType",description:"Nothing should be here. You can make this a comment by prepending a ##"},exports.CommentCellDef={keyword:"",cssClass:"CommentType",description:"Just a comment.",regex:/^(\#\#|ðŸ’¬)/},exports.WorkInProgressCellDef={keyword:"",cssClass:"WorkInProgressCellDef",description:"Not a recognized statement. Treating as a work in progress."},exports.SlugDeclarationCellDef={keyword:"",cssClass:"SlugDeclarationType",description:"A unique URL-friendly name.",regex:/^[a-zA-Z0-9-_]+$/,requirementsDescription:"Can only contain the characters a-zA-Z0-9-_"},exports.FrontierCellClass="ShowDropdownArrow",exports.SlugsDeclarationCellDef={keyword:"",cssClass:"SlugDeclarationType",description:"Unique URL-friendly names.",regex:/^[a-zA-Z0-9-_ ]+$/,requirementsDescription:"Can only contain the characters a-zA-Z0-9-_ "},exports.JSONObjectCellDef={keyword:"",cssClass:"JSONObjectCellDef",description:"JSON object",regex:/^\{.*\}$/,requirementsDescription:"Must contain a valid JSON object"}},241:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isPresent=void 0;exports.isPresent=function isPresent(t){return null!=t}},242:function(module,exports,__webpack_require__){"use strict";function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(65),__webpack_require__(32),__webpack_require__(62),__webpack_require__(36),__webpack_require__(25),__webpack_require__(57),__webpack_require__(28),__webpack_require__(202),__webpack_require__(31),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.TextWrap=void 0;var Util_1=__webpack_require__(40),mobx_1=__webpack_require__(41),Bounds_1=__webpack_require__(73),React=__importStar(__webpack_require__(0));var TextWrap=function(){function TextWrap(props){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TextWrap),this.props=props}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(TextWrap,[{key:"maxWidth",get:function get(){var _a;return null!==(_a=this.props.maxWidth)&&void 0!==_a?_a:1/0}},{key:"lineHeight",get:function get(){var _a;return null!==(_a=this.props.lineHeight)&&void 0!==_a?_a:1.1}},{key:"fontSize",get:function get(){var _a;return null!==(_a=this.props.fontSize)&&void 0!==_a?_a:1}},{key:"fontWeight",get:function get(){return this.props.fontWeight}},{key:"text",get:function get(){return this.props.text}},{key:"lines",get:function get(){var _this=this,text=this.text,maxWidth=this.maxWidth,fontSize=this.fontSize,fontWeight=this.fontWeight,words=Util_1.isEmpty(text)?[]:text.replace(/\n/g," \n").split(" "),lines=[],line=[],lineBounds=Bounds_1.Bounds.empty();return words.forEach((function(word){var nextLine=line.concat([word]),text=_this.props.rawHtml?Util_1.stripHTML(nextLine.join(" ")):nextLine.join(" "),nextBounds=Bounds_1.Bounds.forText(text,{fontSize:fontSize,fontWeight:fontWeight});(function startsWithNewline(text){return/^\n/.test(text)})(word)||nextBounds.width+10>maxWidth&&line.length>=1?(lines.push({text:line.join(" "),width:lineBounds.width,height:lineBounds.height}),line=[word],lineBounds=Bounds_1.Bounds.forText(word,{fontSize:fontSize,fontWeight:fontWeight})):(line=nextLine,lineBounds=nextBounds)})),line.length>0&&lines.push({text:line.join(" "),width:lineBounds.width,height:lineBounds.height}),lines}},{key:"height",get:function get(){return 0===this.lines.length?0:this.lines.reduce((function(total,line){return total+line.height}),0)+this.lineHeight*(this.lines.length-1)}},{key:"width",get:function get(){var _a;return null!==(_a=Util_1.max(this.lines.map((function(l){return l.width}))))&&void 0!==_a?_a:0}},{key:"htmlStyle",get:function get(){var fontSize=this.fontSize,fontWeight=this.fontWeight,lineHeight=this.lineHeight;return{fontSize:fontSize.toFixed(2)+"px",fontWeight:fontWeight,lineHeight:lineHeight,overflowY:"visible"}}},{key:"renderHTML",value:function renderHTML(){var props=this.props,lines=this.lines;return 0===lines.length?null:React.createElement(React.Fragment,null,lines.map((function(line,index){var content=props.rawHtml?React.createElement("span",{dangerouslySetInnerHTML:{__html:line.text}}):props.linkifyText?React.createElement("span",{dangerouslySetInnerHTML:{__html:Util_1.linkify(line.text)}}):line.text;return React.createElement(React.Fragment,{key:index},content,React.createElement("br",null))})))}},{key:"render",value:function render(x,y,options){var props=this.props,lines=this.lines,fontSize=this.fontSize,fontWeight=this.fontWeight,lineHeight=this.lineHeight;if(0===lines.length)return null;var yOffset=y+lines[0].height-.2*lines[0].height;return React.createElement("text",Object.assign({fontSize:fontSize.toFixed(2),fontWeight:fontWeight,x:x.toFixed(1),y:yOffset.toFixed(1)},options),lines.map((function(line,i){return props.rawHtml?React.createElement("tspan",{key:i,x:x,y:yOffset+(0===i?0:lineHeight*fontSize*i),dangerouslySetInnerHTML:{__html:line.text}}):React.createElement("tspan",{key:i,x:x,y:yOffset+(0===i?0:lineHeight*fontSize*i)},line.text)})))}}]),TextWrap}();__decorate([mobx_1.computed],TextWrap.prototype,"maxWidth",null),__decorate([mobx_1.computed],TextWrap.prototype,"lineHeight",null),__decorate([mobx_1.computed],TextWrap.prototype,"fontSize",null),__decorate([mobx_1.computed],TextWrap.prototype,"fontWeight",null),__decorate([mobx_1.computed],TextWrap.prototype,"text",null),__decorate([mobx_1.computed],TextWrap.prototype,"lines",null),__decorate([mobx_1.computed],TextWrap.prototype,"height",null),__decorate([mobx_1.computed],TextWrap.prototype,"width",null),__decorate([mobx_1.computed],TextWrap.prototype,"htmlStyle",null),exports.TextWrap=TextWrap},276:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.JsTypes=exports.TransformType=exports.InputType=exports.SortOrder=void 0,function(SortOrder){SortOrder.asc="asc",SortOrder.desc="desc"}(exports.SortOrder||(exports.SortOrder={})),function(InputType){InputType.Delimited="Delimited",InputType.RowStore="RowStore",InputType.ColumnStore="ColumnStore",InputType.Matrix="Matrix"}(exports.InputType||(exports.InputType={})),function(TransformType){TransformType.LoadFromDelimited="LoadFromDelimited",TransformType.LoadFromRowStore="LoadFromRowStore",TransformType.LoadFromColumnStore="LoadFromColumnStore",TransformType.LoadFromMatrix="LoadFromMatrix",TransformType.Transpose="Transpose",TransformType.Concat="Concat",TransformType.Reduce="Reduce",TransformType.FilterRows="FilterRows",TransformType.SortRows="SortRows",TransformType.AppendRows="AppendRows",TransformType.UpdateRows="UpdateRows",TransformType.InverseFilterRows="InverseFilterRows",TransformType.FilterColumns="FilterColumns",TransformType.SortColumns="SortColumns",TransformType.AppendColumns="AppendColumns",TransformType.UpdateColumnDefs="UpdateColumnDefs",TransformType.UpdateColumnDefsAndApply="UpdateColumnDefsAndApply",TransformType.RenameColumns="RenameColumns",TransformType.InverseFilterColumns="InverseFilterColumns"}(exports.TransformType||(exports.TransformType={})),function(JsTypes){JsTypes.string="string",JsTypes.boolean="boolean",JsTypes.number="number"}(exports.JsTypes||(exports.JsTypes={}))},277:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}__webpack_require__(17),__webpack_require__(18),__webpack_require__(21),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultIfErrorValue=exports.isNotErrorValue=exports.ErrorValueTypes=exports.MissingValuePlaceholder=exports.ValueTooLow=exports.DivideByZeroError=exports.DroppedForTesting=exports.ErrorValue=void 0;var ErrorValue=function(){function ErrorValue(){_classCallCheck(this,ErrorValue)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(ErrorValue,[{key:"toString",value:function toString(){return""}},{key:"toErrorString",value:function toErrorString(){return this.constructor.name}}]),ErrorValue}();exports.ErrorValue=ErrorValue;var NaNButShouldBeNumber=function(_ErrorValue){_inherits(NaNButShouldBeNumber,_ErrorValue);var _super=_createSuper(NaNButShouldBeNumber);function NaNButShouldBeNumber(){return _classCallCheck(this,NaNButShouldBeNumber),_super.apply(this,arguments)}return NaNButShouldBeNumber}(ErrorValue),DroppedForTesting=function(_ErrorValue2){_inherits(DroppedForTesting,_ErrorValue2);var _super2=_createSuper(DroppedForTesting);function DroppedForTesting(){return _classCallCheck(this,DroppedForTesting),_super2.apply(this,arguments)}return DroppedForTesting}(ErrorValue);exports.DroppedForTesting=DroppedForTesting;var InvalidOnALogScale=function(_ErrorValue3){_inherits(InvalidOnALogScale,_ErrorValue3);var _super3=_createSuper(InvalidOnALogScale);function InvalidOnALogScale(){return _classCallCheck(this,InvalidOnALogScale),_super3.apply(this,arguments)}return InvalidOnALogScale}(ErrorValue),UndefinedButShouldBeNumber=function(_ErrorValue4){_inherits(UndefinedButShouldBeNumber,_ErrorValue4);var _super4=_createSuper(UndefinedButShouldBeNumber);function UndefinedButShouldBeNumber(){return _classCallCheck(this,UndefinedButShouldBeNumber),_super4.apply(this,arguments)}return UndefinedButShouldBeNumber}(ErrorValue),NullButShouldBeNumber=function(_ErrorValue5){_inherits(NullButShouldBeNumber,_ErrorValue5);var _super5=_createSuper(NullButShouldBeNumber);function NullButShouldBeNumber(){return _classCallCheck(this,NullButShouldBeNumber),_super5.apply(this,arguments)}return NullButShouldBeNumber}(ErrorValue),BlankButShouldBeNumber=function(_ErrorValue6){_inherits(BlankButShouldBeNumber,_ErrorValue6);var _super6=_createSuper(BlankButShouldBeNumber);function BlankButShouldBeNumber(){return _classCallCheck(this,BlankButShouldBeNumber),_super6.apply(this,arguments)}return BlankButShouldBeNumber}(ErrorValue),UndefinedButShouldBeString=function(_ErrorValue7){_inherits(UndefinedButShouldBeString,_ErrorValue7);var _super7=_createSuper(UndefinedButShouldBeString);function UndefinedButShouldBeString(){return _classCallCheck(this,UndefinedButShouldBeString),_super7.apply(this,arguments)}return UndefinedButShouldBeString}(ErrorValue),NullButShouldBeString=function(_ErrorValue8){_inherits(NullButShouldBeString,_ErrorValue8);var _super8=_createSuper(NullButShouldBeString);function NullButShouldBeString(){return _classCallCheck(this,NullButShouldBeString),_super8.apply(this,arguments)}return NullButShouldBeString}(ErrorValue),NotAParseableNumberButShouldBeNumber=function(_ErrorValue9){_inherits(NotAParseableNumberButShouldBeNumber,_ErrorValue9);var _super9=_createSuper(NotAParseableNumberButShouldBeNumber);function NotAParseableNumberButShouldBeNumber(){return _classCallCheck(this,NotAParseableNumberButShouldBeNumber),_super9.apply(this,arguments)}return NotAParseableNumberButShouldBeNumber}(ErrorValue),DivideByZeroError=function(_ErrorValue10){_inherits(DivideByZeroError,_ErrorValue10);var _super10=_createSuper(DivideByZeroError);function DivideByZeroError(){return _classCallCheck(this,DivideByZeroError),_super10.apply(this,arguments)}return DivideByZeroError}(ErrorValue);exports.DivideByZeroError=DivideByZeroError;var NoValueWithinTolerance=function(_ErrorValue11){_inherits(NoValueWithinTolerance,_ErrorValue11);var _super11=_createSuper(NoValueWithinTolerance);function NoValueWithinTolerance(){return _classCallCheck(this,NoValueWithinTolerance),_super11.apply(this,arguments)}return NoValueWithinTolerance}(ErrorValue),NoMatchingValueAfterJoin=function(_ErrorValue12){_inherits(NoMatchingValueAfterJoin,_ErrorValue12);var _super12=_createSuper(NoMatchingValueAfterJoin);function NoMatchingValueAfterJoin(){return _classCallCheck(this,NoMatchingValueAfterJoin),_super12.apply(this,arguments)}return NoMatchingValueAfterJoin}(ErrorValue),ValueTooLow=function(_ErrorValue13){_inherits(ValueTooLow,_ErrorValue13);var _super13=_createSuper(ValueTooLow);function ValueTooLow(){return _classCallCheck(this,ValueTooLow),_super13.apply(this,arguments)}return ValueTooLow}(ErrorValue);exports.ValueTooLow=ValueTooLow;var NoValueToCompareAgainst=function(_ErrorValue14){_inherits(NoValueToCompareAgainst,_ErrorValue14);var _super14=_createSuper(NoValueToCompareAgainst);function NoValueToCompareAgainst(){return _classCallCheck(this,NoValueToCompareAgainst),_super14.apply(this,arguments)}return NoValueToCompareAgainst}(ErrorValue),FilteredValue=function(_ErrorValue15){_inherits(FilteredValue,_ErrorValue15);var _super15=_createSuper(FilteredValue);function FilteredValue(){return _classCallCheck(this,FilteredValue),_super15.apply(this,arguments)}return FilteredValue}(ErrorValue),NoValueForInterpolation=function(_ErrorValue16){_inherits(NoValueForInterpolation,_ErrorValue16);var _super16=_createSuper(NoValueForInterpolation);function NoValueForInterpolation(){return _classCallCheck(this,NoValueForInterpolation),_super16.apply(this,arguments)}return NoValueForInterpolation}(ErrorValue),InvalidQuarterValue=function(_ErrorValue17){_inherits(InvalidQuarterValue,_ErrorValue17);var _super17=_createSuper(InvalidQuarterValue);function InvalidQuarterValue(){return _classCallCheck(this,InvalidQuarterValue),_super17.apply(this,arguments)}return InvalidQuarterValue}(ErrorValue),MissingValuePlaceholder=function(_ErrorValue18){_inherits(MissingValuePlaceholder,_ErrorValue18);var _super18=_createSuper(MissingValuePlaceholder);function MissingValuePlaceholder(){return _classCallCheck(this,MissingValuePlaceholder),_super18.apply(this,arguments)}return MissingValuePlaceholder}(ErrorValue);exports.MissingValuePlaceholder=MissingValuePlaceholder,exports.ErrorValueTypes={NaNButShouldBeNumber:new NaNButShouldBeNumber,DroppedForTesting:new DroppedForTesting,InvalidOnALogScale:new InvalidOnALogScale,UndefinedButShouldBeNumber:new UndefinedButShouldBeNumber,NullButShouldBeNumber:new NullButShouldBeNumber,BlankButShouldBeNumber:new BlankButShouldBeNumber,UndefinedButShouldBeString:new UndefinedButShouldBeString,NullButShouldBeString:new NullButShouldBeString,MissingValuePlaceholder:new MissingValuePlaceholder,NotAParseableNumberButShouldBeNumber:new NotAParseableNumberButShouldBeNumber,DivideByZeroError:new DivideByZeroError,NoValueWithinTolerance:new NoValueWithinTolerance,NoMatchingValueAfterJoin:new NoMatchingValueAfterJoin,ValueTooLow:new ValueTooLow,NoValueToCompareAgainst:new NoValueToCompareAgainst,FilteredValue:new FilteredValue,NoValueForInterpolation:new NoValueForInterpolation,InvalidQuarterValue:new InvalidQuarterValue};exports.isNotErrorValue=function isNotErrorValue(item){return!(item instanceof ErrorValue)};exports.defaultIfErrorValue=function defaultIfErrorValue(item,defaultValue){return exports.isNotErrorValue(item)?item:defaultValue}},278:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ColorSchemeName=exports.ContinentColors=void 0,exports.ContinentColors={Africa:"#923E8B",Antarctica:"#5887A1",Asia:"#2D8587",Europe:"#4C5C78","North America":"#E04E4B",Oceania:"#A8633C","South America":"#932834"},function(ColorSchemeName){ColorSchemeName.YlGn="YlGn",ColorSchemeName.YlGnBu="YlGnBu",ColorSchemeName.GnBu="GnBu",ColorSchemeName.BuGn="BuGn",ColorSchemeName.PuBuGn="PuBuGn",ColorSchemeName.BuPu="BuPu",ColorSchemeName.RdPu="RdPu",ColorSchemeName.PuRd="PuRd",ColorSchemeName.OrRd="OrRd",ColorSchemeName.YlOrRd="YlOrRd",ColorSchemeName.YlOrBr="YlOrBr",ColorSchemeName.Purples="Purples",ColorSchemeName.Blues="Blues",ColorSchemeName.Greens="Greens",ColorSchemeName.Oranges="Oranges",ColorSchemeName.Reds="Reds",ColorSchemeName.Greys="Greys",ColorSchemeName.PuOr="PuOr",ColorSchemeName.BrBG="BrBG",ColorSchemeName.PRGn="PRGn",ColorSchemeName.PiYG="PiYG",ColorSchemeName.RdBu="RdBu",ColorSchemeName.RdGy="RdGy",ColorSchemeName.RdYlBu="RdYlBu",ColorSchemeName.Spectral="Spectral",ColorSchemeName.RdYlGn="RdYlGn",ColorSchemeName.Accent="Accent",ColorSchemeName.Dark2="Dark2",ColorSchemeName.Paired="Paired",ColorSchemeName.Pastel1="Pastel1",ColorSchemeName.Pastel2="Pastel2",ColorSchemeName.Set1="Set1",ColorSchemeName.Set2="Set2",ColorSchemeName.Set3="Set3",ColorSchemeName.PuBu="PuBu",ColorSchemeName["hsv-RdBu"]="hsv-RdBu",ColorSchemeName["hsv-CyMg"]="hsv-CyMg",ColorSchemeName.Magma="Magma",ColorSchemeName.Inferno="Inferno",ColorSchemeName.Plasma="Plasma",ColorSchemeName.Viridis="Viridis",ColorSchemeName.continents="continents",ColorSchemeName.stackedAreaDefault="stackedAreaDefault",ColorSchemeName["owid-distinct"]="owid-distinct"}(exports.ColorSchemeName||(exports.ColorSchemeName={}))},319:function(module,exports,__webpack_require__){"use strict";var ExplorerControlType;__webpack_require__(192),__webpack_require__(32),__webpack_require__(14),__webpack_require__(57),__webpack_require__(119),Object.defineProperty(exports,"__esModule",{value:!0}),exports.EXPLORERS_PREVIEW_ROUTE=exports.EXPLORERS_GIT_CMS_FOLDER=exports.EXPLORERS_ROUTE_FOLDER=exports.GetAllExplorersRoute=exports.ExplorerContainerId=exports.EXPLORER_EMBEDDED_FIGURE_SELECTOR=exports.EMBEDDED_EXPLORER_GRAPHER_CONFIGS=exports.EMBEDDED_EXPLORER_DELIMITER=exports.UNSAVED_EXPLORER_PREVIEW_QUERYPARAMS=exports.UNSAVED_EXPLORER_DRAFT=exports.ExplorerControlTypeRegex=exports.DefaultNewExplorerSlug=exports.ExplorerControlType=void 0,function(ExplorerControlType){ExplorerControlType.Radio="Radio",ExplorerControlType.Checkbox="Checkbox",ExplorerControlType.Dropdown="Dropdown"}(ExplorerControlType=exports.ExplorerControlType||(exports.ExplorerControlType={})),exports.DefaultNewExplorerSlug="new",exports.ExplorerControlTypeRegex=new RegExp(" ("+Object.values(ExplorerControlType).join("|")+")$"),exports.UNSAVED_EXPLORER_DRAFT="UNSAVED_EXPLORER_DRAFT",exports.UNSAVED_EXPLORER_PREVIEW_QUERYPARAMS="UNSAVED_EXPLORER_PREVIEW_QUERYPARAMS",exports.EMBEDDED_EXPLORER_DELIMITER="\n//EMBEDDED_EXPLORER\n",exports.EMBEDDED_EXPLORER_GRAPHER_CONFIGS="\n//EMBEDDED_EXPLORER_GRAPHER_CONFIGS\n",exports.EXPLORER_EMBEDDED_FIGURE_SELECTOR="data-explorer-src",exports.ExplorerContainerId="ExplorerContainer",exports.GetAllExplorersRoute="allExplorers.json",exports.EXPLORERS_ROUTE_FOLDER="explorers",exports.EXPLORERS_GIT_CMS_FOLDER="explorers",exports.EXPLORERS_PREVIEW_ROUTE="".concat(exports.EXPLORERS_ROUTE_FOLDER,"/preview")},320:function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(119),__webpack_require__(39),__webpack_require__(28),__webpack_require__(36),__webpack_require__(33),__webpack_require__(17),__webpack_require__(103),__webpack_require__(32),__webpack_require__(31),__webpack_require__(57),__webpack_require__(5),__webpack_require__(14),__webpack_require__(25),__webpack_require__(467),__webpack_require__(79),__webpack_require__(22),__webpack_require__(75),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(48),__webpack_require__(55),__webpack_require__(65),__webpack_require__(9),__webpack_require__(10),__webpack_require__(11),__webpack_require__(29);var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.emptyColumnsInFirstRowInDelimited=exports.sortColumnStore=exports.cartesianProduct=exports.trimArray=exports.trimEmptyRows=exports.isCellEmpty=exports.rowsToMatrix=exports.detectDelimiter=exports.parseDelimited=exports.matrixToDelimited=exports.trimMatrix=exports.rowsFromMatrix=exports.Timer=exports.replaceRandomCellsInColumnStore=exports.getDropIndexes=exports.replaceCells=exports.renameColumnStore=exports.reverseColumnStore=exports.replaceDef=exports.autodetectColumnDefs=exports.rowsToColumnStore=exports.concatColumnStores=exports.appendRowsToColumnStore=exports.imemo=exports.makeKeyFn=exports.interpolateRowValuesWithTolerance=exports.toleranceInterpolation=exports.linearInterpolation=exports.makeRowFromColumnStore=exports.guessColumnDefFromSlugAndRow=exports.standardizeSlugs=exports.makeAutoTypeFn=exports.truncate=exports.columnStoreToRows=void 0;var d3_dsv_1=__webpack_require__(1939),fast_cartesian_1=__importDefault(__webpack_require__(1767)),Util_1=__webpack_require__(40),CoreColumnDef_1=__webpack_require__(199),ErrorValues_1=__webpack_require__(277),OwidTableConstants_1=__webpack_require__(172);exports.columnStoreToRows=function columnStoreToRows(columnStore){var firstCol=Object.values(columnStore)[0];if(!firstCol)return[];var slugs=Object.keys(columnStore);return firstCol.map((function(val,index){var newRow={};return slugs.forEach((function(slug){newRow[slug]=columnStore[slug][index]})),newRow}))};exports.truncate=function truncate(str,maxLength){return str.length>maxLength?"".concat(str.substr(0,maxLength-3),"..."):str};var numberOnly=/^-?\d+\.?\d*$/;exports.makeAutoTypeFn=function makeAutoTypeFn(numericSlugs){var slugToType={};return null==numericSlugs||numericSlugs.forEach((function(slug){slugToType[slug]="number"})),function(object){for(var columnSlug in object){var value=object[columnSlug],type=slugToType[columnSlug];if("string"!==type){var number=parseFloat(value);"number"!==type?!isNaN(number)&&numberOnly.test(value)?(object[columnSlug]=number,slugToType[columnSlug]="number"):(object[columnSlug]=value,slugToType[columnSlug]="string"):object[columnSlug]=isNaN(number)?ErrorValues_1.ErrorValueTypes.NaNButShouldBeNumber:number}else object[columnSlug]=value}return object}};exports.standardizeSlugs=function standardizeSlugs(rows){var _a,firstRow=null!==(_a=rows[0])&&void 0!==_a?_a:{},colsToRename=Object.keys(firstRow).map((function(name){return{name:name,slug:Util_1.slugifySameCase(name)}})).filter((function(col){return col.name!==col.slug}));if(colsToRename.length)return rows.forEach((function(row){colsToRename.forEach((function(col){row[col.slug]=row[col.name],delete row[col.name]}))})),{rows:rows,defs:colsToRename}};exports.guessColumnDefFromSlugAndRow=function guessColumnDefFromSlugAndRow(slug,sampleValue){var valueType=_typeof(sampleValue),name=slug;return"Entity"===slug?{slug:slug,type:CoreColumnDef_1.ColumnTypeNames.EntityName,name:name}:"day"===slug?{slug:slug,type:CoreColumnDef_1.ColumnTypeNames.Day,name:"Day"}:"year"===slug||"Year"===slug?{slug:slug,type:CoreColumnDef_1.ColumnTypeNames.Year,name:"Year"}:slug===OwidTableConstants_1.OwidTableSlugs.entityName?OwidTableConstants_1.OwidEntityNameColumnDef:slug===OwidTableConstants_1.OwidTableSlugs.entityCode?OwidTableConstants_1.OwidEntityCodeColumnDef:slug===OwidTableConstants_1.OwidTableSlugs.entityId?OwidTableConstants_1.OwidEntityIdColumnDef:"date"===slug?{slug:slug,type:CoreColumnDef_1.ColumnTypeNames.Date,name:"Date"}:"number"===valueType||"string"===valueType&&sampleValue.match(/^\d+$/)?{slug:slug,type:CoreColumnDef_1.ColumnTypeNames.Numeric,name:name}:{slug:slug,type:CoreColumnDef_1.ColumnTypeNames.String,name:name}};function isNotErrorValueOrEmptyCell(value){return void 0!==value&&!(value instanceof ErrorValues_1.ErrorValue)}function toleranceInterpolation(valuesSortedByTimeAsc,timesAsc,context){var start=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,end=arguments.length>4&&void 0!==arguments[4]?arguments[4]:valuesSortedByTimeAsc.length;if(valuesSortedByTimeAsc.length)for(var prevNonBlankIndex=void 0,nextNonBlankIndex=void 0,index=start;index<end;index++){var currentValue=valuesSortedByTimeAsc[index];if(isNotErrorValueOrEmptyCell(currentValue))prevNonBlankIndex=index;else{-1!==nextNonBlankIndex&&(void 0===nextNonBlankIndex||nextNonBlankIndex<=index)&&(nextNonBlankIndex=Util_1.findIndexFast(valuesSortedByTimeAsc,isNotErrorValueOrEmptyCell,index+1,end));var timeOfCurrent=timesAsc[index],timeOfPrevIndex=void 0!==prevNonBlankIndex?timesAsc[prevNonBlankIndex]:-1/0,timeOfNextIndex=void 0!==nextNonBlankIndex&&-1!==nextNonBlankIndex?timesAsc[nextNonBlankIndex]:1/0,prevTimeDiff=Math.abs(timeOfPrevIndex-timeOfCurrent),nextTimeDiff=Math.abs(timeOfNextIndex-timeOfCurrent);-1!==nextNonBlankIndex&&nextTimeDiff<=prevTimeDiff&&nextTimeDiff<=context.timeTolerance?(valuesSortedByTimeAsc[index]=valuesSortedByTimeAsc[nextNonBlankIndex],timesAsc[index]=timesAsc[nextNonBlankIndex]):void 0!==prevNonBlankIndex&&prevTimeDiff<=context.timeTolerance?(valuesSortedByTimeAsc[index]=valuesSortedByTimeAsc[prevNonBlankIndex],timesAsc[index]=timesAsc[prevNonBlankIndex]):valuesSortedByTimeAsc[index]=ErrorValues_1.ErrorValueTypes.NoValueWithinTolerance}}}exports.makeRowFromColumnStore=function makeRowFromColumnStore(rowIndex,columnStore){var row={},columns=Object.values(columnStore);return Object.keys(columnStore).forEach((function(slug,colIndex){row[slug]=columns[colIndex][rowIndex]})),row},exports.linearInterpolation=function linearInterpolation(valuesSortedByTimeAsc,timesAsc,context){var start=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,end=arguments.length>4&&void 0!==arguments[4]?arguments[4]:valuesSortedByTimeAsc.length;if(valuesSortedByTimeAsc.length)for(var prevNonBlankIndex=-1,nextNonBlankIndex=-1,index=start;index<end;index++){var currentValue=valuesSortedByTimeAsc[index];if(isNotErrorValueOrEmptyCell(currentValue))prevNonBlankIndex=index;else{(-1===nextNonBlankIndex||nextNonBlankIndex<=index)&&(nextNonBlankIndex=Util_1.findIndexFast(valuesSortedByTimeAsc,(function(val){return isNotErrorValueOrEmptyCell(val)}),index+1,end));var prevValue=valuesSortedByTimeAsc[prevNonBlankIndex],nextValue=valuesSortedByTimeAsc[nextNonBlankIndex],value=void 0;if(isNotErrorValueOrEmptyCell(prevValue)&&isNotErrorValueOrEmptyCell(nextValue)){var distLeft=index-prevNonBlankIndex,distRight=nextNonBlankIndex-index;value=(prevValue*distRight+nextValue*distLeft)/(distLeft+distRight)}else value=isNotErrorValueOrEmptyCell(prevValue)&&context.extrapolateAtEnd?prevValue:isNotErrorValueOrEmptyCell(nextValue)&&context.extrapolateAtStart?nextValue:ErrorValues_1.ErrorValueTypes.NoValueForInterpolation;prevNonBlankIndex=index,valuesSortedByTimeAsc[index]=value}}},exports.toleranceInterpolation=toleranceInterpolation,exports.interpolateRowValuesWithTolerance=function interpolateRowValuesWithTolerance(rowsSortedByTimeAsc,valueSlug,timeSlug,timeTolerance){var values=rowsSortedByTimeAsc.map((function(row){return row[valueSlug]})),times=rowsSortedByTimeAsc.map((function(row){return row[timeSlug]}));return toleranceInterpolation(values,times,{timeTolerance:timeTolerance}),rowsSortedByTimeAsc.map((function(row,index){var _Object$assign;return Object.assign(Object.assign({},row),(_defineProperty(_Object$assign={},valueSlug,values[index]),_defineProperty(_Object$assign,timeSlug,times[index]),_Object$assign))}))};exports.makeKeyFn=function makeKeyFn(columnStore,columnSlugs){return function(rowIndex){return columnSlugs.map((function(slug){return Util_1.toString(columnStore[slug][rowIndex])})).join(" ")}};exports.imemo=function imemo(target,propertyName,descriptor){var originalFn=descriptor.get;descriptor.get=function(){var propName="".concat(propertyName,"_memoized");return void 0===this[propName]&&Object.defineProperty(this,propName,{configurable:!1,enumerable:!1,writable:!1,value:originalFn.apply(this)}),this[propName]}};exports.appendRowsToColumnStore=function appendRowsToColumnStore(columnStore,rows){var slugs=Object.keys(columnStore),newColumnStore=columnStore;return slugs.forEach((function(slug){newColumnStore[slug]=columnStore[slug].concat(rows.map((function(row){return row[slug]})))})),newColumnStore};var getColumnStoreLength=function getColumnStoreLength(store){for(var slug in store)return store[slug].length;return 0};exports.concatColumnStores=function concatColumnStores(stores,slugsToKeep){if(!stores.length)return{};var lengths=stores.map(getColumnStoreLength),slugs=null!=slugsToKeep?slugsToKeep:Object.keys(Util_1.first(stores)),newColumnStore={};return slugs.forEach((function(slug){newColumnStore[slug]=Util_1.flatten(stores.map((function(store,i){var _a;return null!==(_a=store[slug])&&void 0!==_a?_a:new Array(lengths[i]).fill(ErrorValues_1.ErrorValueTypes.MissingValuePlaceholder)})))})),newColumnStore};exports.rowsToColumnStore=function rowsToColumnStore(rows){var columnsObject={};return rows.length?(Object.keys(rows[0]).forEach((function(slug){columnsObject[slug]=rows.map((function(row){return row[slug]}))})),columnsObject):columnsObject};exports.autodetectColumnDefs=function autodetectColumnDefs(rowsOrColumnStore,definedSlugs){if(!Array.isArray(rowsOrColumnStore)){var columnStore=rowsOrColumnStore;return Object.keys(columnStore).filter((function(slug){return!definedSlugs.has(slug)})).map((function(slug){return exports.guessColumnDefFromSlugAndRow(slug,columnStore[slug].find((function(val){return null!=val})))}))}return function guessColumnDefsFromRows(rows,definedSlugs){return rows[0]?Object.keys(rows[0]).filter((function(slug){return!definedSlugs.has(slug)})).map((function(slug){var firstRowWithValue=rows.find((function(row){return void 0!==row[slug]&&null!==row[slug]&&""!==row[slug]})),firstValue=firstRowWithValue?firstRowWithValue[slug]:void 0;return exports.guessColumnDefFromSlugAndRow(slug,firstValue)})):[]}(rowsOrColumnStore,definedSlugs)};exports.replaceDef=function replaceDef(defs,newDefs){return defs.map((function(def){var newDef=newDefs.find((function(newDef){return newDef.slug===def.slug}));return null!=newDef?newDef:def}))};exports.reverseColumnStore=function reverseColumnStore(columnStore){var newStore={};return Object.keys(columnStore).forEach((function(slug){newStore[slug]=columnStore[slug].slice().reverse()})),newStore};exports.renameColumnStore=function renameColumnStore(columnStore,columnRenameMap){var newStore={};return Object.keys(columnStore).forEach((function(slug){columnRenameMap[slug]?newStore[columnRenameMap[slug]]=columnStore[slug]:newStore[slug]=columnStore[slug]})),newStore};exports.replaceCells=function replaceCells(columnStore,columnSlugs,replaceFn){var newStore=Object.assign({},columnStore);return columnSlugs.forEach((function(slug){newStore[slug]=newStore[slug].map(replaceFn)})),newStore};exports.getDropIndexes=function getDropIndexes(arrayLength,howMany){var seed=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now();return new Set(Util_1.sampleFrom(Util_1.range(0,arrayLength),howMany,seed))};exports.replaceRandomCellsInColumnStore=function replaceRandomCellsInColumnStore(columnStore){var howMany=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,columnSlugs=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],seed=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Date.now(),replacementGenerator=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){return ErrorValues_1.ErrorValueTypes.DroppedForTesting},newStore=Object.assign({},columnStore);return columnSlugs.forEach((function(slug){var values=newStore[slug],indexesToDrop=exports.getDropIndexes(values.length,howMany,seed);newStore[slug]=values.map((function(value,index){return indexesToDrop.has(index)?replacementGenerator():value}))})),newStore};var Timer=function(){function Timer(){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Timer),this._tickTime=Date.now(),this._firstTickTime=this._tickTime}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Timer,[{key:"tick",value:function tick(msg){var elapsed=Date.now()-this._tickTime;return msg&&console.log("".concat(elapsed,"ms ").concat(msg)),this._tickTime=Date.now(),elapsed}},{key:"getTotalElapsedTime",value:function getTotalElapsedTime(){return Date.now()-this._firstTickTime}}]),Timer}();exports.Timer=Timer;exports.rowsFromMatrix=function rowsFromMatrix(matrix){var table=exports.trimMatrix(matrix),header=table[0];return table.slice(1).map((function(row){var newRow={};return header.forEach((function(col,index){newRow[col]=row[index]})),newRow}))};exports.trimMatrix=function trimMatrix(matrix){return function trimEmptyColumns(matrix){return matrix.map(exports.trimArray)}(exports.trimEmptyRows(matrix))};exports.matrixToDelimited=function matrixToDelimited(table){var delimiter=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\t";return table.map((function(row){return row.map((function(cell){return null==cell?"":cell})).join(delimiter)})).join("\n")};exports.parseDelimited=function parseDelimited(str,delimiter,parseFn){return d3_dsv_1.dsvFormat(null!=delimiter?delimiter:exports.detectDelimiter(str)).parse(str,parseFn)};exports.detectDelimiter=function detectDelimiter(str){return str.includes("\t")?"\t":str.includes(",")?",":" "};exports.rowsToMatrix=function rowsToMatrix(rows){return rows.length?[Object.keys(rows[0])].concat(_toConsumableArray(rows.map((function(row){return Object.values(row)})))):void 0};var isRowEmpty=function isRowEmpty(row){return row.every(exports.isCellEmpty)};exports.isCellEmpty=function isCellEmpty(cell){return null==cell||""===cell};exports.trimEmptyRows=function trimEmptyRows(matrix){for(var trimAt=void 0,rowIndex=matrix.length-1;rowIndex>=0&&isRowEmpty(matrix[rowIndex]);rowIndex--)trimAt=rowIndex;return void 0===trimAt?matrix:matrix.slice(0,trimAt)};exports.trimArray=function trimArray(arr){var rightIndex;for(rightIndex=arr.length-1;rightIndex>=0&&exports.isCellEmpty(arr[rightIndex]);rightIndex--);return arr.slice(0,rightIndex+1)},exports.cartesianProduct=function cartesianProduct(){for(var _len=arguments.length,allEntries=new Array(_len),_key=0;_key<_len;_key++)allEntries[_key]=arguments[_key];return fast_cartesian_1.default(allEntries)};exports.sortColumnStore=function sortColumnStore(columnStore,slugs){var firstCol=Object.values(columnStore)[0];if(!firstCol)return{};var len=firstCol.length,newOrder=Util_1.range(0,len).sort(makeSortByFn(columnStore,slugs)),newStore={};return Object.keys(columnStore).forEach((function(slug){newStore[slug]=function applyNewSortOrder(arr,newOrder){return newOrder.map((function(index){return arr[index]}))}(columnStore[slug],newOrder)})),newStore};var makeSortByFn=function makeSortByFn(columnStore,columnSlugs){var numSlugs=columnSlugs.length;return function(indexA,indexB){for(var slugIndex=0;slugIndex<numSlugs;slugIndex++){var slug=columnSlugs[slugIndex],col=columnStore[slug],av=col[indexA],bv=col[indexB];if(av<bv)return-1;if(av>bv)return 1}return 0}};exports.emptyColumnsInFirstRowInDelimited=function emptyColumnsInFirstRowInDelimited(str){var _a,firstRow=null!==(_a=exports.parseDelimited(str.split("\n").slice(0,2).join("\n"))[0])&&void 0!==_a?_a:{},emptySlugs=[];return Object.keys(firstRow).forEach((function(slug){""===firstRow[slug]&&emptySlugs.push(slug)})),emptySlugs}},321:function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}__webpack_require__(25),__webpack_require__(36),__webpack_require__(17),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(29),__webpack_require__(22),Object.defineProperty(exports,"__esModule",{value:!0}),exports.ColorSchemes=void 0;var CustomSchemes_1=__webpack_require__(1771),ColorBrewerSchemes_1=__webpack_require__(1772),ColorScheme_1=__webpack_require__(1774);exports.ColorSchemes=function initAllSchemes(){var schemes=[].concat(_toConsumableArray(ColorBrewerSchemes_1.ColorBrewerSchemes),_toConsumableArray(CustomSchemes_1.CustomColorSchemes)),colorSchemes={};return schemes.forEach((function(scheme){var _a;colorSchemes[scheme.name]=new ColorScheme_1.ColorScheme(null!==(_a=scheme.displayName)&&void 0!==_a?_a:scheme.name,scheme.colorSets,scheme.singleColorScale,scheme.isDistinct)})),colorSchemes}()},322:function(module,exports,__webpack_require__){"use strict";__webpack_require__(75),__webpack_require__(5),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(36),__webpack_require__(39),__webpack_require__(28),Object.defineProperty(exports,"__esModule",{value:!0}),exports.deleteRuntimeAndUnchangedProps=exports.updatePersistables=exports.objectWithPersistablesToObject=void 0;var mobx_1=__webpack_require__(41),Util_1=__webpack_require__(40);exports.objectWithPersistablesToObject=function objectWithPersistablesToObject(objWithPersistables){var keysToSerialize=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],obj=mobx_1.toJS(objWithPersistables),keysSet=new Set(keysToSerialize);return Object.keys(obj).forEach((function(key){var val=objWithPersistables[key],valIsPersistable=val&&val.toObject;!keysToSerialize.length||keysSet.has(key)?valIsPersistable?obj[key]=val.toObject():Array.isArray(val)?obj[key]=val.map((function(item){return(null==item?void 0:item.toObject)?item.toObject():item})):obj[key]=val:delete obj[key]})),obj},exports.updatePersistables=function updatePersistables(target,obj){if(void 0!==obj)for(var key in target)if(key in obj){var currentVal=target[key],currentValIsPersistableObject=null==currentVal?void 0:currentVal.updateFromObject,newVal=obj[key];currentValIsPersistableObject?currentVal.updateFromObject(newVal):target[key]=newVal}},exports.deleteRuntimeAndUnchangedProps=function deleteRuntimeAndUnchangedProps(changedObj,defaultObject){var obj=changedObj,defaultObj=defaultObject,defaultKeys=new Set(Object.keys(defaultObj));return Object.keys(obj).forEach((function(prop){var key=prop;if(defaultKeys.has(key)){var currentValue=obj[key],defaultValue=defaultObj[key];Util_1.isEqual(currentValue,defaultValue)&&delete obj[key]}else delete obj[key]})),obj}},323:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(31),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(18),__webpack_require__(21);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Tooltip=exports.TooltipView=void 0;var React=__importStar(__webpack_require__(0)),mobx_1=__webpack_require__(41),mobx_react_1=__webpack_require__(58),Bounds_1=__webpack_require__(73),TooltipView=function(_React$Component){_inherits(TooltipView,_React$Component);var _super=_createSuper(TooltipView);function TooltipView(){var _this;return _classCallCheck(this,TooltipView),(_this=_super.apply(this,arguments)).base=React.createRef(),_this}return _createClass(TooltipView,[{key:"rendered",get:function get(){var _a,_b,_c,bounds=this.bounds,tooltipProvider=this.props.tooltipProvider;if(!tooltipProvider.tooltip)return null;var tooltip=tooltipProvider.tooltip,offsetX=null!==(_a=tooltip.offsetX)&&void 0!==_a?_a:0,offsetY=null!==(_b=tooltip.offsetY)&&void 0!==_b?_b:0;"upward"===tooltip.offsetYDirection&&(offsetY=-offsetY-(null!==(_c=null==bounds?void 0:bounds.height)&&void 0!==_c?_c:0));var x=tooltip.x+offsetX,y=tooltip.y+offsetY;bounds&&(x+bounds.width>this.props.width&&(x-=bounds.width+2*offsetX),y+bounds.height>this.props.height&&(y-=bounds.height+2*offsetY),x<0&&(x=0),y<0&&(y=0));var tooltipStyle={position:"absolute",pointerEvents:"none",left:"".concat(x,"px"),top:"".concat(y,"px"),whiteSpace:"nowrap",backgroundColor:"rgba(255,255,255,0.92)",boxShadow:"0 2px 2px rgba(0,0,0,.12), 0 0 1px rgba(0,0,0,.35)",borderRadius:"2px",textAlign:"left",fontSize:"0.9em"};return React.createElement("div",{ref:this.base,className:"Tooltip",style:Object.assign(Object.assign({},tooltipStyle),tooltip.style)},tooltip.children)}},{key:"updateBounds",value:function updateBounds(){this.base.current&&(this.bounds=Bounds_1.Bounds.fromElement(this.base.current))}},{key:"componentDidMount",value:function componentDidMount(){this.updateBounds()}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.updateBounds()}},{key:"render",value:function render(){return this.rendered}}]),TooltipView}(React.Component);__decorate([mobx_1.computed],TooltipView.prototype,"rendered",null),__decorate([mobx_1.observable.struct],TooltipView.prototype,"bounds",void 0),__decorate([mobx_1.action.bound],TooltipView.prototype,"updateBounds",null),TooltipView=__decorate([mobx_react_1.observer],TooltipView),exports.TooltipView=TooltipView;var Tooltip=function(_React$Component2){_inherits(Tooltip,_React$Component2);var _super2=_createSuper(Tooltip);function Tooltip(){return _classCallCheck(this,Tooltip),_super2.apply(this,arguments)}return _createClass(Tooltip,[{key:"componentDidMount",value:function componentDidMount(){this.connectTooltipToContainer()}},{key:"connectTooltipToContainer",value:function connectTooltipToContainer(){this.props.tooltipManager.tooltip=this.props}},{key:"removeToolTipFromContainer",value:function removeToolTipFromContainer(){this.props.tooltipManager.tooltip=void 0}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.connectTooltipToContainer()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.removeToolTipFromContainer()}},{key:"render",value:function render(){return null}}]),Tooltip}(React.Component);__decorate([mobx_1.action.bound],Tooltip.prototype,"connectTooltipToContainer",null),__decorate([mobx_1.action.bound],Tooltip.prototype,"removeToolTipFromContainer",null),Tooltip=__decorate([mobx_react_1.observer],Tooltip),exports.Tooltip=Tooltip},324:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(25),__webpack_require__(28),__webpack_require__(202),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(18),__webpack_require__(21);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.AxisTickMarks=exports.HorizontalAxisComponent=exports.VerticalAxisComponent=exports.DualAxisComponent=exports.HorizontalAxisGridLines=exports.VerticalAxisGridLines=void 0;var React=__importStar(__webpack_require__(0)),mobx_1=__webpack_require__(41),mobx_react_1=__webpack_require__(58),Bounds_1=__webpack_require__(73),classnames_1=__importDefault(__webpack_require__(139)),owidTypes_1=__webpack_require__(122),Util_1=__webpack_require__(40),dasharrayFromFontSize=function dasharrayFromFontSize(fontSize){var dashLength=Math.round(fontSize/16*3),spaceLength=Math.round(2*dashLength/3);return"".concat(dashLength,",").concat(spaceLength)},VerticalAxisGridLines=function(_React$Component){_inherits(VerticalAxisGridLines,_React$Component);var _super=_createSuper(VerticalAxisGridLines);function VerticalAxisGridLines(){return _classCallCheck(this,VerticalAxisGridLines),_super.apply(this,arguments)}return _createClass(VerticalAxisGridLines,[{key:"render",value:function render(){var _this$props=this.props,bounds=_this$props.bounds,verticalAxis=_this$props.verticalAxis,axis=verticalAxis.clone();return axis.range=bounds.yRange(),React.createElement("g",{className:classnames_1.default("AxisGridLines","horizontalLines")},axis.getTickValues().map((function(t,i){var color=t.faint?"#eee":0===t.value?"#999":"#ddd";return React.createElement("line",{key:i,x1:bounds.left.toFixed(2),y1:axis.place(t.value),x2:bounds.right.toFixed(2),y2:axis.place(t.value),stroke:color,strokeDasharray:0!==t.value?dasharrayFromFontSize(verticalAxis.tickFontSize):void 0})})))}}]),VerticalAxisGridLines}(React.Component);VerticalAxisGridLines=__decorate([mobx_react_1.observer],VerticalAxisGridLines),exports.VerticalAxisGridLines=VerticalAxisGridLines;var HorizontalAxisGridLines=function(_React$Component2){_inherits(HorizontalAxisGridLines,_React$Component2);var _super2=_createSuper(HorizontalAxisGridLines);function HorizontalAxisGridLines(){return _classCallCheck(this,HorizontalAxisGridLines),_super2.apply(this,arguments)}return _createClass(HorizontalAxisGridLines,[{key:"bounds",get:function get(){var _a;return null!==(_a=this.props.bounds)&&void 0!==_a?_a:Bounds_1.DEFAULT_BOUNDS}},{key:"render",value:function render(){var horizontalAxis=this.props.horizontalAxis,bounds=this.bounds,axis=horizontalAxis.clone();return axis.range=bounds.xRange(),React.createElement("g",{className:classnames_1.default("AxisGridLines","verticalLines")},axis.getTickValues().map((function(t,i){var color=t.faint?"#eee":0===t.value?"#999":"#ddd";return React.createElement("line",{key:i,x1:axis.place(t.value),y1:bounds.bottom.toFixed(2),x2:axis.place(t.value),y2:bounds.top.toFixed(2),stroke:color,strokeDasharray:0!==t.value?dasharrayFromFontSize(horizontalAxis.tickFontSize):void 0})})))}}]),HorizontalAxisGridLines}(React.Component);__decorate([mobx_1.computed],HorizontalAxisGridLines.prototype,"bounds",null),HorizontalAxisGridLines=__decorate([mobx_react_1.observer],HorizontalAxisGridLines),exports.HorizontalAxisGridLines=HorizontalAxisGridLines;var DualAxisComponent=function(_React$Component3){_inherits(DualAxisComponent,_React$Component3);var _super3=_createSuper(DualAxisComponent);function DualAxisComponent(){return _classCallCheck(this,DualAxisComponent),_super3.apply(this,arguments)}return _createClass(DualAxisComponent,[{key:"render",value:function render(){var _this$props2=this.props,dualAxis=_this$props2.dualAxis,showTickMarks=_this$props2.showTickMarks,bounds=dualAxis.bounds,horizontalAxis=dualAxis.horizontalAxis,verticalAxis=dualAxis.verticalAxis,innerBounds=dualAxis.innerBounds,verticalGridlines=verticalAxis.hideGridlines?null:React.createElement(VerticalAxisGridLines,{verticalAxis:verticalAxis,bounds:innerBounds}),horizontalGridlines=horizontalAxis.hideGridlines?null:React.createElement(HorizontalAxisGridLines,{horizontalAxis:horizontalAxis,bounds:innerBounds}),verticalAxisComponent=verticalAxis.hideAxis?null:React.createElement(VerticalAxisComponent,{bounds:bounds,verticalAxis:verticalAxis}),horizontalAxisComponent=horizontalAxis.hideAxis?null:React.createElement(HorizontalAxisComponent,{bounds:bounds,axisPosition:innerBounds.bottom,axis:horizontalAxis,showTickMarks:showTickMarks});return React.createElement("g",{className:"DualAxisView"},horizontalAxisComponent,verticalAxisComponent,verticalGridlines,horizontalGridlines)}}]),DualAxisComponent}(React.Component);DualAxisComponent=__decorate([mobx_react_1.observer],DualAxisComponent),exports.DualAxisComponent=DualAxisComponent;var VerticalAxisComponent=function(_React$Component4){_inherits(VerticalAxisComponent,_React$Component4);var _super4=_createSuper(VerticalAxisComponent);function VerticalAxisComponent(){return _classCallCheck(this,VerticalAxisComponent),_super4.apply(this,arguments)}return _createClass(VerticalAxisComponent,[{key:"render",value:function render(){var _this$props3=this.props,bounds=_this$props3.bounds,verticalAxis=_this$props3.verticalAxis,tickLabels=verticalAxis.tickLabels,labelTextWrap=verticalAxis.labelTextWrap;return React.createElement("g",{className:"VerticalAxis"},labelTextWrap&&labelTextWrap.render(-bounds.centerY-labelTextWrap.width/2,bounds.left,{transform:"rotate(-90)"}),tickLabels.map((function(label,i){var y=label.y,xAlign=label.xAlign,yAlign=label.yAlign,formattedValue=label.formattedValue;return React.createElement("text",{key:i,x:(bounds.left+verticalAxis.width-verticalAxis.labelPadding).toFixed(2),y:y,dy:Util_1.dyFromAlign(null!=yAlign?yAlign:owidTypes_1.VerticalAlign.middle),textAnchor:Util_1.textAnchorFromAlign(null!=xAlign?xAlign:owidTypes_1.HorizontalAlign.right),fill:"#666",fontSize:verticalAxis.tickFontSize},formattedValue)})))}}]),VerticalAxisComponent}(React.Component);VerticalAxisComponent=__decorate([mobx_react_1.observer],VerticalAxisComponent),exports.VerticalAxisComponent=VerticalAxisComponent;var HorizontalAxisComponent=function(_React$Component5){_inherits(HorizontalAxisComponent,_React$Component5);var _super5=_createSuper(HorizontalAxisComponent);function HorizontalAxisComponent(){return _classCallCheck(this,HorizontalAxisComponent),_super5.apply(this,arguments)}return _createClass(HorizontalAxisComponent,[{key:"scaleType",get:function get(){return this.props.axis.scaleType},set:function set(scaleType){this.props.axis.config.scaleType=scaleType}},{key:"bounds",get:function get(){var bounds=this.props.bounds;return new Bounds_1.Bounds(bounds.right,bounds.bottom-30,100,100)}},{key:"render",value:function render(){var _this$props4=this.props,bounds=_this$props4.bounds,axis=_this$props4.axis,axisPosition=_this$props4.axisPosition,showTickMarks=_this$props4.showTickMarks,tickLabels=axis.tickLabels,label=axis.labelTextWrap,labelOffset=axis.labelOffset,tickMarks=showTickMarks?React.createElement(AxisTickMarks,{tickMarkTopPosition:axisPosition,tickMarkXPositions:tickLabels.map((function(label){return axis.place(label.value)})),color:"#999"}):void 0;return React.createElement("g",{className:"HorizontalAxis"},label&&label.render(bounds.centerX-label.width/2,bounds.bottom-label.height),tickMarks,tickLabels.map((function(label,i){var x=label.x,xAlign=label.xAlign,formattedValue=label.formattedValue;return React.createElement("text",{key:i,x:x,y:bounds.bottom-labelOffset,fill:"#666",textAnchor:Util_1.textAnchorFromAlign(null!=xAlign?xAlign:owidTypes_1.HorizontalAlign.center),fontSize:axis.tickFontSize},formattedValue)})))}}]),HorizontalAxisComponent}(React.Component);__decorate([mobx_1.computed],HorizontalAxisComponent.prototype,"scaleType",null),__decorate([mobx_1.computed],HorizontalAxisComponent.prototype,"bounds",null),exports.HorizontalAxisComponent=HorizontalAxisComponent;var AxisTickMarks=function(_React$Component6){_inherits(AxisTickMarks,_React$Component6);var _super6=_createSuper(AxisTickMarks);function AxisTickMarks(){return _classCallCheck(this,AxisTickMarks),_super6.apply(this,arguments)}return _createClass(AxisTickMarks,[{key:"render",value:function render(){var _this$props5=this.props,tickMarkTopPosition=_this$props5.tickMarkTopPosition,tickMarkXPositions=_this$props5.tickMarkXPositions,color=_this$props5.color,tickBottom=tickMarkTopPosition+5;return tickMarkXPositions.map((function(tickMarkPosition,index){return React.createElement("line",{key:index,x1:tickMarkPosition,y1:tickMarkTopPosition,x2:tickMarkPosition,y2:tickBottom,stroke:color})}))}}]),AxisTickMarks}(React.Component);exports.AxisTickMarks=AxisTickMarks,HorizontalAxisComponent.__docgenInfo={description:"",methods:[{name:"scaleType",docblock:null,modifiers:["get"],params:[],returns:null},{name:"scaleType",docblock:null,modifiers:["set"],params:[{name:"scaleType",type:null}],returns:null},{name:"bounds",docblock:null,modifiers:["get"],params:[],returns:null}],displayName:"HorizontalAxisComponent"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["itsJustJavascript/grapher/axis/AxisViews.js"]={name:"HorizontalAxisComponent",docgenInfo:HorizontalAxisComponent.__docgenInfo,path:"itsJustJavascript/grapher/axis/AxisViews.js"}),AxisTickMarks.__docgenInfo={description:"",methods:[],displayName:"AxisTickMarks"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["itsJustJavascript/grapher/axis/AxisViews.js"]={name:"AxisTickMarks",docgenInfo:AxisTickMarks.__docgenInfo,path:"itsJustJavascript/grapher/axis/AxisViews.js"})},387:function(module,exports,__webpack_require__){"use strict";function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=arr&&("undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"]);if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}__webpack_require__(192),__webpack_require__(32),__webpack_require__(14),__webpack_require__(372),__webpack_require__(132),__webpack_require__(25),__webpack_require__(65),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(22),__webpack_require__(17),__webpack_require__(29),Object.defineProperty(exports,"__esModule",{value:!0}),exports.getTimeDomainFromQueryString=exports.timeBoundToTimeBoundString=exports.maxTimeToJSON=exports.minTimeToJSON=exports.maxTimeBoundFromJSONOrPositiveInfinity=exports.minTimeBoundFromJSONOrNegativeInfinity=exports.isPositiveInfinity=exports.isNegativeInfinity=exports.timeFromTimebounds=exports.TimeBoundValue=void 0;var TimeBoundValue,TimeBoundValueStr,Util_1=__webpack_require__(40),owidTypes_1=__webpack_require__(122);!function(TimeBoundValue){TimeBoundValue[TimeBoundValue.negativeInfinity=-1/0]="negativeInfinity",TimeBoundValue[TimeBoundValue.positiveInfinity=1/0]="positiveInfinity"}(TimeBoundValue=exports.TimeBoundValue||(exports.TimeBoundValue={})),function(TimeBoundValueStr){TimeBoundValueStr.unboundedLeft="earliest",TimeBoundValueStr.unboundedRight="latest"}(TimeBoundValueStr||(TimeBoundValueStr={}));exports.timeFromTimebounds=function timeFromTimebounds(timeBound,fallbackTime){return Math.abs(timeBound)!==1/0?timeBound:fallbackTime};exports.isNegativeInfinity=function isNegativeInfinity(timeBound){return timeBound===TimeBoundValue.negativeInfinity};exports.isPositiveInfinity=function isPositiveInfinity(timeBound){return timeBound===TimeBoundValue.positiveInfinity};var parseTimeBound=function parseTimeBound(str){return str===TimeBoundValueStr.unboundedLeft?TimeBoundValue.negativeInfinity:str===TimeBoundValueStr.unboundedRight?TimeBoundValue.positiveInfinity:Util_1.parseIntOrUndefined(str)},fromJSON=function fromJSON(value){return Util_1.isString(value)?parseTimeBound(value):value},toJSON=function toJSON(bound){if(void 0!==bound)return exports.isNegativeInfinity(bound)?TimeBoundValueStr.unboundedLeft:exports.isPositiveInfinity(bound)?TimeBoundValueStr.unboundedRight:bound};exports.minTimeBoundFromJSONOrNegativeInfinity=function minTimeBoundFromJSONOrNegativeInfinity(minTime){var _a;return null!==(_a=fromJSON(minTime))&&void 0!==_a?_a:TimeBoundValue.negativeInfinity};exports.maxTimeBoundFromJSONOrPositiveInfinity=function maxTimeBoundFromJSONOrPositiveInfinity(maxTime){var _a;return null!==(_a=fromJSON(maxTime))&&void 0!==_a?_a:TimeBoundValue.positiveInfinity},exports.minTimeToJSON=toJSON,exports.maxTimeToJSON=toJSON;var reISODateComponent=new RegExp("\\d{4}-[01]\\d-[0-3]\\d"),reISODate=new RegExp("^(".concat(reISODateComponent.source,")$"));exports.timeBoundToTimeBoundString=function timeBoundToTimeBoundString(timeBound,isDate){return function hasAnInfinity(timeBound){return exports.isNegativeInfinity(timeBound)||exports.isPositiveInfinity(timeBound)}(timeBound)?function formatTimeBound(timeBound){return exports.isNegativeInfinity(timeBound)?TimeBoundValueStr.unboundedLeft:exports.isPositiveInfinity(timeBound)?TimeBoundValueStr.unboundedRight:"".concat(timeBound)}(timeBound):isDate?Util_1.formatDay(timeBound,{format:"YYYY-MM-DD"}):"".concat(timeBound)};var parseTimeURIComponent=function parseTimeURIComponent(param){return reISODate.test(param)?Util_1.diffDateISOStringInDays(param,owidTypes_1.EPOCH_DATE):parseTimeBound(param)};exports.getTimeDomainFromQueryString=function getTimeDomainFromQueryString(time){var _a,_b,_c;time=function upgradeLegacyTimeString(time){return".."===time?"earliest..latest":time.endsWith("..")?time+"latest":time.startsWith("..")?"earliest"+time:time}(time);var reIntComponent=new RegExp("\\-?\\d+"),reIntRange=new RegExp("^(".concat(reIntComponent.source,"|earliest)\\.\\.(").concat(reIntComponent.source,"|latest)$")),reDateRange=new RegExp("^(".concat(reISODateComponent.source,"|earliest)\\.\\.(").concat(reISODateComponent.source,"|latest)$"));if(reIntRange.test(time)||reDateRange.test(time)){var _time$split2=_slicedToArray(time.split(".."),2),start=_time$split2[0],end=_time$split2[1];return[null!==(_a=parseTimeURIComponent(start))&&void 0!==_a?_a:TimeBoundValue.negativeInfinity,null!==(_b=parseTimeURIComponent(end))&&void 0!==_b?_b:TimeBoundValue.positiveInfinity]}var timebound=null!==(_c=parseTimeURIComponent(time))&&void 0!==_c?_c:TimeBoundValue.positiveInfinity;return[timebound,timebound]}},389:function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(22),__webpack_require__(28),__webpack_require__(1790),__webpack_require__(820),__webpack_require__(31),__webpack_require__(33),__webpack_require__(202),__webpack_require__(5),__webpack_require__(14),__webpack_require__(25),__webpack_require__(9),__webpack_require__(10),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(18),__webpack_require__(21),__webpack_require__(29),__webpack_require__(17);var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};Object.defineProperty(exports,"__esModule",{value:!0}),exports.DualAxis=exports.VerticalAxis=exports.HorizontalAxis=void 0;var d3_scale_1=__webpack_require__(279),mobx_1=__webpack_require__(41),Util_1=__webpack_require__(40),Bounds_1=__webpack_require__(73),TextWrap_1=__webpack_require__(242),owidTypes_1=__webpack_require__(122),doIntersect=function doIntersect(bounds,bounds2){return bounds.intersects(bounds2)},boundsFromLabelPlacement=function boundsFromLabelPlacement(label){var x=label.x,y=label.y,width=label.width,height=label.height,xAlign=label.xAlign,yAlign=label.yAlign,xShift=xAlign===owidTypes_1.HorizontalAlign.center?-width/2:xAlign===owidTypes_1.HorizontalAlign.right?-width:0,yShift=yAlign===owidTypes_1.VerticalAlign.middle?-height/2:yAlign===owidTypes_1.VerticalAlign.bottom?-height:0;return new Bounds_1.Bounds(x+xShift,y+yShift,width,height)},AbstractAxis=function(){function AbstractAxis(config){_classCallCheck(this,AbstractAxis),this.hideFractionalTicks=!1,this.hideGridlines=!1,this.range=[0,0],this.config=config,this.domain=[config.domain[0],config.domain[1]]}return _createClass(AbstractAxis,[{key:"hideAxis",get:function get(){var _a;return null!==(_a=this.config.hideAxis)&&void 0!==_a&&_a}},{key:"labelPadding",get:function get(){var _a;return null!==(_a=this.config.labelPadding)&&void 0!==_a?_a:5}},{key:"nice",get:function get(){var _a;return null!==(_a=this.config.nice)&&void 0!==_a&&_a}},{key:"fontSize",get:function get(){return this.config.fontSize}},{key:"maxTicks",get:function get(){var _a;return null!==(_a=this.config.maxTicks)&&void 0!==_a?_a:6}},{key:"canChangeScaleType",get:function get(){return this.config.canChangeScaleType}},{key:"scaleType",get:function get(){var _a,_b;return null!==(_b=null!==(_a=this._scaleType)&&void 0!==_a?_a:this.config.scaleType)&&void 0!==_b?_b:owidTypes_1.ScaleType.linear},set:function set(value){this._scaleType=value}},{key:"label",get:function get(){var _a;return null!==(_a=this._label)&&void 0!==_a?_a:this.config.label},set:function set(value){this._label=value}},{key:"updateDomainPreservingUserSettings",value:function updateDomainPreservingUserSettings(domain){return this.domain=[void 0!==domain[0]?Math.min(this.domain[0],domain[0]):this.domain[0],void 0!==domain[1]?Math.max(this.domain[1],domain[1]):this.domain[1]],this}},{key:"_update",value:function _update(parentAxis){return this.formatColumn=parentAxis.formatColumn,this.domain=parentAxis.domain.slice(),this.hideFractionalTicks=parentAxis.hideFractionalTicks,this.hideGridlines=parentAxis.hideGridlines,this.range=parentAxis.range.slice(),this._scaleType=parentAxis._scaleType,this._label=parentAxis._label,this}},{key:"d3_scale",get:function get(){var scale=(this.scaleType===owidTypes_1.ScaleType.log?d3_scale_1.scaleLog:d3_scale_1.scaleLinear)().domain(this.domain).range(this.range);return this.nice?scale.nice(this.totalTicksTarget):scale}},{key:"rangeSize",get:function get(){return Math.abs(this.range[1]-this.range[0])}},{key:"rangeMax",get:function get(){return Math.max(this.range[1],this.range[0])}},{key:"rangeMin",get:function get(){return Math.min(this.range[1],this.range[0])}},{key:"totalTicksTarget",get:function get(){return Math.round(Math.min(this.maxTicks,this.rangeSize/(1.8*this.fontSize)))}},{key:"getTickValues",value:function getTickValues(){var ticks,scaleType=this.scaleType,d3_scale=this.d3_scale;if(scaleType===owidTypes_1.ScaleType.log){var maxLabelledTicks=Math.round(1.25*this.totalTicksTarget),maxTicks=Math.round(3*this.totalTicksTarget),tickCandidates=d3_scale.ticks(maxLabelledTicks);if((ticks=tickCandidates.map((function(value){return Math.fround(Math.log10(value))%1==0?{value:value,priority:1}:Math.fround(Math.log10(2*value))%1==0||Math.fround(Math.log10(value/2))%1==0?{value:value,priority:2}:{value:value,priority:3}}))).length>maxLabelledTicks)if(ticks.length<=maxTicks)ticks=ticks.map((function(tick){return 3===tick.priority&&(tick=Object.assign(Object.assign({},tick),{faint:!0,gridLineOnly:!0})),tick}));else for(var _loop=function _loop(priority){ticks.length>maxLabelledTicks&&(ticks=ticks.filter((function(tick){return tick.priority<priority})))},priority=3;priority>1;priority--)_loop(priority)}else ticks=d3_scale.ticks(this.totalTicksTarget).map((function(tickValue){return{value:tickValue,priority:2}}));return this.hideFractionalTicks&&(ticks=ticks.filter((function(t){return t.value%1==0}))),Util_1.uniq(ticks)}},{key:"getTickFormattingOptions",value:function getTickFormattingOptions(){var options={};this.config.compactLabels&&(options.shortNumberPrefixes=!0);var minDist=Util_1.min(Util_1.rollingMap(this.baseTicks,(function(a,b){return Math.abs(a.value-b.value)})));if(void 0!==minDist){var dp=1-Util_1.numberMagnitude(minDist);dp>=0&&(options.numDecimalPlaces=dp)}return options}},{key:"place",value:function place(value){return this.range?this.scaleType===owidTypes_1.ScaleType.log&&value<=0?(console.error("Can't have ".concat(value," which is <= 0 on a log scale")),value):this.domain[0]===this.domain[1]?value>this.domain[0]?this.range[1]:this.range[0]:parseFloat(this.d3_scale(value).toFixed(1)):(console.error("Can't place value on scale without a defined output range"),value)}},{key:"tickFontSize",get:function get(){return.9*this.fontSize}},{key:"baseTicks",get:function get(){return this.getTickValues().filter((function(tick){return!tick.gridLineOnly}))}},{key:"tickLabels",get:function get(){for(var _this=this,tickLabels=Util_1.sortBy(this.baseTicks,(function(tick){return tick.priority})).map((function(tick){return _this.placeTickLabel(tick.value)})),i=0;i<tickLabels.length;i++)for(var j=i+1;j<tickLabels.length;j++){var t1=tickLabels[i],t2=tickLabels[j];t1===t2||t1.isHidden||t2.isHidden||doIntersect(boundsFromLabelPlacement(t1).expand(3),boundsFromLabelPlacement(t2).expand(3))&&(t2.isHidden=!0)}return tickLabels.filter((function(t){return!t.isHidden}))}},{key:"formatTick",value:function formatTick(tick,formattingOptionsOverride){var _a,_b,tickFormattingOptions=Object.assign(Object.assign({},this.getTickFormattingOptions()),formattingOptionsOverride);return null!==(_b=null===(_a=this.formatColumn)||void 0===_a?void 0:_a.formatForTick(tick,tickFormattingOptions))&&void 0!==_b?_b:tick.toString()}},{key:"labelFontSize",get:function get(){return.7*this.fontSize}},{key:"labelTextWrap",get:function get(){var text=this.label;return text?new TextWrap_1.TextWrap({maxWidth:this.labelWidth,fontSize:this.labelFontSize,text:text}):void 0}}]),AbstractAxis}();__decorate([mobx_1.observable.ref],AbstractAxis.prototype,"domain",void 0),__decorate([mobx_1.observable],AbstractAxis.prototype,"formatColumn",void 0),__decorate([mobx_1.observable],AbstractAxis.prototype,"hideFractionalTicks",void 0),__decorate([mobx_1.observable],AbstractAxis.prototype,"hideGridlines",void 0),__decorate([mobx_1.observable.struct],AbstractAxis.prototype,"range",void 0),__decorate([mobx_1.observable],AbstractAxis.prototype,"_scaleType",void 0),__decorate([mobx_1.observable],AbstractAxis.prototype,"_label",void 0),__decorate([mobx_1.computed],AbstractAxis.prototype,"hideAxis",null),__decorate([mobx_1.computed],AbstractAxis.prototype,"labelPadding",null),__decorate([mobx_1.computed],AbstractAxis.prototype,"nice",null),__decorate([mobx_1.computed],AbstractAxis.prototype,"fontSize",null),__decorate([mobx_1.computed],AbstractAxis.prototype,"maxTicks",null),__decorate([mobx_1.computed],AbstractAxis.prototype,"canChangeScaleType",null),__decorate([mobx_1.computed],AbstractAxis.prototype,"scaleType",null),__decorate([mobx_1.computed],AbstractAxis.prototype,"label",null),__decorate([mobx_1.computed],AbstractAxis.prototype,"d3_scale",null),__decorate([mobx_1.computed],AbstractAxis.prototype,"rangeSize",null),__decorate([mobx_1.computed],AbstractAxis.prototype,"rangeMax",null),__decorate([mobx_1.computed],AbstractAxis.prototype,"rangeMin",null),__decorate([mobx_1.computed],AbstractAxis.prototype,"totalTicksTarget",null),__decorate([mobx_1.computed],AbstractAxis.prototype,"tickFontSize",null),__decorate([mobx_1.computed],AbstractAxis.prototype,"baseTicks",null),__decorate([mobx_1.computed],AbstractAxis.prototype,"tickLabels",null),__decorate([mobx_1.computed],AbstractAxis.prototype,"labelFontSize",null),__decorate([mobx_1.computed],AbstractAxis.prototype,"labelTextWrap",null);var HorizontalAxis=function(_AbstractAxis){_inherits(HorizontalAxis,_AbstractAxis);var _super=_createSuper(HorizontalAxis);function HorizontalAxis(){return _classCallCheck(this,HorizontalAxis),_super.apply(this,arguments)}return _createClass(HorizontalAxis,[{key:"clone",value:function clone(){return new HorizontalAxis(this.config)._update(this)}},{key:"position",get:function get(){return owidTypes_1.Position.bottom}},{key:"labelOffset",get:function get(){return this.labelTextWrap?this.labelTextWrap.height+2*this.labelPadding:0}},{key:"labelWidth",get:function get(){return this.rangeSize}},{key:"height",get:function get(){var _a;if(this.hideAxis)return 0;var labelOffset=this.labelOffset,labelPadding=this.labelPadding,maxTickHeight=Util_1.max(this.tickLabels.map((function(tick){return tick.height}))),height=maxTickHeight?maxTickHeight+labelOffset+labelPadding:0;return Math.max(height,null!==(_a=this.config.minSize)&&void 0!==_a?_a:0)}},{key:"size",get:function get(){return this.height}},{key:"baseTicks",get:function get(){var ticks=this.getTickValues().filter((function(tick){return!tick.gridLineOnly})),domain=this.domain,startEndPrio=this.scaleType===owidTypes_1.ScaleType.log?2:1;return domain[0]%1==0&&(ticks=[{value:domain[0],priority:startEndPrio}].concat(_toConsumableArray(ticks))),domain[1]%1==0&&this.hideFractionalTicks&&(ticks=[].concat(_toConsumableArray(ticks),[{value:domain[1],priority:startEndPrio}])),Util_1.uniq(ticks)}},{key:"placeTickLabel",value:function placeTickLabel(value){var formattedValue=this.formatTick(value),_Bounds_1$Bounds$forT=Bounds_1.Bounds.forText(formattedValue,{fontSize:this.tickFontSize}),width=_Bounds_1$Bounds$forT.width,height=_Bounds_1$Bounds$forT.height,x=this.place(value),xAlign=owidTypes_1.HorizontalAlign.center,right=x+width/2;return x-width/2<this.rangeMin&&(x=this.rangeMin,xAlign=owidTypes_1.HorizontalAlign.left),right>this.rangeMax&&(x=this.rangeMax,xAlign=owidTypes_1.HorizontalAlign.right),{value:value,formattedValue:formattedValue,x:x,y:0,width:width,height:height,xAlign:xAlign,isHidden:!1}}},{key:"doIntersect",value:function doIntersect(bounds,bounds2){return bounds.intersects(bounds2.padWidth(-5))}}]),HorizontalAxis}(AbstractAxis);__decorate([mobx_1.computed],HorizontalAxis.prototype,"position",null),__decorate([mobx_1.computed],HorizontalAxis.prototype,"labelOffset",null),__decorate([mobx_1.computed],HorizontalAxis.prototype,"labelWidth",null),__decorate([mobx_1.computed],HorizontalAxis.prototype,"height",null),__decorate([mobx_1.computed],HorizontalAxis.prototype,"size",null),__decorate([mobx_1.computed],HorizontalAxis.prototype,"baseTicks",null),exports.HorizontalAxis=HorizontalAxis;var VerticalAxis=function(_AbstractAxis2){_inherits(VerticalAxis,_AbstractAxis2);var _super2=_createSuper(VerticalAxis);function VerticalAxis(){return _classCallCheck(this,VerticalAxis),_super2.apply(this,arguments)}return _createClass(VerticalAxis,[{key:"clone",value:function clone(){return new VerticalAxis(this.config)._update(this)}},{key:"position",get:function get(){return owidTypes_1.Position.left}},{key:"labelWidth",get:function get(){return this.height}},{key:"labelOffset",get:function get(){return this.labelTextWrap?this.labelTextWrap.height+2*this.labelPadding:0}},{key:"width",get:function get(){var _a;if(this.hideAxis)return 0;var labelOffset=this.labelOffset,labelPadding=this.labelPadding,maxTickWidth=Util_1.max(this.tickLabels.map((function(tick){return tick.width}))),width=void 0!==maxTickWidth?maxTickWidth+labelOffset+labelPadding:0;return Math.max(width,null!==(_a=this.config.minSize)&&void 0!==_a?_a:0)}},{key:"height",get:function get(){return this.rangeSize}},{key:"size",get:function get(){return this.width}},{key:"placeTickLabel",value:function placeTickLabel(value){var formattedValue=this.formatTick(value),_Bounds_1$Bounds$forT2=Bounds_1.Bounds.forText(formattedValue,{fontSize:this.tickFontSize}),width=_Bounds_1$Bounds$forT2.width,height=_Bounds_1$Bounds$forT2.height;return{value:value,formattedValue:formattedValue,x:0,y:this.place(value),width:width,height:height,xAlign:owidTypes_1.HorizontalAlign.right,yAlign:owidTypes_1.VerticalAlign.middle,isHidden:!1}}}]),VerticalAxis}(AbstractAxis);__decorate([mobx_1.computed],VerticalAxis.prototype,"position",null),__decorate([mobx_1.computed],VerticalAxis.prototype,"labelWidth",null),__decorate([mobx_1.computed],VerticalAxis.prototype,"labelOffset",null),__decorate([mobx_1.computed],VerticalAxis.prototype,"width",null),__decorate([mobx_1.computed],VerticalAxis.prototype,"height",null),__decorate([mobx_1.computed],VerticalAxis.prototype,"size",null),exports.VerticalAxis=VerticalAxis;var DualAxis=function(){function DualAxis(props){_classCallCheck(this,DualAxis),this.props=props}return _createClass(DualAxis,[{key:"horizontalAxis",get:function get(){var axis=this.props.horizontalAxis.clone();return axis.range=this.innerBounds.xRange(),axis}},{key:"verticalAxis",get:function get(){var axis=this.props.verticalAxis.clone();return axis.range=this.innerBounds.yRange(),axis}},{key:"horizontalAxisHeight",get:function get(){var axis=this.props.horizontalAxis.clone();return axis.range=[0,this.bounds.width],axis.height}},{key:"verticalAxisWidth",get:function get(){var axis=this.props.verticalAxis.clone();return axis.range=[0,this.bounds.height],axis.width}},{key:"innerBounds",get:function get(){return this.bounds.padBottom(this.horizontalAxisHeight).padLeft(this.verticalAxisWidth)}},{key:"bounds",get:function get(){var _a;return null!==(_a=this.props.bounds)&&void 0!==_a?_a:Bounds_1.DEFAULT_BOUNDS}}]),DualAxis}();__decorate([mobx_1.computed],DualAxis.prototype,"horizontalAxis",null),__decorate([mobx_1.computed],DualAxis.prototype,"verticalAxis",null),__decorate([mobx_1.computed],DualAxis.prototype,"horizontalAxisHeight",null),__decorate([mobx_1.computed],DualAxis.prototype,"verticalAxisWidth",null),__decorate([mobx_1.computed],DualAxis.prototype,"innerBounds",null),__decorate([mobx_1.computed],DualAxis.prototype,"bounds",null),exports.DualAxis=DualAxis},390:function(module,exports,__webpack_require__){"use strict";function _toArray(arr){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(57),__webpack_require__(28),__webpack_require__(39),__webpack_require__(36),__webpack_require__(65),__webpack_require__(32),__webpack_require__(22),__webpack_require__(151),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(18),__webpack_require__(21),__webpack_require__(29),__webpack_require__(17);var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ColorScaleConfig=exports.ColorScaleConfigDefaults=void 0;var mobx_1=__webpack_require__(41),Persistable_1=__webpack_require__(322),Util_1=__webpack_require__(40),BinningStrategy_1=__webpack_require__(468),ColorScale_1=__webpack_require__(391),ColorScaleConfigDefaults=function ColorScaleConfigDefaults(){_classCallCheck(this,ColorScaleConfigDefaults),this.colorSchemeInvert=void 0,this.binningStrategy=BinningStrategy_1.BinningStrategy.ckmeans,this.customNumericValues=[],this.customNumericLabels=[],this.customNumericColorsActive=void 0,this.customNumericColors=[],this.equalSizeBins=void 0,this.customCategoryColors={},this.customCategoryLabels={},this.customHiddenCategories={},this.legendDescription=void 0};__decorate([mobx_1.observable],ColorScaleConfigDefaults.prototype,"baseColorScheme",void 0),__decorate([mobx_1.observable],ColorScaleConfigDefaults.prototype,"colorSchemeInvert",void 0),__decorate([mobx_1.observable],ColorScaleConfigDefaults.prototype,"binningStrategy",void 0),__decorate([mobx_1.observable],ColorScaleConfigDefaults.prototype,"binningStrategyBinCount",void 0),__decorate([mobx_1.observable],ColorScaleConfigDefaults.prototype,"customNumericMinValue",void 0),__decorate([mobx_1.observable],ColorScaleConfigDefaults.prototype,"customNumericValues",void 0),__decorate([mobx_1.observable],ColorScaleConfigDefaults.prototype,"customNumericLabels",void 0),__decorate([mobx_1.observable],ColorScaleConfigDefaults.prototype,"customNumericColorsActive",void 0),__decorate([mobx_1.observable],ColorScaleConfigDefaults.prototype,"customNumericColors",void 0),__decorate([mobx_1.observable],ColorScaleConfigDefaults.prototype,"equalSizeBins",void 0),__decorate([mobx_1.observable.ref],ColorScaleConfigDefaults.prototype,"customCategoryColors",void 0),__decorate([mobx_1.observable.ref],ColorScaleConfigDefaults.prototype,"customCategoryLabels",void 0),__decorate([mobx_1.observable.ref],ColorScaleConfigDefaults.prototype,"customHiddenCategories",void 0),__decorate([mobx_1.observable],ColorScaleConfigDefaults.prototype,"legendDescription",void 0),exports.ColorScaleConfigDefaults=ColorScaleConfigDefaults;var ColorScaleConfig=function(_ColorScaleConfigDefa){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(ColorScaleConfig,_ColorScaleConfigDefa);var _super=_createSuper(ColorScaleConfig);function ColorScaleConfig(obj){var _this;return _classCallCheck(this,ColorScaleConfig),_this=_super.call(this),Persistable_1.updatePersistables(_assertThisInitialized(_this),obj),_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(ColorScaleConfig,[{key:"updateFromObject",value:function updateFromObject(obj){Util_1.extend(this,obj)}},{key:"toObject",value:function toObject(){var obj=Persistable_1.objectWithPersistablesToObject(this);return Persistable_1.deleteRuntimeAndUnchangedProps(obj,new ColorScaleConfigDefaults),Util_1.trimObject(obj)}},{key:"toDSL",value:function toDSL(){var _this$toObject=this.toObject(),colorSchemeInvert=_this$toObject.colorSchemeInvert,baseColorScheme=_this$toObject.baseColorScheme,binningStrategy=_this$toObject.binningStrategy,customNumericValues=_this$toObject.customNumericValues,customNumericColors=_this$toObject.customNumericColors,customNumericLabels=_this$toObject.customNumericLabels,customNumericMinValue=_this$toObject.customNumericMinValue,customCategoryLabels=_this$toObject.customCategoryLabels,customCategoryColors=_this$toObject.customCategoryColors,columnColorScale={colorScaleScheme:baseColorScheme,colorScaleInvert:colorSchemeInvert,colorScaleBinningStrategy:binningStrategy,colorScaleEqualSizeBins:_this$toObject.equalSizeBins,colorScaleLegendDescription:_this$toObject.legendDescription,colorScaleNumericMinValue:customNumericMinValue,colorScaleNumericBins:(null!=customNumericValues?customNumericValues:[]).map((function(value,index){var _a;return[value,null!==(_a=customNumericColors[index])&&void 0!==_a?_a:"",customNumericLabels[index]].join(INTRA_BIN_DELIMITER)})).join(INTER_BIN_DELIMITER),colorScaleNoDataLabel:customCategoryLabels[ColorScale_1.NO_DATA_LABEL],colorScaleCategoricalBins:Object.keys(null!=customCategoryColors?customCategoryColors:{}).map((function(value){return[value,customCategoryColors[value],customCategoryLabels[value]].join(INTRA_BIN_DELIMITER)})).join(INTER_BIN_DELIMITER)};return Util_1.trimObject(columnColorScale)}}],[{key:"fromDSL",value:function fromDSL(scale){var _a,_b,colorSchemeInvert=scale.colorScaleInvert,baseColorScheme=scale.colorScaleScheme,customNumericValues=[],customNumericLabels=[],customNumericColors=[];null===(_a=scale.colorScaleNumericBins)||void 0===_a||_a.split(INTER_BIN_DELIMITER).forEach((function(bin){var _bin$split2=_toArray(bin.split(INTRA_BIN_DELIMITER)),value=_bin$split2[0],color=_bin$split2[1],label=_bin$split2.slice(2);value&&(customNumericValues.push(parseFloat(value)),customNumericColors.push((null==color?void 0:color.trim())||void 0),customNumericLabels.push(label.join(INTRA_BIN_DELIMITER).trim()||void 0))}));var customNumericMinValue=scale.colorScaleNumericMinValue?parseFloat(scale.colorScaleNumericMinValue):void 0,customNumericColorsActive=customNumericColors.length>0||void 0,customCategoryColors={},customCategoryLabels={};null===(_b=scale.colorScaleCategoricalBins)||void 0===_b||_b.split(INTER_BIN_DELIMITER).forEach((function(bin){var _bin$split4=_toArray(bin.split(INTRA_BIN_DELIMITER)),value=_bin$split4[0],color=_bin$split4[1],label=_bin$split4.slice(2);value&&(customCategoryColors[value]=(null==color?void 0:color.trim())||void 0,customCategoryLabels[value]=label.join(INTRA_BIN_DELIMITER).trim()||void 0)})),scale.colorScaleNoDataLabel&&(customCategoryLabels[ColorScale_1.NO_DATA_LABEL]=scale.colorScaleNoDataLabel);var binningStrategy=scale.colorScaleBinningStrategy?scale.colorScaleBinningStrategy:scale.colorScaleNumericBins||scale.colorScaleCategoricalBins?BinningStrategy_1.BinningStrategy.manual:void 0,equalSizeBins=scale.colorScaleEqualSizeBins,legendDescription=scale.colorScaleLegendDescription,trimmed=Util_1.trimObject({colorSchemeInvert:colorSchemeInvert,baseColorScheme:baseColorScheme,binningStrategy:binningStrategy,customNumericValues:customNumericValues,customNumericColors:customNumericColors,customNumericColorsActive:customNumericColorsActive,customNumericLabels:customNumericLabels,customNumericMinValue:customNumericMinValue,customCategoryLabels:customCategoryLabels,customCategoryColors:customCategoryColors,equalSizeBins:equalSizeBins,legendDescription:legendDescription});return Util_1.isEmpty(trimmed)?void 0:new ColorScaleConfig(trimmed)}}]),ColorScaleConfig}(ColorScaleConfigDefaults);exports.ColorScaleConfig=ColorScaleConfig;var INTER_BIN_DELIMITER=";",INTRA_BIN_DELIMITER=","},391:function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(33),__webpack_require__(22),__webpack_require__(31),__webpack_require__(28),__webpack_require__(5),__webpack_require__(14),__webpack_require__(25),__webpack_require__(48),__webpack_require__(55),__webpack_require__(79),__webpack_require__(9),__webpack_require__(10),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(29),__webpack_require__(17);var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ColorScale=exports.NO_DATA_LABEL=void 0;var mobx_1=__webpack_require__(41),d3_array_1=__webpack_require__(89),ColorScaleConfig_1=__webpack_require__(390),Util_1=__webpack_require__(40),ColorSchemes_1=__webpack_require__(321),ColorScaleBin_1=__webpack_require__(472),ColorConstants_1=__webpack_require__(278),BinningStrategies_1=__webpack_require__(1793),BinningStrategy_1=__webpack_require__(468);exports.NO_DATA_LABEL="No data";var ColorScale=function(){function ColorScale(){var manager=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,ColorScale),this.manager=manager}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(ColorScale,[{key:"config",get:function get(){var _a;return null!==(_a=this.manager.colorScaleConfig)&&void 0!==_a?_a:new ColorScaleConfig_1.ColorScaleConfig}},{key:"customNumericValues",get:function get(){var _a;return null!==(_a=this.config.customNumericValues)&&void 0!==_a?_a:[]}},{key:"customNumericColorsActive",get:function get(){var _a;return null!==(_a=this.config.customNumericColorsActive)&&void 0!==_a&&_a}},{key:"customNumericColors",get:function get(){return this.customNumericColorsActive?Util_1.mapNullToUndefined(this.config.customNumericColors):[]}},{key:"customHiddenCategories",get:function get(){var _a;return null!==(_a=this.config.customHiddenCategories)&&void 0!==_a?_a:{}}},{key:"customNumericLabels",get:function get(){if(!this.isManualBuckets)return[];for(var labels=Util_1.mapNullToUndefined(mobx_1.toJS(this.config.customNumericLabels))||[];labels.length<this.numBins;)labels.push(void 0);return labels}},{key:"isColorSchemeInverted",get:function get(){var _a;return null!==(_a=this.config.colorSchemeInvert)&&void 0!==_a&&_a}},{key:"customCategoryLabels",get:function get(){var _a;return null!==(_a=this.config.customCategoryLabels)&&void 0!==_a?_a:{}}},{key:"baseColorScheme",get:function get(){var _a,_b;return null!==(_b=null!==(_a=this.config.baseColorScheme)&&void 0!==_a?_a:this.manager.defaultBaseColorScheme)&&void 0!==_b?_b:ColorConstants_1.ColorSchemeName.BuGn}},{key:"defaultColorScheme",get:function get(){return ColorSchemes_1.ColorSchemes[ColorConstants_1.ColorSchemeName.BuGn]}},{key:"defaultNoDataColor",get:function get(){var _a;return null!==(_a=this.manager.defaultNoDataColor)&&void 0!==_a?_a:"#eee"}},{key:"colorScaleColumn",get:function get(){return this.manager.colorScaleColumn}},{key:"legendDescription",get:function get(){return this.config.legendDescription}},{key:"hasNoDataBin",get:function get(){return this.manager.hasNoDataBin||!1}},{key:"sortedNumericValues",get:function get(){var _a,_b,_c;return null!==(_c=null===(_b=null===(_a=this.colorScaleColumn)||void 0===_a?void 0:_a.valuesAscending)||void 0===_b?void 0:_b.filter((function(x){return"number"==typeof x})))&&void 0!==_c?_c:[]}},{key:"minPossibleValue",get:function get(){return Util_1.first(this.sortedNumericValues)}},{key:"maxPossibleValue",get:function get(){return Util_1.last(this.sortedNumericValues)}},{key:"categoricalValues",get:function get(){var _a,_b;return null!==(_b=null===(_a=this.colorScaleColumn)||void 0===_a?void 0:_a.sortedUniqNonEmptyStringVals)&&void 0!==_b?_b:[]}},{key:"colorScheme",get:function get(){var _a;return null!==(_a=ColorSchemes_1.ColorSchemes[this.baseColorScheme])&&void 0!==_a?_a:this.defaultColorScheme}},{key:"singleColorScale",get:function get(){return this.colorScheme.singleColorScale}},{key:"autoMinBinValue",get:function get(){var minValue=Math.min(0,this.sortedNumericValuesWithoutOutliers[0]);return isNaN(minValue)?0:Util_1.roundSigFig(minValue,1)}},{key:"minBinValue",get:function get(){var _a;return null!==(_a=this.config.customNumericMinValue)&&void 0!==_a?_a:this.autoMinBinValue}},{key:"manualBinMaximums",get:function get(){if(!this.sortedNumericValues.length||this.numBins<=0)return[];for(var numBins=this.numBins,values=_toConsumableArray(this.customNumericValues);values.length<numBins;)values.push(0);for(;values.length>numBins;)values=values.slice(0,numBins);return values}},{key:"autoBinMaximums",get:function get(){return BinningStrategies_1.getBinMaximums({binningStrategy:this.config.binningStrategy,sortedValues:this.sortedNumericBinningValues,binCount:this.numAutoBins,minBinValue:this.minBinValue})}},{key:"bucketMaximums",get:function get(){return this.isManualBuckets?this.manualBinMaximums:this.autoBinMaximums}},{key:"customCategoryColors",get:function get(){return Object.assign(function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}({},exports.NO_DATA_LABEL,this.defaultNoDataColor),this.config.customCategoryColors)}},{key:"noDataColor",get:function get(){return this.customCategoryColors[exports.NO_DATA_LABEL]}},{key:"baseColors",get:function get(){var categoricalValues=this.categoricalValues,colorScheme=this.colorScheme,bucketMaximums=this.bucketMaximums,isColorSchemeInverted=this.isColorSchemeInverted,numColors=bucketMaximums.length+categoricalValues.length,colors=colorScheme.getColors(numColors);return isColorSchemeInverted&&Util_1.reverse(colors),colors}},{key:"numAutoBins",get:function get(){var _a;return null!==(_a=this.config.binningStrategyBinCount)&&void 0!==_a?_a:5}},{key:"isManualBuckets",get:function get(){return this.config.binningStrategy===BinningStrategy_1.BinningStrategy.manual}},{key:"numBins",get:function get(){return this.isManualBuckets?this.customNumericValues.length:this.numAutoBins}},{key:"sortedNumericValuesWithoutOutliers",get:function get(){var _a,_b,sortedNumericValues=this.sortedNumericValues;if(!sortedNumericValues.length)return[];var sampleMean=d3_array_1.mean(sortedNumericValues),sampleDeviation=null!==(_a=d3_array_1.deviation(sortedNumericValues))&&void 0!==_a?_a:0,withoutOutliers=sortedNumericValues.filter((function(d){return Math.abs(d-sampleMean)<=2*sampleDeviation}));return 0===(null!==(_b=d3_array_1.deviation(withoutOutliers))&&void 0!==_b?_b:0)?sortedNumericValues:withoutOutliers}},{key:"sortedNumericBinningValues",get:function get(){var _this=this;return this.sortedNumericValuesWithoutOutliers.filter((function(v){return v>_this.minBinValue}))}},{key:"numericLegendBins",get:function get(){var _this2=this,customNumericLabels=this.customNumericLabels,minBinValue=this.minBinValue,minPossibleValue=this.minPossibleValue,maxPossibleValue=this.maxPossibleValue,customNumericColors=this.customNumericColors,bucketMaximums=this.bucketMaximums,baseColors=this.baseColors;if(void 0===minPossibleValue||void 0===maxPossibleValue)return[];var min=minBinValue;return bucketMaximums.map((function(max,index){var _a,_b,_c,_d,_e,baseColor=baseColors[index],color=null!==(_a=customNumericColors[index])&&void 0!==_a?_a:baseColor,label=customNumericLabels[index],displayMin=null!==(_c=null===(_b=_this2.colorScaleColumn)||void 0===_b?void 0:_b.formatValueShort(min))&&void 0!==_c?_c:min.toString(),displayMax=null!==(_e=null===(_d=_this2.colorScaleColumn)||void 0===_d?void 0:_d.formatValueShort(max))&&void 0!==_e?_e:max.toString(),currentMin=min;return min=max,new ColorScaleBin_1.NumericBin({isFirst:0===index,isOpenLeft:0===index&&currentMin>minPossibleValue,isOpenRight:index===bucketMaximums.length-1&&max<maxPossibleValue,min:currentMin,max:max,color:color,label:label,displayMin:displayMin,displayMax:displayMax})}))}},{key:"legendBins",get:function get(){return[].concat(_toConsumableArray(this.numericLegendBins),_toConsumableArray(this.categoricalLegendBins))}},{key:"categoricalLegendBins",get:function get(){var bucketMaximums=this.bucketMaximums,baseColors=this.baseColors,hasNoDataBin=this.hasNoDataBin,categoricalValues=this.categoricalValues,customCategoryColors=this.customCategoryColors,customCategoryLabels=this.customCategoryLabels,customHiddenCategories=this.customHiddenCategories,allCategoricalValues=categoricalValues;return hasNoDataBin&&!allCategoricalValues.includes(exports.NO_DATA_LABEL)&&(allCategoricalValues=[].concat(_toConsumableArray(allCategoricalValues),[exports.NO_DATA_LABEL])),allCategoricalValues.map((function(value,index){var _a,_b,boundingOffset=Util_1.isEmpty(bucketMaximums)?0:bucketMaximums.length-1,baseColor=baseColors[index+boundingOffset],color=null!==(_a=customCategoryColors[value])&&void 0!==_a?_a:baseColor,label=null!==(_b=customCategoryLabels[value])&&void 0!==_b?_b:value;return new ColorScaleBin_1.CategoricalBin({index:index,value:value,color:color,label:label,isHidden:!!customHiddenCategories[value]})}))}},{key:"getBinForValue",value:function getBinForValue(value){return void 0===value?void 0:this.legendBins.find((function(bin){return bin.contains(value)}))}},{key:"getColor",value:function getColor(value){var _a;return void 0===value?this.noDataColor:null===(_a=this.getBinForValue(value))||void 0===_a?void 0:_a.color}}]),ColorScale}();__decorate([mobx_1.computed],ColorScale.prototype,"config",null),__decorate([mobx_1.computed],ColorScale.prototype,"customNumericValues",null),__decorate([mobx_1.computed],ColorScale.prototype,"customNumericColorsActive",null),__decorate([mobx_1.computed],ColorScale.prototype,"customNumericColors",null),__decorate([mobx_1.computed],ColorScale.prototype,"customHiddenCategories",null),__decorate([mobx_1.computed],ColorScale.prototype,"customNumericLabels",null),__decorate([mobx_1.computed],ColorScale.prototype,"isColorSchemeInverted",null),__decorate([mobx_1.computed],ColorScale.prototype,"customCategoryLabels",null),__decorate([mobx_1.computed],ColorScale.prototype,"baseColorScheme",null),__decorate([mobx_1.computed],ColorScale.prototype,"defaultColorScheme",null),__decorate([mobx_1.computed],ColorScale.prototype,"defaultNoDataColor",null),__decorate([mobx_1.computed],ColorScale.prototype,"colorScaleColumn",null),__decorate([mobx_1.computed],ColorScale.prototype,"legendDescription",null),__decorate([mobx_1.computed],ColorScale.prototype,"hasNoDataBin",null),__decorate([mobx_1.computed],ColorScale.prototype,"sortedNumericValues",null),__decorate([mobx_1.computed],ColorScale.prototype,"minPossibleValue",null),__decorate([mobx_1.computed],ColorScale.prototype,"maxPossibleValue",null),__decorate([mobx_1.computed],ColorScale.prototype,"categoricalValues",null),__decorate([mobx_1.computed],ColorScale.prototype,"colorScheme",null),__decorate([mobx_1.computed],ColorScale.prototype,"singleColorScale",null),__decorate([mobx_1.computed],ColorScale.prototype,"autoMinBinValue",null),__decorate([mobx_1.computed],ColorScale.prototype,"minBinValue",null),__decorate([mobx_1.computed],ColorScale.prototype,"manualBinMaximums",null),__decorate([mobx_1.computed],ColorScale.prototype,"autoBinMaximums",null),__decorate([mobx_1.computed],ColorScale.prototype,"bucketMaximums",null),__decorate([mobx_1.computed],ColorScale.prototype,"customCategoryColors",null),__decorate([mobx_1.computed],ColorScale.prototype,"noDataColor",null),__decorate([mobx_1.computed],ColorScale.prototype,"baseColors",null),__decorate([mobx_1.computed],ColorScale.prototype,"numAutoBins",null),__decorate([mobx_1.computed],ColorScale.prototype,"isManualBuckets",null),__decorate([mobx_1.computed],ColorScale.prototype,"numBins",null),__decorate([mobx_1.computed],ColorScale.prototype,"sortedNumericValuesWithoutOutliers",null),__decorate([mobx_1.computed],ColorScale.prototype,"sortedNumericBinningValues",null),__decorate([mobx_1.computed],ColorScale.prototype,"numericLegendBins",null),__decorate([mobx_1.computed],ColorScale.prototype,"legendBins",null),__decorate([mobx_1.computed],ColorScale.prototype,"categoricalLegendBins",null),exports.ColorScale=ColorScale},392:function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=arr&&("undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"]);if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}__webpack_require__(9),__webpack_require__(31),__webpack_require__(25),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(22),__webpack_require__(17),__webpack_require__(29);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result},__rest=this&&this.__rest||function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.TippyIfInteractive=exports.LazyTippy=exports.Tippy=void 0;var React=__importStar(__webpack_require__(0)),react_1=__importDefault(__webpack_require__(1174));exports.Tippy=function Tippy(props){var lazy=props.lazy,tippyProps=__rest(props,["lazy"]),TippyInstance=lazy?exports.LazyTippy:react_1.default;return React.createElement(TippyInstance,Object.assign({theme:"light"},tippyProps))};exports.LazyTippy=function LazyTippy(props){var _React$useState2=_slicedToArray(React.useState(!1),2),mounted=_React$useState2[0],setMounted=_React$useState2[1],lazyPlugin={fn:function fn(){return{onMount:function onMount(){return setMounted(!0)},onHidden:function onHidden(){return setMounted(!1)}}}},computedProps=Object.assign({},props);if(computedProps.plugins=[lazyPlugin].concat(_toConsumableArray(props.plugins||[])),props.render){var render=props.render;computedProps.render=function(){return mounted?render.apply(void 0,arguments):""}}else computedProps.content=mounted?props.content:"";return React.createElement(exports.Tippy,Object.assign({},computedProps))};exports.TippyIfInteractive=function TippyIfInteractive(props){var isInteractive=props.isInteractive,tippyProps=__rest(props,["isInteractive"]);return isInteractive?React.createElement(exports.Tippy,Object.assign({},tippyProps)):React.createElement(React.Fragment,null,props.children)}},394:function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(22),__webpack_require__(28),__webpack_require__(75),__webpack_require__(5),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(33),__webpack_require__(25),__webpack_require__(9),__webpack_require__(10),__webpack_require__(11),__webpack_require__(29),__webpack_require__(17);var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SelectionArray=void 0;var Util_1=__webpack_require__(40),isPresent_1=__webpack_require__(241),mobx_1=__webpack_require__(41),SelectionArray=function(){function SelectionArray(){var selectedEntityNames=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],availableEntities=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],entityType=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"country";_classCallCheck(this,SelectionArray),this.selectedEntityNames=selectedEntityNames.slice(),this.availableEntities=availableEntities.slice(),this.entityType=entityType}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(SelectionArray,[{key:"availableEntityNames",get:function get(){return this.availableEntities.map((function(entity){return entity.entityName}))}},{key:"availableEntityNameSet",get:function get(){return new Set(this.availableEntityNames)}},{key:"entityNameToIdMap",get:function get(){return Util_1.mapBy(this.availableEntities,(function(e){return e.entityName}),(function(e){return e.entityId}))}},{key:"entityCodeToNameMap",get:function get(){return Util_1.mapBy(this.availableEntities,(function(e){return e.entityCode}),(function(e){return e.entityName}))}},{key:"entityIdToNameMap",get:function get(){return Util_1.mapBy(this.availableEntities,(function(e){return e.entityId}),(function(e){return e.entityName}))}},{key:"hasSelection",get:function get(){return this.selectedEntityNames.length>0}},{key:"unselectedEntityNames",get:function get(){return Util_1.difference(this.availableEntityNames,this.selectedEntityNames)}},{key:"numSelectedEntities",get:function get(){return this.selectedEntityNames.length}},{key:"selectedSet",get:function get(){return new Set(this.selectedEntityNames)}},{key:"allSelectedEntityIds",get:function get(){var map=this.entityNameToIdMap;return this.selectedEntityNames.map((function(name){return map.get(name)})).filter(isPresent_1.isPresent)}},{key:"setSelectedEntities",value:function setSelectedEntities(entityNames){return this.clearSelection(),this.addToSelection(entityNames)}},{key:"addToSelection",value:function addToSelection(entityNames){return this.selectedEntityNames=this.selectedEntityNames.concat(entityNames),this}},{key:"addAvailableEntityNames",value:function addAvailableEntityNames(entities){var _this$availableEntiti;return(_this$availableEntiti=this.availableEntities).push.apply(_this$availableEntiti,_toConsumableArray(entities)),this}},{key:"setSelectedEntitiesByCode",value:function setSelectedEntitiesByCode(entityCodes){var map=this.entityCodeToNameMap,codesInData=entityCodes.filter((function(code){return map.has(code)}));return this.setSelectedEntities(codesInData.map((function(code){return map.get(code)})))}},{key:"setSelectedEntitiesByEntityId",value:function setSelectedEntitiesByEntityId(entityIds){var map=this.entityIdToNameMap;return this.setSelectedEntities(entityIds.map((function(id){return map.get(id)})))}},{key:"selectAll",value:function selectAll(){return this.addToSelection(this.unselectedEntityNames)}},{key:"clearSelection",value:function clearSelection(){this.selectedEntityNames=[]}},{key:"toggleSelection",value:function toggleSelection(entityName){return this.selectedSet.has(entityName)?this.deselectEntity(entityName):this.selectEntity(entityName)}},{key:"numAvailableEntityNames",get:function get(){return this.availableEntityNames.length}},{key:"selectEntity",value:function selectEntity(entityName){return this.selectedSet.has(entityName)?this:this.addToSelection([entityName])}},{key:"selectSample",value:function selectSample(){var howMany=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.setSelectedEntities(this.availableEntityNames.slice(0,howMany))}},{key:"deselectEntity",value:function deselectEntity(entityName){return this.selectedEntityNames=this.selectedEntityNames.filter((function(name){return name!==entityName})),this}}]),SelectionArray}();__decorate([mobx_1.observable],SelectionArray.prototype,"entityType",void 0),__decorate([mobx_1.observable],SelectionArray.prototype,"selectedEntityNames",void 0),__decorate([mobx_1.observable],SelectionArray.prototype,"availableEntities",void 0),__decorate([mobx_1.computed],SelectionArray.prototype,"availableEntityNames",null),__decorate([mobx_1.computed],SelectionArray.prototype,"availableEntityNameSet",null),__decorate([mobx_1.computed],SelectionArray.prototype,"entityNameToIdMap",null),__decorate([mobx_1.computed],SelectionArray.prototype,"entityCodeToNameMap",null),__decorate([mobx_1.computed],SelectionArray.prototype,"entityIdToNameMap",null),__decorate([mobx_1.computed],SelectionArray.prototype,"hasSelection",null),__decorate([mobx_1.computed],SelectionArray.prototype,"unselectedEntityNames",null),__decorate([mobx_1.computed],SelectionArray.prototype,"numSelectedEntities",null),__decorate([mobx_1.computed],SelectionArray.prototype,"selectedSet",null),__decorate([mobx_1.computed],SelectionArray.prototype,"allSelectedEntityIds",null),__decorate([mobx_1.action.bound],SelectionArray.prototype,"setSelectedEntities",null),__decorate([mobx_1.action.bound],SelectionArray.prototype,"addToSelection",null),__decorate([mobx_1.action.bound],SelectionArray.prototype,"addAvailableEntityNames",null),__decorate([mobx_1.action.bound],SelectionArray.prototype,"setSelectedEntitiesByCode",null),__decorate([mobx_1.action.bound],SelectionArray.prototype,"setSelectedEntitiesByEntityId",null),__decorate([mobx_1.action.bound],SelectionArray.prototype,"selectAll",null),__decorate([mobx_1.action.bound],SelectionArray.prototype,"clearSelection",null),__decorate([mobx_1.action.bound],SelectionArray.prototype,"toggleSelection",null),__decorate([mobx_1.computed],SelectionArray.prototype,"numAvailableEntityNames",null),__decorate([mobx_1.action.bound],SelectionArray.prototype,"selectEntity",null),__decorate([mobx_1.action.bound],SelectionArray.prototype,"selectSample",null),__decorate([mobx_1.action.bound],SelectionArray.prototype,"deselectEntity",null),exports.SelectionArray=SelectionArray},395:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}__webpack_require__(5),__webpack_require__(14),__webpack_require__(31),__webpack_require__(132),__webpack_require__(25),__webpack_require__(57);var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getWindowUrl=exports.setWindowUrl=exports.Url=void 0;var url_parse_1=__importDefault(__webpack_require__(596)),Util_1=__webpack_require__(40),UrlUtils_1=__webpack_require__(469),ensureStartsWith=function ensureStartsWith(str,start){return str.startsWith(start)?str:"".concat(start).concat(str)},ensureQueryStrFormat=function ensureQueryStrFormat(queryStr){return ensureStartsWith(queryStr,"?")},Url=function(){function Url(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,Url),this.props=Object.assign(Object.assign({},props),{pathname:void 0!==props.pathname?props.pathname:props.origin?"":void 0})}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Url,[{key:"origin",get:function get(){return this.props.origin}},{key:"pathname",get:function get(){return this.props.pathname}},{key:"originAndPath",get:function get(){var strings=Util_1.excludeUndefined([this.origin,this.pathname]);if(0!==strings.length)return strings.join("")}},{key:"queryStr",get:function get(){var queryStr=this.props.queryStr;return queryStr&&"?"!==queryStr?ensureQueryStrFormat(queryStr):""}},{key:"hash",get:function get(){var hash=this.props.hash;return hash?function ensureHashFormat(queryStr){return ensureStartsWith(queryStr,"#")}(hash):""}},{key:"fullUrl",get:function get(){return Util_1.excludeUndefined([this.origin,this.pathname,this.queryStr,this.hash]).join("")}},{key:"queryParams",get:function get(){return UrlUtils_1.strToQueryParams(this.queryStr)}},{key:"encodedQueryParams",get:function get(){return UrlUtils_1.strToQueryParams(this.queryStr,!0)}},{key:"update",value:function update(props){return new Url(Object.assign(Object.assign({},this.props),props))}},{key:"setQueryParams",value:function setQueryParams(queryParams){return new Url(Object.assign(Object.assign({},this.props),{queryStr:UrlUtils_1.queryParamsToStr(queryParams)}))}},{key:"updateQueryParams",value:function updateQueryParams(queryParams){return this.update({queryStr:UrlUtils_1.queryParamsToStr(Util_1.omitUndefinedValues(Object.assign(Object.assign({},this.queryParams),queryParams)))})}}],[{key:"fromURL",value:function fromURL(url){var _parseUrl=function parseUrl(url){var parsed=url_parse_1.default(url,{}),query=parsed.query.toString();return Object.assign(Object.assign({},parsed),{query:query})}(url),origin=_parseUrl.origin;return new Url({origin:void 0!==origin&&"null"!==origin?origin:void 0,pathname:_parseUrl.pathname,queryStr:_parseUrl.query,hash:_parseUrl.hash})}},{key:"fromQueryStr",value:function fromQueryStr(queryStr){return new Url({queryStr:ensureQueryStrFormat(queryStr)})}},{key:"fromQueryParams",value:function fromQueryParams(queryParams){return new Url({queryStr:UrlUtils_1.queryParamsToStr(queryParams)})}}]),Url}();exports.Url=Url;exports.setWindowUrl=function setWindowUrl(url){var _a,pathname=null!==(_a=url.pathname)&&void 0!==_a?_a:window.location.pathname;window.history.replaceState(null,document.title,Util_1.excludeUndefined([pathname,url.queryStr,url.hash]).join(""))};exports.getWindowUrl=function getWindowUrl(){return Url.fromURL(window.location.href)}},40:function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e3){didErr=!0,err=_e3},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=arr&&("undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"]);if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}__webpack_require__(106),__webpack_require__(5),__webpack_require__(14),__webpack_require__(381),__webpack_require__(6),__webpack_require__(8),__webpack_require__(132),__webpack_require__(62),__webpack_require__(32),__webpack_require__(22),__webpack_require__(820),__webpack_require__(1689),__webpack_require__(104),__webpack_require__(33),__webpack_require__(29),__webpack_require__(7),__webpack_require__(821),__webpack_require__(151),__webpack_require__(25),__webpack_require__(48),__webpack_require__(55),__webpack_require__(57),__webpack_require__(28),__webpack_require__(65),__webpack_require__(68),__webpack_require__(36),__webpack_require__(75),__webpack_require__(17),__webpack_require__(103),__webpack_require__(119),__webpack_require__(9),__webpack_require__(10),__webpack_require__(11);var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.pairs=exports.without=exports.upperFirst=exports.uniqWith=exports.uniqBy=exports.uniq=exports.union=exports.toString=exports.throttle=exports.takeWhile=exports.sumBy=exports.sum=exports.startCase=exports.sortBy=exports.sampleSize=exports.sample=exports.round=exports.reverse=exports.range=exports.pick=exports.partition=exports.orderBy=exports.once=exports.omit=exports.noop=exports.minBy=exports.min=exports.memoize=exports.maxBy=exports.max=exports.mapValues=exports.keyBy=exports.isString=exports.isNumber=exports.isEqual=exports.isEmpty=exports.invert=exports.identity=exports.groupBy=exports.flatten=exports.findIndex=exports.extend=exports.difference=exports.debounce=exports.countBy=exports.compact=exports.cloneDeep=exports.clone=exports.chunk=exports.capitalize=void 0,exports.retryPromise=exports.addDays=exports.diffDateISOStringInDays=exports.dateDiffInDays=exports.getStartEndValues=exports.valuesByEntityWithinTimes=exports.valuesByEntityAtTimes=exports.es6mapValues=exports.findClosestTime=exports.findClosestTimeIndex=exports.getIdealGridParams=exports.sampleFrom=exports.getRandomNumberGenerator=exports.stripHTML=exports.getCountryCodeFromNetlifyRedirect=exports.fetchText=exports.trimObject=exports.urlToSlug=exports.arrToCsvRow=exports.csvEscape=exports.isTouchDevice=exports.isMobile=exports.sortedFindClosest=exports.sortedFindClosestIndex=exports.pointsToPath=exports.TESTING_ONLY_reset_guid=exports.guid=exports.slugifySameCase=exports.slugify=exports.isVisible=exports.relativeMinAndMax=exports.makeAnnotationsSlug=exports.cagr=exports.domainExtent=exports.previous=exports.next=exports.mapToObjectLiteral=exports.lastOfNonEmptyArray=exports.firstOfNonEmptyArray=exports.excludeUndefined=exports.last=exports.first=exports.roundSigFig=exports.numberMagnitude=exports.formatYear=exports.formatDay=exports.makeSafeForCSS=exports.exposeInstanceOnWindow=exports.getRelativeMouse=exports.d3Format=void 0,exports.values=exports.dyFromAlign=exports.textAnchorFromAlign=exports.wrapInDiv=exports.findDOMParent=exports.differenceObj=exports.isInIFrame=exports.omitUndefinedValues=exports.getClosestTimePairs=exports.logMe=exports.findIndexFast=exports.mapBy=exports.sortNumeric=exports.lowerCaseFirstLetterUnlessAbbreviation=exports.mapNullToUndefined=exports.getAttributesOfHTMLElement=exports.sortByUndefinedLast=exports.intersection=exports.intersectionOfSets=exports.oneOf=exports.linkify=exports.keyMap=exports.groupMap=exports.rollingMap=exports.scrollIntoViewIfNeeded=exports.anyToString=exports.parseIntOrUndefined=void 0;var capitalize_1=__importDefault(__webpack_require__(1691));exports.capitalize=capitalize_1.default;var chunk_1=__importDefault(__webpack_require__(1692));exports.chunk=chunk_1.default;var clone_1=__importDefault(__webpack_require__(1695));exports.clone=clone_1.default;var cloneDeep_1=__importDefault(__webpack_require__(620));exports.cloneDeep=cloneDeep_1.default;var compact_1=__importDefault(__webpack_require__(1696));exports.compact=compact_1.default;var countBy_1=__importDefault(__webpack_require__(1697));exports.countBy=countBy_1.default;var debounce_1=__importDefault(__webpack_require__(825));exports.debounce=debounce_1.default;var difference_1=__importDefault(__webpack_require__(1702));exports.difference=difference_1.default;var extend_1=__importDefault(__webpack_require__(1703));exports.extend=extend_1.default;var findIndex_1=__importDefault(__webpack_require__(1706));exports.findIndex=findIndex_1.default;var flatten_1=__importDefault(__webpack_require__(771));exports.flatten=flatten_1.default;var groupBy_1=__importDefault(__webpack_require__(1707));exports.groupBy=groupBy_1.default;var identity_1=__importDefault(__webpack_require__(215));exports.identity=identity_1.default;var invert_1=__importDefault(__webpack_require__(1708));exports.invert=invert_1.default;var isEmpty_1=__importDefault(__webpack_require__(1711));exports.isEmpty=isEmpty_1.default;var isEqual_1=__importDefault(__webpack_require__(1712));exports.isEqual=isEqual_1.default;var isNumber_1=__importDefault(__webpack_require__(1713));exports.isNumber=isNumber_1.default;var isObject_1=__importDefault(__webpack_require__(170)),isString_1=__importDefault(__webpack_require__(621));exports.isString=isString_1.default;var keyBy_1=__importDefault(__webpack_require__(1714));exports.keyBy=keyBy_1.default;var mapValues_1=__importDefault(__webpack_require__(97));exports.mapValues=mapValues_1.default;var max_1=__importDefault(__webpack_require__(1715));exports.max=max_1.default;var maxBy_1=__importDefault(__webpack_require__(1716));exports.maxBy=maxBy_1.default;var memoize_1=__importDefault(__webpack_require__(754));exports.memoize=memoize_1.default;var min_1=__importDefault(__webpack_require__(1717));exports.min=min_1.default;var minBy_1=__importDefault(__webpack_require__(1718));exports.minBy=minBy_1.default;var noop_1=__importDefault(__webpack_require__(785));exports.noop=noop_1.default;var omit_1=__importDefault(__webpack_require__(1719));exports.omit=omit_1.default;var once_1=__importDefault(__webpack_require__(1724));exports.once=once_1.default;var orderBy_1=__importDefault(__webpack_require__(1726));exports.orderBy=orderBy_1.default;var partition_1=__importDefault(__webpack_require__(1731));exports.partition=partition_1.default;var pick_1=__importDefault(__webpack_require__(336));exports.pick=pick_1.default;var range_1=__importDefault(__webpack_require__(1732));exports.range=range_1.default;var reverse_1=__importDefault(__webpack_require__(1735));exports.reverse=reverse_1.default;var round_1=__importDefault(__webpack_require__(1736));exports.round=round_1.default;var sample_1=__importDefault(__webpack_require__(1738));exports.sample=sample_1.default;var sampleSize_1=__importDefault(__webpack_require__(1741));exports.sampleSize=sampleSize_1.default;var sortBy_1=__importDefault(__webpack_require__(1744));exports.sortBy=sortBy_1.default;var startCase_1=__importDefault(__webpack_require__(731));exports.startCase=startCase_1.default;var sum_1=__importDefault(__webpack_require__(1745));exports.sum=sum_1.default;var sumBy_1=__importDefault(__webpack_require__(1746));exports.sumBy=sumBy_1.default;var takeWhile_1=__importDefault(__webpack_require__(1747));exports.takeWhile=takeWhile_1.default;var throttle_1=__importDefault(__webpack_require__(1201));exports.throttle=throttle_1.default;var toString_1=__importDefault(__webpack_require__(272));exports.toString=toString_1.default;var union_1=__importDefault(__webpack_require__(1749));exports.union=union_1.default;var uniq_1=__importDefault(__webpack_require__(619));exports.uniq=uniq_1.default;var uniqBy_1=__importDefault(__webpack_require__(1750));exports.uniqBy=uniqBy_1.default;var uniqWith_1=__importDefault(__webpack_require__(1751));exports.uniqWith=uniqWith_1.default;var upperFirst_1=__importDefault(__webpack_require__(555));exports.upperFirst=upperFirst_1.default;var without_1=__importDefault(__webpack_require__(1752));exports.without=without_1.default;var d3_array_1=__webpack_require__(89);Object.defineProperty(exports,"pairs",{enumerable:!0,get:function get(){return d3_array_1.pairs}});var moment_1=__importDefault(__webpack_require__(26)),d3_format_1=__webpack_require__(595),striptags_1=__importDefault(__webpack_require__(1754)),url_parse_1=__importDefault(__webpack_require__(596)),html_1=__importDefault(__webpack_require__(1757)),owidTypes_1=__webpack_require__(122),PointVector_1=__webpack_require__(239),TimeBounds_1=__webpack_require__(387);exports.d3Format=d3_format_1.formatLocale({decimal:".",thousands:",",grouping:[3],minus:"-",currency:["$",""]}).format;exports.getRelativeMouse=function getRelativeMouse(node,event){var _a,eventOwner=!!event.targetTouches?event.targetTouches[0]:event,clientX=eventOwner.clientX,clientY=eventOwner.clientY,svg=function getRootSVG(element){return"createSVGPoint"in element?element:"ownerSVGElement"in element&&element.ownerSVGElement||void 0}(node);if(svg&&"getScreenCTM"in node){var svgPoint=svg.createSVGPoint();svgPoint.x=clientX,svgPoint.y=clientY;var point=svgPoint.matrixTransform(null===(_a=node.getScreenCTM())||void 0===_a?void 0:_a.inverse());return new PointVector_1.PointVector(point.x,point.y)}var rect=node.getBoundingClientRect();return new PointVector_1.PointVector(clientX-rect.left-node.clientLeft,clientY-rect.top-node.clientTop)};var isStorybook=function isStorybook(){return window.location.host.startsWith("localhost:6006")&&"Storybook"===document.title};exports.exposeInstanceOnWindow=function exposeInstanceOnWindow(component){var name=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"chart",alsoOnTopWindow=arguments.length>2?arguments[2]:void 0;if("undefined"!=typeof window){var win=window;win[name]=component,(alsoOnTopWindow=void 0===alsoOnTopWindow?isStorybook():alsoOnTopWindow)&&win!==win.top&&(win.top[name]=component)}};exports.makeSafeForCSS=function makeSafeForCSS(name){return name.replace(/[^a-z0-9]/g,(function(str){var char=str.charCodeAt(0);return 32===char?"-":95===char?"_":char>=65&&char<=90?str:"__"+("000"+char.toString(16)).slice(-4)}))},exports.formatDay=function formatDay(dayAsYear,options){var _a,format=null!==(_a=null==options?void 0:options.format)&&void 0!==_a?_a:"MMM D, YYYY";return moment_1.default.utc(owidTypes_1.EPOCH_DATE).add(dayAsYear,"days").format(format)};exports.formatYear=function formatYear(year){return isNaN(year)?(console.warn("Invalid year '".concat(year,"'")),""):year<0?"".concat(exports.d3Format(",.0f")(Math.abs(year))," BCE"):year.toString()};exports.numberMagnitude=function numberMagnitude(num){if(0===num)return 0;var magnitude=Math.floor(Math.log10(Math.abs(num)))+1;return Number.isFinite(magnitude)?magnitude:0};exports.roundSigFig=function roundSigFig(num){var sigfigs=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(0===num)return 0;var magnitude=exports.numberMagnitude(num);return round_1.default(num,-magnitude+sigfigs)};exports.first=function first(arr){return arr[0]};exports.last=function last(arr){return arr[arr.length-1]};exports.excludeUndefined=function excludeUndefined(arr){return arr.filter((function(x){return void 0!==x}))};exports.firstOfNonEmptyArray=function firstOfNonEmptyArray(arr){if(arr.length<1)throw new Error("array is empty");return exports.first(arr)};exports.lastOfNonEmptyArray=function lastOfNonEmptyArray(arr){if(arr.length<1)throw new Error("array is empty");return exports.last(arr)};exports.mapToObjectLiteral=function mapToObjectLiteral(map){return Array.from(map).reduce((function(objLit,_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];return objLit[key]=value,objLit}),{})},exports.next=function next(set,current){var nextIndex=set.indexOf(current)+1;return set[(nextIndex=-1===nextIndex?0:nextIndex)===set.length?0:nextIndex]};exports.previous=function previous(set,current){var nextIndex=set.indexOf(current)-1;return set[nextIndex<0?set.length-1:nextIndex]};exports.domainExtent=function domainExtent(numValues,scaleType){var maxValueMultiplierForPadding=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,filterValues=scaleType===owidTypes_1.ScaleType.log?numValues.filter((function(v){return v>0})):numValues,_d3_array_1$extent=d3_array_1.extent(filterValues),_d3_array_1$extent2=_slicedToArray(_d3_array_1$extent,2),minValue=_d3_array_1$extent2[0],maxValue=_d3_array_1$extent2[1];return void 0!==minValue&&void 0!==maxValue&&isFinite(minValue)&&isFinite(maxValue)?minValue!==maxValue?[minValue,maxValue*maxValueMultiplierForPadding]:scaleType===owidTypes_1.ScaleType.log?[minValue/10,10*minValue]:[minValue-1,maxValue+1]:scaleType===owidTypes_1.ScaleType.log?[1,100]:[-1,1]};var cagrFromPoints=function cagrFromPoints(startPoint,endPoint,property){var elapsed=endPoint.timeValue-startPoint.timeValue;return elapsed?exports.cagr(startPoint[property],endPoint[property],elapsed):0};exports.cagr=function cagr(startValue,endValue,yearsElapsed){var ratio=endValue/startValue;return Math.sign(ratio)*(Math.pow(Math.abs(ratio),1/yearsElapsed)-1)*100};exports.makeAnnotationsSlug=function makeAnnotationsSlug(columnSlug){return"".concat(columnSlug,"-annotations")};exports.relativeMinAndMax=function relativeMinAndMax(points,property){for(var minChange=0,maxChange=0,filteredPoints=points.filter((function(point){return 0!==point.x&&0!==point.y})),i=0;i<filteredPoints.length;i++)for(var indexValue=filteredPoints[i],j=i+1;j<filteredPoints.length;j++){var targetValue=filteredPoints[j];if(targetValue.entityName===indexValue.entityName){var change=cagrFromPoints(indexValue,targetValue,property);change<minChange&&(minChange=change),change>maxChange&&(maxChange=change)}}return[minChange,maxChange]};exports.isVisible=function isVisible(elm){if(!elm||!elm.getBoundingClientRect)return!1;var rect=elm.getBoundingClientRect(),viewHeight=Math.max(document.documentElement.clientHeight,window.innerHeight);return!(rect.bottom<0||rect.top-viewHeight>=0)};exports.slugify=function slugify(str){return exports.slugifySameCase(str.toLowerCase())};exports.slugifySameCase=function slugifySameCase(str){return str.replace(/\s*\*.+\*/,"").replace(/[^\w- ]+/g,"").trim().replace(/ +/g,"-")};var _guid=0;exports.guid=function guid(){return++_guid};exports.TESTING_ONLY_reset_guid=function TESTING_ONLY_reset_guid(){return _guid=0};exports.pointsToPath=function pointsToPath(points){for(var path="",i=0;i<points.length;i++)path+=0===i?"M".concat(points[i][0]," ").concat(points[i][1]):"L".concat(points[i][0]," ").concat(points[i][1]);return path};exports.sortedFindClosestIndex=function sortedFindClosestIndex(array,value){var startIndex=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,endIndex=arguments.length>3&&void 0!==arguments[3]?arguments[3]:array.length;if(startIndex>=endIndex)return-1;if(value<array[startIndex])return startIndex;if(value>array[endIndex-1])return endIndex-1;for(var lo=startIndex,hi=endIndex-1;lo<=hi;){var mid=Math.round((hi+lo)/2);if(value<array[mid])hi=mid-1;else{if(!(value>array[mid]))return mid;lo=mid+1}}return array[lo]-value<value-array[hi]?lo:hi};exports.sortedFindClosest=function sortedFindClosest(array,value,startIndex,endIndex){var index=exports.sortedFindClosestIndex(array,value,startIndex,endIndex);return-1!==index?array[index]:void 0};exports.isMobile=function isMobile(){var _a;return"undefined"!=typeof window&&!!(null===(_a=null===window||void 0===window?void 0:window.navigator)||void 0===_a?void 0:_a.userAgent.toLowerCase().includes("mobi"))};exports.isTouchDevice=function isTouchDevice(){return!!("ontouchstart"in window)};exports.csvEscape=function csvEscape(value){var valueStr=toString_1.default(value);return valueStr.includes(",")?'"'.concat(valueStr.replace(/\"/g,'""'),'"'):valueStr};exports.arrToCsvRow=function arrToCsvRow(arr){return arr.map((function(x){return exports.csvEscape(x)})).join(",")+"\n"};exports.urlToSlug=function urlToSlug(url){return exports.last(url_parse_1.default(url).pathname.split("/").filter((function(x){return x})))};exports.trimObject=function trimObject(obj){var trimStringEmptyStrings=arguments.length>1&&void 0!==arguments[1]&&arguments[1],clone={};for(var key in obj){var val=obj[key];isObject_1.default(val)&&isEmpty_1.default(val)||trimStringEmptyStrings&&""===val||void 0!==val&&(clone[key]=obj[key])}return clone};exports.fetchText=function fetchText(url){return __awaiter(void 0,void 0,void 0,regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.abrupt("return",new Promise((function(resolve,reject){var req=new XMLHttpRequest;req.addEventListener("load",(function(){resolve(this.responseText)})),req.addEventListener("readystatechange",(function(){4===req.readyState&&200!==req.status&&reject(new Error("".concat(req.status," ").concat(req.statusText)))})),req.open("GET",url),req.send()})));case 1:case"end":return _context.stop()}}),_callee)})))};exports.getCountryCodeFromNetlifyRedirect=function getCountryCodeFromNetlifyRedirect(){return __awaiter(void 0,void 0,void 0,regeneratorRuntime.mark((function _callee2(){return regeneratorRuntime.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.abrupt("return",new Promise((function(resolve,reject){var req=new XMLHttpRequest;req.addEventListener("load",(function(){resolve(req.responseURL.split("?")[1])})),req.addEventListener("error",(function(){return reject(new Error("Couldn't retrieve country code"))})),req.open("GET","/detect-country-redirect"),req.send()})));case 1:case"end":return _context2.stop()}}),_callee2)})))};exports.stripHTML=function stripHTML(html){return striptags_1.default(html)};exports.getRandomNumberGenerator=function getRandomNumberGenerator(){var min=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,max=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,seed=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now();return function(){var semiRand=1e4*Math.sin(seed++);return Math.floor(min+(max-min)*(semiRand-Math.floor(semiRand)))}};exports.sampleFrom=function sampleFrom(collection,howMany,seed){return shuffleArray(collection,seed).slice(0,howMany)};var shuffleArray=function shuffleArray(array){for(var seed=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now(),rand=exports.getRandomNumberGenerator(0,100,seed),clonedArr=array.slice(),index=clonedArr.length-1;index>0;index--){var replacerIndex=Math.floor(rand()/100*(index+1)),_ref3=[clonedArr[replacerIndex],clonedArr[index]];clonedArr[index]=_ref3[0],clonedArr[replacerIndex]=_ref3[1]}return clonedArr};exports.getIdealGridParams=function getIdealGridParams(_ref4){var count=_ref4.count,containerAspectRatio=_ref4.containerAspectRatio,_ref4$idealAspectRati=_ref4.idealAspectRatio,ratio=containerAspectRatio/(void 0===_ref4$idealAspectRati?owidTypes_1.IDEAL_PLOT_ASPECT_RATIO:_ref4$idealAspectRati);if(2===count&&ratio<2)return{rows:2,columns:1};var columns=Math.min(Math.round(Math.sqrt(count*ratio)),count);return{rows:Math.ceil(count/columns),columns:columns}};exports.findClosestTimeIndex=function findClosestTimeIndex(times,targetTime,tolerance){for(var closest,closestIndex,index=0;index<times.length;index++){var time=times[index],currentTimeDist=Math.abs(time-targetTime);if(!currentTimeDist)return index;if(!(void 0!==tolerance&&currentTimeDist>tolerance)){var closestTimeDist=closest?Math.abs(closest-targetTime):1/0;(void 0===closest||closestTimeDist>currentTimeDist||closestTimeDist===currentTimeDist&&time>closest)&&(closest=time,closestIndex=index)}}return closestIndex};exports.findClosestTime=function findClosestTime(times,targetTime,tolerance){if(TimeBounds_1.isNegativeInfinity(targetTime))return min_1.default(times);if(TimeBounds_1.isPositiveInfinity(targetTime))return max_1.default(times);var index=exports.findClosestTimeIndex(times,targetTime,tolerance);return void 0!==index?times[index]:void 0};exports.es6mapValues=function es6mapValues(input,mapper){return new Map(Array.from(input,(function(_ref5){var _ref6=_slicedToArray(_ref5,2),key=_ref6[0],value=_ref6[1];return[key,mapper(value,key)]})))};var valuesAtTimes=function valuesAtTimes(valueByTime,targetTimes){var tolerance=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,times=Array.from(valueByTime.keys());return targetTimes.map((function(targetTime){var time=exports.findClosestTime(times,targetTime,tolerance);return{time:time,value:void 0===time?void 0:valueByTime.get(time)}}))};exports.valuesByEntityAtTimes=function valuesByEntityAtTimes(valueByEntityAndTime,targetTimes){var tolerance=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return exports.es6mapValues(valueByEntityAndTime,(function(valueByTime){return valuesAtTimes(valueByTime,targetTimes,tolerance)}))};exports.valuesByEntityWithinTimes=function valuesByEntityWithinTimes(valueByEntityAndTimes,range){var start=void 0!==range[0]?range[0]:-1/0,end=void 0!==range[1]?range[1]:1/0;return exports.es6mapValues(valueByEntityAndTimes,(function(valueByTime){return Array.from(valueByTime.keys()).filter((function(time){return time>=start&&time<=end})).map((function(time){return{time:time,value:valueByTime.get(time)}}))}))};exports.getStartEndValues=function getStartEndValues(values){return[minBy_1.default(values,(function(dv){return dv.time})),maxBy_1.default(values,(function(dv){return dv.time}))]};exports.dateDiffInDays=function dateDiffInDays(a,b){var utca=Date.UTC(a.getFullYear(),a.getMonth(),a.getDate()),utcb=Date.UTC(b.getFullYear(),b.getMonth(),b.getDate());return Math.floor((utca-utcb)/864e5)};exports.diffDateISOStringInDays=function diffDateISOStringInDays(a,b){return moment_1.default.utc(a).diff(moment_1.default.utc(b),"days")};exports.addDays=function addDays(date,days){var newDate=new Date(date.getTime());return newDate.setDate(newDate.getDate()+days),newDate},exports.retryPromise=function retryPromise(promiseGetter){var maxRetries=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return __awaiter(this,void 0,void 0,regeneratorRuntime.mark((function _callee3(){var retried,lastError;return regeneratorRuntime.wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:retried=0;case 1:if(!(retried++<maxRetries)){_context3.next=13;break}return _context3.prev=2,_context3.next=5,promiseGetter();case 5:return _context3.abrupt("return",_context3.sent);case 8:_context3.prev=8,_context3.t0=_context3.catch(2),lastError=_context3.t0;case 11:_context3.next=1;break;case 13:throw lastError;case 14:case"end":return _context3.stop()}}),_callee3,null,[[2,8]])})))},exports.parseIntOrUndefined=function parseIntOrUndefined(s){if(void 0!==s){var value=parseInt(s);return isNaN(value)?void 0:value}};function scrollTo(el,top){!function isDocumentElement(el){return[document.documentElement,document.body].indexOf(el)>-1}(el)?el.scrollTop=top:window.scrollTo(0,top)}exports.anyToString=function anyToString(value){return(null==value?void 0:value.toString)?value.toString():""},exports.scrollIntoViewIfNeeded=function scrollIntoViewIfNeeded(containerEl,focusedEl){var menuRect=containerEl.getBoundingClientRect(),focusedRect=focusedEl.getBoundingClientRect(),overScroll=focusedEl.offsetHeight/3;focusedRect.bottom+overScroll>menuRect.bottom?scrollTo(containerEl,Math.min(focusedEl.offsetTop+focusedEl.clientHeight-containerEl.offsetHeight+overScroll,containerEl.scrollHeight)):focusedRect.top-overScroll<menuRect.top&&scrollTo(containerEl,Math.max(focusedEl.offsetTop-overScroll,0))},exports.rollingMap=function rollingMap(array,mapper){var result=[];if(array.length<=1)return result;for(var i=0;i<array.length-1;i++)result.push(mapper(array[i],array[i+1]));return result},exports.groupMap=function groupMap(array,accessor){var result=new Map;return array.forEach((function(item){var _a,key=accessor(item);result.has(key)?null===(_a=result.get(key))||void 0===_a||_a.push(item):result.set(key,[item])})),result},exports.keyMap=function keyMap(array,accessor){var result=new Map;return array.forEach((function(item){var key=accessor(item);result.has(key)||result.set(key,item)})),result};exports.linkify=function linkify(str){return html_1.default(str)};exports.oneOf=function oneOf(value,options,defaultOption){var _step,_iterator=_createForOfIteratorHelper(options);try{for(_iterator.s();!(_step=_iterator.n()).done;){var option=_step.value;if(value===option)return option}}catch(err){_iterator.e(err)}finally{_iterator.f()}return defaultOption};exports.intersectionOfSets=function intersectionOfSets(sets){if(!sets.length)return new Set;var intersection=new Set(sets[0]);return sets.slice(1).forEach((function(set){var _step2,_iterator2=_createForOfIteratorHelper(intersection);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var elem=_step2.value;set.has(elem)||intersection.delete(elem)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}})),intersection};exports.intersection=function intersection(){for(var _exports,_len=arguments.length,arrs=new Array(_len),_key=0;_key<_len;_key++)arrs[_key]=arguments[_key];if(0===arrs.length)return[];if(1===arrs.length)return arrs[0];if(2===arrs.length){var set=new Set(arrs[0]);return arrs[1].filter((function(value){return set.has(value)}))}return exports.intersection(arrs[0],(_exports=exports).intersection.apply(_exports,_toConsumableArray(arrs.slice(1))))},exports.sortByUndefinedLast=function sortByUndefinedLast(array,accessor){var order=arguments.length>2&&void 0!==arguments[2]?arguments[2]:owidTypes_1.SortOrder.asc,sorted=sortBy_1.default(array,(function(value){var mapped=accessor(value);return void 0===mapped?order===owidTypes_1.SortOrder.asc?1/0:-1/0:mapped}));return order===owidTypes_1.SortOrder.asc?sorted:sorted.reverse()},exports.getAttributesOfHTMLElement=function getAttributesOfHTMLElement(el){for(var attributes={},i=0;i<el.attributes.length;i++){var attr=el.attributes.item(i);attr&&(attributes[attr.name]=attr.value)}return attributes};exports.mapNullToUndefined=function mapNullToUndefined(array){return array.map((function(v){return null===v?void 0:v}))};exports.lowerCaseFirstLetterUnlessAbbreviation=function lowerCaseFirstLetterUnlessAbbreviation(str){return str.charAt(1).match(/[A-Z]/)?str:str.charAt(0).toLowerCase()+str.slice(1)};exports.sortNumeric=function sortNumeric(arr){var sortByFn=arguments.length>1&&void 0!==arguments[1]?arguments[1]:identity_1.default,sortOrder=arguments.length>2&&void 0!==arguments[2]?arguments[2]:owidTypes_1.SortOrder.asc;return arr.sort(sortOrder===owidTypes_1.SortOrder.asc?function(a,b){return sortByFn(a)-sortByFn(b)}:function(a,b){return sortByFn(b)-sortByFn(a)})};exports.mapBy=function mapBy(arr,keyAccessor,valueAccessor){var map=new Map;return arr.forEach((function(val){map.set(keyAccessor(val),valueAccessor(val))})),map};exports.findIndexFast=function findIndexFast(array,predicate){for(var fromIndex=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,toIndex=arguments.length>3&&void 0!==arguments[3]?arguments[3]:array.length,index=fromIndex;index<toIndex;){if(predicate(array[index],index))return index;index++}return-1};exports.logMe=function logMe(target,propertyName,descriptor){var originalMethod=descriptor.value;return descriptor.value=function(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];return console.log("Running ".concat(propertyName," with '").concat(args,"'")),originalMethod.apply(this,args)},descriptor},exports.getClosestTimePairs=function getClosestTimePairs(sortedTimesA,sortedTimesB){var maxDiff=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;if(0===sortedTimesA.length||0===sortedTimesB.length)return[];for(var decidedPairs=[],undecidedPairs=[],indexB=0,indexA=0;indexA<sortedTimesA.length;indexA++){var timeA=sortedTimesA[indexA],closestIndexInB=exports.sortedFindClosestIndex(sortedTimesB,timeA,indexB),lowCandidateIndexB=sortedTimesB[closestIndexInB]<timeA?closestIndexInB:closestIndexInB>indexB?closestIndexInB-1:void 0,highCandidateIndexB=sortedTimesB[closestIndexInB]>=timeA?closestIndexInB:void 0;void 0!==lowCandidateIndexB&&void 0!==highCandidateIndexB&&timeA-sortedTimesB[lowCandidateIndexB]<=maxDiff&&timeA-sortedTimesB[lowCandidateIndexB]<sortedTimesB[highCandidateIndexB]-timeA?decidedPairs.push([timeA,sortedTimesB[lowCandidateIndexB]]):void 0!==highCandidateIndexB&&timeA===sortedTimesB[highCandidateIndexB]?decidedPairs.push([timeA,sortedTimesB[highCandidateIndexB]]):(void 0!==lowCandidateIndexB&&timeA-sortedTimesB[lowCandidateIndexB]<=maxDiff&&undecidedPairs.push([timeA,sortedTimesB[lowCandidateIndexB]]),void 0!==highCandidateIndexB&&sortedTimesB[highCandidateIndexB]-timeA<=maxDiff&&undecidedPairs.push([timeA,sortedTimesB[highCandidateIndexB]])),indexB=closestIndexInB}var seenTimes=new Set(flatten_1.default(decidedPairs));return sortBy_1.default(undecidedPairs,(function(pair){return Math.abs(pair[0]-pair[1])})).forEach((function(pair){seenTimes.has(pair[0])||seenTimes.has(pair[1])||(decidedPairs.push(pair),seenTimes.add(pair[0]),seenTimes.add(pair[1]))})),decidedPairs};exports.omitUndefinedValues=function omitUndefinedValues(object){var result={};for(var key in object)void 0!==object[key]&&(result[key]=object[key]);return result};exports.isInIFrame=function isInIFrame(){try{return window.self!==window.top}catch(e){return!1}};exports.differenceObj=function differenceObj(obj,defaultObj){var result={};for(var key in obj)defaultObj[key]!==obj[key]&&(result[key]=obj[key]);return result};exports.findDOMParent=function findDOMParent(el,condition){for(var current=el;current;){if(condition(current))return current;current=current.parentElement}return null};exports.wrapInDiv=function wrapInDiv(el,classes){var _wrapper$classList;if(!el.parentNode)return el;var wrapper=document.createElement("div");return classes&&(_wrapper$classList=wrapper.classList).add.apply(_wrapper$classList,_toConsumableArray(classes)),el.parentNode.insertBefore(wrapper,el),wrapper.appendChild(el),wrapper};exports.textAnchorFromAlign=function textAnchorFromAlign(align){return align===owidTypes_1.HorizontalAlign.center?"middle":align===owidTypes_1.HorizontalAlign.right?"end":"start"};exports.dyFromAlign=function dyFromAlign(align){return align===owidTypes_1.VerticalAlign.middle?".32em":align===owidTypes_1.VerticalAlign.bottom?".71em":"0"};exports.values=function values(obj){return Object.values(obj)}},466:function(module,exports,__webpack_require__){"use strict";function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=arr&&("undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"]);if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _get(target,property,receiver){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(target,property,receiver){var base=function _superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=_getPrototypeOf(object)););return object}(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(receiver):desc.value}})(target,property,receiver||target)}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(31),__webpack_require__(75),__webpack_require__(5),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(68),__webpack_require__(36),__webpack_require__(9),__webpack_require__(10),__webpack_require__(17),__webpack_require__(29),__webpack_require__(33),__webpack_require__(28),__webpack_require__(22),__webpack_require__(14),__webpack_require__(103),__webpack_require__(32),__webpack_require__(25),__webpack_require__(11),__webpack_require__(18),__webpack_require__(21),__webpack_require__(56);var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ColumnTypeMap=exports.MissingColumn=exports.AbstractCoreColumn=void 0;var Util_1=__webpack_require__(40),isPresent_1=__webpack_require__(241),CoreTableConstants_1=__webpack_require__(276),ErrorValues_1=__webpack_require__(277),OwidTableUtil_1=__webpack_require__(980),CoreTableUtils_1=__webpack_require__(320),moment_1=__importDefault(__webpack_require__(26)),formatValue_1=__webpack_require__(981),AbstractCoreColumn=function(){function AbstractCoreColumn(table,def){_classCallCheck(this,AbstractCoreColumn),this.table=table,this.def=def}return _createClass(AbstractCoreColumn,[{key:"parse",value:function parse(val){return val}},{key:"isMissing",get:function get(){return this instanceof MissingColumn}},{key:"sum",get:function get(){return this.summary.sum}},{key:"median",get:function get(){return this.summary.median}},{key:"max",get:function get(){return this.summary.max}},{key:"min",get:function get(){return this.summary.min}},{key:"summary",get:function get(){var numErrorValues=this.numErrorValues,numValues=this.numValues,basicSummary={numErrorValues:numErrorValues,numUniqs:this.numUniqs,numValues:numValues};if(!numValues)return basicSummary;for(var summary=Object.assign({},basicSummary),arr=this.valuesAscending,isNumeric="number"===this.jsType,min=arr[0],max=arr[0],sum=0,mode=void 0,modeSize=0,currentBucketValue=void 0,currentBucketSize=0,index=0;index<numValues;index++){var value=arr[index];sum+=value,value>max&&(max=value),value<min&&(min=value),value===currentBucketValue?currentBucketSize++:(currentBucketValue=value,currentBucketSize=1),currentBucketSize>modeSize&&(modeSize=currentBucketSize,mode=currentBucketValue)}var medianIndex=Math.floor(numValues/2);summary.sum=sum,summary.median=arr[medianIndex],summary.mean=sum/numValues,summary.min=min,summary.max=max,summary.range=max-min,summary.mode=mode,summary.modeSize=modeSize,isNumeric||(summary.sum=void 0,summary.mean=void 0),summary.deciles={};return[10,20,30,40,50,60,70,80,90,99,100].forEach((function(decile){var index=Math.floor(numValues*(decile/100));index=index===numValues?index-1:index,summary.deciles[decile]=arr[index]})),summary}},{key:"unitConversionFactor",get:function get(){var _a,_b;return null!==(_b=null===(_a=this.display)||void 0===_a?void 0:_a.conversionFactor)&&void 0!==_b?_b:1}},{key:"isAllIntegers",get:function get(){return!1}},{key:"tolerance",get:function get(){var _a,_b,_c;return null!==(_c=null!==(_b=null===(_a=this.display)||void 0===_a?void 0:_a.tolerance)&&void 0!==_b?_b:this.def.tolerance)&&void 0!==_c?_c:0}},{key:"domain",get:function get(){return[this.minValue,this.maxValue]}},{key:"display",get:function get(){return this.def.display}},{key:"formatValueForMobile",value:function formatValueForMobile(value,options){return this.formatValue(value,options)}},{key:"formatValueShortWithAbbreviations",value:function formatValueShortWithAbbreviations(value,options){return this.formatValue(value,options)}},{key:"formatValueShort",value:function formatValueShort(value,options){return this.formatValue(value,options)}},{key:"formatValueLong",value:function formatValueLong(value,options){return this.formatValue(value,options)}},{key:"formatForTick",value:function formatForTick(value,options){return this.formatValueShort(value,options)}},{key:"formatForCsv",value:function formatForCsv(value){return Util_1.csvEscape(Util_1.anyToString(value))}},{key:"numDecimalPlaces",get:function get(){var _a,_b;return null!==(_b=null===(_a=this.display)||void 0===_a?void 0:_a.numDecimalPlaces)&&void 0!==_b?_b:2}},{key:"unit",get:function get(){var _a,_b;return null!==(_b=null===(_a=this.display)||void 0===_a?void 0:_a.unit)&&void 0!==_b?_b:this.def.unit}},{key:"shortUnit",get:function get(){var _a,_b,_c,shortUnit=null!==(_c=null!==(_b=null===(_a=this.display)||void 0===_a?void 0:_a.shortUnit)&&void 0!==_b?_b:this.def.shortUnit)&&void 0!==_c?_c:void 0;if(void 0!==shortUnit)return shortUnit;var unit=this.unit;return unit?unit.length<3?unit:new Set(["$","Â£","â‚¬","%"]).has(unit[0])?unit[0]:void 0:void 0}},{key:"getUniqueValuesGroupedBy",value:function getUniqueValuesGroupedBy(indexColumnSlug){var map=new Map,values=this.values;return this.table.getValuesAtIndices(indexColumnSlug,this.validRowIndices).forEach((function(indexVal,index){map.has(indexVal)||map.set(indexVal,new Set),map.get(indexVal).add(values[index])})),map}},{key:"description",get:function get(){return this.def.description}},{key:"isEmpty",get:function get(){return 0===this.valuesIncludingErrorValues.length}},{key:"name",get:function get(){var _a;return null!==(_a=this.def.name)&&void 0!==_a?_a:this.def.slug}},{key:"displayName",get:function get(){var _a,_b,_c;return null!==(_c=null!==(_b=null===(_a=this.display)||void 0===_a?void 0:_a.name)&&void 0!==_b?_b:this.name)&&void 0!==_c?_c:""}},{key:"sortedUniqNonEmptyStringVals",get:function get(){return Array.from(new Set(this.values.filter(Util_1.isString).filter((function(i){return i})))).sort()}},{key:"slug",get:function get(){return this.def.slug}},{key:"valuesToIndices",get:function get(){var map=new Map;return this.valuesIncludingErrorValues.forEach((function(value,index){map.has(value)||map.set(value,[]),map.get(value).push(index)})),map}},{key:"indicesWhere",value:function indicesWhere(value){var _this=this,queries=Array.isArray(value)?value:[value];return Util_1.union.apply(Util_1,_toConsumableArray(queries.map((function(val){return _this.valuesToIndices.get(val)})).filter(isPresent_1.isPresent)))}},{key:"needsParsing",value:function needsParsing(value){return!this.def.transform&&(!(value instanceof ErrorValues_1.ErrorValue)&&_typeof(value)!==this.jsType)}},{key:"isProjection",get:function get(){var _a;return!!(null===(_a=this.display)||void 0===_a?void 0:_a.isProjection)}},{key:"uniqValues",get:function get(){return Util_1.uniq(this.values)}},{key:"uniqValuesAsSet",get:function get(){return new Set(this.uniqValues)}},{key:"valuesIncludingErrorValues",get:function get(){var table=this.table,slug=this.slug;return table.has(slug)?table.columnStore[slug]:[]}},{key:"validRowIndices",get:function get(){return this.valuesIncludingErrorValues.map((function(value,index){return value instanceof ErrorValues_1.ErrorValue?null:index})).filter(isPresent_1.isPresent)}},{key:"values",get:function get(){var values=this.valuesIncludingErrorValues;return this.validRowIndices.map((function(index){return values[index]}))}},{key:"originalTimeColumnSlug",get:function get(){return OwidTableUtil_1.getOriginalTimeColumnSlug(this.table,this.slug)}},{key:"originalTimeColumn",get:function get(){return this.table.get(this.originalTimeColumnSlug)}},{key:"originalTimes",get:function get(){var originalTimeColumnSlug=this.originalTimeColumnSlug;return originalTimeColumnSlug?this.table.getValuesAtIndices(originalTimeColumnSlug,this.validRowIndices):[]}},{key:"isConstant",get:function get(){return 1===new Set(this.valuesIncludingErrorValues).size}},{key:"minValue",get:function get(){return this.valuesAscending[0]}},{key:"maxValue",get:function get(){return Util_1.last(this.valuesAscending)}},{key:"numErrorValues",get:function get(){return this.valuesIncludingErrorValues.length-this.numValues}},{key:"numValues",get:function get(){return this.values.length}},{key:"numUniqs",get:function get(){return this.uniqValues.length}},{key:"valuesAscending",get:function get(){var values=this.values.slice();return"string"===this.jsType?values.sort():Util_1.sortNumeric(values)}},{key:"source",get:function get(){var def=this.def,source=def.source;return source||{name:def.sourceName,link:def.sourceLink,dataPublishedBy:def.dataPublishedBy,dataPublisherSource:def.dataPublisherSource,retrievedDate:def.retrievedDate,additionalInfo:def.additionalInfo}}},{key:"allTimes",get:function get(){return this.table.getTimesAtIndices(this.validRowIndices)}},{key:"uniqTimesAsc",get:function get(){return Util_1.sortNumeric(Util_1.uniq(this.allTimes))}},{key:"maxTime",get:function get(){return Util_1.last(this.uniqTimesAsc)}},{key:"minTime",get:function get(){return this.uniqTimesAsc[0]}},{key:"uniqEntityNames",get:function get(){return Util_1.uniq(this.allEntityNames)}},{key:"allEntityNames",get:function get(){return this.table.getValuesAtIndices(this.table.entityNameSlug,this.validRowIndices)}},{key:"owidRows",get:function get(){var times=this.originalTimes,values=this.values,entities=this.allEntityNames;return Util_1.range(0,times.length).map((function(index){return{entityName:entities[index],time:times[index],value:values[index]}}))}},{key:"owidRowsByEntityName",get:function get(){var map=new Map;return this.owidRows.forEach((function(row){map.has(row.entityName)||map.set(row.entityName,[]),map.get(row.entityName).push(row)})),map}},{key:"valueByEntityNameAndTime",get:function get(){var valueByEntityNameAndTime=new Map;return this.owidRows.forEach((function(row){valueByEntityNameAndTime.has(row.entityName)||valueByEntityNameAndTime.set(row.entityName,new Map),valueByEntityNameAndTime.get(row.entityName).set(row.time,row.value)})),valueByEntityNameAndTime}}]),AbstractCoreColumn}();__decorate([CoreTableUtils_1.imemo],AbstractCoreColumn.prototype,"isMissing",null),__decorate([CoreTableUtils_1.imemo],AbstractCoreColumn.prototype,"summary",null),__decorate([CoreTableUtils_1.imemo],AbstractCoreColumn.prototype,"unitConversionFactor",null),__decorate([CoreTableUtils_1.imemo],AbstractCoreColumn.prototype,"isAllIntegers",null),__decorate([CoreTableUtils_1.imemo],AbstractCoreColumn.prototype,"tolerance",null),__decorate([CoreTableUtils_1.imemo],AbstractCoreColumn.prototype,"domain",null),__decorate([CoreTableUtils_1.imemo],AbstractCoreColumn.prototype,"display",null),__decorate([CoreTableUtils_1.imemo],AbstractCoreColumn.prototype,"numDecimalPlaces",null),__decorate([CoreTableUtils_1.imemo],AbstractCoreColumn.prototype,"unit",null),__decorate([CoreTableUtils_1.imemo],AbstractCoreColumn.prototype,"shortUnit",null),__decorate([CoreTableUtils_1.imemo],AbstractCoreColumn.prototype,"description",null),__decorate([CoreTableUtils_1.imemo],AbstractCoreColumn.prototype,"isEmpty",null),__decorate([CoreTableUtils_1.imemo],AbstractCoreColumn.prototype,"name",null),__decorate([CoreTableUtils_1.imemo],AbstractCoreColumn.prototype,"displayName",null),__decorate([CoreTableUtils_1.imemo],AbstractCoreColumn.prototype,"sortedUniqNonEmptyStringVals",null),__decorate([CoreTableUtils_1.imemo],AbstractCoreColumn.prototype,"slug",null),__decorate([CoreTableUtils_1.imemo],AbstractCoreColumn.prototype,"valuesToIndices",null),__decorate([CoreTableUtils_1.imemo],AbstractCoreColumn.prototype,"isProjection",null),__decorate([CoreTableUtils_1.imemo],AbstractCoreColumn.prototype,"uniqValues",null),__decorate([CoreTableUtils_1.imemo],AbstractCoreColumn.prototype,"uniqValuesAsSet",null),__decorate([CoreTableUtils_1.imemo],AbstractCoreColumn.prototype,"valuesIncludingErrorValues",null),__decorate([CoreTableUtils_1.imemo],AbstractCoreColumn.prototype,"validRowIndices",null),__decorate([CoreTableUtils_1.imemo],AbstractCoreColumn.prototype,"values",null),__decorate([CoreTableUtils_1.imemo],AbstractCoreColumn.prototype,"originalTimeColumnSlug",null),__decorate([CoreTableUtils_1.imemo],AbstractCoreColumn.prototype,"originalTimeColumn",null),__decorate([CoreTableUtils_1.imemo],AbstractCoreColumn.prototype,"originalTimes",null),__decorate([CoreTableUtils_1.imemo],AbstractCoreColumn.prototype,"isConstant",null),__decorate([CoreTableUtils_1.imemo],AbstractCoreColumn.prototype,"minValue",null),__decorate([CoreTableUtils_1.imemo],AbstractCoreColumn.prototype,"maxValue",null),__decorate([CoreTableUtils_1.imemo],AbstractCoreColumn.prototype,"numErrorValues",null),__decorate([CoreTableUtils_1.imemo],AbstractCoreColumn.prototype,"numValues",null),__decorate([CoreTableUtils_1.imemo],AbstractCoreColumn.prototype,"numUniqs",null),__decorate([CoreTableUtils_1.imemo],AbstractCoreColumn.prototype,"valuesAscending",null),__decorate([CoreTableUtils_1.imemo],AbstractCoreColumn.prototype,"allTimes",null),__decorate([CoreTableUtils_1.imemo],AbstractCoreColumn.prototype,"uniqTimesAsc",null),__decorate([CoreTableUtils_1.imemo],AbstractCoreColumn.prototype,"maxTime",null),__decorate([CoreTableUtils_1.imemo],AbstractCoreColumn.prototype,"minTime",null),__decorate([CoreTableUtils_1.imemo],AbstractCoreColumn.prototype,"uniqEntityNames",null),__decorate([CoreTableUtils_1.imemo],AbstractCoreColumn.prototype,"allEntityNames",null),__decorate([CoreTableUtils_1.imemo],AbstractCoreColumn.prototype,"owidRows",null),__decorate([CoreTableUtils_1.imemo],AbstractCoreColumn.prototype,"owidRowsByEntityName",null),__decorate([CoreTableUtils_1.imemo],AbstractCoreColumn.prototype,"valueByEntityNameAndTime",null),exports.AbstractCoreColumn=AbstractCoreColumn;var MissingColumn=function(_AbstractCoreColumn){_inherits(MissingColumn,_AbstractCoreColumn);var _super=_createSuper(MissingColumn);function MissingColumn(){var _this2;return _classCallCheck(this,MissingColumn),(_this2=_super.apply(this,arguments)).jsType=CoreTableConstants_1.JsTypes.string,_this2}return _createClass(MissingColumn,[{key:"formatValue",value:function formatValue(){return""}}]),MissingColumn}(AbstractCoreColumn);exports.MissingColumn=MissingColumn;var StringColumn=function(_AbstractCoreColumn2){_inherits(StringColumn,_AbstractCoreColumn2);var _super2=_createSuper(StringColumn);function StringColumn(){var _this3;return _classCallCheck(this,StringColumn),(_this3=_super2.apply(this,arguments)).jsType=CoreTableConstants_1.JsTypes.string,_this3}return _createClass(StringColumn,[{key:"formatValue",value:function formatValue(value){return Util_1.anyToString(value)}},{key:"parse",value:function parse(val){return null===val?ErrorValues_1.ErrorValueTypes.NullButShouldBeString:void 0===val?ErrorValues_1.ErrorValueTypes.UndefinedButShouldBeString:val.toString()||""}}]),StringColumn}(AbstractCoreColumn),SeriesAnnotationColumn=function(_StringColumn){_inherits(SeriesAnnotationColumn,_StringColumn);var _super3=_createSuper(SeriesAnnotationColumn);function SeriesAnnotationColumn(){return _classCallCheck(this,SeriesAnnotationColumn),_super3.apply(this,arguments)}return SeriesAnnotationColumn}(StringColumn),CategoricalColumn=function(_StringColumn2){_inherits(CategoricalColumn,_StringColumn2);var _super4=_createSuper(CategoricalColumn);function CategoricalColumn(){return _classCallCheck(this,CategoricalColumn),_super4.apply(this,arguments)}return CategoricalColumn}(StringColumn),RegionColumn=function(_CategoricalColumn){_inherits(RegionColumn,_CategoricalColumn);var _super5=_createSuper(RegionColumn);function RegionColumn(){return _classCallCheck(this,RegionColumn),_super5.apply(this,arguments)}return RegionColumn}(CategoricalColumn),ContinentColumn=function(_RegionColumn){_inherits(ContinentColumn,_RegionColumn);var _super6=_createSuper(ContinentColumn);function ContinentColumn(){return _classCallCheck(this,ContinentColumn),_super6.apply(this,arguments)}return ContinentColumn}(RegionColumn),ColorColumn=function(_CategoricalColumn2){_inherits(ColorColumn,_CategoricalColumn2);var _super7=_createSuper(ColorColumn);function ColorColumn(){return _classCallCheck(this,ColorColumn),_super7.apply(this,arguments)}return ColorColumn}(CategoricalColumn),BooleanColumn=function(_AbstractCoreColumn3){_inherits(BooleanColumn,_AbstractCoreColumn3);var _super8=_createSuper(BooleanColumn);function BooleanColumn(){var _this4;return _classCallCheck(this,BooleanColumn),(_this4=_super8.apply(this,arguments)).jsType=CoreTableConstants_1.JsTypes.boolean,_this4}return _createClass(BooleanColumn,[{key:"formatValue",value:function formatValue(value){return value?"true":"false"}},{key:"parse",value:function parse(val){return!!val}}]),BooleanColumn}(AbstractCoreColumn),AbstractNumericColumn=function(_AbstractCoreColumn4){_inherits(AbstractNumericColumn,_AbstractCoreColumn4);var _super9=_createSuper(AbstractNumericColumn);function AbstractNumericColumn(){var _this5;return _classCallCheck(this,AbstractNumericColumn),(_this5=_super9.apply(this,arguments)).jsType=CoreTableConstants_1.JsTypes.number,_this5}return _createClass(AbstractNumericColumn,[{key:"formatValue",value:function formatValue(value,options){return Util_1.isNumber(value)?formatValue_1.formatValue(value,Object.assign({numDecimalPlaces:this.numDecimalPlaces},options)):""}},{key:"formatValueShortWithAbbreviations",value:function formatValueShortWithAbbreviations(value,options){return _get(_getPrototypeOf(AbstractNumericColumn.prototype),"formatValueShortWithAbbreviations",this).call(this,value,Object.assign({shortNumberPrefixes:!0},options))}},{key:"formatValueShort",value:function formatValueShort(value,options){return _get(_getPrototypeOf(AbstractNumericColumn.prototype),"formatValueShort",this).call(this,value,Object.assign(Object.assign({},Util_1.omitUndefinedValues({unit:this.shortUnit})),options))}},{key:"formatValueLong",value:function formatValueLong(value,options){return _get(_getPrototypeOf(AbstractNumericColumn.prototype),"formatValueLong",this).call(this,value,Object.assign(Object.assign({},Util_1.omitUndefinedValues({unit:this.unit})),options))}},{key:"isAllIntegers",get:function get(){return this.values.every((function(val){return val%1==0}))}},{key:"parse",value:function parse(val){if(null===val)return ErrorValues_1.ErrorValueTypes.NullButShouldBeNumber;if(void 0===val)return ErrorValues_1.ErrorValueTypes.UndefinedButShouldBeNumber;if(""===val)return ErrorValues_1.ErrorValueTypes.BlankButShouldBeNumber;if(isNaN(val))return ErrorValues_1.ErrorValueTypes.NaNButShouldBeNumber;var res=this._parse(val);return isNaN(res)?ErrorValues_1.ErrorValueTypes.NotAParseableNumberButShouldBeNumber:res}},{key:"_parse",value:function _parse(val){return parseFloat(val)}}]),AbstractNumericColumn}(AbstractCoreColumn);__decorate([CoreTableUtils_1.imemo],AbstractNumericColumn.prototype,"isAllIntegers",null);var NumericColumn=function(_AbstractNumericColum){_inherits(NumericColumn,_AbstractNumericColum);var _super10=_createSuper(NumericColumn);function NumericColumn(){return _classCallCheck(this,NumericColumn),_super10.apply(this,arguments)}return NumericColumn}(AbstractNumericColumn),NumericCategoricalColumn=function(_AbstractNumericColum2){_inherits(NumericCategoricalColumn,_AbstractNumericColum2);var _super11=_createSuper(NumericCategoricalColumn);function NumericCategoricalColumn(){return _classCallCheck(this,NumericCategoricalColumn),_super11.apply(this,arguments)}return NumericCategoricalColumn}(AbstractNumericColumn),IntegerColumn=function(_NumericColumn){_inherits(IntegerColumn,_NumericColumn);var _super12=_createSuper(IntegerColumn);function IntegerColumn(){return _classCallCheck(this,IntegerColumn),_super12.apply(this,arguments)}return _createClass(IntegerColumn,[{key:"formatValue",value:function formatValue(value,options){return _get(_getPrototypeOf(IntegerColumn.prototype),"formatValue",this).call(this,value,Object.assign({numDecimalPlaces:0},options))}},{key:"_parse",value:function _parse(val){return parseInt(val)}}]),IntegerColumn}(NumericColumn),CurrencyColumn=function(_NumericColumn2){_inherits(CurrencyColumn,_NumericColumn2);var _super13=_createSuper(CurrencyColumn);function CurrencyColumn(){return _classCallCheck(this,CurrencyColumn),_super13.apply(this,arguments)}return _createClass(CurrencyColumn,[{key:"formatValue",value:function formatValue(value,options){return _get(_getPrototypeOf(CurrencyColumn.prototype),"formatValue",this).call(this,value,Object.assign({numDecimalPlaces:0,unit:"$"},options))}}]),CurrencyColumn}(NumericColumn),PercentageColumn=function(_NumericColumn3){_inherits(PercentageColumn,_NumericColumn3);var _super14=_createSuper(PercentageColumn);function PercentageColumn(){return _classCallCheck(this,PercentageColumn),_super14.apply(this,arguments)}return _createClass(PercentageColumn,[{key:"formatValue",value:function formatValue(value,options){return _get(_getPrototypeOf(PercentageColumn.prototype),"formatValue",this).call(this,value,Object.assign({numberPrefixes:!1,unit:"%"},options))}}]),PercentageColumn}(NumericColumn),RelativePercentageColumn=function(_PercentageColumn){_inherits(RelativePercentageColumn,_PercentageColumn);var _super15=_createSuper(RelativePercentageColumn);function RelativePercentageColumn(){return _classCallCheck(this,RelativePercentageColumn),_super15.apply(this,arguments)}return RelativePercentageColumn}(PercentageColumn),PercentChangeOverTimeColumn=function(_PercentageColumn2){_inherits(PercentChangeOverTimeColumn,_PercentageColumn2);var _super16=_createSuper(PercentChangeOverTimeColumn);function PercentChangeOverTimeColumn(){return _classCallCheck(this,PercentChangeOverTimeColumn),_super16.apply(this,arguments)}return _createClass(PercentChangeOverTimeColumn,[{key:"formatValue",value:function formatValue(value,options){return _get(_getPrototypeOf(PercentChangeOverTimeColumn.prototype),"formatValue",this).call(this,value,Object.assign({showPlus:!0},options))}}]),PercentChangeOverTimeColumn}(PercentageColumn),DecimalPercentageColumn=function(_PercentageColumn3){_inherits(DecimalPercentageColumn,_PercentageColumn3);var _super17=_createSuper(DecimalPercentageColumn);function DecimalPercentageColumn(){return _classCallCheck(this,DecimalPercentageColumn),_super17.apply(this,arguments)}return DecimalPercentageColumn}(PercentageColumn),RatioColumn=function(_NumericColumn4){_inherits(RatioColumn,_NumericColumn4);var _super18=_createSuper(RatioColumn);function RatioColumn(){return _classCallCheck(this,RatioColumn),_super18.apply(this,arguments)}return RatioColumn}(NumericColumn),EntityIdColumn=function(_NumericCategoricalCo){_inherits(EntityIdColumn,_NumericCategoricalCo);var _super19=_createSuper(EntityIdColumn);function EntityIdColumn(){return _classCallCheck(this,EntityIdColumn),_super19.apply(this,arguments)}return EntityIdColumn}(NumericCategoricalColumn),EntityCodeColumn=function(_CategoricalColumn3){_inherits(EntityCodeColumn,_CategoricalColumn3);var _super20=_createSuper(EntityCodeColumn);function EntityCodeColumn(){return _classCallCheck(this,EntityCodeColumn),_super20.apply(this,arguments)}return EntityCodeColumn}(CategoricalColumn),EntityNameColumn=function(_CategoricalColumn4){_inherits(EntityNameColumn,_CategoricalColumn4);var _super21=_createSuper(EntityNameColumn);function EntityNameColumn(){return _classCallCheck(this,EntityNameColumn),_super21.apply(this,arguments)}return EntityNameColumn}(CategoricalColumn),TimeColumn=function(_AbstractCoreColumn5){_inherits(TimeColumn,_AbstractCoreColumn5);var _super22=_createSuper(TimeColumn);function TimeColumn(){var _this6;return _classCallCheck(this,TimeColumn),(_this6=_super22.apply(this,arguments)).jsType=CoreTableConstants_1.JsTypes.number,_this6}return _createClass(TimeColumn,[{key:"parse",value:function parse(val){return parseInt(val)}}]),TimeColumn}(AbstractCoreColumn),YearColumn=function(_TimeColumn){_inherits(YearColumn,_TimeColumn);var _super23=_createSuper(YearColumn);function YearColumn(){return _classCallCheck(this,YearColumn),_super23.apply(this,arguments)}return _createClass(YearColumn,[{key:"formatValue",value:function formatValue(value){return Util_1.formatYear(value)}}]),YearColumn}(TimeColumn),DayColumn=function(_TimeColumn2){_inherits(DayColumn,_TimeColumn2);var _super24=_createSuper(DayColumn);function DayColumn(){return _classCallCheck(this,DayColumn),_super24.apply(this,arguments)}return _createClass(DayColumn,[{key:"formatValue",value:function formatValue(value){return Util_1.formatDay(value)}},{key:"formatValueForMobile",value:function formatValueForMobile(value){return Util_1.formatDay(value,{format:"MMM D, 'YY"})}},{key:"formatForCsv",value:function formatForCsv(value){return Util_1.formatDay(value,{format:"YYYY-MM-DD"})}}]),DayColumn}(TimeColumn),dateToTimeCache=new Map,DateColumn=function(_DayColumn){_inherits(DateColumn,_DayColumn);var _super25=_createSuper(DateColumn);function DateColumn(){return _classCallCheck(this,DateColumn),_super25.apply(this,arguments)}return _createClass(DateColumn,[{key:"parse",value:function parse(val){return"number"==typeof val?val:(dateToTimeCache.has(val)||dateToTimeCache.set(val,Util_1.dateDiffInDays(moment_1.default.utc(val).toDate(),moment_1.default.utc("2020-01-21").toDate())),dateToTimeCache.get(val))}}]),DateColumn}(DayColumn),QuarterColumn=function(_TimeColumn3){_inherits(QuarterColumn,_TimeColumn3);var _super26=_createSuper(QuarterColumn);function QuarterColumn(){return _classCallCheck(this,QuarterColumn),_super26.apply(this,arguments)}return _createClass(QuarterColumn,[{key:"parse",value:function parse(val){if("number"==typeof val)return val;if("string"==typeof val){var match=val.match(QuarterColumn.regEx);if(match){var _match=_slicedToArray(match,3),year=_match[1],quarter=_match[2];return 4*parseInt(year)+(parseInt(quarter)-1)}}return ErrorValues_1.ErrorValueTypes.InvalidQuarterValue}},{key:"formatValue",value:function formatValue(value){var _QuarterColumn$numToQ2=_slicedToArray(QuarterColumn.numToQuarter(value),2),year=_QuarterColumn$numToQ2[0],quarter=_QuarterColumn$numToQ2[1];return"Q".concat(quarter,"/").concat(year)}},{key:"formatForCsv",value:function formatForCsv(value){var _QuarterColumn$numToQ4=_slicedToArray(QuarterColumn.numToQuarter(value),2),year=_QuarterColumn$numToQ4[0],quarter=_QuarterColumn$numToQ4[1];return"".concat(year,"-Q").concat(quarter)}}],[{key:"numToQuarter",value:function numToQuarter(value){return[Math.floor(value/4),Math.abs(value)%4+1]}}]),QuarterColumn}(TimeColumn);QuarterColumn.regEx=/^([+-]?\d+)-Q([1-4])$/;var PopulationColumn=function(_IntegerColumn){_inherits(PopulationColumn,_IntegerColumn);var _super27=_createSuper(PopulationColumn);function PopulationColumn(){return _classCallCheck(this,PopulationColumn),_super27.apply(this,arguments)}return PopulationColumn}(IntegerColumn),PopulationDensityColumn=function(_NumericColumn5){_inherits(PopulationDensityColumn,_NumericColumn5);var _super28=_createSuper(PopulationDensityColumn);function PopulationDensityColumn(){return _classCallCheck(this,PopulationDensityColumn),_super28.apply(this,arguments)}return PopulationDensityColumn}(NumericColumn),AgeColumn=function(_NumericColumn6){_inherits(AgeColumn,_NumericColumn6);var _super29=_createSuper(AgeColumn);function AgeColumn(){return _classCallCheck(this,AgeColumn),_super29.apply(this,arguments)}return AgeColumn}(NumericColumn);exports.ColumnTypeMap={String:StringColumn,SeriesAnnotation:SeriesAnnotationColumn,Categorical:CategoricalColumn,Region:RegionColumn,Continent:ContinentColumn,Numeric:NumericColumn,Day:DayColumn,Date:DateColumn,Year:YearColumn,Quarter:QuarterColumn,Time:TimeColumn,Boolean:BooleanColumn,Currency:CurrencyColumn,Percentage:PercentageColumn,RelativePercentage:RelativePercentageColumn,Integer:IntegerColumn,DecimalPercentage:DecimalPercentageColumn,PercentChangeOverTime:PercentChangeOverTimeColumn,Ratio:RatioColumn,Color:ColorColumn,EntityCode:EntityCodeColumn,EntityId:EntityIdColumn,EntityName:EntityNameColumn,Population:PopulationColumn,PopulationDensity:PopulationDensityColumn,Age:AgeColumn};exports.ColumnTypeMap},468:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BinningStrategy=void 0,function(BinningStrategy){BinningStrategy.equalInterval="equalInterval",BinningStrategy.quantiles="quantiles",BinningStrategy.ckmeans="ckmeans",BinningStrategy.manual="manual"}(exports.BinningStrategy||(exports.BinningStrategy={}))},469:function(module,exports,__webpack_require__){"use strict";function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=arr&&("undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"]);if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e3){didErr=!0,err=_e3},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}__webpack_require__(33),__webpack_require__(65),__webpack_require__(32),__webpack_require__(62),__webpack_require__(311),__webpack_require__(5),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(14),__webpack_require__(197),__webpack_require__(22),__webpack_require__(17),__webpack_require__(29),__webpack_require__(9),__webpack_require__(10),__webpack_require__(11),Object.defineProperty(exports,"__esModule",{value:!0}),exports.setWindowQueryStr=exports.getWindowQueryStr=exports.queryParamsToStr=exports.strToQueryParams=exports.getWindowQueryParams=exports.getQueryParams=void 0;var Util_1=__webpack_require__(40);exports.getQueryParams=function getQueryParams(queryStr){return exports.strToQueryParams(queryStr||exports.getWindowQueryStr())};exports.getWindowQueryParams=function getWindowQueryParams(){return exports.strToQueryParams(exports.getWindowQueryStr())};exports.strToQueryParams=function strToQueryParams(){var queryStr=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",doNotDecode=arguments.length>1&&void 0!==arguments[1]&&arguments[1];"?"===queryStr[0]&&(queryStr=queryStr.substring(1));var _step,querySplit=queryStr.split("&").filter((function(s){return s})),params={},_iterator=_createForOfIteratorHelper(querySplit);try{for(_iterator.s();!(_step=_iterator.n()).done;){var param=_step.value,_param$split=param.split("=",2),_param$split2=_slicedToArray(_param$split,2),key=_param$split2[0],value=_param$split2[1],decodedKey=decodeURIComponent(key.replace(/\+/g,"%20")),decoded=void 0!==value?decodeURIComponent(value.replace(/\+/g,"%20")):void 0;params[decodedKey]=doNotDecode?value:decoded}}catch(err){_iterator.e(err)}finally{_iterator.f()}return params};exports.queryParamsToStr=function queryParamsToStr(params){var newQueryStr=new URLSearchParams(Util_1.omitUndefinedValues(params)).toString().replace(/%7E/g,"~");return newQueryStr.length?"?".concat(newQueryStr):""};exports.getWindowQueryStr=function getWindowQueryStr(){return window.location.search};exports.setWindowQueryStr=function setWindowQueryStr(str){return history.replaceState(null,document.title,window.location.pathname+str+window.location.hash)}},470:function(module,exports,__webpack_require__){"use strict";function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=arr&&("undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"]);if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(106),__webpack_require__(5),__webpack_require__(9),__webpack_require__(31),__webpack_require__(28),__webpack_require__(68),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(65),__webpack_require__(32),__webpack_require__(48),__webpack_require__(55),__webpack_require__(197),__webpack_require__(25),__webpack_require__(33),__webpack_require__(57),__webpack_require__(36),__webpack_require__(132),__webpack_require__(151),__webpack_require__(79),__webpack_require__(17),__webpack_require__(14),__webpack_require__(103),__webpack_require__(10),__webpack_require__(11),__webpack_require__(18),__webpack_require__(21),__webpack_require__(29),__webpack_require__(22);var Grapher_1,__createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__rest=this&&this.__rest||function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getErrorMessageRelatedQuestionUrl=exports.Grapher=void 0;var React=__importStar(__webpack_require__(0)),ReactDOMServer=__importStar(__webpack_require__(1779)),mobx_1=__webpack_require__(41),decko_1=__webpack_require__(601),Util_1=__webpack_require__(40),GrapherConstants_1=__webpack_require__(64),Cookies=__importStar(__webpack_require__(1781)),ChartDimension_1=__webpack_require__(1782),Bounds_1=__webpack_require__(73),TimeBounds_1=__webpack_require__(387),UrlUtils_1=__webpack_require__(469),PopulationMap_1=__webpack_require__(988),GrapherInterface_1=__webpack_require__(1787),DimensionSlot_1=__webpack_require__(1788),EntityUrlBuilder_1=__webpack_require__(471),AxisConfig_1=__webpack_require__(216),ColorScaleConfig_1=__webpack_require__(390),MapConfig_1=__webpack_require__(990),Persistable_1=__webpack_require__(322),EntitiesOnTheMap_1=__webpack_require__(994),react_fontawesome_1=__webpack_require__(123),faExclamationTriangle_1=__webpack_require__(1795),Controls_1=__webpack_require__(996),Tooltip_1=__webpack_require__(323),EntitySelectorModal_1=__webpack_require__(1809),DownloadTab_1=__webpack_require__(1001),ReactDOM=__importStar(__webpack_require__(90)),mobx_react_1=__webpack_require__(58);__webpack_require__(1935);var SourcesTab_1=__webpack_require__(1006),DataTable_1=__webpack_require__(1009),MapChart_1=__webpack_require__(609),CommandPalette_1=__webpack_require__(1015),CaptionedChart_1=__webpack_require__(1016),TimelineController_1=__webpack_require__(1034),OwidTable_1=__webpack_require__(201),Mousetrap=__importStar(__webpack_require__(1870)),ChartTypeMap_1=__webpack_require__(474),SelectionArray_1=__webpack_require__(394),LegacyToOwidTable_1=__webpack_require__(1871),ChartUtils_1=__webpack_require__(173),classnames_1=__importDefault(__webpack_require__(139)),GrapherAnalytics_1=__webpack_require__(1035),clientSettings_1=__webpack_require__(1036),GrapherUrlMigrations_1=__webpack_require__(476),Url_1=__webpack_require__(395),owidTypes_1=__webpack_require__(122),CoreTableColumns_1=__webpack_require__(466),js_1=__importDefault(__webpack_require__(1874)),legacyConfigToConfig=function legacyConfigToConfig(config){var legacyConfig=config;if(!legacyConfig.selectedData)return legacyConfig;var newConfig=Object.assign({},legacyConfig);return newConfig.selectedEntityIds=Util_1.uniq(legacyConfig.selectedData.map((function(row){return row.entityId}))),newConfig},Grapher=Grapher_1=function(_React$Component){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(Grapher,_React$Component);var _super=_createSuper(Grapher);function Grapher(){var _this,_a,_b,_c,_d,_e,_f,_g,_h,propsWithGrapherInstanceGetter=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,Grapher),(_this=_super.call(this,propsWithGrapherInstanceGetter)).type=GrapherConstants_1.ChartTypeName.LineChart,_this.id=void 0,_this.version=1,_this.slug=void 0,_this.title=void 0,_this.subtitle="",_this.sourceDesc=void 0,_this.note="",_this.hideTitleAnnotation=void 0,_this.minTime=void 0,_this.maxTime=void 0,_this.timelineMinTime=void 0,_this.timelineMaxTime=void 0,_this.addCountryMode=GrapherConstants_1.EntitySelectionMode.MultipleEntities,_this.highlightToggle=void 0,_this.stackMode=GrapherConstants_1.StackMode.absolute,_this.hideLegend=!1,_this.logo=void 0,_this.hideLogo=void 0,_this.hideRelativeToggle=!0,_this.entityType="country",_this.entityTypePlural="countries",_this.hideTimeline=void 0,_this.zoomToSelection=void 0,_this.minPopulationFilter=void 0,_this.showYearLabels=void 0,_this.hasChartTab=!0,_this.hasMapTab=!1,_this.tab=GrapherConstants_1.GrapherTabOption.chart,_this.overlay=void 0,_this.internalNotes="",_this.variantName=void 0,_this.originUrl="",_this.isPublished=void 0,_this.baseColorScheme=void 0,_this.invertColorScheme=void 0,_this.hideLinesOutsideTolerance=void 0,_this.hideConnectedScatterLines=void 0,_this.scatterPointLabelStrategy=void 0,_this.compareEndPointsOnly=void 0,_this.matchingEntitiesOnly=void 0,_this.xAxis=new AxisConfig_1.AxisConfig(void 0,_assertThisInitialized(_this)),_this.yAxis=new AxisConfig_1.AxisConfig(void 0,_assertThisInitialized(_this)),_this.colorScale=new ColorScaleConfig_1.ColorScaleConfig,_this.map=new MapConfig_1.MapConfig,_this.dimensions=[],_this.ySlugs=void 0,_this.xSlug=void 0,_this.colorSlug=void 0,_this.sizeSlug=void 0,_this.tableSlugs=void 0,_this.backgroundSeriesLimit=void 0,_this.selectedEntityNames=[],_this.selectedEntityColors={},_this.selectedEntityIds=[],_this.excludedEntities=void 0,_this.comparisonLines=[],_this.relatedQuestions=[],_this.annotation=void 0,_this.hideFacetControl=!0,_this.selectedFacetStrategy=void 0,_this.owidDataset=void 0,_this.manuallyProvideData=!1,_this.isDev="development"===_this.props.env,_this.analytics=new GrapherAnalytics_1.GrapherAnalytics(null!==(_a=_this.props.env)&&void 0!==_a?_a:""),_this.isEditor="undefined"!=typeof window&&!0===window.isEditor,_this.bakedGrapherURL=clientSettings_1.BAKED_GRAPHER_URL,_this.adminBaseUrl=clientSettings_1.ADMIN_BASE_URL,_this.legacyConfigAsAuthored={},_this.isMediaCard=!1,_this.isExportingtoSvgOrPng=!1,_this.isPlaying=!1,_this.isSelectingData=!1,_this.populationFilterToggleOption=1e6,_this.useTimelineDomains=!1,_this._baseFontSize=GrapherConstants_1.BASE_FONT_SIZE,_this.seriesColorMap=new Map,_this.externalCsvLink="",_this.disposers=[],_this.popups=[],_this.base=React.createRef(),_this.hasBeenVisible=!1,_this.selection=null!==(_c=null===(_b=_this.manager)||void 0===_b?void 0:_b.selection)&&void 0!==_c?_c:new SelectionArray_1.SelectionArray(null!==(_d=_this.props.selectedEntityNames)&&void 0!==_d?_d:[],null!==(_f=null===(_e=_this.props.table)||void 0===_e?void 0:_e.availableEntities)&&void 0!==_f?_f:[]),_this.disableAutoFaceting=!0,_this._shortcutsBound=!1,_this.isShareMenuActive=!1,_this.debounceMode=!1,_this.msPerTick=100,_this.timelineController=new TimelineController_1.TimelineController(_assertThisInitialized(_this)),_this.hideEntityControls=!1;var getGrapherInstance=propsWithGrapherInstanceGetter.getGrapherInstance,props=__rest(propsWithGrapherInstanceGetter,["getGrapherInstance"]);_this.inputTable=null!==(_g=props.table)&&void 0!==_g?_g:OwidTable_1.BlankOwidTable("initialGrapherTable");var modernConfig=props?legacyConfigToConfig(props):props;return props&&_this.setAuthoredVersion(props),_this.updateFromObject(modernConfig),props.table||_this.downloadData(),_this.populateFromQueryParams(GrapherUrlMigrations_1.legacyToCurrentGrapherQueryParams(null!==(_h=props.queryStr)&&void 0!==_h?_h:"")),_this.isEditor&&_this.ensureValidConfigWhenEditing(),getGrapherInstance&&getGrapherInstance(_assertThisInitialized(_this)),_this.checkVisibility=Util_1.throttle(_this.checkVisibility,400),_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Grapher,[{key:"dataTableSlugs",get:function get(){return this.tableSlugs?this.tableSlugs.split(" "):this.newSlugs}},{key:"setAuthoredVersion",value:function setAuthoredVersion(config){this.legacyConfigAsAuthored=config}},{key:"updateAuthoredVersion",value:function updateAuthoredVersion(config){this.legacyConfigAsAuthored=Object.assign(Object.assign({},this.legacyConfigAsAuthored),config)}},{key:"toObject",value:function toObject(){var _a,obj=Persistable_1.objectWithPersistablesToObject(this,GrapherInterface_1.grapherKeysToSerialize);return this.selection.hasSelection&&(obj.selectedEntityNames=this.selection.selectedEntityNames),Persistable_1.deleteRuntimeAndUnchangedProps(obj,defaultObject),null===obj.stackMode&&delete obj.stackMode,obj.minTime&&(obj.minTime=TimeBounds_1.minTimeToJSON(this.minTime)),obj.maxTime&&(obj.maxTime=TimeBounds_1.maxTimeToJSON(this.maxTime)),(null===(_a=this.legacyConfigAsAuthored)||void 0===_a?void 0:_a.dimensions)&&(obj.dimensions=this.legacyConfigAsAuthored.dimensions),obj}},{key:"downloadData",value:function downloadData(){this.manuallyProvideData||(this.owidDataset?this._receiveLegacyDataAndApplySelection(this.owidDataset):this.downloadLegacyDataFromOwidVariableIds())}},{key:"updateFromObject",value:function updateFromObject(obj){var _a;obj&&(null===obj.stackMode&&delete obj.stackMode,Persistable_1.updatePersistables(this,obj),null===obj.originUrl&&(this.originUrl=""),this.minTime=TimeBounds_1.minTimeBoundFromJSONOrNegativeInfinity(obj.minTime),this.maxTime=TimeBounds_1.maxTimeBoundFromJSONOrPositiveInfinity(obj.maxTime),(null===(_a=null==obj?void 0:obj.dimensions)||void 0===_a?void 0:_a.length)&&this.setDimensionsFromConfigs(obj.dimensions))}},{key:"populateFromQueryParams",value:function populateFromQueryParams(params){var _a,tab=params.tab;tab&&(this.availableTabs.includes(tab)?this.tab=tab:console.error("Unexpected tab: "+tab));var overlay=params.overlay;overlay&&(this.availableTabs.includes(overlay)?this.overlay=overlay:console.error("Unexpected overlay: "+overlay)),this.stackMode=null!==(_a=params.stackMode)&&void 0!==_a?_a:this.stackMode,this.zoomToSelection="true"===params.zoomToSelection||this.zoomToSelection,this.minPopulationFilter=params.minPopulationFilter?parseInt(params.minPopulationFilter):this.minPopulationFilter;var xScaleType=params.xScale;xScaleType&&(xScaleType===GrapherConstants_1.ScaleType.linear||xScaleType===GrapherConstants_1.ScaleType.log?this.xAxis.scaleType=xScaleType:console.error("Unexpected xScale: "+xScaleType));var yScaleType=params.yScale;yScaleType&&(yScaleType===GrapherConstants_1.ScaleType.linear||yScaleType===GrapherConstants_1.ScaleType.log?this.yAxis.scaleType=yScaleType:console.error("Unexpected xScale: "+yScaleType));var time=params.time;void 0!==time&&""!==time&&this.setTimeFromTimeQueryParam(time);var endpointsOnly=params.endpointsOnly;void 0!==endpointsOnly&&(this.compareEndPointsOnly="1"===endpointsOnly||void 0);var region=params.region;void 0!==region&&(this.map.projection=region);var selection=EntityUrlBuilder_1.getSelectedEntityNamesParam(Url_1.Url.fromQueryParams(params));this.addCountryMode!==GrapherConstants_1.EntitySelectionMode.Disabled&&selection&&this.selection.setSelectedEntities(selection)}},{key:"setTimeFromTimeQueryParam",value:function setTimeFromTimeQueryParam(time){var _this2=this;this.timelineHandleTimeBounds=TimeBounds_1.getTimeDomainFromQueryString(time).map((function(time){var _a;return null!==(_a=Util_1.findClosestTime(_this2.times,time))&&void 0!==_a?_a:time}))}},{key:"isChartOrMapTab",get:function get(){return this.tab===GrapherConstants_1.GrapherTabOption.chart||this.isOnMapTab}},{key:"isOnMapTab",get:function get(){return this.tab===GrapherConstants_1.GrapherTabOption.map}},{key:"yAxisConfig",get:function get(){return this.yAxis.toObject()}},{key:"xAxisConfig",get:function get(){return this.xAxis.toObject()}},{key:"tableForSelection",get:function get(){return this.isScatter||this.isSlopeChart?this.tableAfterAuthorTimelineAndActiveChartTransform:this.inputTable}},{key:"tableAfterAuthorTimelineFilter",get:function get(){var _a,_b,table=this.inputTable;return void 0===this.timelineMinTime&&void 0===this.timelineMaxTime?table:table.filterByTimeRange(null!==(_a=this.timelineMinTime)&&void 0!==_a?_a:-1/0,null!==(_b=this.timelineMaxTime)&&void 0!==_b?_b:1/0)}},{key:"windowQueryParams",value:function windowQueryParams(){var str=arguments.length>0&&void 0!==arguments[0]?arguments[0]:location.search;return UrlUtils_1.strToQueryParams(str)}},{key:"tableAfterAuthorTimelineAndActiveChartTransform",get:function get(){var table=this.tableAfterAuthorTimelineFilter;return this.isReady&&this.isChartOrMapTab?this.chartInstance.transformTable(table):table}},{key:"chartInstance",get:function get(){return this.isOnMapTab?new MapChart_1.MapChart({manager:this}):this.chartInstanceExceptMap}},{key:"chartInstanceExceptMap",get:function get(){var _a,chartTypeName=this.typeExceptWhenLineChartAndSingleTimeThenWillBeBarChart;return new(null!==(_a=ChartTypeMap_1.ChartComponentClassMap.get(chartTypeName))&&void 0!==_a?_a:ChartTypeMap_1.DefaultChartClass)({manager:this})}},{key:"table",get:function get(){return this.tableAfterAuthorTimelineFilter}},{key:"tableAfterAuthorTimelineAndActiveChartTransformAndPopulationFilter",get:function get(){var table=this.tableAfterAuthorTimelineAndActiveChartTransform;return this.minPopulationFilter?table.filterByPopulationExcept(this.minPopulationFilter,this.selection.selectedEntityNames):table}},{key:"tableAfterAllTransformsAndFilters",get:function get(){var _a,startTime=this.startTime,endTime=this.endTime,table=this.tableAfterAuthorTimelineAndActiveChartTransformAndPopulationFilter;return void 0===startTime||void 0===endTime?table:this.isOnMapTab?table.filterByTargetTimes([endTime],null!==(_a=this.map.timeTolerance)&&void 0!==_a?_a:table.get(this.mapColumnSlug).tolerance):this.isDiscreteBar||this.isLineChartThatTurnedIntoDiscreteBar?table.filterByTargetTimes([endTime],table.get(this.yColumnSlugs[0]).tolerance):this.isSlopeChart?table.filterByTargetTimes([startTime,endTime]):table.filterByTimeRange(startTime,endTime)}},{key:"transformedTable",get:function get(){return this.tableAfterAllTransformsAndFilters}},{key:"isStaging",get:function get(){return void 0!==("undefined"==typeof location?"undefined":_typeof(location))&&location.host.includes("staging")}},{key:"editUrl",get:function get(){var _a,_b;if(this.showAdminControls||this.isDev||this.isStaging)return"".concat(this.adminBaseUrl,"/admin/").concat(null!==(_b=null===(_a=this.manager)||void 0===_a?void 0:_a.editUrl)&&void 0!==_b?_b:"charts/".concat(this.id,"/edit"))}},{key:"populationFilterOption",get:function get(){return this.minPopulationFilter&&(this.populationFilterToggleOption=this.minPopulationFilter),this.populationFilterToggleOption}},{key:"hasCountriesSmallerThanFilterOption",get:function get(){var _this3=this;return this.inputTable.availableEntityNames.some((function(entityName){return PopulationMap_1.populationMap[entityName]&&PopulationMap_1.populationMap[entityName]<_this3.populationFilterOption}))}},{key:"useAdminAPI",get:function get(){return"undefined"!=typeof window&&void 0!==window.admin}},{key:"showAdminControls",get:function get(){return!!Cookies.get(GrapherConstants_1.CookieKey.isAdmin)}},{key:"downloadLegacyDataFromOwidVariableIds",value:function downloadLegacyDataFromOwidVariableIds(){return __awaiter(this,void 0,void 0,regeneratorRuntime.mark((function _callee(){var json,response,_json;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(0!==this.variableIds.length){_context.next=2;break}return _context.abrupt("return");case 2:if(_context.prev=2,!this.useAdminAPI){_context.next=10;break}return _context.next=6,window.admin.getJSON("/api/data/variables/".concat(this.dataFileName));case 6:json=_context.sent,this._receiveLegacyDataAndApplySelection(json),_context.next=19;break;case 10:return _context.next=12,fetch(this.dataUrl);case 12:if((response=_context.sent).ok){_context.next=15;break}throw new Error(response.statusText);case 15:return _context.next=17,response.json();case 17:_json=_context.sent,this._receiveLegacyDataAndApplySelection(_json);case 19:_context.next=25;break;case 21:_context.prev=21,_context.t0=_context.catch(2),console.log("Error fetching '".concat(this.dataUrl,"'")),console.error(_context.t0);case 25:case"end":return _context.stop()}}),_callee,this,[[2,21]])})))}},{key:"receiveLegacyData",value:function receiveLegacyData(json){this._receiveLegacyDataAndApplySelection(json)}},{key:"_setInputTable",value:function _setInputTable(json,legacyConfig){var _a,_b,_LegacyToOwidTable_1$=LegacyToOwidTable_1.legacyToOwidTableAndDimensions(json,legacyConfig),dimensions=_LegacyToOwidTable_1$.dimensions,table=_LegacyToOwidTable_1$.table;this.inputTable=table,this.setDimensionsFromConfigs(dimensions),this.appendNewEntitySelectionOptions(),(null===(_b=null===(_a=this.manager)||void 0===_a?void 0:_a.selection)||void 0===_b?void 0:_b.hasSelection)||this.selection.hasSelection||this.applyOriginalSelectionAsAuthored()}},{key:"rebuildInputOwidTable",value:function rebuildInputOwidTable(){this.legacyVariableDataJson&&this._setInputTable(this.legacyVariableDataJson,this.legacyConfigAsAuthored)}},{key:"_receiveLegacyDataAndApplySelection",value:function _receiveLegacyDataAndApplySelection(json){this.legacyVariableDataJson=json,this.rebuildInputOwidTable()}},{key:"appendNewEntitySelectionOptions",value:function appendNewEntitySelectionOptions(){var selection=this.selection,currentEntities=selection.availableEntityNameSet,missingEntities=this.availableEntities.filter((function(entity){return!currentEntities.has(entity.entityName)}));selection.addAvailableEntityNames(missingEntities)}},{key:"applyOriginalSelectionAsAuthored",value:function applyOriginalSelectionAsAuthored(){this.selectedEntityNames.length?this.selection.setSelectedEntities(this.selectedEntityNames):this.selectedEntityIds.length&&this.selection.setSelectedEntitiesByEntityId(this.selectedEntityIds)}},{key:"baseFontSize",get:function get(){return this.isMediaCard?24:this.isExportingtoSvgOrPng?18:this._baseFontSize},set:function set(val){this._baseFontSize=val}},{key:"isReady",get:function get(){return""===this.whatAreWeWaitingFor}},{key:"whatAreWeWaitingFor",get:function get(){var newSlugs=this.newSlugs,inputTable=this.inputTable,dimensions=this.dimensions;if(newSlugs.length||0===dimensions.length){var missingColumns=newSlugs.filter((function(slug){return!inputTable.has(slug)}));return missingColumns.length?"Waiting for columns ".concat(missingColumns.join(",")," in table '").concat(inputTable.tableSlug,"'. ").concat(inputTable.tableDescription):""}return dimensions.length>0&&0===this.loadingDimensions.length?"":"Waiting for dimensions ".concat(this.loadingDimensions.join(","),".")}},{key:"newSlugs",get:function get(){var xSlug=this.xSlug,colorSlug=this.colorSlug,sizeSlug=this.sizeSlug,ySlugs=this.ySlugs?this.ySlugs.split(" "):[];return Util_1.excludeUndefined([].concat(_toConsumableArray(ySlugs),[xSlug,colorSlug,sizeSlug]))}},{key:"loadingDimensions",get:function get(){var _this4=this;return this.dimensions.filter((function(dim){return!_this4.inputTable.has(dim.columnSlug)}))}},{key:"isInIFrame",get:function get(){return Util_1.isInIFrame()}},{key:"times",get:function get(){var columnSlugs=this.isOnMapTab?[this.mapColumnSlug]:this.yColumnSlugs;return this.tableAfterAuthorTimelineAndActiveChartTransformAndPopulationFilter.getTimesUniqSortedAscForColumns(columnSlugs)}},{key:"startHandleTimeBound",get:function get(){return this.onlySingleTimeSelectionPossible?this.endHandleTimeBound:this.timelineHandleTimeBounds[0]},set:function set(newValue){this.onlySingleTimeSelectionPossible?this.timelineHandleTimeBounds=[newValue,newValue]:this.timelineHandleTimeBounds=[newValue,this.timelineHandleTimeBounds[1]]}},{key:"endHandleTimeBound",get:function get(){return this.timelineHandleTimeBounds[1]},set:function set(newValue){this.onlySingleTimeSelectionPossible?this.timelineHandleTimeBounds=[newValue,newValue]:this.timelineHandleTimeBounds=[this.timelineHandleTimeBounds[0],newValue]}},{key:"startTime",get:function get(){return Util_1.findClosestTime(this.times,this.startHandleTimeBound)}},{key:"endTime",get:function get(){return Util_1.findClosestTime(this.times,this.endHandleTimeBound)}},{key:"onlySingleTimeSelectionPossible",get:function get(){return this.isDiscreteBar||this.isStackedDiscreteBar||this.isOnMapTab}},{key:"shouldLinkToOwid",get:function get(){return!(this.props.isEmbeddedInAnOwidPage||this.isExportingtoSvgOrPng||!this.isInIFrame)}},{key:"variableIds",get:function get(){return Util_1.uniq(this.dimensions.map((function(d){return d.variableId})))}},{key:"dataFileName",get:function get(){return"".concat(this.variableIds.join("+"),".json?v=").concat(this.isEditor?void 0:this.cacheTag)}},{key:"dataUrl",get:function get(){var _a;return"".concat(null!==(_a=this.bakedGrapherURL)&&void 0!==_a?_a:"","/data/variables/").concat(this.dataFileName)}},{key:"hasOWIDLogo",get:function get(){return!this.hideLogo&&(void 0===this.logo||"owid"===this.logo)}},{key:"hasFatalErrors",get:function get(){return this.relatedQuestions.some((function(question){return!!exports.getErrorMessageRelatedQuestionUrl(question)}))}},{key:"dispose",value:function dispose(){this.disposers.forEach((function(dispose){return dispose()}))}},{key:"fontSize",get:function get(){return this.baseFontSize}},{key:"ensureValidConfigWhenEditing",value:function ensureValidConfigWhenEditing(){var _this$disposers,_this5=this;this.disposers.push(mobx_1.reaction((function(){return _this5.variableIds}),this.downloadLegacyDataFromOwidVariableIds));var disposers=[mobx_1.autorun((function(){_this5.availableTabs.includes(_this5.tab)||mobx_1.runInAction((function(){return _this5.tab=_this5.availableTabs[0]}))})),mobx_1.autorun((function(){var validDimensions=_this5.validDimensions;Util_1.isEqual(_this5.dimensions,validDimensions)||(_this5.dimensions=validDimensions)}))];(_this$disposers=this.disposers).push.apply(_this$disposers,disposers)}},{key:"validDimensions",get:function get(){var dimensions=this.dimensions,validProperties=this.dimensionSlots.map((function(d){return d.property})),validDimensions=dimensions.filter((function(dim){return validProperties.includes(dim.property)}));return this.dimensionSlots.forEach((function(slot){slot.allowMultiple||(validDimensions=Util_1.uniqWith(validDimensions,(function(a,b){return a.property===slot.property&&a.property===b.property})))})),validDimensions}},{key:"originUrlWithProtocol",get:function get(){var url=this.originUrl;return url.startsWith("http")||(url="https://".concat(url)),url}},{key:"overlayTab",get:function get(){return this.overlay}},{key:"currentTab",get:function get(){return this.overlay?this.overlay:this.tab},set:function set(desiredTab){var _a;if(desiredTab===GrapherConstants_1.GrapherTabOption.chart||desiredTab===GrapherConstants_1.GrapherTabOption.map||desiredTab===GrapherConstants_1.GrapherTabOption.table)return this.tab=desiredTab,void(this.overlay=void 0);desiredTab===GrapherConstants_1.GrapherTabOption.download&&this.isOnTableTab&&(this.tab=null!==(_a=this.authorsVersion.tab)&&void 0!==_a?_a:GrapherConstants_1.GrapherTabOption.chart),this.overlay=desiredTab}},{key:"timelineHandleTimeBounds",get:function get(){if(this.isOnMapTab){var time=TimeBounds_1.maxTimeBoundFromJSONOrPositiveInfinity(this.map.time);return[time,time]}return[TimeBounds_1.minTimeBoundFromJSONOrNegativeInfinity(this.minTime),TimeBounds_1.maxTimeBoundFromJSONOrPositiveInfinity(this.maxTime)]},set:function set(value){this.isOnMapTab?this.map.time=value[1]:(this.minTime=value[0],this.maxTime=value[1])}},{key:"dimensionSlots",get:function get(){var xAxis=new DimensionSlot_1.DimensionSlot(this,owidTypes_1.DimensionProperty.x),yAxis=new DimensionSlot_1.DimensionSlot(this,owidTypes_1.DimensionProperty.y),color=new DimensionSlot_1.DimensionSlot(this,owidTypes_1.DimensionProperty.color),size=new DimensionSlot_1.DimensionSlot(this,owidTypes_1.DimensionProperty.size);return this.isScatter?[yAxis,xAxis,size,color]:this.isTimeScatter?[yAxis,xAxis]:this.isSlopeChart?[yAxis,size,color]:[yAxis]}},{key:"filledDimensions",get:function get(){return this.isReady?this.dimensions:[]}},{key:"addDimension",value:function addDimension(config){this.dimensions.push(new ChartDimension_1.ChartDimension(config,this))}},{key:"setDimensionsForProperty",value:function setDimensionsForProperty(property,newConfigs){var _this6=this,newDimensions=[];this.dimensionSlots.forEach((function(slot){newDimensions=slot.property===property?newDimensions.concat(newConfigs.map((function(config){return new ChartDimension_1.ChartDimension(config,_this6)}))):newDimensions.concat(slot.dimensions)})),this.dimensions=newDimensions}},{key:"setDimensionsFromConfigs",value:function setDimensionsFromConfigs(configs){var _this7=this;this.dimensions=configs.map((function(config){return new ChartDimension_1.ChartDimension(config,_this7)}))}},{key:"displaySlug",get:function get(){var _a;return null!==(_a=this.slug)&&void 0!==_a?_a:Util_1.slugify(this.displayTitle)}},{key:"availableTabs",get:function get(){return[this.hasChartTab&&GrapherConstants_1.GrapherTabOption.chart,this.hasMapTab&&GrapherConstants_1.GrapherTabOption.map,GrapherConstants_1.GrapherTabOption.table,GrapherConstants_1.GrapherTabOption.sources,GrapherConstants_1.GrapherTabOption.download].filter(Util_1.identity)}},{key:"currentTitle",get:function get(){var text=this.displayTitle,selectedEntityNames=this.selection.selectedEntityNames,showTitleAnnotation=!this.hideTitleAnnotation;if(this.tab===GrapherConstants_1.GrapherTabOption.chart&&this.addCountryMode!==GrapherConstants_1.EntitySelectionMode.MultipleEntities&&1===selectedEntityNames.length&&(showTitleAnnotation||this.canChangeEntity)){var entityStr=selectedEntityNames[0];(null==entityStr?void 0:entityStr.length)&&(text="".concat(text,", ").concat(entityStr))}return showTitleAnnotation&&this.isLineChart&&this.isRelativeMode&&(text="Change in "+Util_1.lowerCaseFirstLetterUnlessAbbreviation(text)),this.isReady&&(showTitleAnnotation||this.hasTimeline&&(this.isLineChartThatTurnedIntoDiscreteBar||this.isOnMapTab))&&(text+=this.timeTitleSuffix),text.trim()}},{key:"hasTimeline",get:function get(){if(this.times.length<=1)return!1;switch(this.currentTab){case GrapherConstants_1.GrapherTabOption.map:return!this.map.hideTimeline;case GrapherConstants_1.GrapherTabOption.table:return!this.hideTimeline;case GrapherConstants_1.GrapherTabOption.chart:return!this.hideTimeline&&!(this.isStackedBar||this.isStackedArea||this.isDiscreteBar);case GrapherConstants_1.GrapherTabOption.download:case GrapherConstants_1.GrapherTabOption.sources:return!1}}},{key:"areHandlesOnSameTime",get:function get(){var times=this.tableAfterAuthorTimelineFilter.timeColumn.uniqValues,_this$timelineHandleT2=_slicedToArray(this.timelineHandleTimeBounds.map((function(time){return Util_1.findClosestTime(times,time)})),2);return _this$timelineHandleT2[0]===_this$timelineHandleT2[1]}},{key:"mapColumnSlug",get:function get(){var mapColumnSlug=this.map.columnSlug;return mapColumnSlug&&this.dimensions.some((function(dim){return dim.columnSlug===mapColumnSlug}))?mapColumnSlug:this.yColumnSlug}},{key:"getColumnForProperty",value:function getColumnForProperty(property){var _a;return null===(_a=this.dimensions.find((function(dim){return dim.property===property})))||void 0===_a?void 0:_a.column}},{key:"getSlugForProperty",value:function getSlugForProperty(property){var _a;return null===(_a=this.dimensions.find((function(dim){return dim.property===property})))||void 0===_a?void 0:_a.columnSlug}},{key:"yColumns",get:function get(){return this.filledDimensions.filter((function(dim){return dim.property===owidTypes_1.DimensionProperty.y})).map((function(dim){return dim.column}))}},{key:"yColumnSlugsInSelectionOrder",get:function get(){var _a;return(null===(_a=this.selectedColumnSlugs)||void 0===_a?void 0:_a.length)?this.selectedColumnSlugs:this.yColumnSlugs}},{key:"yColumnSlugs",get:function get(){return this.ySlugs?this.ySlugs.split(" "):this.dimensions.filter((function(dim){return dim.property===owidTypes_1.DimensionProperty.y})).map((function(dim){return dim.columnSlug}))}},{key:"yColumnSlug",get:function get(){return this.ySlugs?this.ySlugs.split(" ")[0]:this.getSlugForProperty(owidTypes_1.DimensionProperty.y)}},{key:"xColumnSlug",get:function get(){var _a;return null!==(_a=this.xSlug)&&void 0!==_a?_a:this.getSlugForProperty(owidTypes_1.DimensionProperty.x)}},{key:"sizeColumnSlug",get:function get(){var _a;return null!==(_a=this.sizeSlug)&&void 0!==_a?_a:this.getSlugForProperty(owidTypes_1.DimensionProperty.size)}},{key:"colorColumnSlug",get:function get(){var _a;return null!==(_a=this.colorSlug)&&void 0!==_a?_a:this.getSlugForProperty(owidTypes_1.DimensionProperty.color)}},{key:"yScaleType",get:function get(){return this.yAxis.scaleType}},{key:"xScaleType",get:function get(){return this.xAxis.scaleType}},{key:"timeTitleSuffix",get:function get(){var timeColumn=this.table.timeColumn;if(timeColumn.isMissing)return"";var startTime=this.startTime,endTime=this.endTime;return void 0===startTime||void 0===endTime?"":", "+(startTime===endTime?timeColumn.formatValue(startTime):timeColumn.formatValue(startTime)+" to "+timeColumn.formatValue(endTime))}},{key:"sourcesLine",get:function get(){var _a;return null!==(_a=this.sourceDesc)&&void 0!==_a?_a:this.defaultSourcesLine}},{key:"activeColumnSlugs",get:function get(){var yColumnSlugs=this.yColumnSlugs,xColumnSlug=this.xColumnSlug,sizeColumnSlug=this.sizeColumnSlug,colorColumnSlug=this.colorColumnSlug;return Util_1.excludeUndefined([].concat(_toConsumableArray(yColumnSlugs),[xColumnSlug,sizeColumnSlug,colorColumnSlug]))}},{key:"columnsWithSources",get:function get(){var columnSlugs=Util_1.uniq(this.activeColumnSlugs),excludedColumnSlugs=["72","123"];return this.inputTable.getColumns(columnSlugs).filter((function(column){return!!column.source.name&&!excludedColumnSlugs.includes(column.slug)}))}},{key:"defaultSourcesLine",get:function get(){var sourceNames=this.columnsWithSources.map((function(column){var _a;return null!==(_a=column.source.name)&&void 0!==_a?_a:""}));return sourceNames=sourceNames.map((function(sourceName){for(var _i2=0,_arr2=["World Bank â€“ WDI","World Bank","ILOSTAT"];_i2<_arr2.length;_i2++){var majorSource=_arr2[_i2];if(sourceName.startsWith(majorSource))return majorSource}return sourceName})),Util_1.uniq(sourceNames).join(", ")}},{key:"axisDimensions",get:function get(){return this.filledDimensions.filter((function(dim){return dim.property===owidTypes_1.DimensionProperty.y||dim.property===owidTypes_1.DimensionProperty.x}))}},{key:"yColumnsFromDimensionsOrSlugsOrAuto",get:function get(){return this.yColumns.length?this.yColumns:this.table.getColumns(ChartUtils_1.autoDetectYColumnSlugs(this))}},{key:"defaultTitle",get:function get(){var yColumns=this.yColumnsFromDimensionsOrSlugsOrAuto;if(this.isScatter)return this.axisDimensions.map((function(dimension){return dimension.column.displayName})).join(" vs. ");var uniqueDatasetNames=Util_1.uniq(Util_1.excludeUndefined(yColumns.map((function(col){return col.def.datasetName}))));return this.hasMultipleYColumns&&1===uniqueDatasetNames.length?uniqueDatasetNames[0]:2===yColumns.length?yColumns.map((function(col){return col.displayName})).join(" and "):yColumns.map((function(col){return col.displayName})).join(", ")}},{key:"displayTitle",get:function get(){var _a;return null!==(_a=this.title)&&void 0!==_a?_a:this.defaultTitle}},{key:"object",get:function get(){return this.toObject()}},{key:"typeExceptWhenLineChartAndSingleTimeThenWillBeBarChart",get:function get(){return this.isLineChartThatTurnedIntoDiscreteBar?GrapherConstants_1.ChartTypeName.DiscreteBar:this.type}},{key:"isLineChart",get:function get(){return this.type===GrapherConstants_1.ChartTypeName.LineChart}},{key:"isScatter",get:function get(){return this.type===GrapherConstants_1.ChartTypeName.ScatterPlot}},{key:"isTimeScatter",get:function get(){return this.type===GrapherConstants_1.ChartTypeName.TimeScatter}},{key:"isStackedArea",get:function get(){return this.type===GrapherConstants_1.ChartTypeName.StackedArea}},{key:"isSlopeChart",get:function get(){return this.type===GrapherConstants_1.ChartTypeName.SlopeChart}},{key:"isDiscreteBar",get:function get(){return this.type===GrapherConstants_1.ChartTypeName.DiscreteBar}},{key:"isStackedBar",get:function get(){return this.type===GrapherConstants_1.ChartTypeName.StackedBar}},{key:"isStackedDiscreteBar",get:function get(){return this.type===GrapherConstants_1.ChartTypeName.StackedDiscreteBar}},{key:"isLineChartThatTurnedIntoDiscreteBar",get:function get(){return this.isLineChart&&this.areHandlesOnSameTime}},{key:"activeColorScale",get:function get(){return this.chartInstance.colorScale}},{key:"activeColorScaleExceptMap",get:function get(){return this.chartInstanceExceptMap.colorScale}},{key:"supportsMultipleYColumns",get:function get(){return!(this.isScatter||this.isTimeScatter||this.isSlopeChart)}},{key:"xDimension",get:function get(){return this.filledDimensions.find((function(d){return d.property===owidTypes_1.DimensionProperty.x}))}},{key:"xOverrideTime",get:function get(){var _a;return null===(_a=this.xDimension)||void 0===_a?void 0:_a.targetYear},set:function set(value){this.xDimension.targetYear=value}},{key:"idealBounds",get:function get(){return this.isMediaCard?new Bounds_1.Bounds(0,0,1200,630):new Bounds_1.Bounds(0,0,850,600)}},{key:"hasYDimension",get:function get(){return this.dimensions.some((function(d){return d.property===owidTypes_1.DimensionProperty.y}))}},{key:"staticSVG",get:function get(){var _isExportingtoSvgOrPng=this.isExportingtoSvgOrPng;this.isExportingtoSvgOrPng=!0;var staticSvg=ReactDOMServer.renderToStaticMarkup(React.createElement(CaptionedChart_1.StaticCaptionedChart,{manager:this,bounds:this.idealBounds}));return this.isExportingtoSvgOrPng=_isExportingtoSvgOrPng,staticSvg}},{key:"mapConfig",get:function get(){return this.map}},{key:"cacheTag",get:function get(){return this.version.toString()}},{key:"mapIsClickable",get:function get(){return this.hasChartTab&&(this.isLineChart||this.isScatter)&&!Util_1.isMobile()}},{key:"relativeToggleLabel",get:function get(){return this.isScatter||this.isTimeScatter?"Average annual change":this.isLineChart?"Relative change":"Relative"}},{key:"isRelativeMode",get:function get(){return this.stackMode===GrapherConstants_1.StackMode.relative}},{key:"canToggleRelativeMode",get:function get(){return this.isLineChart?!this.hideRelativeToggle&&!this.areHandlesOnSameTime&&this.yScaleType!==GrapherConstants_1.ScaleType.log:this.facetStrategy!==GrapherConstants_1.FacetStrategy.column&&!this.hideRelativeToggle}},{key:"mappableData",get:function get(){return this.inputTable.get(this.mapColumnSlug).owidRows.filter((function(row){return EntitiesOnTheMap_1.isOnTheMap(row.entityName)}))}},{key:"isMobile",get:function get(){return Util_1.isMobile()}},{key:"bounds",get:function get(){var _a;return null!==(_a=this.props.bounds)&&void 0!==_a?_a:Bounds_1.DEFAULT_BOUNDS}},{key:"isPortrait",get:function get(){return this.bounds.width<this.bounds.height&&this.bounds.width<850}},{key:"widthForDeviceOrientation",get:function get(){return this.isPortrait?400:680}},{key:"heightForDeviceOrientation",get:function get(){return this.isPortrait?640:480}},{key:"useIdealBounds",get:function get(){var isEditor=this.isEditor,isExportingtoSvgOrPng=this.isExportingtoSvgOrPng,bounds=this.bounds,widthForDeviceOrientation=this.widthForDeviceOrientation,heightForDeviceOrientation=this.heightForDeviceOrientation,isInIFrame=this.isInIFrame;return!(this.props.isEmbeddedInAnOwidPage||this.props.manager||isInIFrame)&&(!isExportingtoSvgOrPng&&(!!isEditor||!(bounds.height<heightForDeviceOrientation||bounds.width<widthForDeviceOrientation)))}},{key:"scaleToFitIdeal",get:function get(){return Math.min(.95*this.bounds.width/this.widthForDeviceOrientation,.95*this.bounds.height/this.heightForDeviceOrientation)}},{key:"renderWidth",get:function get(){return this.useIdealBounds?this.widthForDeviceOrientation*this.scaleToFitIdeal:this.bounds.width-(this.isExportingtoSvgOrPng?0:5)}},{key:"renderHeight",get:function get(){return this.useIdealBounds?this.heightForDeviceOrientation*this.scaleToFitIdeal:this.bounds.height-(this.isExportingtoSvgOrPng?0:5)}},{key:"tabBounds",get:function get(){var bounds=new Bounds_1.Bounds(0,0,this.renderWidth,this.renderHeight);return this.isExportingtoSvgOrPng?bounds:bounds.padBottom(this.footerControlsHeight)}},{key:"containerElement",get:function get(){return this.base.current||void 0}},{key:"setError",value:function setError(err){this.uncaughtError=err}},{key:"clearErrors",value:function clearErrors(){this.uncaughtError=void 0}},{key:"addPopup",value:function addPopup(vnode){this.popups=this.popups.concat([vnode])}},{key:"removePopup",value:function removePopup(vnodeType){this.popups=this.popups.filter((function(d){return!(d.type===vnodeType)}))}},{key:"isOnTableTab",get:function get(){return this.tab===GrapherConstants_1.GrapherTabOption.table}},{key:"renderPrimaryTab",value:function renderPrimaryTab(){if(this.isChartOrMapTab)return React.createElement(CaptionedChart_1.CaptionedChart,{manager:this});var tabBounds=this.tabBounds;return this.isOnTableTab?React.createElement("div",{className:"tableTab",style:Object.assign(Object.assign({},tabBounds.toCSS()),{position:"absolute"})},React.createElement(DataTable_1.DataTable,{bounds:tabBounds,manager:this})):void 0}},{key:"renderOverlayTab",value:function renderOverlayTab(){var bounds=this.tabBounds;return this.overlayTab===GrapherConstants_1.GrapherTabOption.sources?React.createElement(SourcesTab_1.SourcesTab,{key:"sourcesTab",bounds:bounds,manager:this}):this.overlayTab===GrapherConstants_1.GrapherTabOption.download?React.createElement(DownloadTab_1.DownloadTab,{key:"downloadTab",bounds:bounds,manager:this}):void 0}},{key:"commandPalette",get:function get(){return this.props.enableKeyboardShortcuts?React.createElement(CommandPalette_1.CommandPalette,{commands:this.keyboardShortcuts,display:"none"}):null}},{key:"formatTimeFn",value:function formatTimeFn(time){return this.inputTable.timeColumnFormatFunction(time)}},{key:"toggleTabCommand",value:function toggleTabCommand(){this.currentTab=Util_1.next(this.availableTabs,this.currentTab)}},{key:"togglePlayingCommand",value:function togglePlayingCommand(){this.timelineController.togglePlay()}},{key:"availableEntities",get:function get(){return this.tableForSelection.availableEntities}},{key:"keyboardShortcuts",get:function get(){var _this8=this,temporaryFacetTestCommands=Util_1.range(0,10).map((function(num){return{combo:"".concat(num),fn:function fn(){return _this8.randomSelection(num)}}})),shortcuts=[].concat(_toConsumableArray(temporaryFacetTestCommands),[{combo:"t",fn:function fn(){return _this8.toggleTabCommand()},title:"Toggle tab",category:"Navigation"},{combo:"?",fn:function fn(){return CommandPalette_1.CommandPalette.togglePalette()},title:"Toggle Help",category:"Navigation"},{combo:"a",fn:function fn(){return _this8.selection.hasSelection?_this8.selection.clearSelection():_this8.selection.selectAll()},title:this.selection.hasSelection?"Select None":"Select All",category:"Selection"},{combo:"f",fn:function fn(){return _this8.toggleFilterAllCommand()},title:"Hide unselected",category:"Selection"},{combo:"p",fn:function fn(){return _this8.togglePlayingCommand()},title:this.isPlaying?"Pause":"Play",category:"Timeline"},{combo:"f",fn:function fn(){return _this8.toggleFacetControlVisibility()},title:"Toggle Faceting",category:"Chart"},{combo:"l",fn:function fn(){return _this8.toggleYScaleTypeCommand()},title:"Toggle Y log/linear",category:"Chart"},{combo:"esc",fn:function fn(){return _this8.clearErrors()}},{combo:"z",fn:function fn(){return _this8.toggleTimelineCommand()},title:"Latest/Earliest/All period",category:"Timeline"},{combo:"shift+o",fn:function fn(){return _this8.clearQueryParams()},title:"Reset to original",category:"Navigation"}]);if(this.slideShow){var slideShow=this.slideShow;shortcuts.push({combo:"right",fn:function fn(){return slideShow.playNext()},title:"Next chart",category:"Browse"}),shortcuts.push({combo:"left",fn:function fn(){return slideShow.playPrevious()},title:"Previous chart",category:"Browse"})}return shortcuts}},{key:"toggleTimelineCommand",value:function toggleTimelineCommand(){this.setTimeFromTimeQueryParam(Util_1.next(["latest","earliest",".."],this.timeParam))}},{key:"toggleFilterAllCommand",value:function toggleFilterAllCommand(){this.minPopulationFilter=2e9===this.minPopulationFilter?void 0:2e9}},{key:"toggleYScaleTypeCommand",value:function toggleYScaleTypeCommand(){this.yAxis.scaleType=Util_1.next([GrapherConstants_1.ScaleType.linear,GrapherConstants_1.ScaleType.log],this.yAxis.scaleType)}},{key:"toggleFacetStrategy",value:function toggleFacetStrategy(){this.facetStrategy=Util_1.next(this.availableFacetStrategies,this.facetStrategy)}},{key:"toggleFacetControlVisibility",value:function toggleFacetControlVisibility(){this.hideFacetControl=!this.hideFacetControl}},{key:"showFacetYDomainToggle",get:function get(){return this.facetStrategy!==GrapherConstants_1.FacetStrategy.none&&!this.isStackedDiscreteBar}},{key:"_sortConfig",get:function get(){var _a,_b;return{sortBy:null!==(_a=this.sortBy)&&void 0!==_a?_a:owidTypes_1.SortBy.total,sortOrder:null!==(_b=this.sortOrder)&&void 0!==_b?_b:owidTypes_1.SortOrder.desc,sortColumnSlug:this.sortColumnSlug}}},{key:"sortConfig",get:function get(){var sortConfig=Object.assign({},this._sortConfig);return this.isRelativeMode&&sortConfig.sortBy===owidTypes_1.SortBy.total&&(sortConfig.sortBy=owidTypes_1.SortBy.entityName,sortConfig.sortOrder=owidTypes_1.SortOrder.asc),sortConfig}},{key:"hasMultipleYColumns",get:function get(){return this.yColumnSlugs.length>1}},{key:"selectedColumnSlugs",get:function get(){var selectedData=this.legacyConfigAsAuthored.selectedData,dimensions=this.filledDimensions;if(selectedData){var columnSlugs=selectedData.map((function(item){var _a,columnSlug=null===(_a=dimensions[item.index])||void 0===_a?void 0:_a.columnSlug;return columnSlug||console.warn("Couldn't find specified dimension in chart config",item),columnSlug}));return Util_1.uniq(Util_1.excludeUndefined(columnSlugs))}return[]}},{key:"availableFacetStrategies",get:function get(){var strategies=[GrapherConstants_1.FacetStrategy.none];return this.hasMultipleYColumns&&strategies.push(GrapherConstants_1.FacetStrategy.column),this.selection.numSelectedEntities>1&&strategies.push(GrapherConstants_1.FacetStrategy.entity),strategies}},{key:"facetStrategy",get:function get(){return this.selectedFacetStrategy&&this.availableFacetStrategies.includes(this.selectedFacetStrategy)?this.selectedFacetStrategy:this.disableAutoFaceting?GrapherConstants_1.FacetStrategy.none:this.addCountryMode===GrapherConstants_1.EntitySelectionMode.SingleEntity&&this.selection.numSelectedEntities>1?GrapherConstants_1.FacetStrategy.entity:this.addCountryMode===GrapherConstants_1.EntitySelectionMode.MultipleEntities&&this.hasMultipleYColumns&&this.selection.numSelectedEntities>1?GrapherConstants_1.FacetStrategy.column:GrapherConstants_1.FacetStrategy.none},set:function set(facet){this.selectedFacetStrategy=facet}},{key:"randomSelection",value:function randomSelection(num){this.clearErrors();var currentSelection=this.selection.selectedEntityNames.length,newNum=num||(currentSelection?2*currentSelection:10);this.selection.setSelectedEntities(Util_1.sampleFrom(this.selection.availableEntityNames,newNum,Date.now()))}},{key:"renderError",value:function renderError(){var _a;return React.createElement("div",{title:null===(_a=this.uncaughtError)||void 0===_a?void 0:_a.message,style:{width:"100%",height:"100%",position:"relative",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",lineHeight:1.5,padding:"3rem"}},React.createElement("p",{style:{color:"#cc0000",fontWeight:700}},React.createElement(react_fontawesome_1.FontAwesomeIcon,{icon:faExclamationTriangle_1.faExclamationTriangle}),GrapherConstants_1.ThereWasAProblemLoadingThisChart),React.createElement("p",null,"We have been notified of this error, please check back later whether it's been fixed. If the error persists, get in touch with us at"," ",React.createElement("a",{href:"mailto:info@ourworldindata.org?subject=Broken chart on page ".concat(window.location.href)},"info@ourworldindata.org"),"."),this.uncaughtError&&this.uncaughtError.message&&React.createElement("pre",{style:{fontSize:"11px"}},"Error: ",this.uncaughtError.message))}},{key:"resetAnnotation",value:function resetAnnotation(){this.renderAnnotation(void 0)}},{key:"renderAnnotation",value:function renderAnnotation(annotation){var _a;this.setAuthoredVersion(this.props),this.reset(),this.updateFromObject(Object.assign({},this.props)),this.populateFromQueryParams(GrapherUrlMigrations_1.legacyToCurrentGrapherQueryParams(null!==(_a=this.props.queryStr)&&void 0!==_a?_a:"")),this.annotation=annotation}},{key:"render",value:function render(){var isExportingtoSvgOrPng=this.isExportingtoSvgOrPng,isPortrait=this.isPortrait;if(isExportingtoSvgOrPng)return this.renderPrimaryTab();var style={width:this.renderWidth,height:this.renderHeight,fontSize:this.baseFontSize},classes=classnames_1.default("GrapherComponent",isExportingtoSvgOrPng&&"isExportingToSvgOrPng",isPortrait&&"GrapherPortraitClass");return React.createElement("div",{ref:this.base,className:classes,style:style},this.commandPalette,this.uncaughtError?this.renderError():this.renderReady())}},{key:"renderReady",value:function renderReady(){var _this9=this;return React.createElement(React.Fragment,null,this.hasBeenVisible&&this.renderPrimaryTab(),React.createElement(Controls_1.FooterControls,{manager:this}),this.renderOverlayTab(),this.popups,React.createElement(Tooltip_1.TooltipView,{width:this.renderWidth,height:this.renderHeight,tooltipProvider:this}),this.isSelectingData&&React.createElement(EntitySelectorModal_1.EntitySelectorModal,{canChangeEntity:this.canChangeEntity,selectionArray:this.selection,key:"entitySelector",isMobile:this.isMobile,onDismiss:mobx_1.action((function(){return _this9.isSelectingData=!1}))}))}},{key:"checkVisibility",value:function checkVisibility(){!this.hasBeenVisible&&Util_1.isVisible(this.base.current)&&(this.hasBeenVisible=!0)}},{key:"setBaseFontSize",value:function setBaseFontSize(){var renderWidth=this.renderWidth;renderWidth<=400?this.baseFontSize=14:renderWidth<1080?this.baseFontSize=16:renderWidth>=1080&&(this.baseFontSize=18)}},{key:"bindToWindow",value:function bindToWindow(){var _this10=this,pushParams=function pushParams(){return UrlUtils_1.setWindowQueryStr(UrlUtils_1.queryParamsToStr(_this10.changedParams))},debouncedPushParams=Util_1.debounce(pushParams,100);mobx_1.reaction((function(){return _this10.changedParams}),(function(){return _this10.debounceMode?debouncedPushParams():pushParams()})),mobx_1.autorun((function(){return document.title=_this10.currentTitle}))}},{key:"componentDidMount",value:function componentDidMount(){window.addEventListener("scroll",this.checkVisibility),this.setBaseFontSize(),this.checkVisibility(),Util_1.exposeInstanceOnWindow(this,"grapher"),this.props.bindUrlToWindow&&this.bindToWindow(),this.props.enableKeyboardShortcuts&&this.bindKeyboardShortcuts()}},{key:"bindKeyboardShortcuts",value:function bindKeyboardShortcuts(){var _this11=this;this._shortcutsBound||(this.keyboardShortcuts.forEach((function(shortcut){Mousetrap.bind(shortcut.combo,(function(){return shortcut.fn(),_this11.analytics.logKeyboardShortcut(shortcut.title||"",shortcut.combo),!1}))})),this._shortcutsBound=!0)}},{key:"unbindKeyboardShortcuts",value:function unbindKeyboardShortcuts(){this._shortcutsBound&&(this.keyboardShortcuts.forEach((function(shortcut){Mousetrap.unbind(shortcut.combo)})),this._shortcutsBound=!1)}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.unbindKeyboardShortcuts(),window.removeEventListener("scroll",this.checkVisibility),this.dispose()}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.setBaseFontSize(),this.checkVisibility()}},{key:"componentDidCatch",value:function componentDidCatch(error,info){this.setError(error),this.analytics.logGrapherViewError(error,info)}},{key:"hasRelatedQuestion",get:function get(){if(!this.relatedQuestions.length)return!1;var question=this.relatedQuestions[0];return!!question&&!!question.text&&!!question.url}},{key:"footerControlsLines",get:function get(){return this.hasTimeline?2:1}},{key:"footerControlsHeight",get:function get(){return 32*this.footerControlsLines+(this.hasRelatedQuestion?20:0)}},{key:"clearQueryParams",value:function clearQueryParams(){var authorsVersion=this.authorsVersion;this.tab=authorsVersion.tab,this.xAxis.scaleType=authorsVersion.xAxis.scaleType,this.yAxis.scaleType=authorsVersion.yAxis.scaleType,this.stackMode=authorsVersion.stackMode,this.zoomToSelection=authorsVersion.zoomToSelection,this.minPopulationFilter=authorsVersion.minPopulationFilter,this.compareEndPointsOnly=authorsVersion.compareEndPointsOnly,this.minTime=authorsVersion.minTime,this.maxTime=authorsVersion.maxTime,this.map.time=authorsVersion.map.time,this.map.projection=authorsVersion.map.projection,this.selection.clearSelection(),this.applyOriginalSelectionAsAuthored()}},{key:"reset",value:function reset(){var grapher=new Grapher_1;this.title=grapher.title,this.subtitle=grapher.subtitle,this.type=grapher.type,this.ySlugs=grapher.ySlugs,this.xSlug=grapher.xSlug,this.colorSlug=grapher.colorSlug,this.sizeSlug=grapher.sizeSlug,this.hasMapTab=grapher.hasMapTab,this.selectedFacetStrategy=GrapherConstants_1.FacetStrategy.none,this.hasChartTab=grapher.hasChartTab,this.map=grapher.map,this.yAxis.scaleType=grapher.yAxis.scaleType,this.yAxis.min=grapher.yAxis.min,this.sortBy=grapher.sortBy,this.sortOrder=grapher.sortOrder,this.sortColumnSlug=grapher.sortColumnSlug}},{key:"allParams",get:function get(){var _a,params={};return params.tab=this.tab,params.xScale=this.xAxis.scaleType,params.yScale=this.yAxis.scaleType,params.stackMode=this.stackMode,params.zoomToSelection=this.zoomToSelection?"true":void 0,params.minPopulationFilter=null===(_a=this.minPopulationFilter)||void 0===_a?void 0:_a.toString(),params.endpointsOnly=this.compareEndPointsOnly?"1":"0",params.time=this.timeParam,params.region=this.map.projection,EntityUrlBuilder_1.setSelectedEntityNamesParam(Url_1.Url.fromQueryParams(params),this.selectedEntitiesIfDifferentThanAuthors).queryParams}},{key:"selectedEntitiesIfDifferentThanAuthors",get:function get(){var _a,originalSelectedEntityIds=(null===(_a=this.legacyConfigAsAuthored.selectedData)||void 0===_a?void 0:_a.map((function(row){return row.entityId})))||[],currentSelectedEntityIds=this.selection.allSelectedEntityIds,entityIdsThatTheUserDeselected=Util_1.difference(currentSelectedEntityIds,originalSelectedEntityIds);if(currentSelectedEntityIds.length!==originalSelectedEntityIds.length||entityIdsThatTheUserDeselected.length)return this.selection.selectedEntityNames}},{key:"changedParams",get:function get(){return Util_1.differenceObj(this.allParams,this.authorsVersion.allParams)}},{key:"authorsVersion",get:function get(){return new Grapher_1(Object.assign(Object.assign({},this.legacyConfigAsAuthored),{manager:void 0,manuallyProvideData:!0,queryStr:""}))}},{key:"queryStr",get:function get(){return UrlUtils_1.queryParamsToStr(this.changedParams)}},{key:"baseUrl",get:function get(){var _a;return this.isPublished?"".concat(null!==(_a=this.bakedGrapherURL)&&void 0!==_a?_a:"/grapher","/").concat(this.displaySlug):void 0}},{key:"manager",get:function get(){return this.props.manager}},{key:"canonicalUrl",get:function get(){var _a,_b;return null!==(_b=null===(_a=this.manager)||void 0===_a?void 0:_a.canonicalUrl)&&void 0!==_b?_b:this.baseUrl?this.baseUrl+this.queryStr:void 0}},{key:"embedUrl",get:function get(){var _a,_b;return null!==(_b=null===(_a=this.manager)||void 0===_a?void 0:_a.embedDialogUrl)&&void 0!==_b?_b:this.canonicalUrl}},{key:"embedDialogAdditionalElements",get:function get(){var _a;return null===(_a=this.manager)||void 0===_a?void 0:_a.embedDialogAdditionalElements}},{key:"hasUserChangedTimeHandles",get:function get(){var authorsVersion=this.authorsVersion;return this.minTime!==authorsVersion.minTime||this.maxTime!==authorsVersion.maxTime}},{key:"hasUserChangedMapTimeHandle",get:function get(){return this.map.time!==this.authorsVersion.map.time}},{key:"timeParam",get:function get(){var timeColumn=this.table.timeColumn,formatTime=function formatTime(t){return TimeBounds_1.timeBoundToTimeBoundString(t,timeColumn instanceof CoreTableColumns_1.ColumnTypeMap.Day)};if(this.isOnMapTab)return void 0!==this.map.time&&this.hasUserChangedMapTimeHandle?formatTime(this.map.time):void 0;if(this.hasUserChangedTimeHandles){var _this$timelineHandleT4=_slicedToArray(this.timelineHandleTimeBounds.map(formatTime),2),startTime=_this$timelineHandleT4[0],endTime=_this$timelineHandleT4[1];return startTime===endTime?startTime:"".concat(startTime,"..").concat(endTime)}}},{key:"onPlay",value:function onPlay(){this.analytics.logGrapherTimelinePlay(this.slug)}},{key:"onStartPlayOrDrag",value:function onStartPlayOrDrag(){this.debounceMode=!0,this.useTimelineDomains=!0}},{key:"onStopPlayOrDrag",value:function onStopPlayOrDrag(){this.debounceMode=!1,this.useTimelineDomains=!1}},{key:"disablePlay",get:function get(){return this.isSlopeChart}},{key:"formatTime",value:function formatTime(value){var timeColumn=this.table.timeColumn;return timeColumn.isMissing?this.table.timeColumnFormatFunction(value):Util_1.isMobile()?timeColumn.formatValueForMobile(value):timeColumn.formatValue(value)}},{key:"showSmallCountriesFilterToggle",get:function get(){return this.isScatter&&this.hasCountriesSmallerThanFilterOption}},{key:"showYScaleToggle",get:function get(){return!this.isRelativeMode&&(!this.isStackedArea&&!this.isStackedBar&&this.yAxis.canChangeScaleType)}},{key:"showXScaleToggle",get:function get(){return!this.isRelativeMode&&this.xAxis.canChangeScaleType}},{key:"showZoomToggle",get:function get(){return this.isScatter&&this.selection.hasSelection}},{key:"showAbsRelToggle",get:function get(){return!!this.canToggleRelativeMode&&(this.isScatter?void 0===this.xOverrideTime&&this.hasTimeline:this.isStackedArea||this.isStackedDiscreteBar||this.isScatter||this.isLineChart)}},{key:"showHighlightToggle",get:function get(){return this.isScatter&&!!this.highlightToggle}},{key:"showChangeEntityButton",get:function get(){return!this.hideEntityControls&&this.canChangeEntity}},{key:"showAddEntityButton",get:function get(){return!this.hideEntityControls&&this.canSelectMultipleEntities&&(this.isLineChart||this.isStackedArea||this.isDiscreteBar||this.isStackedDiscreteBar)}},{key:"showSelectEntitiesButton",get:function get(){return!this.hideEntityControls&&this.addCountryMode!==GrapherConstants_1.EntitySelectionMode.Disabled&&this.numSelectableEntityNames>1&&!this.showAddEntityButton&&!this.showChangeEntityButton}},{key:"canSelectMultipleEntities",get:function get(){return!(this.numSelectableEntityNames<2)&&(this.addCountryMode===GrapherConstants_1.EntitySelectionMode.MultipleEntities||this.addCountryMode===GrapherConstants_1.EntitySelectionMode.SingleEntity&&this.facetStrategy!==GrapherConstants_1.FacetStrategy.none)}},{key:"numSelectableEntityNames",get:function get(){return this.selection.numAvailableEntityNames}},{key:"canChangeEntity",get:function get(){return!this.isScatter&&!this.canSelectMultipleEntities&&this.addCountryMode===GrapherConstants_1.EntitySelectionMode.SingleEntity&&this.numSelectableEntityNames>1}},{key:"startSelectingWhenLineClicked",get:function get(){return this.showAddEntityButton}}],[{key:"renderGrapherIntoContainer",value:function renderGrapherIntoContainer(config,containerNode){var grapherInstanceRef=React.createRef(),ErrorBoundary=React.Fragment;js_1.default&&js_1.default._client&&(ErrorBoundary=js_1.default.getPlugin("react").createErrorBoundary(React));var setBoundsFromContainerAndRender=function setBoundsFromContainerAndRender(){var props=Object.assign(Object.assign({},config),{bounds:Bounds_1.Bounds.fromRect(containerNode.getBoundingClientRect())});ReactDOM.render(React.createElement(ErrorBoundary,null,React.createElement(Grapher_1,Object.assign({ref:grapherInstanceRef},props))),containerNode)};return setBoundsFromContainerAndRender(),window.addEventListener("resize",Util_1.throttle(setBoundsFromContainerAndRender,400)),grapherInstanceRef.current}},{key:"renderSingleGrapherOnGrapherPage",value:function renderSingleGrapherOnGrapherPage(jsonConfig){var container=document.getElementsByTagName("figure")[0];try{Grapher_1.renderGrapherIntoContainer(Object.assign(Object.assign({},jsonConfig),{bindUrlToWindow:!0,enableKeyboardShortcuts:!0,queryStr:window.location.search}),container)}catch(err){throw container.innerHTML='<img src="/grapher/exports/'.concat(jsonConfig.slug,'.svg"/><p>Unable to load interactive visualization</p>'),container.setAttribute("id","fallback"),err}}}]),Grapher}(React.Component);__decorate([mobx_1.observable.ref],Grapher.prototype,"type",void 0),__decorate([mobx_1.observable.ref],Grapher.prototype,"id",void 0),__decorate([mobx_1.observable.ref],Grapher.prototype,"version",void 0),__decorate([mobx_1.observable.ref],Grapher.prototype,"slug",void 0),__decorate([mobx_1.observable.ref],Grapher.prototype,"title",void 0),__decorate([mobx_1.observable.ref],Grapher.prototype,"subtitle",void 0),__decorate([mobx_1.observable.ref],Grapher.prototype,"sourceDesc",void 0),__decorate([mobx_1.observable.ref],Grapher.prototype,"note",void 0),__decorate([mobx_1.observable.ref],Grapher.prototype,"hideTitleAnnotation",void 0),__decorate([mobx_1.observable.ref],Grapher.prototype,"minTime",void 0),__decorate([mobx_1.observable.ref],Grapher.prototype,"maxTime",void 0),__decorate([mobx_1.observable.ref],Grapher.prototype,"timelineMinTime",void 0),__decorate([mobx_1.observable.ref],Grapher.prototype,"timelineMaxTime",void 0),__decorate([mobx_1.observable.ref],Grapher.prototype,"addCountryMode",void 0),__decorate([mobx_1.observable.ref],Grapher.prototype,"highlightToggle",void 0),__decorate([mobx_1.observable.ref],Grapher.prototype,"stackMode",void 0),__decorate([mobx_1.observable.ref],Grapher.prototype,"hideLegend",void 0),__decorate([mobx_1.observable.ref],Grapher.prototype,"logo",void 0),__decorate([mobx_1.observable.ref],Grapher.prototype,"hideLogo",void 0),__decorate([mobx_1.observable.ref],Grapher.prototype,"hideRelativeToggle",void 0),__decorate([mobx_1.observable.ref],Grapher.prototype,"entityType",void 0),__decorate([mobx_1.observable.ref],Grapher.prototype,"entityTypePlural",void 0),__decorate([mobx_1.observable.ref],Grapher.prototype,"hideTimeline",void 0),__decorate([mobx_1.observable.ref],Grapher.prototype,"zoomToSelection",void 0),__decorate([mobx_1.observable.ref],Grapher.prototype,"minPopulationFilter",void 0),__decorate([mobx_1.observable.ref],Grapher.prototype,"showYearLabels",void 0),__decorate([mobx_1.observable.ref],Grapher.prototype,"hasChartTab",void 0),__decorate([mobx_1.observable.ref],Grapher.prototype,"hasMapTab",void 0),__decorate([mobx_1.observable.ref],Grapher.prototype,"tab",void 0),__decorate([mobx_1.observable.ref],Grapher.prototype,"overlay",void 0),__decorate([mobx_1.observable.ref],Grapher.prototype,"internalNotes",void 0),__decorate([mobx_1.observable.ref],Grapher.prototype,"variantName",void 0),__decorate([mobx_1.observable.ref],Grapher.prototype,"originUrl",void 0),__decorate([mobx_1.observable.ref],Grapher.prototype,"isPublished",void 0),__decorate([mobx_1.observable.ref],Grapher.prototype,"baseColorScheme",void 0),__decorate([mobx_1.observable.ref],Grapher.prototype,"invertColorScheme",void 0),__decorate([mobx_1.observable.ref],Grapher.prototype,"hideLinesOutsideTolerance",void 0),__decorate([mobx_1.observable],Grapher.prototype,"hideConnectedScatterLines",void 0),__decorate([mobx_1.observable],Grapher.prototype,"scatterPointLabelStrategy",void 0),__decorate([mobx_1.observable.ref],Grapher.prototype,"compareEndPointsOnly",void 0),__decorate([mobx_1.observable.ref],Grapher.prototype,"matchingEntitiesOnly",void 0),__decorate([mobx_1.observable.ref],Grapher.prototype,"xAxis",void 0),__decorate([mobx_1.observable.ref],Grapher.prototype,"yAxis",void 0),__decorate([mobx_1.observable],Grapher.prototype,"colorScale",void 0),__decorate([mobx_1.observable],Grapher.prototype,"map",void 0),__decorate([mobx_1.observable.ref],Grapher.prototype,"dimensions",void 0),__decorate([mobx_1.observable],Grapher.prototype,"ySlugs",void 0),__decorate([mobx_1.observable],Grapher.prototype,"xSlug",void 0),__decorate([mobx_1.observable],Grapher.prototype,"colorSlug",void 0),__decorate([mobx_1.observable],Grapher.prototype,"sizeSlug",void 0),__decorate([mobx_1.observable],Grapher.prototype,"tableSlugs",void 0),__decorate([mobx_1.observable],Grapher.prototype,"backgroundSeriesLimit",void 0),__decorate([mobx_1.observable],Grapher.prototype,"selectedEntityNames",void 0),__decorate([mobx_1.observable],Grapher.prototype,"selectedEntityColors",void 0),__decorate([mobx_1.observable],Grapher.prototype,"selectedEntityIds",void 0),__decorate([mobx_1.observable],Grapher.prototype,"excludedEntities",void 0),__decorate([mobx_1.observable],Grapher.prototype,"comparisonLines",void 0),__decorate([mobx_1.observable],Grapher.prototype,"relatedQuestions",void 0),__decorate([mobx_1.observable.ref],Grapher.prototype,"annotation",void 0),__decorate([mobx_1.observable],Grapher.prototype,"hideFacetControl",void 0),__decorate([mobx_1.observable],Grapher.prototype,"selectedFacetStrategy",void 0),__decorate([mobx_1.observable],Grapher.prototype,"sortBy",void 0),__decorate([mobx_1.observable],Grapher.prototype,"sortOrder",void 0),__decorate([mobx_1.observable],Grapher.prototype,"sortColumnSlug",void 0),__decorate([mobx_1.observable],Grapher.prototype,"bakedGrapherURL",void 0),__decorate([mobx_1.observable.ref],Grapher.prototype,"inputTable",void 0),__decorate([mobx_1.observable.ref],Grapher.prototype,"legacyConfigAsAuthored",void 0),__decorate([mobx_1.computed],Grapher.prototype,"dataTableSlugs",null),__decorate([mobx_1.action.bound],Grapher.prototype,"setAuthoredVersion",null),__decorate([mobx_1.action.bound],Grapher.prototype,"updateAuthoredVersion",null),__decorate([mobx_1.action.bound],Grapher.prototype,"downloadData",null),__decorate([mobx_1.action.bound],Grapher.prototype,"updateFromObject",null),__decorate([mobx_1.action.bound],Grapher.prototype,"populateFromQueryParams",null),__decorate([mobx_1.action.bound],Grapher.prototype,"setTimeFromTimeQueryParam",null),__decorate([mobx_1.computed],Grapher.prototype,"isChartOrMapTab",null),__decorate([mobx_1.computed],Grapher.prototype,"isOnMapTab",null),__decorate([mobx_1.computed],Grapher.prototype,"yAxisConfig",null),__decorate([mobx_1.computed],Grapher.prototype,"xAxisConfig",null),__decorate([mobx_1.computed],Grapher.prototype,"tableForSelection",null),__decorate([mobx_1.computed],Grapher.prototype,"tableAfterAuthorTimelineFilter",null),__decorate([mobx_1.computed],Grapher.prototype,"tableAfterAuthorTimelineAndActiveChartTransform",null),__decorate([mobx_1.computed],Grapher.prototype,"chartInstance",null),__decorate([mobx_1.computed],Grapher.prototype,"chartInstanceExceptMap",null),__decorate([mobx_1.computed],Grapher.prototype,"table",null),__decorate([mobx_1.computed],Grapher.prototype,"tableAfterAuthorTimelineAndActiveChartTransformAndPopulationFilter",null),__decorate([mobx_1.computed],Grapher.prototype,"tableAfterAllTransformsAndFilters",null),__decorate([mobx_1.computed],Grapher.prototype,"transformedTable",null),__decorate([mobx_1.observable.ref],Grapher.prototype,"isMediaCard",void 0),__decorate([mobx_1.observable.ref],Grapher.prototype,"isExportingtoSvgOrPng",void 0),__decorate([mobx_1.observable.ref],Grapher.prototype,"tooltip",void 0),__decorate([mobx_1.observable],Grapher.prototype,"isPlaying",void 0),__decorate([mobx_1.observable.ref],Grapher.prototype,"isSelectingData",void 0),__decorate([mobx_1.computed],Grapher.prototype,"editUrl",null),__decorate([mobx_1.computed],Grapher.prototype,"populationFilterOption",null),__decorate([mobx_1.computed],Grapher.prototype,"hasCountriesSmallerThanFilterOption",null),__decorate([mobx_1.observable.ref],Grapher.prototype,"useTimelineDomains",void 0),__decorate([mobx_1.computed],Grapher.prototype,"useAdminAPI",null),__decorate([mobx_1.computed],Grapher.prototype,"showAdminControls",null),__decorate([mobx_1.action.bound],Grapher.prototype,"downloadLegacyDataFromOwidVariableIds",null),__decorate([mobx_1.action.bound],Grapher.prototype,"receiveLegacyData",null),__decorate([mobx_1.action.bound],Grapher.prototype,"_setInputTable",null),__decorate([mobx_1.action],Grapher.prototype,"rebuildInputOwidTable",null),__decorate([mobx_1.observable],Grapher.prototype,"legacyVariableDataJson",void 0),__decorate([mobx_1.action.bound],Grapher.prototype,"_receiveLegacyDataAndApplySelection",null),__decorate([mobx_1.action.bound],Grapher.prototype,"appendNewEntitySelectionOptions",null),__decorate([mobx_1.action.bound],Grapher.prototype,"applyOriginalSelectionAsAuthored",null),__decorate([mobx_1.observable],Grapher.prototype,"_baseFontSize",void 0),__decorate([mobx_1.computed],Grapher.prototype,"baseFontSize",null),__decorate([mobx_1.computed],Grapher.prototype,"isReady",null),__decorate([mobx_1.computed],Grapher.prototype,"whatAreWeWaitingFor",null),__decorate([mobx_1.computed],Grapher.prototype,"newSlugs",null),__decorate([mobx_1.computed],Grapher.prototype,"loadingDimensions",null),__decorate([mobx_1.computed],Grapher.prototype,"isInIFrame",null),__decorate([mobx_1.computed],Grapher.prototype,"times",null),__decorate([mobx_1.computed],Grapher.prototype,"startHandleTimeBound",null),__decorate([mobx_1.computed],Grapher.prototype,"endHandleTimeBound",null),__decorate([mobx_1.computed],Grapher.prototype,"startTime",null),__decorate([mobx_1.computed],Grapher.prototype,"endTime",null),__decorate([mobx_1.computed],Grapher.prototype,"onlySingleTimeSelectionPossible",null),__decorate([mobx_1.computed],Grapher.prototype,"shouldLinkToOwid",null),__decorate([mobx_1.computed.struct],Grapher.prototype,"variableIds",null),__decorate([mobx_1.computed],Grapher.prototype,"dataFileName",null),__decorate([mobx_1.computed],Grapher.prototype,"dataUrl",null),__decorate([mobx_1.computed],Grapher.prototype,"hasOWIDLogo",null),__decorate([mobx_1.computed],Grapher.prototype,"hasFatalErrors",null),__decorate([decko_1.bind],Grapher.prototype,"dispose",null),__decorate([mobx_1.computed],Grapher.prototype,"fontSize",null),__decorate([mobx_1.action.bound],Grapher.prototype,"ensureValidConfigWhenEditing",null),__decorate([mobx_1.computed],Grapher.prototype,"validDimensions",null),__decorate([mobx_1.computed],Grapher.prototype,"originUrlWithProtocol",null),__decorate([mobx_1.computed],Grapher.prototype,"overlayTab",null),__decorate([mobx_1.computed],Grapher.prototype,"currentTab",null),__decorate([mobx_1.computed],Grapher.prototype,"timelineHandleTimeBounds",null),__decorate([mobx_1.computed],Grapher.prototype,"dimensionSlots",null),__decorate([mobx_1.computed.struct],Grapher.prototype,"filledDimensions",null),__decorate([mobx_1.action.bound],Grapher.prototype,"addDimension",null),__decorate([mobx_1.action.bound],Grapher.prototype,"setDimensionsForProperty",null),__decorate([mobx_1.action.bound],Grapher.prototype,"setDimensionsFromConfigs",null),__decorate([mobx_1.computed],Grapher.prototype,"displaySlug",null),__decorate([mobx_1.computed],Grapher.prototype,"availableTabs",null),__decorate([mobx_1.computed],Grapher.prototype,"currentTitle",null),__decorate([mobx_1.computed],Grapher.prototype,"hasTimeline",null),__decorate([mobx_1.computed],Grapher.prototype,"areHandlesOnSameTime",null),__decorate([mobx_1.computed],Grapher.prototype,"mapColumnSlug",null),__decorate([mobx_1.computed],Grapher.prototype,"yColumns",null),__decorate([mobx_1.computed],Grapher.prototype,"yColumnSlugsInSelectionOrder",null),__decorate([mobx_1.computed],Grapher.prototype,"yColumnSlugs",null),__decorate([mobx_1.computed],Grapher.prototype,"yColumnSlug",null),__decorate([mobx_1.computed],Grapher.prototype,"xColumnSlug",null),__decorate([mobx_1.computed],Grapher.prototype,"sizeColumnSlug",null),__decorate([mobx_1.computed],Grapher.prototype,"colorColumnSlug",null),__decorate([mobx_1.computed],Grapher.prototype,"yScaleType",null),__decorate([mobx_1.computed],Grapher.prototype,"xScaleType",null),__decorate([mobx_1.computed],Grapher.prototype,"timeTitleSuffix",null),__decorate([mobx_1.computed],Grapher.prototype,"sourcesLine",null),__decorate([mobx_1.computed],Grapher.prototype,"activeColumnSlugs",null),__decorate([mobx_1.computed],Grapher.prototype,"columnsWithSources",null),__decorate([mobx_1.computed],Grapher.prototype,"defaultSourcesLine",null),__decorate([mobx_1.computed],Grapher.prototype,"axisDimensions",null),__decorate([mobx_1.computed],Grapher.prototype,"yColumnsFromDimensionsOrSlugsOrAuto",null),__decorate([mobx_1.computed],Grapher.prototype,"defaultTitle",null),__decorate([mobx_1.computed],Grapher.prototype,"displayTitle",null),__decorate([mobx_1.computed],Grapher.prototype,"object",null),__decorate([mobx_1.computed],Grapher.prototype,"typeExceptWhenLineChartAndSingleTimeThenWillBeBarChart",null),__decorate([mobx_1.computed],Grapher.prototype,"isLineChart",null),__decorate([mobx_1.computed],Grapher.prototype,"isScatter",null),__decorate([mobx_1.computed],Grapher.prototype,"isTimeScatter",null),__decorate([mobx_1.computed],Grapher.prototype,"isStackedArea",null),__decorate([mobx_1.computed],Grapher.prototype,"isSlopeChart",null),__decorate([mobx_1.computed],Grapher.prototype,"isDiscreteBar",null),__decorate([mobx_1.computed],Grapher.prototype,"isStackedBar",null),__decorate([mobx_1.computed],Grapher.prototype,"isStackedDiscreteBar",null),__decorate([mobx_1.computed],Grapher.prototype,"isLineChartThatTurnedIntoDiscreteBar",null),__decorate([mobx_1.computed],Grapher.prototype,"activeColorScale",null),__decorate([mobx_1.computed],Grapher.prototype,"activeColorScaleExceptMap",null),__decorate([mobx_1.computed],Grapher.prototype,"supportsMultipleYColumns",null),__decorate([mobx_1.computed],Grapher.prototype,"xDimension",null),__decorate([mobx_1.computed],Grapher.prototype,"xOverrideTime",null),__decorate([mobx_1.computed],Grapher.prototype,"idealBounds",null),__decorate([mobx_1.computed],Grapher.prototype,"hasYDimension",null),__decorate([mobx_1.computed],Grapher.prototype,"mapConfig",null),__decorate([mobx_1.computed],Grapher.prototype,"cacheTag",null),__decorate([mobx_1.computed],Grapher.prototype,"mapIsClickable",null),__decorate([mobx_1.computed],Grapher.prototype,"relativeToggleLabel",null),__decorate([mobx_1.computed],Grapher.prototype,"isRelativeMode",null),__decorate([mobx_1.computed],Grapher.prototype,"canToggleRelativeMode",null),__decorate([mobx_1.computed],Grapher.prototype,"mappableData",null),__decorate([mobx_1.computed],Grapher.prototype,"isMobile",null),__decorate([mobx_1.computed],Grapher.prototype,"bounds",null),__decorate([mobx_1.computed],Grapher.prototype,"isPortrait",null),__decorate([mobx_1.computed],Grapher.prototype,"widthForDeviceOrientation",null),__decorate([mobx_1.computed],Grapher.prototype,"heightForDeviceOrientation",null),__decorate([mobx_1.computed],Grapher.prototype,"useIdealBounds",null),__decorate([mobx_1.computed],Grapher.prototype,"scaleToFitIdeal",null),__decorate([mobx_1.computed],Grapher.prototype,"renderWidth",null),__decorate([mobx_1.computed],Grapher.prototype,"renderHeight",null),__decorate([mobx_1.computed],Grapher.prototype,"tabBounds",null),__decorate([mobx_1.observable.ref],Grapher.prototype,"popups",void 0),__decorate([mobx_1.computed],Grapher.prototype,"containerElement",null),__decorate([mobx_1.observable],Grapher.prototype,"hasBeenVisible",void 0),__decorate([mobx_1.observable],Grapher.prototype,"uncaughtError",void 0),__decorate([mobx_1.action.bound],Grapher.prototype,"setError",null),__decorate([mobx_1.action.bound],Grapher.prototype,"clearErrors",null),__decorate([mobx_1.computed],Grapher.prototype,"isOnTableTab",null),__decorate([mobx_1.action.bound],Grapher.prototype,"toggleTabCommand",null),__decorate([mobx_1.action.bound],Grapher.prototype,"togglePlayingCommand",null),__decorate([mobx_1.computed],Grapher.prototype,"availableEntities",null),__decorate([mobx_1.observable],Grapher.prototype,"slideShow",void 0),__decorate([mobx_1.action.bound],Grapher.prototype,"toggleTimelineCommand",null),__decorate([mobx_1.action.bound],Grapher.prototype,"toggleFilterAllCommand",null),__decorate([mobx_1.action.bound],Grapher.prototype,"toggleYScaleTypeCommand",null),__decorate([mobx_1.action.bound],Grapher.prototype,"toggleFacetStrategy",null),__decorate([mobx_1.action.bound],Grapher.prototype,"toggleFacetControlVisibility",null),__decorate([mobx_1.computed],Grapher.prototype,"showFacetYDomainToggle",null),__decorate([mobx_1.computed],Grapher.prototype,"_sortConfig",null),__decorate([mobx_1.computed],Grapher.prototype,"sortConfig",null),__decorate([mobx_1.computed],Grapher.prototype,"hasMultipleYColumns",null),__decorate([mobx_1.computed],Grapher.prototype,"selectedColumnSlugs",null),__decorate([mobx_1.computed],Grapher.prototype,"availableFacetStrategies",null),__decorate([mobx_1.computed],Grapher.prototype,"facetStrategy",null),__decorate([mobx_1.action.bound],Grapher.prototype,"randomSelection",null),__decorate([mobx_1.action.bound],Grapher.prototype,"resetAnnotation",null),__decorate([mobx_1.action.bound],Grapher.prototype,"renderAnnotation",null),__decorate([mobx_1.action.bound],Grapher.prototype,"checkVisibility",null),__decorate([mobx_1.action.bound],Grapher.prototype,"setBaseFontSize",null),__decorate([mobx_1.observable],Grapher.prototype,"isShareMenuActive",void 0),__decorate([mobx_1.computed],Grapher.prototype,"hasRelatedQuestion",null),__decorate([mobx_1.computed],Grapher.prototype,"footerControlsLines",null),__decorate([mobx_1.computed],Grapher.prototype,"footerControlsHeight",null),__decorate([mobx_1.action.bound],Grapher.prototype,"clearQueryParams",null),__decorate([mobx_1.action.bound],Grapher.prototype,"reset",null),__decorate([mobx_1.computed.struct],Grapher.prototype,"allParams",null),__decorate([mobx_1.computed],Grapher.prototype,"selectedEntitiesIfDifferentThanAuthors",null),__decorate([mobx_1.computed.struct],Grapher.prototype,"changedParams",null),__decorate([mobx_1.computed],Grapher.prototype,"authorsVersion",null),__decorate([mobx_1.computed],Grapher.prototype,"queryStr",null),__decorate([mobx_1.computed],Grapher.prototype,"baseUrl",null),__decorate([mobx_1.computed],Grapher.prototype,"manager",null),__decorate([mobx_1.computed],Grapher.prototype,"canonicalUrl",null),__decorate([mobx_1.computed],Grapher.prototype,"embedUrl",null),__decorate([mobx_1.computed],Grapher.prototype,"embedDialogAdditionalElements",null),__decorate([mobx_1.computed],Grapher.prototype,"hasUserChangedTimeHandles",null),__decorate([mobx_1.computed],Grapher.prototype,"hasUserChangedMapTimeHandle",null),__decorate([mobx_1.computed],Grapher.prototype,"timeParam",null),__decorate([mobx_1.computed],Grapher.prototype,"disablePlay",null),__decorate([mobx_1.computed],Grapher.prototype,"showSmallCountriesFilterToggle",null),__decorate([mobx_1.computed],Grapher.prototype,"showYScaleToggle",null),__decorate([mobx_1.computed],Grapher.prototype,"showXScaleToggle",null),__decorate([mobx_1.computed],Grapher.prototype,"showZoomToggle",null),__decorate([mobx_1.computed],Grapher.prototype,"showAbsRelToggle",null),__decorate([mobx_1.computed],Grapher.prototype,"showHighlightToggle",null),__decorate([mobx_1.computed],Grapher.prototype,"showChangeEntityButton",null),__decorate([mobx_1.computed],Grapher.prototype,"showAddEntityButton",null),__decorate([mobx_1.computed],Grapher.prototype,"showSelectEntitiesButton",null),__decorate([mobx_1.computed],Grapher.prototype,"canSelectMultipleEntities",null),__decorate([mobx_1.computed],Grapher.prototype,"numSelectableEntityNames",null),__decorate([mobx_1.computed],Grapher.prototype,"canChangeEntity",null),__decorate([mobx_1.computed],Grapher.prototype,"startSelectingWhenLineClicked",null),__decorate([mobx_1.observable],Grapher.prototype,"hideEntityControls",void 0),Grapher=Grapher_1=__decorate([mobx_react_1.observer],Grapher),exports.Grapher=Grapher;var defaultObject=Persistable_1.objectWithPersistablesToObject(new Grapher,GrapherInterface_1.grapherKeysToSerialize);exports.getErrorMessageRelatedQuestionUrl=function getErrorMessageRelatedQuestionUrl(question){return question.text&&(question.url?!question.url.match(/^https?:\/\//)&&"URL should start with http(s)://":"Missing URL")||void 0}},471:function(module,exports,__webpack_require__){"use strict";__webpack_require__(48),__webpack_require__(55),__webpack_require__(28),__webpack_require__(65),__webpack_require__(32),__webpack_require__(57),__webpack_require__(33),__webpack_require__(36),__webpack_require__(62),Object.defineProperty(exports,"__esModule",{value:!0}),exports.setSelectedEntityNamesParam=exports.getSelectedEntityNamesParam=exports.migrateSelectedEntityNamesParam=exports.ENTITY_V2_DELIMITER=void 0;var EntityCodes_1=__webpack_require__(1789),UrlMigration_1=__webpack_require__(602);exports.ENTITY_V2_DELIMITER="~";var entityNamesFromV1EncodedParam=function entityNamesFromV1EncodedParam(encodedQueryParam){return encodedQueryParam.split("+").map(decodeURIComponent)},entityNamesToV2Param=function entityNamesToV2Param(entityNames){return 1===entityNames.length?exports.ENTITY_V2_DELIMITER+entityNames[0]:entityNames.join(exports.ENTITY_V2_DELIMITER)},entityNamesFromV2Param=function entityNamesFromV2Param(queryParam){return queryParam.split(exports.ENTITY_V2_DELIMITER).filter((function(item){return item}))},LegacyDimensionRegex=/\-\d+$/,injectEntityNamesInLegacyDimension=function injectEntityNamesInLegacyDimension(entityNames){var newNames=[];return entityNames.forEach((function(entityName){if(newNames.push(entityName),LegacyDimensionRegex.test(entityName)){var nonDimensionName=entityName.replace(LegacyDimensionRegex,"");newNames.push(nonDimensionName)}})),newNames},urlMigrations=[function migrateV1Delimited(url){var country=url.encodedQueryParams.country;return void 0!==country&&function isV1Param(encodedQueryParam){return!decodeURIComponent(encodedQueryParam).includes(exports.ENTITY_V2_DELIMITER)}(country)?url.updateQueryParams({country:entityNamesToV2Param(entityNamesFromV1EncodedParam(country))}):url},function migrateLegacyDimensionPairs(url){var country=url.queryParams.country;return country?url.updateQueryParams({country:entityNamesToV2Param(injectEntityNamesInLegacyDimension(entityNamesFromV2Param(country)))}):url}];exports.migrateSelectedEntityNamesParam=function migrateSelectedEntityNamesParam(url){return UrlMigration_1.performUrlMigrations(urlMigrations,url)};exports.getSelectedEntityNamesParam=function getSelectedEntityNamesParam(url){var country=exports.migrateSelectedEntityNamesParam(url).queryParams.country;return void 0!==country?entityNamesFromV2Param(country).map(EntityCodes_1.codeToEntityName):void 0};exports.setSelectedEntityNamesParam=function setSelectedEntityNamesParam(url,entityNames){return exports.migrateSelectedEntityNamesParam(url).updateQueryParams({country:entityNames?entityNamesToV2Param(entityNames.map(EntityCodes_1.entityNameToCode)):void 0})}},472:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}__webpack_require__(18),__webpack_require__(21),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),Object.defineProperty(exports,"__esModule",{value:!0}),exports.CategoricalBin=exports.NumericBin=void 0;var AbstractColorScaleBin=function(){function AbstractColorScaleBin(props){_classCallCheck(this,AbstractColorScaleBin),this.props=props}return _createClass(AbstractColorScaleBin,[{key:"color",get:function get(){return this.props.color}},{key:"label",get:function get(){return this.props.label}}]),AbstractColorScaleBin}(),NumericBin=function(_AbstractColorScaleBi){_inherits(NumericBin,_AbstractColorScaleBi);var _super=_createSuper(NumericBin);function NumericBin(){return _classCallCheck(this,NumericBin),_super.apply(this,arguments)}return _createClass(NumericBin,[{key:"min",get:function get(){return this.props.min}},{key:"max",get:function get(){return this.props.max}},{key:"minText",get:function get(){return(this.props.isOpenLeft?"<":"")+this.props.displayMin}},{key:"maxText",get:function get(){return(this.props.isOpenRight?">":"")+this.props.displayMax}},{key:"text",get:function get(){return this.props.label||""}},{key:"isHidden",get:function get(){return!1}},{key:"contains",value:function contains(value){return void 0!==value&&(this.props.isOpenLeft?value<=this.max:this.props.isOpenRight?value>this.min:this.props.isFirst?value>=this.min&&value<=this.max:value>this.min&&value<=this.max)}},{key:"equals",value:function equals(other){return other instanceof NumericBin&&this.min===other.min&&this.max===other.max}}]),NumericBin}(AbstractColorScaleBin);exports.NumericBin=NumericBin;var CategoricalBin=function(_AbstractColorScaleBi2){_inherits(CategoricalBin,_AbstractColorScaleBi2);var _super2=_createSuper(CategoricalBin);function CategoricalBin(){return _classCallCheck(this,CategoricalBin),_super2.apply(this,arguments)}return _createClass(CategoricalBin,[{key:"index",get:function get(){return this.props.index}},{key:"value",get:function get(){return this.props.value}},{key:"isHidden",get:function get(){return this.props.isHidden}},{key:"text",get:function get(){return this.props.label||this.props.value}},{key:"contains",value:function contains(value){return void 0===value&&"No data"===this.props.value||void 0!==value&&value===this.props.value}},{key:"equals",value:function equals(other){return other instanceof CategoricalBin&&this.props.index===other.props.index}}]),CategoricalBin}(AbstractColorScaleBin);exports.CategoricalBin=CategoricalBin},474:function(module,exports,__webpack_require__){"use strict";__webpack_require__(68),__webpack_require__(5),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),Object.defineProperty(exports,"__esModule",{value:!0}),exports.DefaultChartClass=exports.ChartComponentClassMap=void 0;var ScatterPlotChart_1=__webpack_require__(610),TimeScatterChart_1=__webpack_require__(1863),SlopeChart_1=__webpack_require__(1023),LineChart_1=__webpack_require__(1025),StackedAreaChart_1=__webpack_require__(1026),DiscreteBarChart_1=__webpack_require__(1028),StackedBarChart_1=__webpack_require__(1029),GrapherConstants_1=__webpack_require__(64),MapChart_1=__webpack_require__(609),StackedDiscreteBarChart_1=__webpack_require__(1030);exports.ChartComponentClassMap=new Map([[GrapherConstants_1.ChartTypeName.DiscreteBar,DiscreteBarChart_1.DiscreteBarChart],[GrapherConstants_1.ChartTypeName.LineChart,LineChart_1.LineChart],[GrapherConstants_1.ChartTypeName.SlopeChart,SlopeChart_1.SlopeChart],[GrapherConstants_1.ChartTypeName.StackedArea,StackedAreaChart_1.StackedAreaChart],[GrapherConstants_1.ChartTypeName.StackedBar,StackedBarChart_1.StackedBarChart],[GrapherConstants_1.ChartTypeName.StackedDiscreteBar,StackedDiscreteBarChart_1.StackedDiscreteBarChart],[GrapherConstants_1.ChartTypeName.ScatterPlot,ScatterPlotChart_1.ScatterPlotChart],[GrapherConstants_1.ChartTypeName.TimeScatter,TimeScatterChart_1.TimeScatterChart],[GrapherConstants_1.ChartTypeName.WorldMap,MapChart_1.MapChart]]),exports.DefaultChartClass=LineChart_1.LineChart},475:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(33),__webpack_require__(28),__webpack_require__(25),__webpack_require__(48),__webpack_require__(55),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(18),__webpack_require__(21);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.VerticalColorLegend=void 0;var React=__importStar(__webpack_require__(0)),Util_1=__webpack_require__(40),mobx_1=__webpack_require__(41),mobx_react_1=__webpack_require__(58),TextWrap_1=__webpack_require__(242),GrapherConstants_1=__webpack_require__(64),VerticalColorLegend=function(_React$Component){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(VerticalColorLegend,_React$Component);var _super=_createSuper(VerticalColorLegend);function VerticalColorLegend(){var _this;return _classCallCheck(this,VerticalColorLegend),(_this=_super.apply(this,arguments)).rectPadding=5,_this.lineHeight=5,_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(VerticalColorLegend,[{key:"manager",get:function get(){return this.props.manager}},{key:"maxLegendWidth",get:function get(){var _a;return null!==(_a=this.manager.maxLegendWidth)&&void 0!==_a?_a:100}},{key:"fontSize",get:function get(){var _a;return.7*(null!==(_a=this.manager.fontSize)&&void 0!==_a?_a:GrapherConstants_1.BASE_FONT_SIZE)}},{key:"rectSize",get:function get(){return Math.round(this.fontSize/1.4)}},{key:"title",get:function get(){if(this.manager.title)return new TextWrap_1.TextWrap({maxWidth:this.maxLegendWidth,fontSize:this.fontSize,fontWeight:700,text:this.manager.title})}},{key:"titleHeight",get:function get(){return this.title?this.title.height+5:0}},{key:"series",get:function get(){var _this2=this,manager=this.manager,fontSize=this.fontSize,rectSize=this.rectSize,rectPadding=this.rectPadding;return manager.legendItems.map((function(series){var label=series.label;!label&&series.minText&&series.maxText&&(label="".concat(series.minText," â€“ ").concat(series.maxText));var textWrap=new TextWrap_1.TextWrap({maxWidth:_this2.maxLegendWidth,fontSize:fontSize,text:null!=label?label:""});return{textWrap:textWrap,color:series.color,width:rectSize+rectPadding+textWrap.width,height:Math.max(textWrap.height,rectSize)}})).filter((function(v){return!!v}))}},{key:"width",get:function get(){var _a,widths=this.series.map((function(series){return series.width}));return this.title&&widths.push(this.title.width),null!==(_a=Util_1.max(widths))&&void 0!==_a?_a:0}},{key:"height",get:function get(){return this.titleHeight+Util_1.sum(this.series.map((function(series){return series.height})))+this.lineHeight*this.series.length}},{key:"render",value:function render(){var _a,_b,title=this.title,titleHeight=this.titleHeight,series=this.series,rectSize=this.rectSize,rectPadding=this.rectPadding,lineHeight=this.lineHeight,manager=this.manager,focusColors=manager.focusColors,activeColors=manager.activeColors,onLegendMouseOver=manager.onLegendMouseOver,onLegendMouseLeave=manager.onLegendMouseLeave,onLegendClick=manager.onLegendClick,x=null!==(_a=manager.legendX)&&void 0!==_a?_a:0,y=null!==(_b=manager.legendY)&&void 0!==_b?_b:0,markOffset=titleHeight;return React.createElement(React.Fragment,null,title&&title.render(x,y,{fontWeight:700}),React.createElement("g",{className:"ScatterColorLegend clickable",style:{cursor:"pointer"}},series.map((function(series,index){var _a,isActive=activeColors.includes(series.color),isFocus=null!==(_a=null==focusColors?void 0:focusColors.includes(series.color))&&void 0!==_a&&_a,mouseOver=onLegendMouseOver?function(){return onLegendMouseOver(series.color)}:void 0,mouseLeave=onLegendMouseLeave||void 0,click=onLegendClick?function(){return onLegendClick(series.color)}:void 0,result=React.createElement("g",{key:index,className:"legendMark",onMouseOver:mouseOver,onMouseLeave:mouseLeave,onClick:click,fill:isActive?void 0:"#ccc"},React.createElement("rect",{x:x,y:y+markOffset-lineHeight/2,width:series.width,height:series.height+lineHeight,fill:"#fff",opacity:0}),React.createElement("rect",{x:x,y:y+markOffset+(series.height-rectSize)/2,width:rectSize,height:rectSize,fill:isActive?series.color:void 0}),series.textWrap.render(x+rectSize+rectPadding,y+markOffset,isFocus?{style:{fontWeight:"bold"}}:void 0));return markOffset+=series.height+lineHeight,result}))))}}]),VerticalColorLegend}(React.Component);__decorate([mobx_1.computed],VerticalColorLegend.prototype,"manager",null),__decorate([mobx_1.computed],VerticalColorLegend.prototype,"maxLegendWidth",null),__decorate([mobx_1.computed],VerticalColorLegend.prototype,"fontSize",null),__decorate([mobx_1.computed],VerticalColorLegend.prototype,"rectSize",null),__decorate([mobx_1.computed],VerticalColorLegend.prototype,"title",null),__decorate([mobx_1.computed],VerticalColorLegend.prototype,"titleHeight",null),__decorate([mobx_1.computed],VerticalColorLegend.prototype,"series",null),__decorate([mobx_1.computed],VerticalColorLegend.prototype,"width",null),__decorate([mobx_1.computed],VerticalColorLegend.prototype,"height",null),VerticalColorLegend=__decorate([mobx_react_1.observer],VerticalColorLegend),exports.VerticalColorLegend=VerticalColorLegend},476:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.legacyToCurrentGrapherQueryParams=exports.legacyToCurrentGrapherUrl=exports.grapherUrlMigrations=void 0;var Url_1=__webpack_require__(395),UrlMigration_1=__webpack_require__(602),EntityUrlBuilder_1=__webpack_require__(471);exports.grapherUrlMigrations=[function(url){var _url$queryParams=url.queryParams,year=_url$queryParams.year,time=_url$queryParams.time;return year?url.updateQueryParams({year:void 0,time:null!=time?time:year}):url},EntityUrlBuilder_1.migrateSelectedEntityNamesParam];exports.legacyToCurrentGrapherUrl=function legacyToCurrentGrapherUrl(url){return UrlMigration_1.performUrlMigrations(exports.grapherUrlMigrations,url)};exports.legacyToCurrentGrapherQueryParams=function legacyToCurrentGrapherQueryParams(queryStr){var url=Url_1.Url.fromQueryStr(queryStr);return exports.legacyToCurrentGrapherUrl(url).queryParams}},592:function(module,exports,__webpack_require__){"use strict";__webpack_require__(29),__webpack_require__(7),__webpack_require__(31),Object.defineProperty(exports,"__esModule",{value:!0}),exports.getStylesForTargetHeight=exports.asArray=void 0;exports.asArray=function asArray(value){return null==value?[]:function isMultiValue(value){return Array.isArray(value)}(value)?Array.from(value):[value]};exports.getStylesForTargetHeight=function getStylesForTargetHeight(targetHeight){var props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_control=props.control,_valueContainer=props.valueContainer,_singleValue=props.singleValue,_clearIndicator=props.clearIndicator,_container=props.container,_dropdownIndicator=props.dropdownIndicator,_option=props.option,_menu=props.menu;return{container:function container(base){return Object.assign(Object.assign({},base),_container)},control:function control(base){return Object.assign(Object.assign(Object.assign({},base),{minHeight:"initial"}),_control)},valueContainer:function valueContainer(base){return Object.assign(Object.assign(Object.assign({},base),{height:"".concat(targetHeight-1-1,"px"),padding:"0 4px",flexWrap:"nowrap"}),_valueContainer)},singleValue:function singleValue(base){return Object.assign(Object.assign({},base),_singleValue)},clearIndicator:function clearIndicator(base){return Object.assign(Object.assign(Object.assign({},base),{padding:"".concat((targetHeight-20-1-1)/2,"px")}),_clearIndicator)},dropdownIndicator:function dropdownIndicator(base){return Object.assign(Object.assign(Object.assign({},base),{padding:"".concat((targetHeight-20-1-1)/2,"px")}),_dropdownIndicator)},option:function option(base){return Object.assign(Object.assign(Object.assign({},base),{paddingTop:"5px",paddingBottom:"5px"}),_option)},menu:function menu(base){return Object.assign(Object.assign(Object.assign({},base),{zIndex:1e4}),_menu)}}}},598:function(module,exports,__webpack_require__){"use strict";function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=arr&&("undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"]);if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(68),__webpack_require__(5),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(28),__webpack_require__(31),__webpack_require__(36),__webpack_require__(75),__webpack_require__(33),__webpack_require__(39),__webpack_require__(22),__webpack_require__(11),__webpack_require__(9),__webpack_require__(10),__webpack_require__(119),__webpack_require__(79),__webpack_require__(57),__webpack_require__(48),__webpack_require__(55),__webpack_require__(14),__webpack_require__(25),__webpack_require__(17),__webpack_require__(29),__webpack_require__(143),__webpack_require__(151);var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};Object.defineProperty(exports,"__esModule",{value:!0}),exports.columnDefinitionsFromDelimited=exports.CoreTable=void 0;var Util_1=__webpack_require__(40),isPresent_1=__webpack_require__(241),CoreTableColumns_1=__webpack_require__(466),CoreTableConstants_1=__webpack_require__(276),CoreColumnDef_1=__webpack_require__(199),CoreTablePrinters_1=__webpack_require__(1769),CoreTableUtils_1=__webpack_require__(320),ErrorValues_1=__webpack_require__(277),OwidTableConstants_1=__webpack_require__(172),Transforms_1=__webpack_require__(982),CoreTable=function(){function CoreTable(){var _this=this,input=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],inputColumnDefs=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],advancedOptions=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_classCallCheck(this,CoreTable),this._columns=new Map,this.timeToLoad=0,this.initTime=Date.now(),this.valuesFromColumnDefs={},this.guid=++CoreTable.guids;var start=Date.now(),parent=advancedOptions.parent,_advancedOptions$tabl=advancedOptions.tableDescription,tableDescription=void 0===_advancedOptions$tabl?"":_advancedOptions$tabl;this.originalInput=input,this.tableDescription=tableDescription,this.parent=parent,this.inputColumnDefs="string"==typeof inputColumnDefs?exports.columnDefinitionsFromDelimited(inputColumnDefs):inputColumnDefs,this.inputColumnDefs=this.inputColumnDefs.map((function(def){if(!def.values)return def;_this.valuesFromColumnDefs[def.slug]=def.values;var copy=Object.assign({},def);return delete copy.values,copy})),this.inputColumnDefs.forEach((function(def){return _this.setColumn(def)})),this.advancedOptions=advancedOptions,parent||CoreTableUtils_1.autodetectColumnDefs(this.inputColumnStore,this._columns).forEach((function(def){return _this.setColumn(def)})),this.timeToLoad=Date.now()-start}return _createClass(CoreTable,[{key:"autodetectedColumnDefs",get:function get(){var providedSlugs=new Set(this.inputColumnDefs.map((function(def){return def.slug})));return new CoreTable(this.defs.filter((function(def){return!providedSlugs.has(def.slug)})))}},{key:"transformCategory",get:function get(){var advancedOptions=this.advancedOptions,inputType=this.inputType;return advancedOptions.transformCategory?advancedOptions.transformCategory:inputType===CoreTableConstants_1.InputType.Delimited?CoreTableConstants_1.TransformType.LoadFromDelimited:inputType===CoreTableConstants_1.InputType.Matrix?CoreTableConstants_1.TransformType.LoadFromMatrix:inputType===CoreTableConstants_1.InputType.RowStore?CoreTableConstants_1.TransformType.LoadFromRowStore:CoreTableConstants_1.TransformType.LoadFromColumnStore}},{key:"inputColumnStore",get:function get(){var originalInput=this.originalInput,inputType=this.inputType;return inputType===CoreTableConstants_1.InputType.Delimited?this.delimitedAsColumnStore:inputType===CoreTableConstants_1.InputType.Matrix?CoreTableUtils_1.rowsToColumnStore(CoreTableUtils_1.rowsFromMatrix(originalInput)):inputType===CoreTableConstants_1.InputType.RowStore?CoreTableUtils_1.rowsToColumnStore(originalInput):originalInput}},{key:"columnStore",get:function get(){var inputColumnStore=this.inputColumnStore,valuesFromColumnDefs=this.valuesFromColumnDefs,inputColumnsToParsedColumnStore=this.inputColumnsToParsedColumnStore,inputColumnDefs=this.inputColumnDefs,isRoot=this.isRoot,advancedOptions=this.advancedOptions,columnStore=Object.assign({},this.blankColumnStore,inputColumnStore,valuesFromColumnDefs);Object.keys(inputColumnsToParsedColumnStore).length&&(columnStore=Object.assign(columnStore,inputColumnsToParsedColumnStore));var columnsFromTransforms=inputColumnDefs.filter((function(def){return def.transform}));return isRoot&&columnsFromTransforms.length&&(columnStore=Transforms_1.applyTransforms(columnStore,columnsFromTransforms)),advancedOptions.filterMask?advancedOptions.filterMask.apply(columnStore):columnStore}},{key:"blankColumnStore",get:function get(){var columnsObject={};return this.columnSlugs.forEach((function(slug){columnsObject[slug]=[]})),columnsObject}},{key:"delimitedAsColumnStore",get:function get(){var originalInput=this.originalInput,_numericColumnSlugs=this._numericColumnSlugs,parsed=CoreTableUtils_1.parseDelimited(originalInput,void 0,CoreTableUtils_1.makeAutoTypeFn(_numericColumnSlugs));delete parsed.columns;var renamedRows=CoreTableUtils_1.standardizeSlugs(parsed);return CoreTableUtils_1.rowsToColumnStore(renamedRows?renamedRows.rows:parsed)}},{key:"tableSlug",get:function get(){return this.advancedOptions.tableSlug}},{key:"inputColumnsToParsedColumnStore",get:function get(){var inputColumnStore=this.inputColumnStore,colsToParse=this.colsToParse,columnsObject={};if(!colsToParse.length)return columnsObject;var missingCols=[],len=0;return colsToParse.forEach((function(col){var slug=col.slug,unparsedVals=inputColumnStore[slug];unparsedVals?(columnsObject[slug]=unparsedVals.map((function(val){return col.parse(val)})),len=columnsObject[slug].length):missingCols.push(col)})),missingCols.forEach((function(col){return columnsObject[col.slug]=Util_1.range(0,len).map((function(){return col.parse(void 0)}))})),columnsObject}},{key:"colsToParse",get:function get(){var inputType=this.inputType,columnsAsArray=this.columnsAsArray,inputColumnStore=this.inputColumnStore,firstInputRow=CoreTableUtils_1.makeRowFromColumnStore(0,inputColumnStore);if(inputType===CoreTableConstants_1.InputType.Delimited){var missingTypes=new Set(this.getColumns(CoreTableUtils_1.emptyColumnsInFirstRowInDelimited(this.originalInput)));return columnsAsArray.filter((function(col){return col.needsParsing(firstInputRow[col.slug])||missingTypes.has(col)}))}if(this.advancedOptions.skipParsing||this.parent||!firstInputRow)return[];var alreadyTypedSlugs=new Set(Object.keys(this.valuesFromColumnDefs));return this.isRoot?this.columnsAsArray.filter((function(col){return!alreadyTypedSlugs.has(col.slug)})):columnsAsArray.filter((function(col){return!alreadyTypedSlugs.has(col.slug)||col.needsParsing(firstInputRow[col.slug])}))}},{key:"toOneDimensionalArray",value:function toOneDimensionalArray(){return Util_1.flatten(this.toTypedMatrix().slice(1))}},{key:"setColumn",value:function setColumn(def){var type=def.type,slug=def.slug,ColumnType=type&&CoreTableColumns_1.ColumnTypeMap[type]||CoreTableColumns_1.ColumnTypeMap.String;this._columns.set(slug,new ColumnType(this,def))}},{key:"transform",value:function transform(rowsOrColumnStore,defs,tableDescription,transformCategory,filterMask){return new this.constructor(rowsOrColumnStore,defs,{parent:this,tableDescription:tableDescription,transformCategory:transformCategory,filterMask:filterMask})}},{key:"betweenTime",get:function get(){return this.parent?this.initTime-(this.parent.initTime+this.parent.timeToLoad):0}},{key:"rows",get:function get(){return CoreTableUtils_1.columnStoreToRows(this.columnStore)}},{key:"indices",get:function get(){return Util_1.range(0,this.numRows)}},{key:Symbol.iterator,value:regeneratorRuntime.mark((function value(){var columnStore,numRows,index;return regeneratorRuntime.wrap((function value$(_context){for(;;)switch(_context.prev=_context.next){case 0:columnStore=this.columnStore,numRows=this.numRows,index=0;case 2:if(!(index<numRows)){_context.next=8;break}return _context.next=5,CoreTableUtils_1.makeRowFromColumnStore(index,columnStore);case 5:index++,_context.next=2;break;case 8:case"end":return _context.stop()}}),value,this)}))},{key:"getTimesAtIndices",value:function getTimesAtIndices(indices){return indices.length?this.getValuesAtIndices(this.timeColumn.slug,indices):[]}},{key:"getValuesAtIndices",value:function getValuesAtIndices(columnSlug,indices){var values=this.get(columnSlug).valuesIncludingErrorValues;return indices.map((function(index){return values[index]}))}},{key:"firstRow",get:function get(){return CoreTableUtils_1.makeRowFromColumnStore(0,this.columnStore)}},{key:"lastRow",get:function get(){return CoreTableUtils_1.makeRowFromColumnStore(this.numRows-1,this.columnStore)}},{key:"numRows",get:function get(){var firstColValues=Object.values(this.columnStore)[0];return firstColValues?firstColValues.length:0}},{key:"numColumns",get:function get(){return this.columnSlugs.length}},{key:"get",value:function get(columnSlug){var _a;return void 0===columnSlug?new CoreTableColumns_1.MissingColumn(this,{slug:"undefined_slug"}):null!==(_a=this._columns.get(columnSlug))&&void 0!==_a?_a:new CoreTableColumns_1.MissingColumn(this,{slug:columnSlug})}},{key:"has",value:function has(columnSlug){return void 0!==columnSlug&&this._columns.has(columnSlug)}},{key:"getFirstColumnWithType",value:function getFirstColumnWithType(columnTypeName){return this.columnsAsArray.find((function(col){return col.def.type===columnTypeName}))}},{key:"timeColumn",get:function get(){var _a,_b,_c,_d,maybeTimeColumn=this.get(OwidTableConstants_1.OwidTableSlugs.time);return maybeTimeColumn instanceof CoreTableColumns_1.ColumnTypeMap.Time?maybeTimeColumn:null!==(_d=null!==(_c=null!==(_b=null!==(_a=this.columnsAsArray.find((function(col){return col instanceof CoreTableColumns_1.ColumnTypeMap.Day})))&&void 0!==_a?_a:this.columnsAsArray.find((function(col){return col instanceof CoreTableColumns_1.ColumnTypeMap.Date})))&&void 0!==_b?_b:this.columnsAsArray.find((function(col){return col instanceof CoreTableColumns_1.ColumnTypeMap.Year})))&&void 0!==_c?_c:this.columnsAsArray.find((function(col){return col instanceof CoreTableColumns_1.ColumnTypeMap.Quarter})))&&void 0!==_d?_d:maybeTimeColumn}},{key:"entityNameColumn",get:function get(){var _a;return null!==(_a=this.getFirstColumnWithType(CoreColumnDef_1.ColumnTypeNames.EntityName))&&void 0!==_a?_a:this.get(OwidTableConstants_1.OwidTableSlugs.entityName)}},{key:"entityNameSlug",get:function get(){return this.entityNameColumn.slug}},{key:"timeColumnFormatFunction",get:function get(){return this.timeColumn.isMissing?Util_1.formatYear:this.timeColumn.formatValue}},{key:"formatTime",value:function formatTime(value){return this.timeColumnFormatFunction(value)}},{key:"columnsWithParseErrors",get:function get(){return this.columnsAsArray.filter((function(col){return col.numErrorValues}))}},{key:"numColumnsWithErrorValues",get:function get(){return this.columnsWithParseErrors.length}},{key:"numErrorValues",get:function get(){return Util_1.sum(this.columnsAsArray.map((function(col){return col.numErrorValues})))}},{key:"numValidCells",get:function get(){return Util_1.sum(this.columnsAsArray.map((function(col){return col.numValues})))}},{key:"rootTable",get:function get(){return this.parent?this.parent.rootTable:this}},{key:"rowIndex",value:function rowIndex(columnSlugs){var index=new Map,keyFn=CoreTableUtils_1.makeKeyFn(this.columnStore,columnSlugs);return this.indices.forEach((function(rowIndex){var key=keyFn(rowIndex);index.has(key)||index.set(key,[]),index.get(key).push(rowIndex)})),index}},{key:"valueIndex",value:function valueIndex(indexColumnSlug,valueColumnSlug){var indexCol=this.get(indexColumnSlug),valueCol=this.get(valueColumnSlug),indexValues=indexCol.valuesIncludingErrorValues,valueValues=valueCol.valuesIncludingErrorValues,valueIndices=new Set(valueCol.validRowIndices),intersection=indexCol.validRowIndices.filter((function(index){return valueIndices.has(index)})),map=new Map;return intersection.forEach((function(index){map.set(indexValues[index],valueValues[index])})),map}},{key:"grep",value:function grep(searchStringOrRegex){return this.rowFilter((function(row){var line=Object.values(row).join(" ");return"string"==typeof searchStringOrRegex?line.includes(searchStringOrRegex):searchStringOrRegex.test(line)}),"Kept rows that matched '".concat(searchStringOrRegex.toString(),"'"))}},{key:"opposite",get:function get(){var parent=this.parent,filterMask=this.advancedOptions.filterMask;return filterMask&&parent?this.transform(parent.columnStore,this.defs,"Inversing previous filter",CoreTableConstants_1.TransformType.InverseFilterRows,filterMask.inverse()):this}},{key:"oppositeColumns",get:function get(){if(this.isRoot)return this;var columnsToDrop=new Set(this.columnSlugs),defs=this.parent.columnsAsArray.filter((function(col){return!columnsToDrop.has(col.slug)})).map((function(col){return col.def}));return this.transform(this.columnStore,defs,"Inversing previous column filter",CoreTableConstants_1.TransformType.InverseFilterColumns)}},{key:"grepColumns",value:function grepColumns(searchStringOrRegex){var columnsToDrop=this.columnSlugs.filter((function(slug){return"string"==typeof searchStringOrRegex?!slug.includes(searchStringOrRegex):!searchStringOrRegex.test(slug)}));return this.dropColumns(columnsToDrop,"Kept ".concat(this.columnSlugs.length-columnsToDrop.length," columns that matched '").concat(searchStringOrRegex.toString(),"'."))}},{key:"rowFilter",value:function rowFilter(predicate,opName){return this.transform(this.columnStore,this.defs,opName,CoreTableConstants_1.TransformType.FilterRows,new FilterMask(this.numRows,this.rows.map(predicate)))}},{key:"columnFilter",value:function columnFilter(columnSlug,predicate,opName){return this.transform(this.columnStore,this.defs,opName,CoreTableConstants_1.TransformType.FilterRows,new FilterMask(this.numRows,this.get(columnSlug).valuesIncludingErrorValues.map(predicate)))}},{key:"sortBy",value:function sortBy(slugs){return this.transform(CoreTableUtils_1.sortColumnStore(this.columnStore,slugs),this.defs,"Sort by ".concat(slugs.join(",")),CoreTableConstants_1.TransformType.SortRows)}},{key:"sortColumns",value:function sortColumns(slugs){var first=this.getColumns(slugs),rest=this.columnsAsArray.filter((function(col){return!first.includes(col)}));return this.transform(this.columnStore,[].concat(_toConsumableArray(first),_toConsumableArray(rest)).map((function(col){return col.def})),"Sorted columns",CoreTableConstants_1.TransformType.SortColumns)}},{key:"reverse",value:function reverse(){return this.transform(CoreTableUtils_1.reverseColumnStore(this.columnStore),this.defs,"Reversed row order",CoreTableConstants_1.TransformType.SortRows)}},{key:"groupBoundaries",value:function groupBoundaries(columnSlug){var last,values=this.get(columnSlug).valuesIncludingErrorValues,arr=[];return this.get(columnSlug).valuesIncludingErrorValues.forEach((function(val,index){val!==last&&(arr.push(index),last=val)})),values&&values.length&&arr.push(values.length),arr}},{key:"defs",get:function get(){return this.columnsAsArray.map((function(col){return col.def}))}},{key:"columnNames",get:function get(){return this.columnsAsArray.map((function(col){return col.name}))}},{key:"columnTypes",get:function get(){return this.columnsAsArray.map((function(col){return col.def.type}))}},{key:"columnJsTypes",get:function get(){return this.columnsAsArray.map((function(col){return col.jsType}))}},{key:"columnSlugs",get:function get(){return Array.from(this._columns.keys())}},{key:"numericColumnSlugs",get:function get(){return this._numericColumnSlugs}},{key:"_numericColumnSlugs",get:function get(){return this._columnsAsArray.filter((function(col){return col instanceof CoreTableColumns_1.ColumnTypeMap.Numeric})).map((function(col){return col.slug}))}},{key:"_columnsAsArray",get:function get(){return Array.from(this._columns.values())}},{key:"columnsAsArray",get:function get(){return this._columnsAsArray}},{key:"getColumns",value:function getColumns(slugs){var _this2=this;return slugs.map((function(slug){return _this2.get(slug)}))}},{key:"domainFor",value:function domainFor(slugs){var cols=this.getColumns(slugs),mins=cols.map((function(col){return col.minValue})),maxes=cols.map((function(col){return col.maxValue}));return[Util_1.min(mins),Util_1.max(maxes)]}},{key:"extract",value:function extract(){var slugs=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.columnSlugs;return this.rows.map((function(row){return slugs.map((function(slug){return ErrorValues_1.isNotErrorValue(row[slug])?row[slug]:void 0}))}))}},{key:"isRoot",get:function get(){return!this.parent}},{key:"dump",value:function dump(){var rowLimit=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;this.dumpPipeline(),this.dumpColumns(),this.dumpRows(rowLimit)}},{key:"dumpPipeline",value:function dumpPipeline(){console.table(this.ancestors.map((function(tb){return tb.explanation})))}},{key:"dumpColumns",value:function dumpColumns(){console.table(this.explainColumns)}},{key:"rowsFrom",value:function rowsFrom(start,end){var _this3=this;return start>=this.numRows?[]:(end>this.numRows&&(end=this.numRows),Util_1.range(start,end).map((function(index){return CoreTableUtils_1.makeRowFromColumnStore(index,_this3.columnStore)})))}},{key:"dumpRows",value:function dumpRows(){var rowLimit=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;console.table(this.rowsFrom(0,rowLimit),this.columnSlugs)}},{key:"dumpInputTable",value:function dumpInputTable(){console.table(this.inputAsTable)}},{key:"inputType",get:function get(){var originalInput=this.originalInput;return"string"==typeof originalInput?CoreTableConstants_1.InputType.Delimited:Array.isArray(originalInput)?Array.isArray(originalInput[0])?CoreTableConstants_1.InputType.Matrix:CoreTableConstants_1.InputType.RowStore:CoreTableConstants_1.InputType.ColumnStore}},{key:"inputColumnStoreToRows",get:function get(){return CoreTableUtils_1.columnStoreToRows(this.inputColumnStore)}},{key:"inputAsTable",get:function get(){var inputType=this.inputType;return inputType===CoreTableConstants_1.InputType.ColumnStore?this.inputColumnStoreToRows:inputType===CoreTableConstants_1.InputType.Matrix?CoreTableUtils_1.rowsFromMatrix(this.originalInput):this.originalInput}},{key:"explainColumns",get:function get(){return this.columnsAsArray.map((function(col){var slug=col.slug,jsType=col.jsType,name=col.name,numValues=col.numValues,numErrorValues=col.numErrorValues,displayName=col.displayName,def=col.def;return{slug:slug,type:def.type,jsType:jsType,name:name,numValues:numValues,numErrorValues:numErrorValues,displayName:displayName,color:def.color}}))}},{key:"ancestors",get:function get(){return this.parent?[].concat(_toConsumableArray(this.parent.ancestors),[this]):[this]}},{key:"numColsToParse",get:function get(){return this.colsToParse.length}},{key:"explanation",get:function get(){var tableDescription=this.tableDescription,transformCategory=this.transformCategory,guid=this.guid,numColumns=this.numColumns,numRows=this.numRows,betweenTime=this.betweenTime,timeToLoad=this.timeToLoad,numColsToParse=this.numColsToParse,numValidCells=this.numValidCells,numErrorValues=this.numErrorValues,numColumnsWithErrorValues=this.numColumnsWithErrorValues;return{tableDescription:CoreTableUtils_1.truncate(tableDescription,40),transformCategory:transformCategory,guid:guid,numColumns:numColumns,numRows:numRows,betweenTime:betweenTime,timeToLoad:timeToLoad,numColsToParse:numColsToParse,numValidCells:numValidCells,numErrorValues:numErrorValues,numColumnsWithErrorValues:numColumnsWithErrorValues}}},{key:"toAlignedTextTable",value:function toAlignedTextTable(options){return CoreTablePrinters_1.toAlignedTextTable(this.columnSlugs,this.rows,options)}},{key:"toMarkdownTable",value:function toMarkdownTable(){return CoreTablePrinters_1.toMarkdownTable(this.columnSlugs,this.rows)}},{key:"toDelimited",value:function toDelimited(){var delimiter=arguments.length>0&&void 0!==arguments[0]?arguments[0]:",",columnSlugs=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.columnSlugs,rows=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.rows;return CoreTablePrinters_1.toDelimited(delimiter,columnSlugs,rows)}},{key:"toTsv",value:function toTsv(){return this.toDelimited("\t")}},{key:"toCsvWithColumnNames",value:function toCsvWithColumnNames(){var _this4=this;return this.columnsAsArray.map((function(col){return Util_1.csvEscape(col.name)})).join(",")+"\n"+this.rows.map((function(row){return _this4.columnsAsArray.map((function(col){var _a;return null!==(_a=col.formatForCsv(row[col.slug]))&&void 0!==_a?_a:""}))})).map((function(row){return row.join(",")})).join("\n")}},{key:"constantColumns",get:function get(){return this.columnsAsArray.filter((function(col){return col.isConstant}))}},{key:"rowsAt",value:function rowsAt(indices){var columnStore=this.columnStore;return indices.map((function(index){return CoreTableUtils_1.makeRowFromColumnStore(index,columnStore)}))}},{key:"findRows",value:function findRows(query){return this.rowsAt(this.findRowsIndices(query))}},{key:"findRowsIndices",value:function findRowsIndices(query){var slugs=Object.keys(query);if(!slugs.length)return this.indices;var arrs=this.getColumns(slugs).map((function(col){return col.indicesWhere(query[col.slug])}));return Util_1.intersection.apply(Util_1,_toConsumableArray(arrs))}},{key:"indexOf",value:function indexOf(row){var _a;return null!==(_a=this.findRowsIndices(row)[0])&&void 0!==_a?_a:-1}},{key:"where",value:function where(query){var rows=this.findRows(query),queryDescription=Object.entries(query).map((function(_ref){var _ref2=_slicedToArray(_ref,2),col=_ref2[0],value=_ref2[1];return"".concat(col,"=").concat(value)})).join("&");return this.transform(rows,this.defs,"Selecting ".concat(rows.length," rows where ").concat(queryDescription),CoreTableConstants_1.TransformType.FilterRows)}},{key:"appendRows",value:function appendRows(rows,opDescription){return this.concat([new this.constructor(rows,this.defs)],opDescription)}},{key:"limit",value:function limit(howMany){var offset=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,start=offset,end=offset+howMany;return this.transform(this.columnStore,this.defs,"Kept ".concat(howMany," rows starting at ").concat(offset),CoreTableConstants_1.TransformType.FilterRows,new FilterMask(this.numRows,this.indices.map((function(index){return index>=start&&index<end}))))}},{key:"updateDefs",value:function updateDefs(fn){return this.transform(this.columnStore,this.defs.map(fn),"Updated column defs",CoreTableConstants_1.TransformType.UpdateColumnDefs)}},{key:"limitColumns",value:function limitColumns(howMany){var offset=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,slugs=this.columnSlugs.slice(offset,howMany+offset);return this.dropColumns(slugs,"Kept ".concat(howMany," columns and dropped '").concat(slugs,"'"))}},{key:"select",value:function select(slugs){var _this5=this,columnsToKeep=new Set(slugs),newStore={},defs=this.columnsAsArray.filter((function(col){return columnsToKeep.has(col.slug)})).map((function(col){return col.def}));return Object.keys(this.columnStore).filter((function(slug){return columnsToKeep.has(slug)})).forEach((function(slug){newStore[slug]=_this5.columnStore[slug]})),this.transform(newStore,defs,"Kept columns '".concat(slugs,"'"),CoreTableConstants_1.TransformType.FilterColumns)}},{key:"dropColumns",value:function dropColumns(slugs,message){var columnsToDrop=new Set(slugs),newStore=Object.assign({},this.columnStore),defs=this.columnsAsArray.filter((function(col){return!columnsToDrop.has(col.slug)})).map((function(col){return col.def}));return slugs.forEach((function(slug){delete newStore[slug]})),this.transform(newStore,defs,null!=message?message:"Dropped columns '".concat(slugs,"'"),CoreTableConstants_1.TransformType.FilterColumns)}},{key:"duplicateRowIndices",get:function get(){var keyFn=CoreTableUtils_1.makeKeyFn(this.columnStore,this.columnSlugs),dupeSet=new Set,dupeIndices=[];return this.indices.forEach((function(rowIndex){var key=keyFn(rowIndex);dupeSet.has(key)?dupeIndices.push(rowIndex):dupeSet.add(key)})),dupeIndices}},{key:"dropDuplicateRows",value:function dropDuplicateRows(){return this.dropRowsAt(this.duplicateRowIndices)}},{key:"isRowEmpty",value:function isRowEmpty(index){var columnStore=this.columnStore;return 0===this.columnSlugs.map((function(slug){return columnStore[slug][index]})).filter((function(value){return ErrorValues_1.isNotErrorValue(value)&&""!==value})).length}},{key:"dropEmptyRows",value:function dropEmptyRows(){var _this6=this;return this.dropRowsAt(this.indices.map((function(index){return _this6.isRowEmpty(index)?index:null})).filter(isPresent_1.isPresent))}},{key:"renameColumn",value:function renameColumn(oldSlug,newSlug){return this.renameColumns(_defineProperty({},oldSlug,newSlug))}},{key:"renameColumns",value:function renameColumns(columnRenameMap){var oldSlugs=Object.keys(columnRenameMap),newSlugs=Object.values(columnRenameMap),message="Renamed "+oldSlugs.map((function(name,index){return"'".concat(name,"' to '").concat(newSlugs[index],"'")})).join(" and ");return this.transform(CoreTableUtils_1.renameColumnStore(this.columnStore,columnRenameMap),this.defs.map((function(def){return oldSlugs.indexOf(def.slug)>-1?Object.assign(Object.assign({},def),{slug:newSlugs[oldSlugs.indexOf(def.slug)]}):def})),message,CoreTableConstants_1.TransformType.RenameColumns)}},{key:"dropRowsAt",value:function dropRowsAt(indices,message){return this.transform(this.columnStore,this.defs,null!=message?message:"Dropping ".concat(indices.length," rows"),CoreTableConstants_1.TransformType.FilterRows,new FilterMask(this.numRows,indices,!1))}},{key:"dropRandomRows",value:function dropRandomRows(){var howMany=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,seed=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();if(!howMany)return this;var indexesToDrop=CoreTableUtils_1.getDropIndexes(this.numRows,howMany,seed);return this.dropRowsAt(Array.from(indexesToDrop.values()),"Dropping a random ".concat(howMany," rows"))}},{key:"replaceNonPositiveCellsForLogScale",value:function replaceNonPositiveCellsForLogScale(){var columnSlugs=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.transform(CoreTableUtils_1.replaceCells(this.columnStore,columnSlugs,(function(val){return val<=0?ErrorValues_1.ErrorValueTypes.InvalidOnALogScale:val})),this.defs,"Replaced negative or zero cells across columns ".concat(columnSlugs.join(" and ")),CoreTableConstants_1.TransformType.UpdateRows)}},{key:"replaceNonNumericCellsWithErrorValues",value:function replaceNonNumericCellsWithErrorValues(columnSlugs){return this.transform(CoreTableUtils_1.replaceCells(this.columnStore,columnSlugs,(function(val){return Util_1.isNumber(val)?val:ErrorValues_1.ErrorValueTypes.NaNButShouldBeNumber})),this.defs,"Replaced non-numeric cells across columns ".concat(columnSlugs.join(", ")),CoreTableConstants_1.TransformType.UpdateRows)}},{key:"replaceRandomCells",value:function replaceRandomCells(){var howMany=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,columnSlugs=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],seed=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now(),replacementGenerator=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){return ErrorValues_1.ErrorValueTypes.DroppedForTesting};return this.transform(CoreTableUtils_1.replaceRandomCellsInColumnStore(this.columnStore,howMany,columnSlugs,seed,replacementGenerator),this.defs,"Replaced a random ".concat(howMany," cells in ").concat(columnSlugs.join(" and ")),CoreTableConstants_1.TransformType.UpdateRows)}},{key:"dropRandomPercent",value:function dropRandomPercent(){var dropHowMuch=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,seed=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();return this.dropRandomRows(Math.floor(dropHowMuch/100*this.numRows),seed)}},{key:"isGreaterThan",value:function isGreaterThan(columnSlug,value,opName){return this.columnFilter(columnSlug,(function(colValue){return colValue>value}),null!=opName?opName:"Filter where ".concat(columnSlug," > ").concat(value))}},{key:"filterNegativesForLogScale",value:function filterNegativesForLogScale(columnSlug){return this.isGreaterThan(columnSlug,0,"Remove rows if ".concat(columnSlug," is <= 0 for log scale"))}},{key:"filterNegatives",value:function filterNegatives(slug){return this.columnFilter(slug,(function(value){return value>=0}),"Filter negative values for ".concat(slug))}},{key:"appendColumns",value:function appendColumns(defs){return this.transform(this.columnStore,this.defs.concat(defs),"Appended columns ".concat(defs.map((function(def){return"'".concat(def.slug,"'")})).join(" and ")),CoreTableConstants_1.TransformType.AppendColumns)}},{key:"duplicateColumn",value:function duplicateColumn(slug,overrides){return this.transform(Object.assign(Object.assign({},this.columnStore),_defineProperty({},overrides.slug,this.columnStore[slug])),this.defs.concat([Object.assign(Object.assign({},this.get(slug).def),overrides)]),"Duplicated column '".concat(slug,"' to column '").concat(overrides.slug,"'"),CoreTableConstants_1.TransformType.AppendColumns)}},{key:"transpose",value:function transpose(by){var columnTypeNameForNewColumns=arguments.length>1&&void 0!==arguments[1]?arguments[1]:CoreColumnDef_1.ColumnTypeNames.Numeric,newColumnSlugs=[by].concat(_toConsumableArray(this.get(by).uniqValues)),newColumnDefs=newColumnSlugs.map((function(slug){return slug===by?{slug:slug}:{type:columnTypeNameForNewColumns,slug:slug}})),newRowValues=this.columnsAsArray.filter((function(col){return col.slug!==by})).map((function(col){return[col.slug].concat(_toConsumableArray(col.valuesIncludingErrorValues))}));return this.transform([newColumnSlugs].concat(_toConsumableArray(newRowValues)),newColumnDefs,"Transposed",CoreTableConstants_1.TransformType.Transpose)}},{key:"columnIntersection",value:function columnIntersection(tables){return Util_1.intersection.apply(Util_1,[this.columnSlugs].concat(_toConsumableArray(tables.map((function(table){return table.columnSlugs})))))}},{key:"intersectingRowIndices",value:function intersectingRowIndices(tables){var columnSlugs=this.columnIntersection(tables);if(!columnSlugs.length)return[];var thisIndex=this.rowIndex(columnSlugs),indices=[thisIndex].concat(_toConsumableArray(tables.map((function(table){return table.rowIndex(columnSlugs)})))),keys=Util_1.intersectionOfSets(indices.map((function(index){return new Set(index.keys())})));return Array.from(keys).map((function(key){return thisIndex.get(key)[0]}))}},{key:"intersection",value:function intersection(tables){return this.transform(this.columnStore,this.defs,"Keeping only rows also in all tables",CoreTableConstants_1.TransformType.FilterRows,new FilterMask(this.numRows,this.intersectingRowIndices(tables),!0))}},{key:"difference",value:function difference(tables){return this.transform(this.columnStore,this.defs,"Keeping only rows not in all other tables",CoreTableConstants_1.TransformType.FilterRows,new FilterMask(this.numRows,this.intersectingRowIndices(tables),!1))}},{key:"appendColumnsIfNew",value:function appendColumnsIfNew(defs){var _this7=this;return this.appendColumns(defs.filter((function(def){return!_this7.has(def.slug)})))}},{key:"toMatrix",value:function toMatrix(){var slugs=this.columnSlugs,rows=this.rows.map((function(row){return slugs.map((function(slug){return ErrorValues_1.isNotErrorValue(row[slug])?row[slug]:void 0}))}));return[this.columnSlugs].concat(_toConsumableArray(rows))}},{key:"toTypedMatrix",value:function toTypedMatrix(){var slugs=this.columnSlugs,rows=this.rows.map((function(row){return slugs.map((function(slug){return row[slug]}))}));return[this.columnSlugs].concat(_toConsumableArray(rows))}},{key:"defToObject",value:function defToObject(){var output={};return this.columnsAsArray.forEach((function(col){output[col.slug]=col.def})),output}},{key:"toJs",value:function toJs(){return{columns:this.defToObject(),rows:this.rows}}},{key:"join",value:function join(destinationTable,sourceTable,by){by=null!=by?by:Util_1.intersection(sourceTable.columnSlugs,destinationTable.columnSlugs);var columnSlugsToAdd=Util_1.difference(sourceTable.columnSlugs,destinationTable.columnSlugs),defsToAdd=sourceTable.getColumns(columnSlugsToAdd).map((function(col){var def=Object.assign({},col.def);return def.values=[],def})),rightIndex=sourceTable.rowIndex(by),sourceColumns=sourceTable.columnStore,keyFn=CoreTableUtils_1.makeKeyFn(destinationTable.columnStore,by);return destinationTable.indices.forEach((function(rowIndex){var matchingRightRowIndex=rightIndex.get(keyFn(rowIndex));defsToAdd.forEach((function(def){var _a,_b;void 0!==matchingRightRowIndex?null===(_a=def.values)||void 0===_a||_a.push(sourceColumns[def.slug][matchingRightRowIndex[0]]):null===(_b=def.values)||void 0===_b||_b.push(ErrorValues_1.ErrorValueTypes.NoMatchingValueAfterJoin)}))})),defsToAdd}},{key:"concat",value:function concat(tables){var message=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Combined tables",all=[this].concat(_toConsumableArray(tables)),defs=Util_1.flatten(all.map((function(table){return table.defs}))),uniqDefs=Util_1.uniqBy(defs,(function(def){return def.slug}));return this.transform(CoreTableUtils_1.concatColumnStores(all.map((function(table){return table.columnStore})),uniqDefs.map((function(def){return def.slug}))),uniqDefs,message,CoreTableConstants_1.TransformType.Concat)}},{key:"complete",value:function complete(columnSlugs){var index=this.rowIndex(columnSlugs),cols=this.getColumns(columnSlugs),toAdd=CoreTableUtils_1.cartesianProduct.apply(CoreTableUtils_1,_toConsumableArray(cols.map((function(col){return col.uniqValues})))).filter((function(row){return!index.has(row.join(" "))}));return this.appendRows(CoreTableUtils_1.rowsFromMatrix([columnSlugs].concat(_toConsumableArray(toAdd))),"Append missing combos of ".concat(columnSlugs))}},{key:"leftJoin",value:function leftJoin(rightTable,by){return this.appendColumns(this.join(this,rightTable,by))}},{key:"rightJoin",value:function rightJoin(rightTable,by){return rightTable.leftJoin(this,by)}},{key:"innerJoin",value:function innerJoin(rightTable,by){var defs=this.join(this,rightTable,by),newValues=defs.map((function(def){return def.values})),rowsToDrop=[];return newValues.forEach((function(col){null==col||col.forEach((function(value,index){value===ErrorValues_1.ErrorValueTypes.NoMatchingValueAfterJoin&&rowsToDrop.push(index)}))})),this.appendColumns(defs).dropRowsAt(rowsToDrop)}},{key:"fullJoin",value:function fullJoin(rightTable,by){return this.leftJoin(rightTable,by).concat([rightTable.leftJoin(this,by)]).dropDuplicateRows()}},{key:"union",value:function union(tables){return this.concat(tables).dropDuplicateRows()}},{key:"indexBy",value:function indexBy(slug){var map=new Map;return this.get(slug).values.map((function(value,index){map.has(value)||map.set(value,[]),map.get(value).push(index)})),map}},{key:"groupBy",value:function groupBy(by){var _this8=this,index=this.indexBy(by);return Array.from(index.keys()).map((function(groupName){return _this8.transform(_this8.columnStore,_this8.defs,"Rows for group ".concat(groupName),CoreTableConstants_1.TransformType.FilterRows,new FilterMask(_this8.numRows,index.get(groupName)))}))}},{key:"reduce",value:function reduce(reductionMap){var _this9=this,lastRow=Object.assign({},this.lastRow);return Object.keys(reductionMap).forEach((function(slug){var prop=reductionMap[slug],col=_this9.get(slug);lastRow[slug]="string"==typeof prop?col[prop]:prop(col)})),this.transform(CoreTableUtils_1.rowsToColumnStore([lastRow]),this.defs,"Reduced table",CoreTableConstants_1.TransformType.Reduce)}}]),CoreTable}();CoreTable.guids=0,__decorate([CoreTableUtils_1.imemo],CoreTable.prototype,"transformCategory",null),__decorate([CoreTableUtils_1.imemo],CoreTable.prototype,"inputColumnStore",null),__decorate([CoreTableUtils_1.imemo],CoreTable.prototype,"columnStore",null),__decorate([CoreTableUtils_1.imemo],CoreTable.prototype,"delimitedAsColumnStore",null),__decorate([CoreTableUtils_1.imemo],CoreTable.prototype,"rows",null),__decorate([CoreTableUtils_1.imemo],CoreTable.prototype,"indices",null),__decorate([CoreTableUtils_1.imemo],CoreTable.prototype,"firstRow",null),__decorate([CoreTableUtils_1.imemo],CoreTable.prototype,"lastRow",null),__decorate([CoreTableUtils_1.imemo],CoreTable.prototype,"numRows",null),__decorate([CoreTableUtils_1.imemo],CoreTable.prototype,"numColumns",null),__decorate([CoreTableUtils_1.imemo],CoreTable.prototype,"timeColumn",null),__decorate([CoreTableUtils_1.imemo],CoreTable.prototype,"entityNameColumn",null),__decorate([CoreTableUtils_1.imemo],CoreTable.prototype,"entityNameSlug",null),__decorate([CoreTableUtils_1.imemo],CoreTable.prototype,"timeColumnFormatFunction",null),__decorate([CoreTableUtils_1.imemo],CoreTable.prototype,"columnsWithParseErrors",null),__decorate([CoreTableUtils_1.imemo],CoreTable.prototype,"numColumnsWithErrorValues",null),__decorate([CoreTableUtils_1.imemo],CoreTable.prototype,"numErrorValues",null),__decorate([CoreTableUtils_1.imemo],CoreTable.prototype,"numValidCells",null),__decorate([CoreTableUtils_1.imemo],CoreTable.prototype,"oppositeColumns",null),__decorate([CoreTableUtils_1.imemo],CoreTable.prototype,"defs",null),__decorate([CoreTableUtils_1.imemo],CoreTable.prototype,"columnNames",null),__decorate([CoreTableUtils_1.imemo],CoreTable.prototype,"columnTypes",null),__decorate([CoreTableUtils_1.imemo],CoreTable.prototype,"columnJsTypes",null),__decorate([CoreTableUtils_1.imemo],CoreTable.prototype,"columnSlugs",null),__decorate([CoreTableUtils_1.imemo],CoreTable.prototype,"numericColumnSlugs",null),__decorate([CoreTableUtils_1.imemo],CoreTable.prototype,"columnsAsArray",null),__decorate([CoreTableUtils_1.imemo],CoreTable.prototype,"inputType",null),__decorate([CoreTableUtils_1.imemo],CoreTable.prototype,"inputColumnStoreToRows",null),__decorate([CoreTableUtils_1.imemo],CoreTable.prototype,"inputAsTable",null),__decorate([CoreTableUtils_1.imemo],CoreTable.prototype,"explainColumns",null),__decorate([CoreTableUtils_1.imemo],CoreTable.prototype,"numColsToParse",null),__decorate([CoreTableUtils_1.imemo],CoreTable.prototype,"duplicateRowIndices",null),exports.CoreTable=CoreTable;var FilterMask=function(){function FilterMask(numRows,input){var keepThese=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(_classCallCheck(this,FilterMask),this.numRows=numRows,"boolean"==typeof input[0])this.mask=input;else{var set=new Set(input);this.mask=Util_1.range(0,numRows).map((function(index){return set.has(index)?keepThese:!keepThese}))}}return _createClass(FilterMask,[{key:"inverse",value:function inverse(){return new FilterMask(this.numRows,this.mask.map((function(bit){return!bit})))}},{key:"apply",value:function apply(columnStore){var _this10=this,columnsObject={};return Object.keys(columnStore).forEach((function(slug){columnsObject[slug]=columnStore[slug].filter((function(slug,index){return _this10.mask[index]}))})),columnsObject}}]),FilterMask}();exports.columnDefinitionsFromDelimited=function columnDefinitionsFromDelimited(delimited){return new CoreTable(delimited.trim()).columnFilter("slug",(function(value){return!!value}),"Keep only column defs with a slug").rows}},600:function(module,exports,__webpack_require__){"use strict";__webpack_require__(31),__webpack_require__(28),__webpack_require__(119),__webpack_require__(39),Object.defineProperty(exports,"__esModule",{value:!0}),exports.GrapherGrammar=void 0;var GridLangConstants_1=__webpack_require__(240),GrapherConstants_1=__webpack_require__(64),ColorSchemes_1=__webpack_require__(321),owidTypes_1=__webpack_require__(122);exports.GrapherGrammar={title:Object.assign(Object.assign({},GridLangConstants_1.StringCellDef),{keyword:"title",description:"Chart title",valuePlaceholder:"Life Expectancy around the world."}),subtitle:Object.assign(Object.assign({},GridLangConstants_1.StringCellDef),{keyword:"subtitle",description:"Chart subtitle",valuePlaceholder:"Life Expectancy has risen over time."}),ySlugs:Object.assign(Object.assign({},GridLangConstants_1.SlugsDeclarationCellDef),{description:"ColumnSlug(s) for the yAxis",keyword:"ySlugs"}),type:Object.assign(Object.assign({},GridLangConstants_1.StringCellDef),{keyword:"type",description:"The type of chart to show such as LineChart or ScatterPlot.",terminalOptions:Object.values(GrapherConstants_1.ChartTypeName).map((function(keyword){return{keyword:keyword,description:"",cssClass:""}}))}),grapherId:Object.assign(Object.assign({},GridLangConstants_1.IntegerCellDef),{description:"ID of a legacy Grapher to load",keyword:"grapherId"}),tableSlug:Object.assign(Object.assign({},GridLangConstants_1.SlugDeclarationCellDef),{description:"Slug of the table to use.",keyword:"tableSlug"}),hasMapTab:Object.assign(Object.assign({},GridLangConstants_1.BooleanCellDef),{keyword:"hasMapTab",description:"Show the map tab?"}),tab:Object.assign(Object.assign({},GridLangConstants_1.EnumCellDef),{keyword:"tab",description:"Which tab to show by default",terminalOptions:Object.values(GrapherConstants_1.GrapherTabOption).map((function(keyword){return{keyword:keyword,description:"",cssClass:""}}))}),hasChartTab:Object.assign(Object.assign({},GridLangConstants_1.BooleanCellDef),{keyword:"hasChartTab",description:"Show the chart tab?"}),xSlug:Object.assign(Object.assign({},GridLangConstants_1.SlugDeclarationCellDef),{description:"ColumnSlug for the xAxis",keyword:"xSlug"}),colorSlug:Object.assign(Object.assign({},GridLangConstants_1.SlugDeclarationCellDef),{description:"ColumnSlug for the color",keyword:"colorSlug"}),sizeSlug:Object.assign(Object.assign({},GridLangConstants_1.SlugDeclarationCellDef),{description:"ColumnSlug for the size of points on scatters",keyword:"sizeSlug"}),tableSlugs:Object.assign(Object.assign({},GridLangConstants_1.SlugsDeclarationCellDef),{description:"ColumnSlug(s) for the Table tab. If not specified all active slugs will be used.",keyword:"tableSlugs"}),sourceDesc:Object.assign(Object.assign({},GridLangConstants_1.StringCellDef),{keyword:"sourceDesc",description:"Short comma-separated list of source names"}),facet:Object.assign(Object.assign({},GridLangConstants_1.EnumCellDef),{description:"Facet by column or entities",keyword:"facet",terminalOptions:Object.values(GrapherConstants_1.FacetStrategy).map((function(keyword){return{keyword:keyword,description:"",cssClass:""}}))}),hideTitleAnnotation:Object.assign(Object.assign({},GridLangConstants_1.BooleanCellDef),{description:"Hide automatic time/entity",keyword:"hideTitleAnnotation"}),backgroundSeriesLimit:Object.assign(Object.assign({},GridLangConstants_1.IntegerCellDef),{description:"Set this to limit the number of background series shown on ScatterPlots.",keyword:"backgroundSeriesLimit"}),yScaleToggle:Object.assign(Object.assign({},GridLangConstants_1.BooleanCellDef),{keyword:"yScaleToggle",description:"Set to 'true' if the user can change the yAxis"}),yAxisMin:Object.assign(Object.assign({},GridLangConstants_1.NumericCellDef),{keyword:"yAxisMin",description:"Set the minimum value for the yAxis"}),facetYDomain:Object.assign(Object.assign({},GridLangConstants_1.EnumCellDef),{keyword:"facetYDomain",description:"Whether facets axes default to shared or independent domain",terminalOptions:Object.keys(GrapherConstants_1.FacetAxisDomain).map((function(keyword){return{keyword:keyword,description:"",cssClass:""}}))}),selectedFacetStrategy:Object.assign(Object.assign({},GridLangConstants_1.EnumCellDef),{keyword:"selectedFacetStrategy",description:"Whether the chart should be faceted or not",terminalOptions:Object.values(GrapherConstants_1.FacetStrategy).map((function(keyword){return{keyword:keyword,description:"",cssClass:""}}))}),baseColorScheme:Object.assign(Object.assign({},GridLangConstants_1.EnumCellDef),{keyword:"baseColorScheme",description:"The default color scheme if no color overrides are specified",terminalOptions:Object.keys(ColorSchemes_1.ColorSchemes).map((function(keyword){return{keyword:keyword,description:"",cssClass:""}}))}),note:Object.assign(Object.assign({},GridLangConstants_1.StringCellDef),{keyword:"note",description:"Chart footnote"}),sortBy:Object.assign(Object.assign({},GridLangConstants_1.EnumCellDef),{keyword:"sortBy",description:"Specify what to sort the entities by",terminalOptions:Object.keys(owidTypes_1.SortBy).map((function(keyword){return{keyword:keyword,description:"",cssClass:""}}))}),sortOrder:Object.assign(Object.assign({},GridLangConstants_1.EnumCellDef),{keyword:"sortOrder",description:"Whether to sort entities ascending or descending",terminalOptions:Object.keys(owidTypes_1.SortOrder).map((function(keyword){return{keyword:keyword,description:"",cssClass:""}}))}),sortColumnSlug:Object.assign(Object.assign({},GridLangConstants_1.EnumCellDef),{keyword:"sortColumnSlug",description:"This setting is only respected when `sortBy` is set to `column`"})}},602:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.performUrlMigrations=void 0;exports.performUrlMigrations=function performUrlMigrations(migrations,url){return migrations.reduce((function(url,migration){return migration(url)}),url)}},603:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MapProjectionGeos=exports.MapProjectionLabels=exports.MapProjectionName=void 0;var d3_geo_1=__webpack_require__(38),d3_geo_projection_1=__webpack_require__(1932),projectionToUseDuringJestTesting=d3_geo_1.geoConicConformal();!function(MapProjectionName){MapProjectionName.World="World",MapProjectionName.Africa="Africa",MapProjectionName.NorthAmerica="NorthAmerica",MapProjectionName.SouthAmerica="SouthAmerica",MapProjectionName.Asia="Asia",MapProjectionName.Europe="Europe",MapProjectionName.Oceania="Oceania"}(exports.MapProjectionName||(exports.MapProjectionName={})),exports.MapProjectionLabels={World:"World",Africa:"Africa",NorthAmerica:"North America",SouthAmerica:"South America",Asia:"Asia",Europe:"Europe",Oceania:"Oceania"},exports.MapProjectionGeos={World:d3_geo_1.geoPath().projection(void 0===d3_geo_projection_1.geoRobinson?projectionToUseDuringJestTesting:d3_geo_projection_1.geoRobinson()),Africa:d3_geo_1.geoPath().projection(d3_geo_1.geoConicConformal().rotate([-25,0]).center([0,0]).parallels([30,-20])),NorthAmerica:d3_geo_1.geoPath().projection(d3_geo_1.geoConicConformal().rotate([98,0]).center([0,38]).parallels([29.5,45.5])),SouthAmerica:d3_geo_1.geoPath().projection(d3_geo_1.geoConicConformal().rotate([68,0]).center([0,-14]).parallels([10,-30])),Asia:d3_geo_1.geoPath().projection((void 0===d3_geo_projection_1.geoPatterson?projectionToUseDuringJestTesting:d3_geo_projection_1.geoPatterson()).center([58,54]).scale(150).translate([0,0]).precision(.1)),Europe:d3_geo_1.geoPath().projection(d3_geo_1.geoAzimuthalEqualArea().scale(200).translate([262,1187]).clipAngle(179.999).precision(1)),Oceania:d3_geo_1.geoPath().projection(d3_geo_1.geoConicConformal().rotate([-135,0]).center([0,-20]).parallels([-10,-30]))}},608:function(module,exports,__webpack_require__){"use strict";__webpack_require__(31);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.LoadingIndicator=void 0;var React=__importStar(__webpack_require__(0));exports.LoadingIndicator=function LoadingIndicator(props){var _a;return React.createElement("div",{className:"loading-indicator",title:props.title,style:Object.assign({backgroundColor:props.backgroundColor},null===(_a=props.bounds)||void 0===_a?void 0:_a.toCSS())},React.createElement("span",{style:{borderColor:props.color||"#333"}}))}},609:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _construct(Parent,args,Class){return(_construct=_isNativeReflectConstruct()?Reflect.construct:function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var instance=new(Function.bind.apply(Parent,a));return Class&&_setPrototypeOf(instance,Class.prototype),instance}).apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(68),__webpack_require__(5),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(28),__webpack_require__(33),__webpack_require__(65),__webpack_require__(32),__webpack_require__(57),__webpack_require__(202),__webpack_require__(36),__webpack_require__(22),__webpack_require__(79),__webpack_require__(25),__webpack_require__(9),__webpack_require__(10),__webpack_require__(11),__webpack_require__(29),__webpack_require__(17),__webpack_require__(21),__webpack_require__(18);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MapChart=void 0;var React=__importStar(__webpack_require__(0)),Bounds_1=__webpack_require__(73),mobx_1=__webpack_require__(41),mobx_react_1=__webpack_require__(58),HorizontalColorLegends_1=__webpack_require__(1012),Util_1=__webpack_require__(40),isPresent_1=__webpack_require__(241),MapProjections_1=__webpack_require__(603),d3_selection_1=__webpack_require__(135),d3_ease_1=__webpack_require__(396),MapTooltip_1=__webpack_require__(1013),ProjectionChooser_1=__webpack_require__(1850),EntitiesOnTheMap_1=__webpack_require__(994),MapConfig_1=__webpack_require__(990),ColorScale_1=__webpack_require__(391),GrapherConstants_1=__webpack_require__(64),ColorScaleBin_1=__webpack_require__(472),topojson=__importStar(__webpack_require__(1938)),MapTopology_1=__webpack_require__(995),PointVector_1=__webpack_require__(239),WorldRegionsToProjection_1=__webpack_require__(1851),ColorConstants_1=__webpack_require__(278),ChartUtils_1=__webpack_require__(173),NoDataModal_1=__webpack_require__(203),ColorScaleConfig_1=__webpack_require__(390),GeoFeatures=topojson.feature(MapTopology_1.MapTopology,MapTopology_1.MapTopology.objects.world).features,geoPathCache=new Map,geoBoundsCache=new Map,geoBoundsFor=function geoBoundsFor(projectionName){if(geoBoundsCache.has(projectionName))return geoBoundsCache.get(projectionName);var projectionGeo=MapProjections_1.MapProjectionGeos[projectionName],bounds=GeoFeatures.map((function(feature){var corners=projectionGeo.bounds(feature),bounds=Bounds_1.Bounds.fromCorners(_construct(PointVector_1.PointVector,_toConsumableArray(corners[0])),_construct(PointVector_1.PointVector,_toConsumableArray(corners[1])));return"Fiji"===feature.id?bounds.set({x:bounds.right-bounds.height,width:bounds.height}):bounds}));return geoBoundsCache.set(projectionName,bounds),geoBoundsCache.get(projectionName)},renderFeaturesCache=new Map,renderFeaturesFor=function renderFeaturesFor(projectionName){if(renderFeaturesCache.has(projectionName))return renderFeaturesCache.get(projectionName);var geoBounds=geoBoundsFor(projectionName),geoPaths=function geoPathsFor(projectionName){if(geoPathCache.has(projectionName))return geoPathCache.get(projectionName);var projectionGeo=MapProjections_1.MapProjectionGeos[projectionName],strs=GeoFeatures.map((function(feature){return projectionGeo(feature).split(/Z/).filter(Util_1.identity).map((function(path){return"M"+path.split(/[MLZ]/).filter((function(f){return f})).map((function(point){return point.split(/,/).map((function(v){return parseFloat(v).toFixed(1)})).join(",")})).join("L")})).join("Z")+"Z"}));return geoPathCache.set(projectionName,strs),geoPathCache.get(projectionName)}(projectionName),feats=GeoFeatures.map((function(geo,index){return{id:geo.id,geo:geo,path:geoPaths[index],bounds:geoBounds[index],center:geoBounds[index].centerPos}}));return renderFeaturesCache.set(projectionName,feats),renderFeaturesCache.get(projectionName)},MapChart=function(_React$Component){_inherits(MapChart,_React$Component);var _super=_createSuper(MapChart);function MapChart(){var _this;return _classCallCheck(this,MapChart),(_this=_super.apply(this,arguments)).tooltip=null,_this.base=React.createRef(),_this.colorScale=new ColorScale_1.ColorScale(_assertThisInitialized(_this)),_this.defaultBaseColorScheme=ColorConstants_1.ColorSchemeName.BuGn,_this.hasNoDataBin=!0,_this}return _createClass(MapChart,[{key:"transformTable",value:function transformTable(table){return table.has(this.mapColumnSlug)?this.dropNonMapEntities(table).dropRowsWithErrorValuesForColumn(this.mapColumnSlug).interpolateColumnWithTolerance(this.mapColumnSlug,this.mapConfig.timeTolerance):table}},{key:"dropNonMapEntities",value:function dropNonMapEntities(table){var entityNamesToSelect=table.availableEntityNames.filter(EntitiesOnTheMap_1.isOnTheMap);return table.filterByEntityNames(entityNamesToSelect)}},{key:"inputTable",get:function get(){return this.manager.table}},{key:"transformedTable",get:function get(){var _a;return null!==(_a=this.manager.transformedTable)&&void 0!==_a?_a:this.transformTable(this.inputTable)}},{key:"failMessage",get:function get(){return this.mapColumn.isMissing?"Missing map column":""}},{key:"mapColumn",get:function get(){return this.transformedTable.get(this.mapColumnSlug)}},{key:"mapColumnSlug",get:function get(){var _a;return null!==(_a=this.manager.mapColumnSlug)&&void 0!==_a?_a:ChartUtils_1.autoDetectYColumnSlugs(this.manager)[0]}},{key:"targetTime",get:function get(){return this.manager.endTime}},{key:"bounds",get:function get(){var _a;return null!==(_a=this.props.bounds)&&void 0!==_a?_a:Bounds_1.DEFAULT_BOUNDS}},{key:"onMapMouseOver",value:function onMapMouseOver(feature,ev){var series=void 0===feature.id?void 0:this.seriesMap.get(feature.id);this.focusEntity={id:feature.id,series:series||{value:"No data"}};var containerElement=this.props.containerElement;if(containerElement){var mouse=Util_1.getRelativeMouse(containerElement,ev);void 0!==feature.id&&(this.tooltipTarget={x:mouse.x,y:mouse.y,featureId:feature.id})}}},{key:"onMapMouseLeave",value:function onMapMouseLeave(){this.focusEntity=void 0,this.tooltipTarget=void 0}},{key:"manager",get:function get(){return this.props.manager}},{key:"entityNamesWithData",get:function get(){return this.inputTable.entitiesWith([this.mapColumnSlug])}},{key:"isEntityClickable",value:function isEntityClickable(entityName){return!(!this.manager.mapIsClickable||!entityName)&&this.entityNamesWithData.has(entityName)}},{key:"selectionArray",get:function get(){return ChartUtils_1.makeSelectionArray(this.manager)}},{key:"onClick",value:function onClick(d,ev){var entityName=d.id;this.isEntityClickable(entityName)&&(ev.shiftKey?this.selectionArray.toggleSelection(entityName):(this.selectionArray.setSelectedEntities([entityName]),this.manager.currentTab=GrapherConstants_1.GrapherTabOption.chart))}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.onMapMouseLeave(),this.onLegendMouseLeave()}},{key:"onLegendMouseOver",value:function onLegendMouseOver(bracket){this.focusBracket=bracket}},{key:"onLegendMouseLeave",value:function onLegendMouseLeave(){this.focusBracket=void 0}},{key:"mapConfig",get:function get(){return this.manager.mapConfig||new MapConfig_1.MapConfig}},{key:"onProjectionChange",value:function onProjectionChange(value){this.mapConfig.projection=value}},{key:"formatTooltipValue",get:function get(){var mapConfig=this.mapConfig,mapColumn=this.mapColumn,colorScale=this.colorScale;return function(d){var _a;if(Util_1.isString(d))return d;if(mapConfig.tooltipUseCustomLabels){var bin=colorScale.getBinForValue(d),label=null==bin?void 0:bin.label;if(void 0!==label&&""!==label)return label}return null!==(_a=null==mapColumn?void 0:mapColumn.formatValueLong(d))&&void 0!==_a?_a:""}}},{key:"series",get:function get(){var _this2=this,mapColumn=this.mapColumn,selectionArray=this.selectionArray,targetTime=this.targetTime,formatTooltipValue=this.formatTooltipValue;return mapColumn.isMissing||void 0===targetTime?[]:mapColumn.owidRows.map((function(row){var entityName=row.entityName,value=row.value,time=row.time,color=_this2.colorScale.getColor(value)||"red";if(color)return{seriesName:entityName,displayValue:formatTooltipValue(value),time:time,value:value,isSelected:selectionArray.selectedSet.has(entityName),color:color,highlightFillColor:color}})).filter(isPresent_1.isPresent)}},{key:"seriesMap",get:function get(){var map=new Map;return this.series.forEach((function(series){map.set(series.seriesName,series)})),map}},{key:"colorScaleColumn",get:function get(){return this.dropNonMapEntities(this.inputTable).get(this.mapColumnSlug)}},{key:"colorScaleConfig",get:function get(){var _a;return null!==(_a=ColorScaleConfig_1.ColorScaleConfig.fromDSL(this.mapColumn.def))&&void 0!==_a?_a:this.mapConfig.colorScale}},{key:"componentDidMount",value:function componentDidMount(){d3_selection_1.select(this.base.current).selectAll("path").attr("data-fill",(function(){return this.getAttribute("fill")})).attr("fill",this.colorScale.noDataColor).transition().duration(500).ease(d3_ease_1.easeCubic).attr("fill",(function(){return this.getAttribute("data-fill")})).attr("data-fill",(function(){return this.getAttribute("fill")})),Util_1.exposeInstanceOnWindow(this)}},{key:"projectionChooserBounds",get:function get(){var bounds=this.bounds;return new Bounds_1.Bounds(bounds.width-110+15-3,5,110,22)}},{key:"legendData",get:function get(){return this.colorScale.legendBins}},{key:"equalSizeBins",get:function get(){return this.colorScale.config.equalSizeBins}},{key:"focusValue",get:function get(){var _a,_b;return null===(_b=null===(_a=this.focusEntity)||void 0===_a?void 0:_a.series)||void 0===_b?void 0:_b.value}},{key:"fontSize",get:function get(){var _a;return null!==(_a=this.manager.baseFontSize)&&void 0!==_a?_a:GrapherConstants_1.BASE_FONT_SIZE}},{key:"numericLegendData",get:function get(){if(this.hasCategorical||!this.legendData.some((function(bin){return"No data"===bin.value&&!bin.isHidden})))return this.legendData.filter((function(bin){return bin instanceof ColorScaleBin_1.NumericBin&&!bin.isHidden}));var bin=this.legendData.filter((function(bin){return(bin instanceof ColorScaleBin_1.NumericBin||"No data"===bin.value)&&!bin.isHidden}));return Util_1.flatten([bin[bin.length-1],bin.slice(0,-1)])}},{key:"hasNumeric",get:function get(){return this.numericLegendData.length>1}},{key:"categoricalLegendData",get:function get(){return this.legendData.filter((function(bin){return bin instanceof ColorScaleBin_1.CategoricalBin&&!bin.isHidden}))}},{key:"hasCategorical",get:function get(){return this.categoricalLegendData.length>1}},{key:"numericFocusBracket",get:function get(){var focusBracket=this.focusBracket,focusValue=this.focusValue,numericLegendData=this.numericLegendData;return focusBracket||(void 0!==focusValue?numericLegendData.find((function(bin){return bin.contains(focusValue)})):void 0)}},{key:"categoricalFocusBracket",get:function get(){var focusBracket=this.focusBracket,focusValue=this.focusValue,categoricalLegendData=this.categoricalLegendData;return focusBracket&&focusBracket instanceof ColorScaleBin_1.CategoricalBin?focusBracket:void 0!==focusValue?categoricalLegendData.find((function(bin){return bin.contains(focusValue)})):void 0}},{key:"categoricalBinStroke",get:function get(){return"#333"}},{key:"legendBounds",get:function get(){return this.bounds.padBottom(15)}},{key:"legendWidth",get:function get(){return.8*this.legendBounds.width}},{key:"legendHeight",get:function get(){return this.categoryLegendHeight+this.numericLegendHeight+10}},{key:"numericLegendHeight",get:function get(){return this.numericLegend?this.numericLegend.height:0}},{key:"categoryLegendHeight",get:function get(){return this.categoryLegend?this.categoryLegend.height+5:0}},{key:"categoryLegend",get:function get(){return this.categoricalLegendData.length>1?new HorizontalColorLegends_1.HorizontalCategoricalColorLegend({manager:this}):void 0}},{key:"numericLegend",get:function get(){return this.numericLegendData.length>1?new HorizontalColorLegends_1.HorizontalNumericColorLegend({manager:this}):void 0}},{key:"legendX",get:function get(){var bounds=this.bounds,numericLegend=this.numericLegend,categoryLegend=this.categoryLegend;return numericLegend?bounds.centerX-this.legendWidth/2:categoryLegend?bounds.centerX-categoryLegend.width/2:0}},{key:"categoryLegendY",get:function get(){var categoryLegend=this.categoryLegend,bounds=this.bounds,categoryLegendHeight=this.categoryLegendHeight;return categoryLegend?bounds.bottom-categoryLegendHeight:0}},{key:"numericLegendY",get:function get(){var numericLegend=this.numericLegend,numericLegendHeight=this.numericLegendHeight,bounds=this.bounds,categoryLegendHeight=this.categoryLegendHeight;return numericLegend?bounds.bottom-categoryLegendHeight-numericLegendHeight-4:0}},{key:"renderMapLegend",value:function renderMapLegend(){var numericLegend=this.numericLegend,categoryLegend=this.categoryLegend;return React.createElement("g",null,numericLegend&&React.createElement(HorizontalColorLegends_1.HorizontalNumericColorLegend,{manager:this}),categoryLegend&&React.createElement(HorizontalColorLegends_1.HorizontalCategoricalColorLegend,{manager:this}))}},{key:"render",value:function render(){if(this.failMessage)return React.createElement(NoDataModal_1.NoDataModal,{manager:this.manager,bounds:this.props.bounds,message:this.failMessage});var focusBracket=this.focusBracket,focusEntity=this.focusEntity,tooltipTarget=this.tooltipTarget,projectionChooserBounds=this.projectionChooserBounds,seriesMap=this.seriesMap,colorScale=this.colorScale,projection=this.mapConfig.projection,tooltipDatum=tooltipTarget?seriesMap.get(tooltipTarget.featureId):void 0;return React.createElement("g",{ref:this.base,className:"mapTab"},React.createElement(ChoroplethMap,{bounds:this.bounds.padBottom(this.legendHeight+15),choroplethData:seriesMap,projection:projection,defaultFill:colorScale.noDataColor,onHover:this.onMapMouseOver,onHoverStop:this.onMapMouseLeave,onClick:this.onClick,focusBracket:focusBracket,focusEntity:focusEntity}),this.renderMapLegend(),React.createElement("foreignObject",{id:"projection-chooser",x:projectionChooserBounds.left,y:projectionChooserBounds.top,width:projectionChooserBounds.width,height:projectionChooserBounds.height,style:{overflow:"visible",height:"100%",pointerEvents:"none"}},React.createElement(ProjectionChooser_1.ProjectionChooser,{value:projection,onChange:this.onProjectionChange})),tooltipTarget&&React.createElement(MapTooltip_1.MapTooltip,{tooltipDatum:tooltipDatum,isEntityClickable:this.isEntityClickable(null==tooltipTarget?void 0:tooltipTarget.featureId),tooltipTarget:tooltipTarget,manager:this.manager,colorScale:this.colorScale,targetTime:this.targetTime}))}}]),MapChart}(React.Component);__decorate([mobx_1.observable.ref],MapChart.prototype,"tooltip",void 0),__decorate([mobx_1.observable],MapChart.prototype,"tooltipTarget",void 0),__decorate([mobx_1.observable],MapChart.prototype,"focusEntity",void 0),__decorate([mobx_1.observable],MapChart.prototype,"focusBracket",void 0),__decorate([mobx_1.computed],MapChart.prototype,"inputTable",null),__decorate([mobx_1.computed],MapChart.prototype,"transformedTable",null),__decorate([mobx_1.computed],MapChart.prototype,"failMessage",null),__decorate([mobx_1.computed],MapChart.prototype,"mapColumn",null),__decorate([mobx_1.computed],MapChart.prototype,"mapColumnSlug",null),__decorate([mobx_1.computed],MapChart.prototype,"targetTime",null),__decorate([mobx_1.computed],MapChart.prototype,"bounds",null),__decorate([mobx_1.action.bound],MapChart.prototype,"onMapMouseOver",null),__decorate([mobx_1.action.bound],MapChart.prototype,"onMapMouseLeave",null),__decorate([mobx_1.computed],MapChart.prototype,"manager",null),__decorate([mobx_1.computed],MapChart.prototype,"entityNamesWithData",null),__decorate([mobx_1.computed],MapChart.prototype,"selectionArray",null),__decorate([mobx_1.action.bound],MapChart.prototype,"onClick",null),__decorate([mobx_1.action.bound],MapChart.prototype,"onLegendMouseOver",null),__decorate([mobx_1.action.bound],MapChart.prototype,"onLegendMouseLeave",null),__decorate([mobx_1.computed],MapChart.prototype,"mapConfig",null),__decorate([mobx_1.action.bound],MapChart.prototype,"onProjectionChange",null),__decorate([mobx_1.computed],MapChart.prototype,"formatTooltipValue",null),__decorate([mobx_1.computed],MapChart.prototype,"series",null),__decorate([mobx_1.computed],MapChart.prototype,"seriesMap",null),__decorate([mobx_1.computed],MapChart.prototype,"colorScaleColumn",null),__decorate([mobx_1.computed],MapChart.prototype,"colorScaleConfig",null),__decorate([mobx_1.computed],MapChart.prototype,"projectionChooserBounds",null),__decorate([mobx_1.computed],MapChart.prototype,"legendData",null),__decorate([mobx_1.computed],MapChart.prototype,"equalSizeBins",null),__decorate([mobx_1.computed],MapChart.prototype,"focusValue",null),__decorate([mobx_1.computed],MapChart.prototype,"fontSize",null),__decorate([mobx_1.computed],MapChart.prototype,"numericLegendData",null),__decorate([mobx_1.computed],MapChart.prototype,"hasNumeric",null),__decorate([mobx_1.computed],MapChart.prototype,"categoricalLegendData",null),__decorate([mobx_1.computed],MapChart.prototype,"hasCategorical",null),__decorate([mobx_1.computed],MapChart.prototype,"numericFocusBracket",null),__decorate([mobx_1.computed],MapChart.prototype,"categoricalFocusBracket",null),__decorate([mobx_1.computed],MapChart.prototype,"categoricalBinStroke",null),__decorate([mobx_1.computed],MapChart.prototype,"legendBounds",null),__decorate([mobx_1.computed],MapChart.prototype,"legendWidth",null),__decorate([mobx_1.computed],MapChart.prototype,"legendHeight",null),__decorate([mobx_1.computed],MapChart.prototype,"numericLegendHeight",null),__decorate([mobx_1.computed],MapChart.prototype,"categoryLegendHeight",null),__decorate([mobx_1.computed],MapChart.prototype,"categoryLegend",null),__decorate([mobx_1.computed],MapChart.prototype,"numericLegend",null),__decorate([mobx_1.computed],MapChart.prototype,"legendX",null),__decorate([mobx_1.computed],MapChart.prototype,"categoryLegendY",null),__decorate([mobx_1.computed],MapChart.prototype,"numericLegendY",null),MapChart=__decorate([mobx_react_1.observer],MapChart),exports.MapChart=MapChart;var ChoroplethMap=function(_React$Component2){_inherits(ChoroplethMap,_React$Component2);var _super2=_createSuper(ChoroplethMap);function ChoroplethMap(){var _this3;return _classCallCheck(this,ChoroplethMap),(_this3=_super2.apply(this,arguments)).base=React.createRef(),_this3.showSelectedStyle=!1,_this3}return _createClass(ChoroplethMap,[{key:"uid",get:function get(){return Util_1.guid()}},{key:"bounds",get:function get(){return this.props.bounds}},{key:"choroplethData",get:function get(){return this.props.choroplethData}},{key:"defaultFill",get:function get(){return this.props.defaultFill}},{key:"mapBounds",get:function get(){return Bounds_1.Bounds.merge(geoBoundsFor(this.props.projection))}},{key:"focusBracket",get:function get(){return this.props.focusBracket}},{key:"focusEntity",get:function get(){return this.props.focusEntity}},{key:"hasFocus",value:function hasFocus(id){var choroplethData=this.choroplethData,focusBracket=this.focusBracket,focusEntity=this.focusEntity;if(focusEntity&&focusEntity.id===id)return!0;if(!focusBracket)return!1;var datum=choroplethData.get(id)||null;return!!focusBracket.contains(null==datum?void 0:datum.value)}},{key:"isSelected",value:function isSelected(id){return this.choroplethData.get(id).isSelected}},{key:"viewport",get:function get(){return{World:{x:.565,y:.5,width:1,height:1},Europe:{x:.5,y:.22,width:.2,height:.2},Africa:{x:.49,y:.7,width:.21,height:.38},NorthAmerica:{x:.49,y:.4,width:.19,height:.32},SouthAmerica:{x:.52,y:.815,width:.1,height:.26},Asia:{x:.75,y:.45,width:.3,height:.5},Oceania:{x:.51,y:.75,width:.1,height:.2}}[this.props.projection]}},{key:"viewportScale",get:function get(){var bounds=this.bounds,viewport=this.viewport,mapBounds=this.mapBounds,viewportWidth=viewport.width*mapBounds.width,viewportHeight=viewport.height*mapBounds.height;return Math.min(bounds.width/viewportWidth,bounds.height/viewportHeight)}},{key:"matrixTransform",get:function get(){var bounds=this.bounds,mapBounds=this.mapBounds,viewport=this.viewport,viewportScale=this.viewportScale,mapX=mapBounds.x+1,mapY=mapBounds.y+1,newWidth=mapBounds.width*viewportScale,newHeight=mapBounds.height*viewportScale,boundsCenterX=bounds.left+bounds.width/2,boundsCenterY=bounds.top+bounds.height/2,newOffsetX=boundsCenterX-(mapX+(viewportScale-1)*mapBounds.x+viewport.x*newWidth),newOffsetY=boundsCenterY-(mapY+(viewportScale-1)*mapBounds.y+viewport.y*newHeight);return"matrix(".concat(viewportScale,",0,0,").concat(viewportScale,",").concat(newOffsetX,",").concat(newOffsetY,")")}},{key:"featuresOutsideProjection",get:function get(){return Util_1.difference(renderFeaturesFor(this.props.projection),this.featuresInProjection)}},{key:"featuresInProjection",get:function get(){var projection=this.props.projection,features=renderFeaturesFor(this.props.projection);return projection===MapProjections_1.MapProjectionName.World?features:features.filter((function(feature){return projection===WorldRegionsToProjection_1.WorldRegionToProjection[feature.id]}))}},{key:"featuresWithNoData",get:function get(){return Util_1.difference(this.featuresInProjection,this.featuresWithData)}},{key:"featuresWithData",get:function get(){var _this4=this;return this.featuresInProjection.filter((function(feature){return _this4.choroplethData.has(feature.id)}))}},{key:"onMouseMove",value:function onMouseMove(ev){var _a;if(ev.shiftKey&&(this.showSelectedStyle=!0),!this.hoverEnterFeature){var featuresInProjection=this.featuresInProjection,subunits=null===(_a=this.base.current)||void 0===_a?void 0:_a.querySelector(".subunits");if(subunits){var mouse=Util_1.getRelativeMouse(subunits,ev),featuresWithDistance=featuresInProjection.map((function(feature){return{feature:feature,distance:PointVector_1.PointVector.distance(feature.center,mouse)}})),feature=Util_1.minBy(featuresWithDistance,(function(d){return d.distance}));feature&&feature.distance<20?feature.feature!==this.hoverNearbyFeature&&(this.hoverNearbyFeature=feature.feature,this.props.onHover(feature.feature.geo,ev)):(this.hoverNearbyFeature=void 0,this.props.onHoverStop())}else console.error("subunits was falsy")}}},{key:"onMouseEnter",value:function onMouseEnter(feature,ev){this.hoverEnterFeature=feature,this.props.onHover(feature.geo,ev)}},{key:"onMouseLeave",value:function onMouseLeave(){this.hoverEnterFeature=void 0,this.props.onHoverStop()}},{key:"hoverFeature",get:function get(){return this.hoverEnterFeature||this.hoverNearbyFeature}},{key:"onClick",value:function onClick(ev){void 0!==this.hoverFeature&&this.props.onClick(this.hoverFeature.geo,ev)}},{key:"render",value:function render(){var _this5=this,uid=this.uid,bounds=this.bounds,choroplethData=this.choroplethData,defaultFill=this.defaultFill,matrixTransform=this.matrixTransform,viewportScale=this.viewportScale,featuresOutsideProjection=this.featuresOutsideProjection,featuresWithNoData=this.featuresWithNoData,featuresWithData=this.featuresWithData,clipPath=ChartUtils_1.makeClipPath(uid,bounds);return React.createElement("g",{ref:this.base,className:"ChoroplethMap",clipPath:clipPath.id,onMouseDown:function onMouseDown(ev){return ev.preventDefault()},onMouseMove:this.onMouseMove,onMouseLeave:this.onMouseLeave,style:this.hoverFeature?{cursor:"pointer"}:{}},React.createElement("rect",{x:bounds.x,y:bounds.y,width:bounds.width,height:bounds.height,fill:"rgba(255,255,255,0)",opacity:0}),clipPath.element,React.createElement("g",{className:"subunits",transform:matrixTransform},featuresOutsideProjection.length&&React.createElement("g",{className:"nonProjectionFeatures"},featuresOutsideProjection.map((function(feature){return React.createElement("path",{key:feature.id,d:feature.path,strokeWidth:.3/viewportScale,stroke:"#aaa",fill:"#fff"})}))),featuresWithNoData.length&&React.createElement("g",{className:"noDataFeatures"},featuresWithNoData.map((function(feature){var isFocus=_this5.hasFocus(feature.id),outOfFocusBracket=!!_this5.focusBracket&&!isFocus,stroke=isFocus?"#111":"#aaa",fillOpacity=outOfFocusBracket?.2:1,strokeOpacity=outOfFocusBracket?.5:1;return React.createElement("path",{key:feature.id,d:feature.path,strokeWidth:(isFocus?1.5:.3)/viewportScale,stroke:stroke,strokeOpacity:strokeOpacity,cursor:"pointer",fill:defaultFill,fillOpacity:fillOpacity,onClick:function onClick(ev){return _this5.props.onClick(feature.geo,ev)},onMouseEnter:function onMouseEnter(ev){return _this5.onMouseEnter(feature,ev)},onMouseLeave:_this5.onMouseLeave})}))),Util_1.sortBy(featuresWithData.map((function(feature){var isFocus=_this5.hasFocus(feature.id),showSelectedStyle=_this5.showSelectedStyle&&_this5.isSelected(feature.id),outOfFocusBracket=!!_this5.focusBracket&&!isFocus,series=choroplethData.get(feature.id),stroke=isFocus||showSelectedStyle?"#111":"#333",fill=series?series.color:defaultFill,fillOpacity=outOfFocusBracket?.2:1,strokeOpacity=outOfFocusBracket?.5:1;return React.createElement("path",{key:feature.id,d:feature.path,strokeWidth:(isFocus?1.5:showSelectedStyle?1:.3)/viewportScale,stroke:stroke,strokeOpacity:strokeOpacity,cursor:"pointer",fill:fill,fillOpacity:fillOpacity,onClick:function onClick(ev){return _this5.props.onClick(feature.geo,ev)},onMouseEnter:function onMouseEnter(ev){return _this5.onMouseEnter(feature,ev)},onMouseLeave:_this5.onMouseLeave})})),(function(p){return p.props.strokeWidth}))))}}]),ChoroplethMap}(React.Component);__decorate([mobx_1.computed],ChoroplethMap.prototype,"uid",null),__decorate([mobx_1.computed.struct],ChoroplethMap.prototype,"bounds",null),__decorate([mobx_1.computed.struct],ChoroplethMap.prototype,"choroplethData",null),__decorate([mobx_1.computed.struct],ChoroplethMap.prototype,"defaultFill",null),__decorate([mobx_1.computed],ChoroplethMap.prototype,"mapBounds",null),__decorate([mobx_1.computed],ChoroplethMap.prototype,"focusBracket",null),__decorate([mobx_1.computed],ChoroplethMap.prototype,"focusEntity",null),__decorate([mobx_1.computed],ChoroplethMap.prototype,"viewport",null),__decorate([mobx_1.computed],ChoroplethMap.prototype,"viewportScale",null),__decorate([mobx_1.computed],ChoroplethMap.prototype,"matrixTransform",null),__decorate([mobx_1.computed],ChoroplethMap.prototype,"featuresOutsideProjection",null),__decorate([mobx_1.computed],ChoroplethMap.prototype,"featuresInProjection",null),__decorate([mobx_1.computed],ChoroplethMap.prototype,"featuresWithNoData",null),__decorate([mobx_1.computed],ChoroplethMap.prototype,"featuresWithData",null),__decorate([mobx_1.observable],ChoroplethMap.prototype,"hoverEnterFeature",void 0),__decorate([mobx_1.observable],ChoroplethMap.prototype,"hoverNearbyFeature",void 0),__decorate([mobx_1.action.bound],ChoroplethMap.prototype,"onMouseMove",null),__decorate([mobx_1.action.bound],ChoroplethMap.prototype,"onMouseEnter",null),__decorate([mobx_1.action.bound],ChoroplethMap.prototype,"onMouseLeave",null),__decorate([mobx_1.computed],ChoroplethMap.prototype,"hoverFeature",null),__decorate([mobx_1.action.bound],ChoroplethMap.prototype,"onClick",null),__decorate([mobx_1.observable],ChoroplethMap.prototype,"showSelectedStyle",void 0),ChoroplethMap=__decorate([mobx_react_1.observer],ChoroplethMap)},610:function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=arr&&("undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"]);if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(75),__webpack_require__(5),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(57),__webpack_require__(33),__webpack_require__(29),__webpack_require__(28),__webpack_require__(25),__webpack_require__(79),__webpack_require__(48),__webpack_require__(55),__webpack_require__(143),__webpack_require__(9),__webpack_require__(10),__webpack_require__(11),__webpack_require__(18),__webpack_require__(21),__webpack_require__(22),__webpack_require__(17);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ScatterPlotChart=void 0;var React=__importStar(__webpack_require__(0)),mobx_1=__webpack_require__(41),Util_1=__webpack_require__(40),mobx_react_1=__webpack_require__(58),Bounds_1=__webpack_require__(73),NoDataModal_1=__webpack_require__(203),GrapherConstants_1=__webpack_require__(64),ConnectedScatterLegend_1=__webpack_require__(1856),VerticalColorLegend_1=__webpack_require__(475),AxisViews_1=__webpack_require__(324),Axis_1=__webpack_require__(389),ComparisonLine_1=__webpack_require__(1019),ColorScale_1=__webpack_require__(391),AxisConfig_1=__webpack_require__(216),ScatterTooltip_1=__webpack_require__(1859),ScatterPointsWithLabels_1=__webpack_require__(1860),OwidTableConstants_1=__webpack_require__(172),ChartUtils_1=__webpack_require__(173),ColorConstants_1=__webpack_require__(278),ErrorValues_1=__webpack_require__(277),ColorScaleConfig_1=__webpack_require__(390),ScatterPlotChart=function(_React$Component){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(ScatterPlotChart,_React$Component);var _super=_createSuper(ScatterPlotChart);function ScatterPlotChart(){var _this;return _classCallCheck(this,ScatterPlotChart),(_this=_super.apply(this,arguments)).colorScale=new ColorScale_1.ColorScale(_assertThisInitialized(_this)),_this.defaultBaseColorScheme=ColorConstants_1.ColorSchemeName.continents,_this.defaultNoDataColor="#959595",_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(ScatterPlotChart,[{key:"transformTable",value:function transformTable(table){var _a,_b,_c,_this$manager=this.manager,backgroundSeriesLimit=_this$manager.backgroundSeriesLimit,excludedEntities=_this$manager.excludedEntities,addCountryMode=_this$manager.addCountryMode;if(addCountryMode!==GrapherConstants_1.EntitySelectionMode.Disabled&&addCountryMode!==GrapherConstants_1.EntitySelectionMode.SingleEntity||(table=table.filterByEntityNames(this.selectionArray.selectedEntityNames)),excludedEntities){var excludedEntityIdsSet=new Set(excludedEntities);table=table.columnFilter(OwidTableConstants_1.OwidTableSlugs.entityId,(function(entityId){return!excludedEntityIdsSet.has(entityId)}),"Excluded entity ids specified by author: ".concat(excludedEntities.join(", ")))}if(backgroundSeriesLimit){var selectedSeriesNames=new Set(this.selectionArray.selectedEntityNames),backgroundSeriesNames=new Set(Util_1.sampleFrom(table.availableEntityNames.filter((function(name){return!selectedSeriesNames.has(name)})),backgroundSeriesLimit,123));table=table.columnFilter(table.entityNameSlug,(function(name){return selectedSeriesNames.has(name)||backgroundSeriesNames.has(name)}),"Capped background series at ".concat(backgroundSeriesLimit))}if(this.xScaleType===GrapherConstants_1.ScaleType.log&&this.xColumnSlug&&(table=table.replaceNonPositiveCellsForLogScale([this.xColumnSlug])),this.yScaleType===GrapherConstants_1.ScaleType.log&&this.yColumnSlug&&(table=table.replaceNonPositiveCellsForLogScale([this.yColumnSlug])),this.sizeColumnSlug&&(table=table.interpolateColumnWithTolerance(this.sizeColumnSlug,1/0)),this.colorColumnSlug){var tolerance=null!==(_c=null===(_b=null===(_a=table.get(this.colorColumnSlug))||void 0===_a?void 0:_a.display)||void 0===_b?void 0:_b.tolerance)&&void 0!==_c?_c:1/0;table=table.interpolateColumnWithTolerance(this.colorColumnSlug,tolerance),this.manager.matchingEntitiesOnly&&(table=table.dropRowsWithErrorValuesForColumn(this.colorColumnSlug))}var _table$timeDomainFor2=_slicedToArray(table.timeDomainFor([this.xColumnSlug,this.yColumnSlug]),2),timeDomainStart=_table$timeDomainFor2[0],timeDomainEnd=_table$timeDomainFor2[1];table=table.filterByTimeRange(null!=timeDomainStart?timeDomainStart:-1/0,null!=timeDomainEnd?timeDomainEnd:1/0);var _table$originalTimeDo2=_slicedToArray((table=(table=void 0!==this.xOverrideTime?table.interpolateColumnWithTolerance(this.yColumnSlug):table.interpolateColumnsByClosestTimeMatch(this.xColumnSlug,this.yColumnSlug)).columnFilter(this.xColumnSlug,Util_1.isNumber,"Drop rows with non-number values in X column").columnFilter(this.yColumnSlug,Util_1.isNumber,"Drop rows with non-number values in Y column")).originalTimeDomainFor([this.xColumnSlug,this.yColumnSlug]),2),originalTimeDomainStart=_table$originalTimeDo2[0],originalTimeDomainEnd=_table$originalTimeDo2[1];return table=table.filterByTimeRange(null!=originalTimeDomainStart?originalTimeDomainStart:-1/0,null!=originalTimeDomainEnd?originalTimeDomainEnd:1/0)}},{key:"inputTable",get:function get(){return this.manager.table}},{key:"transformedTableFromGrapher",get:function get(){var _a;return null!==(_a=this.manager.transformedTable)&&void 0!==_a?_a:this.transformTable(this.inputTable)}},{key:"transformedTable",get:function get(){var table=this.transformedTableFromGrapher;if(this.manager.hideLinesOutsideTolerance&&void 0!==this.manager.startTime&&void 0!==this.manager.endTime){var entityNames=Array.from(Util_1.intersectionOfSets([this.manager.startTime,this.manager.endTime].map((function(targetTime){return table.filterByTargetTimes([targetTime],0).availableEntityNameSet}))));table=table.filterByEntityNames(entityNames)}return this.compareEndPointsOnly&&!this.manager.isRelativeMode&&(table=table.keepMinTimeAndMaxTimeForEachEntityOnly()),this.manager.isRelativeMode&&(table=table.toAverageAnnualChangeForEachEntity([this.xColumnSlug,this.yColumnSlug])),table}},{key:"manager",get:function get(){return this.props.manager}},{key:"bounds",get:function get(){var _a;return null!==(_a=this.props.bounds)&&void 0!==_a?_a:Bounds_1.DEFAULT_BOUNDS}},{key:"canAddCountry",get:function get(){var addCountryMode=this.manager.addCountryMode;return addCountryMode&&addCountryMode!==GrapherConstants_1.EntitySelectionMode.Disabled}},{key:"selectionArray",get:function get(){return ChartUtils_1.makeSelectionArray(this.manager)}},{key:"onSelectEntity",value:function onSelectEntity(entityName){this.canAddCountry&&this.selectionArray.toggleSelection(entityName)}},{key:"colorsInUse",get:function get(){var _a,_b,_c,_this2=this,allValues=null!==(_c=null===(_b=null===(_a=this.manager.tableAfterAuthorTimelineAndActiveChartTransformAndPopulationFilter)||void 0===_a?void 0:_a.get(this.colorColumnSlug))||void 0===_b?void 0:_b.valuesIncludingErrorValues)&&void 0!==_c?_c:[],colorValues=Util_1.uniq(allValues.map((function(value){return ErrorValues_1.isNotErrorValue(value)?value:void 0})));return Util_1.excludeUndefined(colorValues.map((function(colorValue){return _this2.colorScale.getColor(colorValue)})))}},{key:"fontSize",get:function get(){var _a;return null!==(_a=this.manager.baseFontSize)&&void 0!==_a?_a:GrapherConstants_1.BASE_FONT_SIZE}},{key:"onLegendMouseOver",value:function onLegendMouseOver(color){this.hoverColor=color}},{key:"onLegendMouseLeave",value:function onLegendMouseLeave(){this.hoverColor=void 0}},{key:"onLegendClick",value:function onLegendClick(){var hoverColor=this.hoverColor,selectionArray=this.selectionArray;if(this.canAddCountry&&void 0!==hoverColor){var keysToToggle=this.series.filter((function(g){return g.color===hoverColor})).map((function(g){return g.seriesName}));Util_1.intersection(keysToToggle,this.selectedEntityNames).length===keysToToggle.length?selectionArray.setSelectedEntities(Util_1.without.apply(Util_1,[this.selectedEntityNames].concat(_toConsumableArray(keysToToggle)))):selectionArray.setSelectedEntities(Util_1.uniq(this.selectedEntityNames.concat(keysToToggle)))}}},{key:"focusColors",get:function get(){var _this3=this;return this.colorsInUse.filter((function(color){var matchingKeys=_this3.series.filter((function(g){return g.color===color})).map((function(g){return g.seriesName}));return Util_1.intersection(matchingKeys,_this3.selectedEntityNames).length===matchingKeys.length}))}},{key:"hoveredSeriesNames",get:function get(){var hoverColor=this.hoverColor,hoveredSeries=this.hoveredSeries,hoveredSeriesNames=void 0===hoverColor?[]:Util_1.uniq(this.series.filter((function(g){return g.color===hoverColor})).map((function(g){return g.seriesName})));return void 0!==hoveredSeries&&hoveredSeriesNames.push(hoveredSeries),hoveredSeriesNames}},{key:"focusedEntityNames",get:function get(){return this.selectedEntityNames}},{key:"selectedEntityNames",get:function get(){return this.selectionArray.selectedEntityNames}},{key:"displayStartTime",get:function get(){var _a;return this.transformedTable.timeColumnFormatFunction(null!==(_a=this.transformedTable.minTime)&&void 0!==_a?_a:1900)}},{key:"displayEndTime",get:function get(){var _a;return this.transformedTable.timeColumnFormatFunction(null!==(_a=this.transformedTable.maxTime)&&void 0!==_a?_a:2e3)}},{key:"arrowLegend",get:function get(){if(this.displayStartTime!==this.displayEndTime&&!this.manager.isRelativeMode)return new ConnectedScatterLegend_1.ConnectedScatterLegend(this)}},{key:"onScatterMouseOver",value:function onScatterMouseOver(series){this.hoveredSeries=series.seriesName}},{key:"onScatterMouseLeave",value:function onScatterMouseLeave(){this.hoveredSeries=void 0}},{key:"onScatterClick",value:function onScatterClick(){this.hoveredSeries&&this.onSelectEntity(this.hoveredSeries)}},{key:"tooltipSeries",get:function get(){var hoveredSeries=this.hoveredSeries,focusedEntityNames=this.focusedEntityNames;return void 0!==hoveredSeries?this.series.find((function(g){return g.seriesName===hoveredSeries})):focusedEntityNames&&1===focusedEntityNames.length?this.series.find((function(g){return g.seriesName===focusedEntityNames[0]})):void 0}},{key:"legendDimensions",get:function get(){return new VerticalColorLegend_1.VerticalColorLegend({manager:this})}},{key:"maxLegendWidth",get:function get(){return this.sidebarMaxWidth}},{key:"sidebarMinWidth",get:function get(){return Math.max(.1*this.bounds.width,60)}},{key:"sidebarMaxWidth",get:function get(){return Math.max(.2*this.bounds.width,this.sidebarMinWidth)}},{key:"sidebarWidth",get:function get(){var legendDimensions=this.legendDimensions,sidebarMinWidth=this.sidebarMinWidth,sidebarMaxWidth=this.sidebarMaxWidth;return Math.max(Math.min(legendDimensions.width,sidebarMaxWidth),sidebarMinWidth)}},{key:"dualAxis",get:function get(){var horizontalAxisPart=this.horizontalAxisPart,verticalAxisPart=this.verticalAxisPart;return new Axis_1.DualAxis({bounds:this.bounds.padRight(this.sidebarWidth+20),horizontalAxis:horizontalAxisPart,verticalAxis:verticalAxisPart})}},{key:"yAxis",get:function get(){return this.dualAxis.verticalAxis}},{key:"xAxis",get:function get(){return this.dualAxis.horizontalAxis}},{key:"comparisonLines",get:function get(){return this.manager.comparisonLines}},{key:"onToggleEndpoints",value:function onToggleEndpoints(){this.manager.compareEndPointsOnly=!this.compareEndPointsOnly||void 0}},{key:"activeColors",get:function get(){var _this4=this,hoveredSeriesNames=this.hoveredSeriesNames,focusedEntityNames=this.focusedEntityNames,activeKeys=hoveredSeriesNames.concat(focusedEntityNames),series=this.series;activeKeys.length&&(series=series.filter((function(g){return activeKeys.includes(g.seriesName)})));var colorValues=Util_1.uniq(Util_1.flatten(series.map((function(s){return s.points.map((function(p){return p.color}))}))));return Util_1.excludeUndefined(colorValues.map((function(color){return _this4.colorScale.getColor(color)})))}},{key:"hideConnectedScatterLines",get:function get(){return!!this.manager.hideConnectedScatterLines}},{key:"points",get:function get(){var dualAxis=this.dualAxis,focusedEntityNames=this.focusedEntityNames,hoveredSeriesNames=this.hoveredSeriesNames,hideConnectedScatterLines=this.hideConnectedScatterLines,manager=this.manager,series=this.series,sizeDomain=this.sizeDomain,colorScale=this.colorScale,colorColumn=this.colorColumn;return React.createElement(ScatterPointsWithLabels_1.ScatterPointsWithLabels,{noDataModalManager:manager,hideConnectedScatterLines:hideConnectedScatterLines,seriesArray:series,dualAxis:dualAxis,colorScale:colorColumn.isMissing?void 0:colorScale,sizeDomain:sizeDomain,focusedSeriesNames:focusedEntityNames,hoveredSeriesNames:hoveredSeriesNames,onMouseOver:this.onScatterMouseOver,onMouseLeave:this.onScatterMouseLeave,onClick:this.onScatterClick})}},{key:"colorColumnSlug",get:function get(){return this.manager.colorColumnSlug}},{key:"colorColumn",get:function get(){return this.transformedTable.get(this.colorColumnSlug)}},{key:"legendItems",get:function get(){var _this5=this;return this.colorScale.legendBins.filter((function(bin){return _this5.colorsInUse.includes(bin.color)}))}},{key:"title",get:function get(){return this.colorScale.legendDescription}},{key:"componentDidMount",value:function componentDidMount(){Util_1.exposeInstanceOnWindow(this)}},{key:"render",value:function render(){if(this.failMessage)return React.createElement(NoDataModal_1.NoDataModal,{manager:this.manager,bounds:this.bounds,message:this.failMessage});var bounds=this.bounds,dualAxis=this.dualAxis,arrowLegend=this.arrowLegend,sidebarWidth=this.sidebarWidth,tooltipSeries=this.tooltipSeries,comparisonLines=this.comparisonLines,legendDimensions=this.legendDimensions;return React.createElement("g",{className:"ScatterPlot"},React.createElement(AxisViews_1.DualAxisComponent,{dualAxis:dualAxis,showTickMarks:!1}),comparisonLines&&comparisonLines.map((function(line,i){return React.createElement(ComparisonLine_1.ComparisonLine,{key:i,dualAxis:dualAxis,comparisonLine:line})})),this.points,React.createElement(VerticalColorLegend_1.VerticalColorLegend,{manager:this}),(arrowLegend||tooltipSeries)&&React.createElement("line",{x1:bounds.right-sidebarWidth,y1:bounds.top+legendDimensions.height+2,x2:bounds.right-5,y2:bounds.top+legendDimensions.height+2,stroke:"#ccc"}),arrowLegend&&React.createElement("g",{className:"clickable",onClick:this.onToggleEndpoints},arrowLegend.render(bounds.right-sidebarWidth,bounds.top+legendDimensions.height+11)),tooltipSeries&&React.createElement(ScatterTooltip_1.ScatterTooltip,{yColumn:this.yColumn,xColumn:this.xColumn,series:tooltipSeries,maxWidth:sidebarWidth,fontSize:this.fontSize,x:bounds.right-sidebarWidth,y:bounds.top+legendDimensions.height+11+(arrowLegend?arrowLegend.height+10:0)}))}},{key:"legendY",get:function get(){return this.bounds.top}},{key:"legendX",get:function get(){return this.bounds.right-this.sidebarWidth}},{key:"colorScaleColumn",get:function get(){return this.inputTable.get(this.colorColumnSlug)}},{key:"colorScaleConfig",get:function get(){var _a;return null!==(_a=ColorScaleConfig_1.ColorScaleConfig.fromDSL(this.colorColumn.def))&&void 0!==_a?_a:this.manager.colorScale}},{key:"hasNoDataBin",get:function get(){return!this.colorColumn.isMissing&&this.colorColumn.valuesIncludingErrorValues.some((function(value){return!ErrorValues_1.isNotErrorValue(value)}))}},{key:"yAxisConfig",get:function get(){return new AxisConfig_1.AxisConfig(this.manager.yAxisConfig,this)}},{key:"xAxisConfig",get:function get(){return new AxisConfig_1.AxisConfig(this.manager.xAxisConfig,this)}},{key:"yColumnSlug",get:function get(){return ChartUtils_1.autoDetectYColumnSlugs(this.manager)[0]}},{key:"yColumn",get:function get(){return this.transformedTable.get(this.yColumnSlug)}},{key:"xColumnSlug",get:function get(){var xColumnSlug=this.manager.xColumnSlug;return null!=xColumnSlug?xColumnSlug:this.manager.table.numericColumnSlugs[1]}},{key:"xColumn",get:function get(){return this.transformedTable.get(this.xColumnSlug)}},{key:"sizeColumnSlug",get:function get(){return this.manager.sizeColumnSlug}},{key:"sizeColumn",get:function get(){return this.transformedTable.get(this.sizeColumnSlug)}},{key:"failMessage",get:function get(){return this.yColumn.isMissing?"Missing Y axis variable":this.yColumn.isMissing?"Missing X axis variable":Util_1.isEmpty(this.allEntityNamesWithXAndY)?this.manager.isRelativeMode&&this.manager.hasTimeline&&this.manager.startTime===this.manager.endTime?"Please select a start and end point on the timeline below":"No entities with data for both X and Y":Util_1.isEmpty(this.series)?"No matching data":""}},{key:"xOverrideTime",get:function get(){return this.manager.xOverrideTime}},{key:"hideBackgroundEntities",get:function get(){return this.manager.addCountryMode===GrapherConstants_1.EntitySelectionMode.Disabled}},{key:"allEntityNamesWithXAndY",get:function get(){return Util_1.intersection(this.yColumn.uniqEntityNames,this.xColumn.uniqEntityNames)}},{key:"getSeriesNamesToShow",value:function getSeriesNamesToShow(){var filterBackgroundEntities=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.hideBackgroundEntities,seriesNames=filterBackgroundEntities?this.selectionArray.selectedEntityNames:this.allEntityNamesWithXAndY;return this.manager.matchingEntitiesOnly&&!this.colorColumn.isMissing?new Set(Util_1.intersection(seriesNames,this.colorColumn.uniqEntityNames)):new Set(seriesNames)}},{key:"compareEndPointsOnly",get:function get(){return!!this.manager.compareEndPointsOnly}},{key:"allPoints",get:function get(){return Util_1.flatten(this.series.map((function(series){return series.points})))}},{key:"domainDefault",value:function domainDefault(property){var scaleType="x"===property?this.xScaleType:this.yScaleType;return this.manager.useTimelineDomains?this.manager.isRelativeMode?Util_1.relativeMinAndMax(this.allPoints,property):Util_1.domainExtent(this.allPoints.map((function(v){return v[property]})),scaleType):Util_1.domainExtent(this.pointsForAxisDomains.map((function(point){return point[property]})),scaleType,this.manager.zoomToSelection&&this.selectedPoints.length?1.1:1)}},{key:"xDomainDefault",get:function get(){return this.domainDefault("x")}},{key:"selectedPoints",get:function get(){var seriesNamesSet=this.getSeriesNamesToShow(!0);return this.allPoints.filter((function(point){return point.entityName&&seriesNamesSet.has(point.entityName)}))}},{key:"pointsForAxisDomains",get:function get(){return this.selectionArray.numSelectedEntities&&this.manager.zoomToSelection&&this.selectedPoints.length?this.selectedPoints:this.allPoints}},{key:"sizeDomain",get:function get(){if(this.sizeColumn.isMissing)return[1,100];var sizeValues=this.transformedTable.get(this.sizeColumn.slug).values.filter(Util_1.isNumber);return Util_1.domainExtent(sizeValues,GrapherConstants_1.ScaleType.linear)}},{key:"yScaleType",get:function get(){return this.manager.isRelativeMode?GrapherConstants_1.ScaleType.linear:this.yAxisConfig.scaleType||GrapherConstants_1.ScaleType.linear}},{key:"yDomainDefault",get:function get(){return this.domainDefault("y")}},{key:"verticalAxisPart",get:function get(){var _a,manager=this.manager,yDomainDefault=this.yDomainDefault,axisConfig=this.yAxisConfig,axis=axisConfig.toVerticalAxis();axis.formatColumn=this.yColumn;var label=axisConfig.label||(null===(_a=this.yColumn)||void 0===_a?void 0:_a.displayName)||"";return axis.scaleType=this.yScaleType,manager.isRelativeMode?(axis.domain=yDomainDefault,label&&label.length>1&&(axis.label="Average annual change in ".concat(Util_1.lowerCaseFirstLetterUnlessAbbreviation(label)))):(axis.updateDomainPreservingUserSettings(yDomainDefault),axis.label=label),axis}},{key:"xScaleType",get:function get(){var _a;return this.manager.isRelativeMode?GrapherConstants_1.ScaleType.linear:null!==(_a=this.xAxisConfig.scaleType)&&void 0!==_a?_a:GrapherConstants_1.ScaleType.linear}},{key:"xAxisLabelBase",get:function get(){var _a,xDimName=null===(_a=this.xColumn)||void 0===_a?void 0:_a.displayName;return void 0!==this.xOverrideTime?"".concat(xDimName," in ").concat(this.xOverrideTime):xDimName}},{key:"horizontalAxisPart",get:function get(){var xDomainDefault=this.xDomainDefault,manager=this.manager,xAxisLabelBase=this.xAxisLabelBase,xAxisConfig=this.xAxisConfig,axis=xAxisConfig.toHorizontalAxis();if(axis.formatColumn=this.xColumn,axis.scaleType=this.xScaleType,manager.isRelativeMode){axis.domain=xDomainDefault;var label=xAxisConfig.label||xAxisLabelBase;label&&label.length>1&&(axis.label="Average annual change in ".concat(Util_1.lowerCaseFirstLetterUnlessAbbreviation(label)))}else{axis.updateDomainPreservingUserSettings(xDomainDefault);var _label=xAxisConfig.label||xAxisLabelBase;_label&&(axis.label=_label)}return axis}},{key:"getPointLabel",value:function getPointLabel(row){var _a,_b,strat=this.manager.scatterPointLabelStrategy;return strat===GrapherConstants_1.ScatterPointLabelStrategy.y?null===(_a=this.yColumn)||void 0===_a?void 0:_a.formatValue(row[this.yColumnSlug]):strat===GrapherConstants_1.ScatterPointLabelStrategy.x?null===(_b=this.xColumn)||void 0===_b?void 0:_b.formatValue(row[this.xColumnSlug]):this.transformedTable.timeColumnFormatFunction(row[this.transformedTable.timeColumn.slug])}},{key:"removePointsOutsidePlane",value:function removePointsOutsidePlane(points){var yAxisConfig=this.yAxisConfig,xAxisConfig=this.xAxisConfig;return yAxisConfig.removePointsOutsideDomain||xAxisConfig.removePointsOutsideDomain?points.filter((function(point){return!xAxisConfig.shouldRemovePoint(point.x)&&!yAxisConfig.shouldRemovePoint(point.y)})):points}},{key:"allPointsBeforeEndpointsFilter",get:function get(){var _this6=this,_this$transformedTabl=this.transformedTable,entityNameSlug=_this$transformedTabl.entityNameSlug,timeColumn=_this$transformedTabl.timeColumn;return this.removePointsOutsidePlane(this.transformedTable.rows.map((function(row){var _a;return{x:row[_this6.xColumnSlug],y:row[_this6.yColumnSlug],size:ErrorValues_1.defaultIfErrorValue(row[_this6.sizeColumn.slug],0),color:ErrorValues_1.defaultIfErrorValue(row[_this6.colorColumn.slug],void 0),entityName:row[entityNameSlug],label:null!==(_a=_this6.getPointLabel(row))&&void 0!==_a?_a:"",timeValue:row[timeColumn.slug],time:{x:row[_this6.xColumn.originalTimeColumnSlug],y:row[_this6.yColumn.originalTimeColumnSlug]}}})))}},{key:"series",get:function get(){var _this7=this;return Object.entries(Util_1.groupBy(this.allPointsBeforeEndpointsFilter,(function(p){return p.entityName}))).map((function(_ref){var _ref2=_slicedToArray(_ref,2),entityName=_ref2[0],points=_ref2[1],series={seriesName:entityName,label:entityName,color:"#932834",size:_this7.getSizeFromPoints(points),points:points};return _this7.assignColorToSeries(entityName,series),series}))}},{key:"assignColorToSeries",value:function assignColorToSeries(entityName,series){if(series.points.length){var keyColor=this.transformedTable.getColorForEntityName(entityName);if(void 0!==keyColor)series.color=keyColor;else if(!this.colorColumn.isMissing){var colorValue=Util_1.last(series.points.map((function(point){return point.color}))),color=this.colorScale.getColor(colorValue);void 0!==color&&(series.color=color,series.isScaleColor=!0)}}}},{key:"getSizeFromPoints",value:function getSizeFromPoints(points){var size=Util_1.last(points.map((function(v){return v.size})).filter(Util_1.isNumber));return null!=size?size:0}}]),ScatterPlotChart}(React.Component);__decorate([mobx_1.observable],ScatterPlotChart.prototype,"hoveredSeries",void 0),__decorate([mobx_1.observable],ScatterPlotChart.prototype,"hoverColor",void 0),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"inputTable",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"transformedTableFromGrapher",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"transformedTable",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"manager",null),__decorate([mobx_1.computed.struct],ScatterPlotChart.prototype,"bounds",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"canAddCountry",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"selectionArray",null),__decorate([mobx_1.action.bound],ScatterPlotChart.prototype,"onSelectEntity",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"colorsInUse",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"fontSize",null),__decorate([mobx_1.action.bound],ScatterPlotChart.prototype,"onLegendMouseOver",null),__decorate([mobx_1.action.bound],ScatterPlotChart.prototype,"onLegendMouseLeave",null),__decorate([mobx_1.action.bound],ScatterPlotChart.prototype,"onLegendClick",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"focusColors",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"hoveredSeriesNames",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"focusedEntityNames",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"selectedEntityNames",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"displayStartTime",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"displayEndTime",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"arrowLegend",null),__decorate([mobx_1.action.bound],ScatterPlotChart.prototype,"onScatterMouseOver",null),__decorate([mobx_1.action.bound],ScatterPlotChart.prototype,"onScatterMouseLeave",null),__decorate([mobx_1.action.bound],ScatterPlotChart.prototype,"onScatterClick",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"tooltipSeries",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"legendDimensions",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"maxLegendWidth",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"sidebarMinWidth",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"sidebarMaxWidth",null),__decorate([mobx_1.computed.struct],ScatterPlotChart.prototype,"sidebarWidth",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"dualAxis",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"yAxis",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"xAxis",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"comparisonLines",null),__decorate([mobx_1.action.bound],ScatterPlotChart.prototype,"onToggleEndpoints",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"activeColors",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"hideConnectedScatterLines",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"points",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"colorColumnSlug",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"colorColumn",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"legendItems",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"title",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"legendY",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"legendX",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"colorScaleColumn",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"colorScaleConfig",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"hasNoDataBin",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"yAxisConfig",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"xAxisConfig",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"yColumnSlug",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"yColumn",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"xColumnSlug",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"xColumn",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"sizeColumnSlug",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"sizeColumn",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"failMessage",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"xOverrideTime",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"hideBackgroundEntities",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"allEntityNamesWithXAndY",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"compareEndPointsOnly",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"allPoints",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"xDomainDefault",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"selectedPoints",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"pointsForAxisDomains",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"sizeDomain",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"yScaleType",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"yDomainDefault",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"verticalAxisPart",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"xScaleType",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"xAxisLabelBase",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"horizontalAxisPart",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"allPointsBeforeEndpointsFilter",null),__decorate([mobx_1.computed],ScatterPlotChart.prototype,"series",null),ScatterPlotChart=__decorate([mobx_react_1.observer],ScatterPlotChart),exports.ScatterPlotChart=ScatterPlotChart},611:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(31),__webpack_require__(57),__webpack_require__(28),__webpack_require__(25),__webpack_require__(202),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(18),__webpack_require__(21);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Triangle=void 0;var React=__importStar(__webpack_require__(0)),mobx_react_1=__webpack_require__(58),Triangle=function(_React$Component){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(Triangle,_React$Component);var _super=_createSuper(Triangle);function Triangle(){return _classCallCheck(this,Triangle),_super.apply(this,arguments)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Triangle,[{key:"render",value:function render(){var _this$props=this.props,cx=_this$props.cx,cy=_this$props.cy,r=_this$props.r,x=cx-r,y=cy-r,points=[[x,y+2*r],[x+2*r/2,y],[x+2*r,y+2*r]];return React.createElement("polygon",Object.assign({points:points.map((function(p){return"".concat(p[0].toFixed(2),",").concat(p[1].toFixed(2))})).join(" ")},this.props))}}]),Triangle}(React.Component);Triangle=__decorate([mobx_react_1.observer],Triangle),exports.Triangle=Triangle},612:function(module,exports,__webpack_require__){"use strict";function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(36),__webpack_require__(25),__webpack_require__(28),__webpack_require__(31),__webpack_require__(48),__webpack_require__(55),__webpack_require__(94),__webpack_require__(821),__webpack_require__(33),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(18),__webpack_require__(21),__webpack_require__(29),__webpack_require__(22),__webpack_require__(17);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.LineLegend=void 0;var React=__importStar(__webpack_require__(0)),Util_1=__webpack_require__(40),mobx_1=__webpack_require__(41),mobx_react_1=__webpack_require__(58),TextWrap_1=__webpack_require__(242),Bounds_1=__webpack_require__(73),GrapherConstants_1=__webpack_require__(64);function groupBounds(group){var first=group[0],last=group[group.length-1],height=last.bounds.bottom-first.bounds.top,width=Math.max(first.bounds.width,last.bounds.width);return new Bounds_1.Bounds(first.bounds.x,first.bounds.y,width,height)}function stackGroupVertically(group,y){var currentY=y;return group.forEach((function(mark){mark.bounds=mark.bounds.set({y:currentY}),mark.repositions+=1,currentY+=mark.bounds.height+2})),group}var Label=function(_React$Component){_inherits(Label,_React$Component);var _super=_createSuper(Label);function Label(){return _classCallCheck(this,Label),_super.apply(this,arguments)}return _createClass(Label,[{key:"render",value:function render(){var _this$props=this.props,series=_this$props.series,manager=_this$props.manager,isFocus=_this$props.isFocus,needsLines=_this$props.needsLines,onMouseOver=_this$props.onMouseOver,onMouseLeave=_this$props.onMouseLeave,onClick=_this$props.onClick,x=series.origBounds.x,markerX1=x+4,markerX2=x+manager.leftPadding-4,step=(markerX2-markerX1)/(series.totalLevels+1),markerXMid=markerX1+step+series.level*step,lineColor=isFocus?"#999":"#eee",textColor=isFocus?series.color:"#ddd",annotationColor=isFocus?"#333":"#ddd";return React.createElement("g",{className:"legendMark",onMouseOver:onMouseOver,onMouseLeave:onMouseLeave,onClick:onClick},needsLines&&React.createElement("g",{className:"indicator"},React.createElement("path",{d:"M".concat(markerX1,",").concat(series.origBounds.centerY," H").concat(markerXMid," V").concat(series.bounds.centerY," H").concat(markerX2),stroke:lineColor,strokeWidth:.5,fill:"none"})),React.createElement("rect",{x:x,y:series.bounds.y,width:series.bounds.width,height:series.bounds.height,fill:"#fff",opacity:0}),series.textWrap.render(needsLines?markerX2+4:markerX1,series.bounds.y,{fill:textColor}),series.annotationTextWrap&&series.annotationTextWrap.render(needsLines?markerX2+4:markerX1,series.bounds.y+series.textWrap.height,{fill:annotationColor,className:"textAnnotation",style:{fontWeight:"lighter"}}))}}]),Label}(React.Component);Label=__decorate([mobx_react_1.observer],Label);var LineLegend=function(_React$Component2){_inherits(LineLegend,_React$Component2);var _super2=_createSuper(LineLegend);function LineLegend(){var _this;return _classCallCheck(this,LineLegend),(_this=_super2.apply(this,arguments)).leftPadding=35,_this}return _createClass(LineLegend,[{key:"fontSize",get:function get(){var _a;return.75*(null!==(_a=this.manager.fontSize)&&void 0!==_a?_a:GrapherConstants_1.BASE_FONT_SIZE)}},{key:"maxWidth",get:function get(){var _a;return null!==(_a=this.manager.maxLegendWidth)&&void 0!==_a?_a:300}},{key:"sizedLabels",get:function get(){var fontSize=this.fontSize,leftPadding=this.leftPadding,maxTextWidth=this.maxWidth-leftPadding,maxAnnotationWidth=Math.min(maxTextWidth,150);return this.manager.labelSeries.map((function(label){var annotationTextWrap=label.annotation?new TextWrap_1.TextWrap({text:label.annotation,maxWidth:maxAnnotationWidth,fontSize:.9*fontSize}):void 0,textWrap=new TextWrap_1.TextWrap({text:label.label,maxWidth:maxTextWidth,fontSize:fontSize});return Object.assign(Object.assign({},label),{textWrap:textWrap,annotationTextWrap:annotationTextWrap,width:leftPadding+Math.max(textWrap.width,annotationTextWrap?annotationTextWrap.width:0),height:textWrap.height+(annotationTextWrap?annotationTextWrap.height:0)})}))}},{key:"width",get:function get(){var _a;return 0===this.sizedLabels.length?0:null!==(_a=Util_1.max(this.sizedLabels.map((function(d){return d.width}))))&&void 0!==_a?_a:0}},{key:"onMouseOver",get:function get(){var _a;return null!==(_a=this.manager.onLegendMouseOver)&&void 0!==_a?_a:Util_1.noop}},{key:"onMouseLeave",get:function get(){var _a;return null!==(_a=this.manager.onLegendMouseLeave)&&void 0!==_a?_a:Util_1.noop}},{key:"onClick",get:function get(){var _a;return null!==(_a=this.manager.onLegendClick)&&void 0!==_a?_a:Util_1.noop}},{key:"isFocusMode",get:function get(){var _this2=this;return this.sizedLabels.some((function(label){return _this2.manager.focusedSeriesNames.includes(label.seriesName)}))}},{key:"legendX",get:function get(){var _a;return null!==(_a=this.manager.legendX)&&void 0!==_a?_a:0}},{key:"initialSeries",get:function get(){var yAxis=this.manager.yAxis,legendX=this.legendX;return Util_1.sortBy(this.sizedLabels.map((function(label){var initialY=yAxis.place(label.yValue)-label.height/2,origBounds=new Bounds_1.Bounds(legendX,initialY,label.width,label.height),y=Math.min(Math.max(initialY,yAxis.rangeMin),yAxis.rangeMax-label.height),bounds=new Bounds_1.Bounds(legendX,y,label.width,label.height);return Object.assign(Object.assign({},label),{y:y,origBounds:origBounds,bounds:bounds,isOverlap:!1,repositions:0,level:0,totalLevels:0})})),(function(label){return yAxis.place(label.yValue)}))}},{key:"standardPlacement",get:function get(){var hasOverlap,yAxis=this.manager.yAxis,groups=Util_1.cloneDeep(this.initialSeries).map((function(mark){return[mark]}));do{hasOverlap=!1;for(var i=0;i<groups.length-1;i++){var topGroup=groups[i],bottomGroup=groups[i+1],topBounds=groupBounds(topGroup),bottomBounds=groupBounds(bottomGroup);if(topBounds.intersects(bottomBounds)){var overlapHeight=topBounds.bottom-bottomBounds.top+2,newHeight=topBounds.height+2+bottomBounds.height,targetY=topBounds.top-overlapHeight*(bottomGroup.length/(topGroup.length+bottomGroup.length)),newY=targetY+Math.max(yAxis.rangeMin-targetY,0)-Math.max(targetY+newHeight-yAxis.rangeMax,0),newGroup=[].concat(_toConsumableArray(topGroup),_toConsumableArray(bottomGroup));stackGroupVertically(newGroup,newY),groups.splice(i,2,newGroup),hasOverlap=!0;break}}}while(hasOverlap&&groups.length>1);var _step,_iterator=_createForOfIteratorHelper(groups);try{for(_iterator.s();!(_step=_iterator.n()).done;){var _step2,group=_step.value,currentLevel=0,prevSign=0,_iterator2=_createForOfIteratorHelper(group);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var series=_step2.value,currentSign=Math.sign(series.bounds.y-series.origBounds.y);prevSign===currentSign&&(currentLevel-=currentSign),series.level=currentLevel,prevSign=currentSign}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}var _step3,minLevel=Util_1.min(group.map((function(mark){return mark.level}))),maxLevel=Util_1.max(group.map((function(mark){return mark.level}))),_iterator3=_createForOfIteratorHelper(group);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var mark=_step3.value;mark.level-=minLevel,mark.totalLevels=maxLevel-minLevel+1}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}}}catch(err){_iterator.e(err)}finally{_iterator.f()}return Util_1.flatten(groups)}},{key:"overlappingPlacement",get:function get(){for(var series=Util_1.cloneDeep(this.initialSeries),i=0;i<series.length;i++)for(var m1=series[i],j=i+1;j<series.length;j++){var m2=series[j];!m1.isOverlap&&m1.bounds.intersects(m2.bounds)&&(m2.isOverlap=!0)}return series}},{key:"placedSeries",get:function get(){return Util_1.sumBy(this.initialSeries,(function(series){return series.bounds.height}))+2*this.initialSeries.length>(this.manager.canAddData?this.manager.yAxis.rangeSize-30:this.manager.yAxis.rangeSize)?this.overlappingPlacement:this.standardPlacement}},{key:"backgroundSeries",get:function get(){var focusedSeriesNames=this.manager.focusedSeriesNames,isFocusMode=this.isFocusMode;return this.placedSeries.filter((function(mark){return isFocusMode?!focusedSeriesNames.includes(mark.seriesName):mark.isOverlap}))}},{key:"focusedSeries",get:function get(){var focusedSeriesNames=this.manager.focusedSeriesNames,isFocusMode=this.isFocusMode;return this.placedSeries.filter((function(mark){return isFocusMode?focusedSeriesNames.includes(mark.seriesName):!mark.isOverlap}))}},{key:"needsLines",get:function get(){return this.placedSeries.some((function(series){return series.totalLevels>1}))}},{key:"renderBackground",value:function renderBackground(){var _this3=this;return this.backgroundSeries.map((function(series,index){return React.createElement(Label,{key:"background-".concat(index,"-")+series.seriesName,series:series,manager:_this3,needsLines:_this3.needsLines,onMouseOver:function onMouseOver(){return _this3.onMouseOver(series.seriesName)},onClick:function onClick(){return _this3.onClick(series.seriesName)}})}))}},{key:"renderFocus",value:function renderFocus(){var _this4=this;return this.focusedSeries.map((function(series,index){return React.createElement(Label,{key:"focus-".concat(index,"-")+series.seriesName,series:series,manager:_this4,isFocus:!0,needsLines:_this4.needsLines,onMouseOver:function onMouseOver(){return _this4.onMouseOver(series.seriesName)},onClick:function onClick(){return _this4.onClick(series.seriesName)},onMouseLeave:function onMouseLeave(){return _this4.onMouseLeave(series.seriesName)}})}))}},{key:"manager",get:function get(){return this.props.manager}},{key:"render",value:function render(){return React.createElement("g",{className:"LineLabels",style:{cursor:this.manager.startSelectingWhenLineClicked?"pointer":"default"}},this.renderBackground(),this.renderFocus())}}]),LineLegend}(React.Component);__decorate([mobx_1.computed],LineLegend.prototype,"fontSize",null),__decorate([mobx_1.computed],LineLegend.prototype,"maxWidth",null),__decorate([mobx_1.computed.struct],LineLegend.prototype,"sizedLabels",null),__decorate([mobx_1.computed],LineLegend.prototype,"width",null),__decorate([mobx_1.computed],LineLegend.prototype,"onMouseOver",null),__decorate([mobx_1.computed],LineLegend.prototype,"onMouseLeave",null),__decorate([mobx_1.computed],LineLegend.prototype,"onClick",null),__decorate([mobx_1.computed],LineLegend.prototype,"isFocusMode",null),__decorate([mobx_1.computed],LineLegend.prototype,"legendX",null),__decorate([mobx_1.computed],LineLegend.prototype,"initialSeries",null),__decorate([mobx_1.computed],LineLegend.prototype,"standardPlacement",null),__decorate([mobx_1.computed],LineLegend.prototype,"overlappingPlacement",null),__decorate([mobx_1.computed],LineLegend.prototype,"placedSeries",null),__decorate([mobx_1.computed],LineLegend.prototype,"backgroundSeries",null),__decorate([mobx_1.computed],LineLegend.prototype,"focusedSeries",null),__decorate([mobx_1.computed],LineLegend.prototype,"needsLines",null),__decorate([mobx_1.computed],LineLegend.prototype,"manager",null),LineLegend=__decorate([mobx_react_1.observer],LineLegend),exports.LineLegend=LineLegend},613:function(module,exports,__webpack_require__){"use strict";__webpack_require__(36),__webpack_require__(28),__webpack_require__(31),Object.defineProperty(exports,"__esModule",{value:!0}),exports.withMissingValuesAsZeroes=exports.stackSeries=void 0;var Util_1=__webpack_require__(40);exports.stackSeries=function stackSeries(seriesArr){return seriesArr.forEach((function(series,seriesIndex){seriesIndex&&series.points.forEach((function(point,pointIndex){var pointBelowThisOne=seriesArr[seriesIndex-1].points[pointIndex];point.valueOffset=pointBelowThisOne.value+pointBelowThisOne.valueOffset}))})),seriesArr};exports.withMissingValuesAsZeroes=function withMissingValuesAsZeroes(seriesArr){var allXValuesSorted=Util_1.sortNumeric(Util_1.uniq(Util_1.flatten(seriesArr.map((function(series){return series.points}))).map((function(point){return point.position}))));return seriesArr.map((function(series){var pointsByPosition=Util_1.keyBy(series.points,"position");return Object.assign(Object.assign({},series),{points:allXValuesSorted.map((function(position){var _a,_b,point=pointsByPosition[position],value=null!==(_a=null==point?void 0:point.value)&&void 0!==_a?_a:0;return{time:null!==(_b=null==point?void 0:point.time)&&void 0!==_b?_b:0,position:position,value:value,valueOffset:0,fake:!point}}))})}))}},614:function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}__webpack_require__(62),__webpack_require__(32),__webpack_require__(25),__webpack_require__(39),__webpack_require__(103),__webpack_require__(192),__webpack_require__(14),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(29),__webpack_require__(22),__webpack_require__(17),Object.defineProperty(exports,"__esModule",{value:!0}),exports.getExplorerSlugFromUrl=exports.transformQueryParams=exports.decodeURIComponentOrUndefined=void 0;var ExplorerConstants_1=__webpack_require__(319),Util_1=__webpack_require__(40);exports.decodeURIComponentOrUndefined=function decodeURIComponentOrUndefined(value){return void 0!==value?decodeURIComponent(value.replace(/\+/g,"%20")):void 0};exports.transformQueryParams=function transformQueryParams(oldQueryParams,transformMap){var newQueryParams=Util_1.omit.apply(Util_1,[oldQueryParams].concat(_toConsumableArray(Object.keys(transformMap))));for(var oldParamName in transformMap)if(oldParamName in oldQueryParams){var _transformMap$oldPara=transformMap[oldParamName],newName=_transformMap$oldPara.newName,transformValue=_transformMap$oldPara.transformValue;newQueryParams[null!=newName?newName:oldParamName]=transformValue(oldQueryParams[oldParamName])}return newQueryParams};exports.getExplorerSlugFromUrl=function getExplorerSlugFromUrl(url){if(url.pathname){var match=url.pathname.match(new RegExp("^/+".concat(ExplorerConstants_1.EXPLORERS_ROUTE_FOLDER,"/+([^/]+)")));return match&&match[1]?match[1]:void 0}}},626:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var client_api_1=__webpack_require__(171),addon_viewport_1=__webpack_require__(1942);__webpack_require__(1678),__webpack_require__(1679),__webpack_require__(1680),client_api_1.addParameters({viewport:{viewports:addon_viewport_1.INITIAL_VIEWPORTS},options:{storySort:{method:"alphabetical"}}})},64:function(module,exports,__webpack_require__){"use strict";__webpack_require__(28),Object.defineProperty(exports,"__esModule",{value:!0}),exports.ScatterPointLabelStrategy=exports.WorldEntityName=exports.ScaleType=exports.GrapherTabOption=exports.ThereWasAProblemLoadingThisChart=exports.SeriesStrategy=exports.FacetAxisDomain=exports.FacetStrategy=exports.BASE_FONT_SIZE=exports.StackMode=exports.EntitySelectionMode=exports.CookieKey=exports.GRAPHER_IS_IN_IFRAME_CLASS=exports.GRAPHER_PAGE_BODY_CLASS=exports.GRAPHER_EMBEDDED_FIGURE_ATTR=exports.ChartTypeName=void 0,function(ChartTypeName){ChartTypeName.LineChart="LineChart",ChartTypeName.ScatterPlot="ScatterPlot",ChartTypeName.TimeScatter="TimeScatter",ChartTypeName.StackedArea="StackedArea",ChartTypeName.DiscreteBar="DiscreteBar",ChartTypeName.StackedDiscreteBar="StackedDiscreteBar",ChartTypeName.SlopeChart="SlopeChart",ChartTypeName.StackedBar="StackedBar",ChartTypeName.WorldMap="WorldMap"}(exports.ChartTypeName||(exports.ChartTypeName={})),exports.GRAPHER_EMBEDDED_FIGURE_ATTR="data-grapher-src",exports.GRAPHER_PAGE_BODY_CLASS="StandaloneGrapherOrExplorerPage",exports.GRAPHER_IS_IN_IFRAME_CLASS="IsInIframe",function(CookieKey){CookieKey.isAdmin="isAdmin"}(exports.CookieKey||(exports.CookieKey={})),function(EntitySelectionMode){EntitySelectionMode.MultipleEntities="add-country",EntitySelectionMode.SingleEntity="change-country",EntitySelectionMode.Disabled="disabled"}(exports.EntitySelectionMode||(exports.EntitySelectionMode={})),function(StackMode){StackMode.absolute="absolute",StackMode.relative="relative"}(exports.StackMode||(exports.StackMode={})),exports.BASE_FONT_SIZE=16,function(FacetStrategy){FacetStrategy.none="none",FacetStrategy.entity="entity",FacetStrategy.column="column"}(exports.FacetStrategy||(exports.FacetStrategy={})),function(FacetAxisDomain){FacetAxisDomain.independent="independent",FacetAxisDomain.shared="shared"}(exports.FacetAxisDomain||(exports.FacetAxisDomain={})),function(SeriesStrategy){SeriesStrategy.column="column",SeriesStrategy.entity="entity"}(exports.SeriesStrategy||(exports.SeriesStrategy={})),exports.ThereWasAProblemLoadingThisChart="There was a problem loading this chart",function(GrapherTabOption){GrapherTabOption.chart="chart",GrapherTabOption.map="map",GrapherTabOption.sources="sources",GrapherTabOption.download="download",GrapherTabOption.table="table"}(exports.GrapherTabOption||(exports.GrapherTabOption={})),function(ScaleType){ScaleType.linear="linear",ScaleType.log="log"}(exports.ScaleType||(exports.ScaleType={})),exports.WorldEntityName="World",function(ScatterPointLabelStrategy){ScatterPointLabelStrategy.year="year",ScatterPointLabelStrategy.x="x",ScatterPointLabelStrategy.y="y"}(exports.ScatterPointLabelStrategy||(exports.ScatterPointLabelStrategy={}))},73:function(module,exports,__webpack_require__){"use strict";function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}__webpack_require__(31),__webpack_require__(28),__webpack_require__(75),__webpack_require__(5),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(62),__webpack_require__(32),__webpack_require__(22),__webpack_require__(17),__webpack_require__(29),__webpack_require__(9),__webpack_require__(10),__webpack_require__(11);var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_BOUNDS=exports.Bounds=void 0;var Util_1=__webpack_require__(40),PointVector_1=__webpack_require__(239),string_pixel_width_1=__importDefault(__webpack_require__(1784)),owidTypes_1=__webpack_require__(122),Bounds=function(){function Bounds(x,y,width,height){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Bounds),this.x=x,this.y=y,this.width=Math.max(width,0),this.height=Math.max(height,0)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Bounds,[{key:"left",get:function get(){return this.x}},{key:"top",get:function get(){return this.y}},{key:"right",get:function get(){return this.x+this.width}},{key:"bottom",get:function get(){return this.y+this.height}},{key:"centerX",get:function get(){return this.x+this.width/2}},{key:"centerY",get:function get(){return this.y+this.height/2}},{key:"centerPos",get:function get(){return new PointVector_1.PointVector(this.centerX,this.centerY)}},{key:"area",get:function get(){return this.width*this.height}},{key:"topLeft",get:function get(){return new PointVector_1.PointVector(this.left,this.top)}},{key:"topRight",get:function get(){return new PointVector_1.PointVector(this.right,this.top)}},{key:"bottomLeft",get:function get(){return new PointVector_1.PointVector(this.left,this.bottom)}},{key:"bottomRight",get:function get(){return new PointVector_1.PointVector(this.right,this.bottom)}},{key:"padLeft",value:function padLeft(amount){return new Bounds(this.x+amount,this.y,this.width-amount,this.height)}},{key:"padRight",value:function padRight(amount){return new Bounds(this.x,this.y,this.width-amount,this.height)}},{key:"padBottom",value:function padBottom(amount){return new Bounds(this.x,this.y,this.width,this.height-amount)}},{key:"padTop",value:function padTop(amount){return new Bounds(this.x,this.y+amount,this.width,this.height-amount)}},{key:"padWidth",value:function padWidth(amount){return new Bounds(this.x+amount,this.y,this.width-2*amount,this.height)}},{key:"padHeight",value:function padHeight(amount){return new Bounds(this.x,this.y+amount,this.width,this.height-2*amount)}},{key:"fromLeft",value:function fromLeft(amount){return this.padRight(this.width-amount)}},{key:"fromBottom",value:function fromBottom(amount){return this.padTop(this.height-amount)}},{key:"pad",value:function pad(amount){var _a,_b,_c,_d;return Util_1.isNumber(amount)?new Bounds(this.x+amount,this.y+amount,this.width-2*amount,this.height-2*amount):this.padTop(null!==(_a=amount.top)&&void 0!==_a?_a:0).padRight(null!==(_b=amount.right)&&void 0!==_b?_b:0).padBottom(null!==(_c=amount.bottom)&&void 0!==_c?_c:0).padLeft(null!==(_d=amount.left)&&void 0!==_d?_d:0)}},{key:"expand",value:function expand(amount){return Util_1.isNumber(amount)?this.pad(-amount):this.pad(Util_1.mapValues(amount,(function(v){return void 0!==v?-v:void 0})))}},{key:"set",value:function set(props){return Bounds.fromProps(Object.assign(Object.assign({},this),props))}},{key:"scale",value:function scale(_scale){return new Bounds(this.x*_scale,this.y*_scale,this.width*_scale,this.height*_scale)}},{key:"intersects",value:function intersects(otherBounds){var r2=otherBounds;return!(r2.left>this.right||r2.right<this.left||r2.top>this.bottom||r2.bottom<this.top)}},{key:"lines",value:function lines(){return[[this.topLeft,this.topRight],[this.topRight,this.bottomRight],[this.bottomRight,this.bottomLeft],[this.bottomLeft,this.topLeft]]}},{key:"boundedPoint",value:function boundedPoint(p){return new PointVector_1.PointVector(Math.max(Math.min(p.x,this.right),this.left),Math.max(Math.min(p.y,this.bottom),this.top))}},{key:"containsPoint",value:function containsPoint(x,y){return x>=this.left&&x<=this.right&&y>=this.top&&y<=this.bottom}},{key:"contains",value:function contains(p){return this.containsPoint(p.x,p.y)}},{key:"encloses",value:function encloses(bounds){return this.containsPoint(bounds.left,bounds.top)&&this.containsPoint(bounds.left,bounds.bottom)&&this.containsPoint(bounds.right,bounds.top)&&this.containsPoint(bounds.right,bounds.bottom)}},{key:"toCSS",value:function toCSS(){return{left:"".concat(this.left,"px"),top:"".concat(this.top,"px"),width:"".concat(this.width,"px"),height:"".concat(this.height,"px")}}},{key:"toProps",value:function toProps(){return{x:this.x,y:this.y,width:this.width,height:this.height}}},{key:"toArray",value:function toArray(){return[[this.left,this.top],[this.right,this.bottom]]}},{key:"xRange",value:function xRange(){return[this.left,this.right]}},{key:"grid",value:function grid(gridParams){var _this=this,padding=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},columns=gridParams.columns,rows=gridParams.rows,_padding$columnPaddin=padding.columnPadding,columnPadding=void 0===_padding$columnPaddin?0:_padding$columnPaddin,_padding$rowPadding=padding.rowPadding,rowPadding=void 0===_padding$rowPadding?0:_padding$rowPadding,_padding$outerPadding=padding.outerPadding,outerPadding=void 0===_padding$outerPadding?0:_padding$outerPadding,contentWidth=this.width-columnPadding*(columns-1)-2*outerPadding,contentHeight=this.height-rowPadding*(rows-1)-2*outerPadding,boxWidth=Math.floor(contentWidth/columns),boxHeight=Math.floor(contentHeight/rows);return Util_1.range(0,rows*columns).map((function(index){var col=index%columns,row=Math.floor(index/columns),edges=new Set;return 0===col&&edges.add(owidTypes_1.Position.left),col===columns-1&&edges.add(owidTypes_1.Position.right),0===row&&edges.add(owidTypes_1.Position.top),row===rows-1&&edges.add(owidTypes_1.Position.bottom),{row:row,col:col,edges:edges,bounds:new Bounds(_this.x+outerPadding+col*(boxWidth+columnPadding),_this.y+outerPadding+row*(boxHeight+rowPadding),boxWidth,boxHeight)}}))}},{key:"yRange",value:function yRange(){return[this.bottom,this.top]}},{key:"equals",value:function equals(bounds){return this.x===bounds.x&&this.y===bounds.y&&this.width===bounds.width&&this.height===bounds.height}},{key:"distanceToPointSq",value:function distanceToPointSq(p){if(this.contains(p))return 0;var cx=Math.max(Math.min(p.x,this.x+this.width),this.x),cy=Math.max(Math.min(p.y,this.y+this.height),this.y);return(p.x-cx)*(p.x-cx)+(p.y-cy)*(p.y-cy)}},{key:"distanceToPoint",value:function distanceToPoint(p){return Math.sqrt(this.distanceToPointSq(p))}}],[{key:"fromProps",value:function fromProps(props){return new Bounds(props.x,props.y,props.width,props.height)}},{key:"fromBBox",value:function fromBBox(bbox){return this.fromProps(bbox)}},{key:"fromRect",value:function fromRect(rect){return new Bounds(rect.left,rect.top,rect.width,rect.height)}},{key:"fromElement",value:function fromElement(el){return Bounds.fromRect(el.getBoundingClientRect())}},{key:"fromCorners",value:function fromCorners(p1,p2){var x1=Math.min(p1.x,p2.x),x2=Math.max(p1.x,p2.x),y1=Math.min(p1.y,p2.y);return new Bounds(x1,y1,x2-x1,Math.max(p1.y,p2.y)-y1)}},{key:"merge",value:function merge(boundsList){var _step,x1=1/0,y1=1/0,x2=-1/0,y2=-1/0,_iterator=_createForOfIteratorHelper(boundsList);try{for(_iterator.s();!(_step=_iterator.n()).done;){var b=_step.value;x1=Math.min(x1,b.x),y1=Math.min(y1,b.y),x2=Math.max(x2,b.x+b.width),y2=Math.max(y2,b.y+b.height)}}catch(err){_iterator.e(err)}finally{_iterator.f()}return Bounds.fromCorners(new PointVector_1.PointVector(x1,y1),new PointVector_1.PointVector(x2,y2))}},{key:"empty",value:function empty(){return new Bounds(0,0,0,0)}},{key:"forText",value:function forText(){var str=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",_ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref$x=_ref.x,x=void 0===_ref$x?0:_ref$x,_ref$y=_ref.y,y=void 0===_ref$y?0:_ref$y,_ref$fontSize=_ref.fontSize,fontSize=void 0===_ref$fontSize?16:_ref$fontSize,_ref$fontWeight=_ref.fontWeight,fontWeight=void 0===_ref$fontWeight?400:_ref$fontWeight;str=str.replace(/ +/g," ");var isBold=fontWeight>=600,bounds=Bounds.empty();if(str){var width=string_pixel_width_1.default(str,{font:"arial",size:fontSize,bold:isBold}),height=fontSize;bounds=new Bounds(x,y-height,width,height)}return bounds}}]),Bounds}();exports.Bounds=Bounds,exports.DEFAULT_BOUNDS=new Bounds(0,0,640,480)},819:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(31),__webpack_require__(197),__webpack_require__(32),__webpack_require__(68),__webpack_require__(5),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(36),__webpack_require__(48),__webpack_require__(55),__webpack_require__(28),__webpack_require__(25),__webpack_require__(14),__webpack_require__(79),__webpack_require__(29),__webpack_require__(75),__webpack_require__(33),__webpack_require__(9),__webpack_require__(10),__webpack_require__(11),__webpack_require__(18),__webpack_require__(21);var Explorer_1,__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Explorer=void 0;var react_1=__importDefault(__webpack_require__(0)),mobx_react_1=__webpack_require__(58),mobx_1=__webpack_require__(41),ExplorerControls_1=__webpack_require__(1688),react_dom_1=__importDefault(__webpack_require__(90)),ExplorerProgram_1=__webpack_require__(979),Grapher_1=__webpack_require__(470),Util_1=__webpack_require__(40),SlideShowController_1=__webpack_require__(1876),ExplorerConstants_1=__webpack_require__(319),SelectionArray_1=__webpack_require__(394),ErrorValues_1=__webpack_require__(277),Bounds_1=__webpack_require__(73),react_fontawesome_1=__webpack_require__(123),faChartLine_1=__webpack_require__(1877),EntityPicker_1=__webpack_require__(1039),classnames_1=__importDefault(__webpack_require__(139)),CoreColumnDef_1=__webpack_require__(199),OwidTable_1=__webpack_require__(201),clientSettings_1=__webpack_require__(1036),ExplorerUrlMigrations_1=__webpack_require__(1880),Url_1=__webpack_require__(395),EntityUrlBuilder_1=__webpack_require__(471),PromiseCache_1=__webpack_require__(989),PromiseSwitcher_1=__webpack_require__(1885),renderLivePreviewVersion=function renderLivePreviewVersion(props){var renderedVersion;setInterval((function(){var _a,versionToRender=null!==(_a=localStorage.getItem(ExplorerConstants_1.UNSAVED_EXPLORER_DRAFT+props.slug))&&void 0!==_a?_a:props.program;if(versionToRender!==renderedVersion){var newProps=Object.assign(Object.assign({},props),{program:versionToRender});react_dom_1.default.render(react_1.default.createElement(Explorer,Object.assign({},newProps,{queryStr:window.location.search,key:Date.now(),isPreview:!0})),document.getElementById(ExplorerConstants_1.ExplorerContainerId)),renderedVersion=versionToRender}}),1e3)},isNarrow=function isNarrow(){return window.screen.width<450||document.documentElement.clientWidth<=800},Explorer=Explorer_1=function(_react_1$default$Comp){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(Explorer,_react_1$default$Comp);var _super=_createSuper(Explorer);function Explorer(){var _this,_a,_b;return _classCallCheck(this,Explorer),(_this=_super.apply(this,arguments)).initialQueryParams=Url_1.Url.fromQueryStr(null!==(_a=_this.props.queryStr)&&void 0!==_a?_a:"").queryParams,_this.explorerProgram=ExplorerProgram_1.ExplorerProgram.fromJson(_this.props).initDecisionMatrix(_this.initialQueryParams),_this.embedDialogHideControls=!0,_this.selection=null!==(_b=_this.props.selection)&&void 0!==_b?_b:new SelectionArray_1.SelectionArray(_this.explorerProgram.selection,void 0,_this.explorerProgram.entityType),_this.persistedGrapherQueryParamsBySelectedRow=new Map,_this.futureGrapherTable=new PromiseSwitcher_1.PromiseSwitcher({onResolve:function onResolve(table){return _this.setGrapherTable(table)},onReject:function onReject(error){var _a;return null===(_a=_this.grapher)||void 0===_a?void 0:_a.setError(error)}}),_this.tableLoader=new PromiseCache_1.PromiseCache((function(slug){return _this.explorerProgram.constructTable(slug)})),_this.onChangeChoice=function(choiceTitle){return function(value){var currentlySelectedGrapherRow=_this.explorerProgram.currentlySelectedGrapherRow;_this.explorerProgram.decisionMatrix.setValueCommand(choiceTitle,value),currentlySelectedGrapherRow&&_this.reactToUserChangingSelection(currentlySelectedGrapherRow)}},_this.isNarrow=isNarrow(),_this.grapherContainerRef=react_1.default.createRef(),_this.grapherBounds=Bounds_1.DEFAULT_BOUNDS,_this.grapherRef=react_1.default.createRef(),_this.showMobileControlsPopup=!1,_this.entityPickerMetric=_this.initialQueryParams.pickerMetric,_this.entityPickerSort=_this.initialQueryParams.pickerSort,_this.entityPickerTableIsLoading=!1,_this.futureEntityPickerTable=new PromiseSwitcher_1.PromiseSwitcher({onResolve:function onResolve(table){_this.entityPickerTable=table,_this.entityPickerTableIsLoading=!1},onReject:function onReject(){_this.entityPickerTableIsLoading=!1}}),_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Explorer,[{key:"setGrapher",value:function setGrapher(grapher){this.grapher=grapher}},{key:"grapherConfigs",get:function get(){var arr=this.props.grapherConfigs||[],grapherConfigsMap=new Map;return arr.forEach((function(config){return grapherConfigsMap.set(config.id,config)})),grapherConfigsMap}},{key:"componentDidMount",value:function componentDidMount(){var _a,_b;this.setGrapher(this.grapherRef.current),this.updateGrapherFromExplorer(),this.updateEntityPickerTable();var url=Url_1.Url.fromQueryParams(this.initialQueryParams);(null===(_a=this.props.selection)||void 0===_a?void 0:_a.hasSelection)&&(url=EntityUrlBuilder_1.setSelectedEntityNamesParam(url,this.props.selection.selectedEntityNames)),null===(_b=this.grapher)||void 0===_b||_b.populateFromQueryParams(url.queryParams),Util_1.exposeInstanceOnWindow(this,"explorer"),this.onResizeThrottled=Util_1.throttle(this.onResize,100),window.addEventListener("resize",this.onResizeThrottled),this.onResize(),this.props.isInStandalonePage&&this.bindToWindow()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.onResizeThrottled&&window.removeEventListener("resize",this.onResizeThrottled)}},{key:"initSlideshow",value:function initSlideshow(){var grapher=this.grapher;grapher&&!grapher.slideShow&&(grapher.slideShow=new SlideShowController_1.SlideShowController(this.explorerProgram.decisionMatrix.allDecisionsAsQueryParams(),0,this))}},{key:"reactToUserChangingSelection",value:function reactToUserChangingSelection(oldSelectedRow){if(this.grapher&&this.explorerProgram.currentlySelectedGrapherRow){this.initSlideshow();var oldGrapherParams=this.grapher.changedParams;this.persistedGrapherQueryParamsBySelectedRow.set(oldSelectedRow,oldGrapherParams);var newGrapherParams=Object.assign(Object.assign({},this.persistedGrapherQueryParamsBySelectedRow.get(this.explorerProgram.currentlySelectedGrapherRow)),{time:this.grapher.timeParam});this.updateGrapherFromExplorer(),this.grapher.populateFromQueryParams(newGrapherParams)}}},{key:"setGrapherTable",value:function setGrapherTable(table){this.grapher&&(this.grapher.inputTable=table,this.grapher.appendNewEntitySelectionOptions())}},{key:"updateGrapherFromExplorer",value:function updateGrapherFromExplorer(){var _a,_b,grapher=this.grapher;if(grapher){var grapherConfigFromExplorer=this.explorerProgram.grapherConfig,grapherId=grapherConfigFromExplorer.grapherId,tableSlug=grapherConfigFromExplorer.tableSlug,yScaleToggle=grapherConfigFromExplorer.yScaleToggle,yAxisMin=grapherConfigFromExplorer.yAxisMin,facetYDomain=grapherConfigFromExplorer.facetYDomain,hasGrapherId=grapherId&&ErrorValues_1.isNotErrorValue(grapherId),grapherConfig=hasGrapherId&&null!==(_a=this.grapherConfigs.get(grapherId))&&void 0!==_a?_a:{},config=Object.assign(Object.assign(Object.assign({},grapherConfig),grapherConfigFromExplorer),{hideEntityControls:this.showExplorerControls,manuallyProvideData:!!tableSlug});grapher.setAuthoredVersion(config),grapher.reset(),grapher.yAxis.canChangeScaleType=yScaleToggle,grapher.yAxis.min=yAxisMin,facetYDomain&&(grapher.yAxis.facetDomain=facetYDomain),grapher.updateFromObject(config),hasGrapherId||(null===(_b=this.grapher)||void 0===_b||_b.clearErrors(),this.setGrapherTable(OwidTable_1.BlankOwidTable(tableSlug,"Loading table '".concat(tableSlug,"'"))),this.futureGrapherTable.set(this.tableLoader.get(tableSlug)),grapher.id=0),grapher.downloadData(),grapher.slug=this.explorerProgram.slug,this.downloadDataLink&&(grapher.externalCsvLink=this.downloadDataLink)}}},{key:"setSlide",value:function setSlide(choiceParams){this.explorerProgram.decisionMatrix.setValuesFromChoiceParams(choiceParams)}},{key:"currentChoiceParams",get:function get(){return this.explorerProgram.decisionMatrix.currentParams}},{key:"queryParams",get:function get(){if(!this.grapher)return{};window.location.href.includes(ExplorerConstants_1.EXPLORERS_PREVIEW_ROUTE)&&localStorage.setItem(ExplorerConstants_1.UNSAVED_EXPLORER_PREVIEW_QUERYPARAMS+this.explorerProgram.slug,JSON.stringify(this.currentChoiceParams));var url=Url_1.Url.fromQueryParams(Util_1.omitUndefinedValues(Object.assign(Object.assign(Object.assign({},this.grapher.changedParams),{pickerSort:this.entityPickerSort,pickerMetric:this.entityPickerMetric,hideControls:this.initialQueryParams.hideControls||void 0}),this.currentChoiceParams)));return(url=EntityUrlBuilder_1.setSelectedEntityNamesParam(url,this.selection.hasSelection?this.selection.selectedEntityNames:void 0)).queryParams}},{key:"currentUrl",get:function get(){return this.props.isPreview?Url_1.Url.fromQueryParams(this.queryParams):Url_1.Url.fromURL(this.baseUrl).setQueryParams(this.queryParams)}},{key:"bindToWindow",value:function bindToWindow(){var _this2=this,pushParams=function pushParams(){return Url_1.setWindowUrl(_this2.currentUrl)},debouncedPushParams=Util_1.debounce(pushParams,100);mobx_1.reaction((function(){return _this2.queryParams}),(function(){var _a;return(null===(_a=_this2.grapher)||void 0===_a?void 0:_a.debounceMode)?debouncedPushParams():pushParams()}))}},{key:"panels",get:function get(){var _this3=this;return this.explorerProgram.decisionMatrix.choicesWithAvailability.map((function(choice){return react_1.default.createElement(ExplorerControls_1.ExplorerControlPanel,{key:choice.title,explorerSlug:_this3.explorerProgram.slug,choice:choice,onChange:_this3.onChangeChoice(choice.title),isMobile:_this3.isNarrow})}))}},{key:"renderHeaderElement",value:function renderHeaderElement(){return react_1.default.createElement("div",{className:"ExplorerHeaderBox"},react_1.default.createElement("div",null),react_1.default.createElement("div",{className:"ExplorerTitle"},this.explorerProgram.explorerTitle),react_1.default.createElement("div",{className:"ExplorerSubtitle",dangerouslySetInnerHTML:{__html:this.explorerProgram.explorerSubtitle||""}}))}},{key:"isInIFrame",get:function get(){return Util_1.isInIFrame()}},{key:"showExplorerControls",get:function get(){return!this.props.isEmbeddedInAnOwidPage&&!this.isInIFrame||!(this.explorerProgram.hideControls||"true"===this.initialQueryParams.hideControls)}},{key:"downloadDataLink",get:function get(){return this.explorerProgram.downloadDataLink}},{key:"renderControlBar",value:function renderControlBar(){return react_1.default.createElement(ExplorerControls_1.ExplorerControlBar,{isMobile:this.isNarrow,showControls:this.showMobileControlsPopup,closeControls:this.closeControls},this.panels)}},{key:"renderEntityPicker",value:function renderEntityPicker(){return react_1.default.createElement(EntityPicker_1.EntityPicker,{key:"entityPicker",manager:this,isDropdownMenu:this.isNarrow})}},{key:"toggleMobileControls",value:function toggleMobileControls(){this.showMobileControlsPopup=!this.showMobileControlsPopup}},{key:"onResize",value:function onResize(){this.isNarrow=isNarrow(),this.grapherBounds=this.getGrapherBounds()||this.grapherBounds}},{key:"getGrapherBounds",value:function getGrapherBounds(){var grapherContainer=this.grapherContainerRef.current;return grapherContainer?new Bounds_1.Bounds(0,0,grapherContainer.clientWidth,grapherContainer.clientHeight):void 0}},{key:"mobileCustomizeButton",get:function get(){return react_1.default.createElement("a",{className:"btn btn-primary mobile-button",onClick:this.toggleMobileControls,"data-track-note":"covid-customize-chart"},react_1.default.createElement(react_fontawesome_1.FontAwesomeIcon,{icon:faChartLine_1.faChartLine})," Customize chart")}},{key:"closeControls",value:function closeControls(){this.showMobileControlsPopup=!1}},{key:"showHeaderElement",get:function get(){return this.showExplorerControls&&this.explorerProgram.explorerTitle&&this.panels.length>0}},{key:"render",value:function render(){var showExplorerControls=this.showExplorerControls,showHeaderElement=this.showHeaderElement;return react_1.default.createElement("div",{className:classnames_1.default({Explorer:!0,"mobile-explorer":this.isNarrow,HideControls:!showExplorerControls,"is-embed":this.props.isEmbeddedInAnOwidPage})},showHeaderElement&&this.renderHeaderElement(),showHeaderElement&&this.renderControlBar(),showExplorerControls&&this.renderEntityPicker(),showExplorerControls&&this.isNarrow&&this.mobileCustomizeButton,react_1.default.createElement("div",{className:"ExplorerFigure",ref:this.grapherContainerRef},react_1.default.createElement(Grapher_1.Grapher,{bounds:this.grapherBounds,enableKeyboardShortcuts:!0,manager:this,ref:this.grapherRef})))}},{key:"editUrl",get:function get(){return"".concat(ExplorerConstants_1.EXPLORERS_ROUTE_FOLDER,"/").concat(this.props.slug)}},{key:"baseUrl",get:function get(){return"".concat(clientSettings_1.BAKED_BASE_URL,"/").concat(ExplorerConstants_1.EXPLORERS_ROUTE_FOLDER,"/").concat(this.props.slug)}},{key:"canonicalUrl",get:function get(){var _a;return null!==(_a=this.props.canonicalUrl)&&void 0!==_a?_a:this.currentUrl.fullUrl}},{key:"embedDialogUrl",get:function get(){return this.currentUrl.updateQueryParams({hideControls:this.embedDialogHideControls.toString()}).fullUrl}},{key:"embedDialogToggleHideControls",value:function embedDialogToggleHideControls(){this.embedDialogHideControls=!this.embedDialogHideControls}},{key:"embedDialogAdditionalElements",get:function get(){return react_1.default.createElement("div",{style:{marginTop:".5rem"}},react_1.default.createElement("label",null,react_1.default.createElement("input",{type:"checkbox",checked:this.embedDialogHideControls,onChange:this.embedDialogToggleHideControls})," ","Hide controls"))}},{key:"grapherTable",get:function get(){var _a;return null===(_a=this.grapher)||void 0===_a?void 0:_a.tableAfterAuthorTimelineFilter}},{key:"updateEntityPickerTable",value:function updateEntityPickerTable(){this.entityPickerMetric&&(this.entityPickerTableIsLoading=!0,this.futureEntityPickerTable.set(this.tableLoader.get(this.getTableSlugOfColumnSlug(this.entityPickerMetric))))}},{key:"setEntityPicker",value:function setEntityPicker(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},metric=_ref.metric,sort=_ref.sort;metric&&(this.entityPickerMetric=metric),sort&&(this.entityPickerSort=sort),this.updateEntityPickerTable()}},{key:"tableSlugHasColumnSlug",value:function tableSlugHasColumnSlug(tableSlug,columnSlug){var _a;return!!(null===(_a=this.explorerProgram.columnDefsByTableSlug.get(tableSlug))||void 0===_a?void 0:_a.find((function(def){return def.slug===columnSlug})))}},{key:"getTableSlugOfColumnSlug",value:function getTableSlugOfColumnSlug(columnSlug){var _this4=this,grapherTableSlug=this.explorerProgram.grapherConfig.tableSlug;return this.tableSlugHasColumnSlug(grapherTableSlug,columnSlug)?grapherTableSlug:this.explorerProgram.tableSlugs.find((function(tableSlug){return _this4.tableSlugHasColumnSlug(tableSlug,columnSlug)}))}},{key:"entityPickerColumnDefs",get:function get(){var allColumnDefs=Util_1.uniqBy(Util_1.flatten(Array.from(this.explorerProgram.columnDefsByTableSlug.values())),(function(def){return def.slug}));if(this.explorerProgram.pickerColumnSlugs){var columnDefsBySlug=Util_1.keyMap(allColumnDefs,(function(def){return def.slug}));return Util_1.excludeUndefined(this.explorerProgram.pickerColumnSlugs.map((function(slug){return columnDefsBySlug.get(slug)})))}var discardColumnTypes=new Set([CoreColumnDef_1.ColumnTypeNames.Year,CoreColumnDef_1.ColumnTypeNames.Date,CoreColumnDef_1.ColumnTypeNames.Day,CoreColumnDef_1.ColumnTypeNames.EntityId,CoreColumnDef_1.ColumnTypeNames.EntityCode]);return allColumnDefs.filter((function(def){return void 0===def.type||!discardColumnTypes.has(def.type)}))}},{key:"requiredColumnSlugs",get:function get(){var _a,_b;return null!==(_b=null===(_a=this.grapher)||void 0===_a?void 0:_a.newSlugs)&&void 0!==_b?_b:[]}}],[{key:"renderSingleExplorerOnExplorerPage",value:function renderSingleExplorerOnExplorerPage(program,grapherConfigs,urlMigrationSpec){var props=Object.assign(Object.assign({},program),{grapherConfigs:grapherConfigs,isEmbeddedInAnOwidPage:!1,isInStandalonePage:!0});if(window.location.href.includes(ExplorerConstants_1.EXPLORERS_PREVIEW_ROUTE))renderLivePreviewVersion(props);else{var url=Url_1.Url.fromURL(window.location.href);if(urlMigrationSpec){var explorerUrlMigrationId=urlMigrationSpec.explorerUrlMigrationId,baseQueryStr=urlMigrationSpec.baseQueryStr,migration=ExplorerUrlMigrations_1.explorerUrlMigrationsById[explorerUrlMigrationId];migration?url=migration.migrateUrl(url,baseQueryStr):console.error("No explorer URL migration with id ".concat(explorerUrlMigrationId))}url=ExplorerUrlMigrations_1.migrateExplorerUrl(url),Url_1.setWindowUrl(url),react_dom_1.default.render(react_1.default.createElement(Explorer_1,Object.assign({},props,{queryStr:url.queryStr})),document.getElementById(ExplorerConstants_1.ExplorerContainerId))}}}]),Explorer}(react_1.default.Component);__decorate([mobx_1.observable],Explorer.prototype,"embedDialogHideControls",void 0),__decorate([mobx_1.observable.ref],Explorer.prototype,"grapher",void 0),__decorate([mobx_1.action.bound],Explorer.prototype,"setGrapher",null),__decorate([mobx_1.computed],Explorer.prototype,"grapherConfigs",null),__decorate([mobx_1.action.bound],Explorer.prototype,"reactToUserChangingSelection",null),__decorate([mobx_1.action.bound],Explorer.prototype,"setGrapherTable",null),__decorate([mobx_1.action.bound],Explorer.prototype,"updateGrapherFromExplorer",null),__decorate([mobx_1.action.bound],Explorer.prototype,"setSlide",null),__decorate([mobx_1.computed],Explorer.prototype,"currentChoiceParams",null),__decorate([mobx_1.computed],Explorer.prototype,"queryParams",null),__decorate([mobx_1.computed],Explorer.prototype,"currentUrl",null),__decorate([mobx_1.observable],Explorer.prototype,"isNarrow",void 0),__decorate([mobx_1.computed],Explorer.prototype,"isInIFrame",null),__decorate([mobx_1.computed],Explorer.prototype,"showExplorerControls",null),__decorate([mobx_1.computed],Explorer.prototype,"downloadDataLink",null),__decorate([mobx_1.observable],Explorer.prototype,"grapherContainerRef",void 0),__decorate([mobx_1.observable.ref],Explorer.prototype,"grapherBounds",void 0),__decorate([mobx_1.observable.ref],Explorer.prototype,"grapherRef",void 0),__decorate([mobx_1.action.bound],Explorer.prototype,"toggleMobileControls",null),__decorate([mobx_1.action.bound],Explorer.prototype,"onResize",null),__decorate([mobx_1.observable],Explorer.prototype,"showMobileControlsPopup",void 0),__decorate([mobx_1.action.bound],Explorer.prototype,"closeControls",null),__decorate([mobx_1.computed],Explorer.prototype,"showHeaderElement",null),__decorate([mobx_1.computed],Explorer.prototype,"editUrl",null),__decorate([mobx_1.computed],Explorer.prototype,"baseUrl",null),__decorate([mobx_1.computed],Explorer.prototype,"canonicalUrl",null),__decorate([mobx_1.computed],Explorer.prototype,"embedDialogUrl",null),__decorate([mobx_1.action.bound],Explorer.prototype,"embedDialogToggleHideControls",null),__decorate([mobx_1.computed],Explorer.prototype,"embedDialogAdditionalElements",null),__decorate([mobx_1.computed],Explorer.prototype,"grapherTable",null),__decorate([mobx_1.observable],Explorer.prototype,"entityPickerMetric",void 0),__decorate([mobx_1.observable],Explorer.prototype,"entityPickerSort",void 0),__decorate([mobx_1.observable.ref],Explorer.prototype,"entityPickerTable",void 0),__decorate([mobx_1.observable.ref],Explorer.prototype,"entityPickerTableIsLoading",void 0),__decorate([mobx_1.computed],Explorer.prototype,"entityPickerColumnDefs",null),__decorate([mobx_1.computed],Explorer.prototype,"requiredColumnSlugs",null),Explorer=Explorer_1=__decorate([mobx_react_1.observer],Explorer),exports.Explorer=Explorer},979:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}__webpack_require__(106),__webpack_require__(5),__webpack_require__(31),__webpack_require__(22),__webpack_require__(65),__webpack_require__(32),__webpack_require__(33),__webpack_require__(132),__webpack_require__(151),__webpack_require__(28),__webpack_require__(68),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(36),__webpack_require__(17),__webpack_require__(25),__webpack_require__(39),__webpack_require__(57),__webpack_require__(372),__webpack_require__(18),__webpack_require__(21),__webpack_require__(9),__webpack_require__(10),__webpack_require__(11);var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.trimAndParseObject=exports.makeFullPath=exports.ExplorerProgram=exports.EXPLORER_FILE_SUFFIX=void 0;var Util_1=__webpack_require__(40),ExplorerConstants_1=__webpack_require__(319),CoreTable_1=__webpack_require__(598),ExplorerGrammar_1=__webpack_require__(1770),GridLangConstants_1=__webpack_require__(240),OwidTable_1=__webpack_require__(201),GridProgram_1=__webpack_require__(1775),GrapherGrammar_1=__webpack_require__(600),ColumnGrammar_1=__webpack_require__(987),ExplorerDecisionMatrix_1=__webpack_require__(1778),PromiseCache_1=__webpack_require__(989);exports.EXPLORER_FILE_SUFFIX=".explorer.tsv";var ExplorerRootDef=Object.assign(Object.assign({},GridLangConstants_1.RootKeywordCellDef),{grammar:ExplorerGrammar_1.ExplorerGrammar}),ExplorerProgram=function(_GridProgram_1$GridPr){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(ExplorerProgram,_GridProgram_1$GridPr);var _super=_createSuper(ExplorerProgram);function ExplorerProgram(slug,tsv,lastCommit){var _this,_a;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ExplorerProgram),(_this=_super.call(this,slug,tsv,lastCommit,ExplorerRootDef)).decisionMatrix=new ExplorerDecisionMatrix_1.DecisionMatrix(null!==(_a=_this.decisionMatrixCode)&&void 0!==_a?_a:"",null==lastCommit?void 0:lastCommit.hash),_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(ExplorerProgram,[{key:"clone",get:function get(){return ExplorerProgram.fromJson(this.toJson())}},{key:"isNewFile",get:function get(){return this.slug===ExplorerConstants_1.DefaultNewExplorerSlug}},{key:"filename",get:function get(){return this.slug+exports.EXPLORER_FILE_SUFFIX}},{key:"initDecisionMatrix",value:function initDecisionMatrix(choiceParams){return this.decisionMatrix.setValuesFromChoiceParams(choiceParams),this}},{key:"fullPath",get:function get(){return exports.makeFullPath(this.slug)}},{key:"currentlySelectedGrapherRow",get:function get(){var row=this.getKeywordIndex(ExplorerGrammar_1.ExplorerGrammar.graphers.keyword);return-1===row?void 0:row+this.decisionMatrix.selectedRowIndex+2}},{key:"explorerTitle",get:function get(){return this.getLineValue(ExplorerGrammar_1.ExplorerGrammar.explorerTitle.keyword)}},{key:"title",get:function get(){return this.getLineValue(ExplorerGrammar_1.ExplorerGrammar.title.keyword)}},{key:"subNavId",get:function get(){return this.getLineValue(ExplorerGrammar_1.ExplorerGrammar.subNavId.keyword)}},{key:"googleSheet",get:function get(){return this.getLineValue(ExplorerGrammar_1.ExplorerGrammar.googleSheet.keyword)}},{key:"hideAlertBanner",get:function get(){return this.getLineValue(ExplorerGrammar_1.ExplorerGrammar.hideAlertBanner.keyword)===GridLangConstants_1.GridBoolean.true}},{key:"subNavCurrentId",get:function get(){return this.getLineValue(ExplorerGrammar_1.ExplorerGrammar.subNavCurrentId.keyword)}},{key:"thumbnail",get:function get(){return this.getLineValue(ExplorerGrammar_1.ExplorerGrammar.thumbnail.keyword)}},{key:"explorerSubtitle",get:function get(){return this.getLineValue(ExplorerGrammar_1.ExplorerGrammar.explorerSubtitle.keyword)}},{key:"entityType",get:function get(){return this.getLineValue(ExplorerGrammar_1.ExplorerGrammar.entityType.keyword)}},{key:"selection",get:function get(){var _a;return null===(_a=this.getLine(ExplorerGrammar_1.ExplorerGrammar.selection.keyword))||void 0===_a?void 0:_a.split(this.cellDelimiter).slice(1)}},{key:"pickerColumnSlugs",get:function get(){var slugs=this.getLineValue(ExplorerGrammar_1.ExplorerGrammar.pickerColumnSlugs.keyword);return slugs?slugs.split(" "):void 0}},{key:"hideControls",get:function get(){return this.getLineValue(ExplorerGrammar_1.ExplorerGrammar.hideControls.keyword)}},{key:"downloadDataLink",get:function get(){return this.getLineValue(ExplorerGrammar_1.ExplorerGrammar.downloadDataLink.keyword)}},{key:"isPublished",get:function get(){return this.getLineValue(ExplorerGrammar_1.ExplorerGrammar.isPublished.keyword)===GridLangConstants_1.GridBoolean.true}},{key:"setPublished",value:function setPublished(value){return this.clone.setLineValue(ExplorerGrammar_1.ExplorerGrammar.isPublished.keyword,value?GridLangConstants_1.GridBoolean.true:GridLangConstants_1.GridBoolean.false)}},{key:"wpBlockId",get:function get(){var blockIdString=this.getLineValue(ExplorerGrammar_1.ExplorerGrammar.wpBlockId.keyword);return blockIdString?parseInt(blockIdString,10):void 0}},{key:"decisionMatrixCode",get:function get(){var keywordIndex=this.getKeywordIndex(ExplorerGrammar_1.ExplorerGrammar.graphers.keyword);if(-1!==keywordIndex)return this.getBlock(keywordIndex)}},{key:"grapherCount",get:function get(){return this.decisionMatrix.numRows||1}},{key:"tableCount",get:function get(){return this.lines.filter((function(line){return line.startsWith(ExplorerGrammar_1.ExplorerGrammar.table.keyword)})).length}},{key:"inlineTableCount",get:function get(){var _this2=this;return this.lines.filter((function(line){return line.startsWith(ExplorerGrammar_1.ExplorerGrammar.table.keyword)})).filter((function(line){var _a,data=null===(_a=_this2.getTableDef(line.split(_this2.cellDelimiter)[1]))||void 0===_a?void 0:_a.inlineData;return!!data&&data.trim()})).length}},{key:"tableSlugs",get:function get(){var _this3=this;return this.lines.filter((function(line){return line.startsWith(ExplorerGrammar_1.ExplorerGrammar.table.keyword)})).map((function(line){return line.split(_this3.cellDelimiter)[2]}))}},{key:"columnDefsByTableSlug",get:function get(){var _this4=this,result=new Map;return this.tableSlugs.forEach((function(tableSlug){var tableDef=_this4.getTableDef(tableSlug);tableDef&&tableDef.columnDefinitions&&result.set(tableSlug,tableDef.columnDefinitions)})),result}},{key:"replaceTableWithInlineDataAndAutofilledColumnDefsCommand",value:function replaceTableWithInlineDataAndAutofilledColumnDefsCommand(tableSlug){return __awaiter(this,void 0,void 0,regeneratorRuntime.mark((function _callee(){var clone,colDefRow,table,tableDefRow,newCols,missing;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return clone=this.clone,(colDefRow=clone.getRowMatchingWords(ExplorerGrammar_1.ExplorerGrammar.columns.keyword,tableSlug))>-1&&(clone.deleteBlock(colDefRow),clone.deleteLine(colDefRow)),_context.next=5,clone.constructTable(tableSlug);case 5:return table=_context.sent,(tableDefRow=clone.getRowMatchingWords(ExplorerGrammar_1.ExplorerGrammar.table.keyword,void 0,tableSlug))>-1&&(clone.deleteBlock(tableDefRow),clone.deleteLine(tableDefRow)),newCols=table.autodetectedColumnDefs,missing=newCols.appendColumns([{slug:ColumnGrammar_1.ColumnGrammar.notes.keyword,values:newCols.indices.map((function(){return"Unreviewed"}))}]).select([ColumnGrammar_1.ColumnGrammar.slug.keyword,,ColumnGrammar_1.ColumnGrammar.name.keyword,,ColumnGrammar_1.ColumnGrammar.type.keyword,ColumnGrammar_1.ColumnGrammar.notes.keyword]),clone.appendBlock(ExplorerGrammar_1.ExplorerGrammar.table.keyword,table.toTsv()),clone.appendBlock(ExplorerGrammar_1.ExplorerGrammar.columns.keyword,missing.toTsv()),_context.abrupt("return",clone);case 13:case"end":return _context.stop()}}),_callee,this)})))}},{key:"autofillMissingColumnDefinitionsForTableCommand",value:function autofillMissingColumnDefinitionsForTableCommand(tableSlug){return __awaiter(this,void 0,void 0,regeneratorRuntime.mark((function _callee2(){var clone,remoteTable,existingTableDef,table,newCols,missing,colDefsRow;return regeneratorRuntime.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return clone=this.clone,_context2.next=3,clone.constructTable(tableSlug);case 3:return remoteTable=_context2.sent,existingTableDef=this.getTableDef(tableSlug),table=remoteTable||(existingTableDef?new CoreTable_1.CoreTable(existingTableDef.inlineData,existingTableDef.columnDefinitions):void 0),newCols=table.autodetectedColumnDefs,missing=newCols.appendColumns([{slug:ColumnGrammar_1.ColumnGrammar.notes.keyword,values:newCols.indices.map((function(){return"Unreviewed"}))}]).select([ColumnGrammar_1.ColumnGrammar.slug.keyword,,ColumnGrammar_1.ColumnGrammar.name.keyword,,ColumnGrammar_1.ColumnGrammar.type.keyword,ColumnGrammar_1.ColumnGrammar.notes.keyword]),-1!==(colDefsRow=this.getRowMatchingWords(ExplorerGrammar_1.ExplorerGrammar.columns.keyword,tableSlug))?clone.updateBlock(colDefsRow,new CoreTable_1.CoreTable(clone.getBlock(colDefsRow)).concat([missing]).toTsv()):clone.appendBlock("".concat(ExplorerGrammar_1.ExplorerGrammar.columns.keyword).concat(tableSlug?this.cellDelimiter+tableSlug:""),missing.toTsv()),_context2.abrupt("return",clone);case 11:case"end":return _context2.stop()}}),_callee2,this)})))}},{key:"grapherConfig",get:function get(){var rootObject=exports.trimAndParseObject(this.tuplesObject,GrapherGrammar_1.GrapherGrammar);Object.keys(rootObject).forEach((function(key){GrapherGrammar_1.GrapherGrammar[key]||delete rootObject[key]}));var selectedGrapherRow=this.decisionMatrix.selectedRow;return selectedGrapherRow&&Object.keys(selectedGrapherRow).length?Object.assign(Object.assign({},rootObject),selectedGrapherRow):rootObject}},{key:"constructTable",value:function constructTable(tableSlug){return __awaiter(this,void 0,void 0,regeneratorRuntime.mark((function _callee3(){var tableDef,input;return regeneratorRuntime.wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(tableDef=this.getTableDef(tableSlug)){_context3.next=3;break}throw new Error("Table definitions not found for '".concat(tableSlug,"'"));case 3:if(!tableDef.inlineData){_context3.next=7;break}return _context3.abrupt("return",new OwidTable_1.OwidTable(tableDef.inlineData,tableDef.columnDefinitions,{tableDescription:"Loaded '".concat(tableSlug,"' from inline data"),tableSlug:tableSlug}).dropEmptyRows());case 7:if(!tableDef.url){_context3.next=12;break}return _context3.next=10,ExplorerProgram.tableDataLoader.get(tableDef.url);case 10:return input=_context3.sent,_context3.abrupt("return",new OwidTable_1.OwidTable(input,tableDef.columnDefinitions,{tableDescription:"Loaded from ".concat(tableDef.url)}));case 12:throw new Error("No data for table '".concat(tableSlug,"'"));case 13:case"end":return _context3.stop()}}),_callee3,this)})))}},{key:"getTableDef",value:function getTableDef(tableSlug){var tableDefRow=this.getRowMatchingWords(ExplorerGrammar_1.ExplorerGrammar.table.keyword,void 0,tableSlug);if(-1!==tableDefRow){var inlineData=this.getBlock(tableDefRow),url=inlineData?void 0:this.lines[tableDefRow].split(this.cellDelimiter)[1];if(url&&!url.startsWith("http")){var owidDatasetSlug=encodeURIComponent(url);url="https://raw.githubusercontent.com/owid/owid-datasets/master/datasets/".concat(owidDatasetSlug,"/").concat(owidDatasetSlug,".csv")}var colDefsRow=this.getRowMatchingWords(ExplorerGrammar_1.ExplorerGrammar.columns.keyword,tableSlug);return{url:url,columnDefinitions:-1!==colDefsRow?CoreTable_1.columnDefinitionsFromDelimited(this.getBlock(colDefsRow)).map((function(row){return exports.trimAndParseObject(row,ColumnGrammar_1.ColumnGrammar)})):void 0,inlineData:inlineData}}}}],[{key:"fromJson",value:function fromJson(json){return new ExplorerProgram(json.slug,json.program,json.lastCommit)}},{key:"fromMatrix",value:function fromMatrix(slug,matrix){return new ExplorerProgram(slug,matrix.map((function(row){return row.join(GridLangConstants_1.GRID_CELL_DELIMITER)})).join(GridLangConstants_1.GRID_NODE_DELIMITER))}}]),ExplorerProgram}(GridProgram_1.GridProgram);exports.ExplorerProgram=ExplorerProgram,ExplorerProgram.tableDataLoader=new PromiseCache_1.PromiseCache((function(url){return __awaiter(void 0,void 0,void 0,regeneratorRuntime.mark((function _callee4(){var response,tableInput;return regeneratorRuntime.wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,fetch(url);case 2:if((response=_context4.sent).ok){_context4.next=5;break}throw new Error(response.statusText);case 5:if(!url.endsWith(".json")){_context4.next=11;break}return _context4.next=8,response.json();case 8:_context4.t0=_context4.sent,_context4.next=14;break;case 11:return _context4.next=13,response.text();case 13:_context4.t0=_context4.sent;case 14:return tableInput=_context4.t0,_context4.abrupt("return",tableInput);case 16:case"end":return _context4.stop()}}),_callee4)})))}));exports.makeFullPath=function makeFullPath(slug){return"".concat(ExplorerConstants_1.EXPLORERS_ROUTE_FOLDER,"/").concat(slug).concat(exports.EXPLORER_FILE_SUFFIX)};exports.trimAndParseObject=function trimAndParseObject(config,grammar){var trimmedRow=Util_1.trimObject(config,!0);return Object.keys(trimmedRow).forEach((function(key){var def=grammar[key];if(def&&def.parse)trimmedRow[key]=def.parse(trimmedRow[key]);else if(!def){var value=trimmedRow[key];value===GridLangConstants_1.GridBoolean.true?trimmedRow[key]=!0:value===GridLangConstants_1.GridBoolean.false&&(trimmedRow[key]=!1)}})),trimmedRow}},980:function(module,exports,__webpack_require__){"use strict";__webpack_require__(31),Object.defineProperty(exports,"__esModule",{value:!0}),exports.toPercentageColumnDef=exports.getOriginalTimeColumnSlug=exports.makeOriginalTimeSlugFromColumnSlug=exports.timeColumnSlugFromColumnDef=void 0;var CoreColumnDef_1=__webpack_require__(199),OwidTableConstants_1=__webpack_require__(172);function makeOriginalTimeSlugFromColumnSlug(slug){return"".concat(slug,"-originalTime")}exports.timeColumnSlugFromColumnDef=function timeColumnSlugFromColumnDef(def){return def.isDailyMeasurement?OwidTableConstants_1.OwidTableSlugs.day:OwidTableConstants_1.OwidTableSlugs.year},exports.makeOriginalTimeSlugFromColumnSlug=makeOriginalTimeSlugFromColumnSlug,exports.getOriginalTimeColumnSlug=function getOriginalTimeColumnSlug(table,slug){var originalTimeSlug=makeOriginalTimeSlugFromColumnSlug(slug);return table.has(originalTimeSlug)?originalTimeSlug:table.timeColumn.slug},exports.toPercentageColumnDef=function toPercentageColumnDef(columnDef){var type=arguments.length>1&&void 0!==arguments[1]?arguments[1]:CoreColumnDef_1.ColumnTypeNames.Percentage;return Object.assign(Object.assign({},columnDef),{type:type,unit:void 0,shortUnit:void 0,display:Object.assign(Object.assign({},columnDef.display),{unit:void 0,shortUnit:void 0,numDecimalPlaces:void 0,conversionFactor:void 0})})}},981:function(module,exports,__webpack_require__){"use strict";__webpack_require__(5),__webpack_require__(14),__webpack_require__(31),__webpack_require__(25),__webpack_require__(103),__webpack_require__(32),__webpack_require__(22),Object.defineProperty(exports,"__esModule",{value:!0}),exports.formatValue=void 0;var Util_1=__webpack_require__(40);exports.formatValue=function formatValue(value,options){var _a,_b,_c,_d,_e,_f,_g,noTrailingZeroes=null===(_a=options.noTrailingZeroes)||void 0===_a||_a,numberPrefixes=null===(_b=options.numberPrefixes||options.shortNumberPrefixes)||void 0===_b||_b,shortNumberPrefixes=null!==(_c=options.shortNumberPrefixes)&&void 0!==_c&&_c,showPlus=null!==(_d=options.showPlus)&&void 0!==_d&&_d,numDecimalPlaces=null!==(_e=options.numDecimalPlaces)&&void 0!==_e?_e:2,unit=null!==(_f=options.unit)&&void 0!==_f?_f:"",isNoSpaceUnit=null!==(_g=options.noSpaceUnit)&&void 0!==_g?_g:"%"===unit[0],output=value.toString(),absValue=Math.abs(value);if(!isNoSpaceUnit&&numberPrefixes&&absValue>=1e6)isFinite(absValue)?absValue>=1e12?output=formatValue(value/1e12,Object.assign(Object.assign({},options),{unit:shortNumberPrefixes?"T":"trillion",noSpaceUnit:shortNumberPrefixes,numDecimalPlaces:2})):absValue>=1e9?output=formatValue(value/1e9,Object.assign(Object.assign({},options),{unit:shortNumberPrefixes?"B":"billion",noSpaceUnit:shortNumberPrefixes,numDecimalPlaces:2})):absValue>=1e6&&(output=formatValue(value/1e6,Object.assign(Object.assign({},options),{unit:shortNumberPrefixes?"M":"million",noSpaceUnit:shortNumberPrefixes,numDecimalPlaces:2}))):output="Infinity";else if(!isNoSpaceUnit&&shortNumberPrefixes&&absValue>=1e3)output=formatValue(value/1e3,Object.assign(Object.assign({},options),{unit:"k",noSpaceUnit:!0,numDecimalPlaces:2}));else{var targetDigits=Math.pow(10,-numDecimalPlaces);if(output=0!==value&&Math.abs(value)<targetDigits?value<0?">-".concat(targetDigits):"<".concat(targetDigits):Util_1.d3Format("".concat(showPlus?"+":"",",.").concat(numDecimalPlaces,"f"))(value),noTrailingZeroes){var m=output.match(/(.*?[0-9,-]+.[0-9,]*?)0*$/);m&&(output=m[1]),"."===output[output.length-1]&&(output=output.slice(0,output.length-1))}}return"$"===unit||"Â£"===unit?output=unit+output:isNoSpaceUnit?output+=unit:unit.length>0&&(output=output+" "+unit),output}},982:function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}__webpack_require__(68),__webpack_require__(5),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(36),__webpack_require__(28),__webpack_require__(33),__webpack_require__(65),__webpack_require__(32),__webpack_require__(57),__webpack_require__(75),__webpack_require__(39),__webpack_require__(79),__webpack_require__(25),__webpack_require__(9),__webpack_require__(10),__webpack_require__(11),__webpack_require__(29),__webpack_require__(22),__webpack_require__(17),Object.defineProperty(exports,"__esModule",{value:!0}),exports.applyTransforms=exports.AvailableTransforms=exports.computeRollingAverage=exports.insertMissingValuePlaceholders=void 0;var Util_1=__webpack_require__(40),ErrorValues_1=__webpack_require__(277);function computeRollingAverage(numbers,windowSize){for(var align=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"right",result=[],valueIndex=0;valueIndex<numbers.length;valueIndex++){var currentVal=numbers[valueIndex];if(null!==currentVal)if(void 0!==currentVal)if(currentVal instanceof ErrorValues_1.ErrorValue)result[valueIndex]=currentVal;else{for(var expand=windowSize-1,expandLeft="center"===align?Math.ceil(expand/2):expand,expandRight="center"===align?Math.floor(expand/2):0,startIndex=Math.max(valueIndex-expandLeft,0),endIndex=Math.min(valueIndex+expandRight,numbers.length-1),count=0,sum=0,windowIndex=startIndex;windowIndex<=endIndex;windowIndex++){var value=numbers[windowIndex];null==value||value instanceof ErrorValues_1.ErrorValue||(sum+=value,count++)}result[valueIndex]=sum/count}else result[valueIndex]=ErrorValues_1.ErrorValueTypes.UndefinedButShouldBeNumber;else result[valueIndex]=ErrorValues_1.ErrorValueTypes.NullButShouldBeNumber}return result}exports.insertMissingValuePlaceholders=function insertMissingValuePlaceholders(values,times){var startTime=times[0],endTime=times[times.length-1],filledRange=[],time=startTime,timeToValueIndex=new Map;for(times.forEach((function(time,index){timeToValueIndex.set(time,index)}));time<=endTime;)filledRange.push(timeToValueIndex.has(time)?values[timeToValueIndex.get(time)]:ErrorValues_1.ErrorValueTypes.MissingValuePlaceholder),time++;return filledRange},exports.computeRollingAverage=computeRollingAverage;var WhereOperators,divideBy=function divideBy(columnStore,numeratorSlug,denominatorSlug){var numeratorValues=columnStore[numeratorSlug];return columnStore[denominatorSlug].map((function(denominator,index){if(0===denominator)return ErrorValues_1.ErrorValueTypes.DivideByZeroError;var numerator=numeratorValues[index];return ErrorValues_1.isNotErrorValue(numerator)?ErrorValues_1.isNotErrorValue(denominator)?numerator/denominator:denominator:numerator}))};!function(WhereOperators){WhereOperators.is="is",WhereOperators.isNot="isNot",WhereOperators.isGreaterThan="isGreaterThan",WhereOperators.isGreaterThanOrEqual="isGreaterThanOrEqual",WhereOperators.isLessThan="isLessThan",WhereOperators.isLessThanOrEqual="isLessThanOrEqual"}(WhereOperators||(WhereOperators={}));var availableTransforms={asPercentageOf:function asPercentageOf(columnStore,numeratorSlug,denominatorSlug){return divideBy(columnStore,numeratorSlug,denominatorSlug).map((function(num){return"number"==typeof num?100*num:num}))},timeSinceEntityExceededThreshold:function timeSinceEntityExceededThreshold(columnStore,timeSlug,entitySlug,columnSlug,thresholdAsString){var currentGroup,groupExceededThresholdAtTime,threshold=parseFloat(thresholdAsString),groupValues=columnStore[entitySlug],columnValues=columnStore[columnSlug],timeValues=columnStore[timeSlug];return columnValues.map((function(value,index){var group=groupValues[index],currentTime=timeValues[index];if(group!==currentGroup){if(!ErrorValues_1.isNotErrorValue(value))return value;if(value<threshold)return ErrorValues_1.ErrorValueTypes.ValueTooLow;currentGroup=group,groupExceededThresholdAtTime=currentTime}return currentTime-groupExceededThresholdAtTime}))},divideBy:divideBy,rollingAverage:function rollingAverage(columnStore,timeSlug,entitySlug,columnSlug,windowSize){var entityNames=columnStore[entitySlug],columnValues=columnStore[columnSlug],timeValues=columnStore[timeSlug],len=entityNames.length;if(!len)return[];for(var currentEntity=entityNames[0],currentValues=[],currentTimes=[],groups=[],rowIndex=0;rowIndex<=len;rowIndex++){var entityName=entityNames[rowIndex],value=columnValues[rowIndex],time=timeValues[rowIndex];if(currentEntity!==entityName){var averages=computeRollingAverage(exports.insertMissingValuePlaceholders(currentValues,currentTimes),windowSize).filter((function(value){return!(value===ErrorValues_1.ErrorValueTypes.MissingValuePlaceholder)}));if(groups.push(averages),void 0===value)break;currentValues=[],currentTimes=[],currentEntity=entityName}currentValues.push(value),currentTimes.push(time)}return Util_1.flatten(groups)},percentChange:function percentChange(columnStore,timeSlug,entitySlug,columnSlug,windowSize){var currentEntity,entityNames=columnStore[entitySlug],columnValues=columnStore[columnSlug];return windowSize?columnValues.map((function(value,index){var entity=entityNames[index],previousEntity=entityNames[index-windowSize],previousValue=columnValues[index-windowSize];return currentEntity&&currentEntity===entity&&previousEntity===entity?previousValue instanceof ErrorValues_1.ErrorValue?previousValue:value instanceof ErrorValues_1.ErrorValue?value:0===previousValue?ErrorValues_1.ErrorValueTypes.DivideByZeroError:void 0===previousValue?ErrorValues_1.ErrorValueTypes.NoValueToCompareAgainst:100*(value-previousValue)/previousValue:(currentEntity=entity,ErrorValues_1.ErrorValueTypes.NoValueToCompareAgainst)})):columnValues.map((function(val){return ErrorValues_1.isNotErrorValue(val)?0:val}))},multiplyBy:function multiplyBy(columnStore,columnSlug,factor){return columnStore[columnSlug].map((function(value){return ErrorValues_1.isNotErrorValue(value)?value*factor:value}))},subtract:function subtract(columnStore,columnSlugA,columnSlugB){var values=columnStore[columnSlugA];return columnStore[columnSlugB].map((function(subValue,index){var value=values[index];return ErrorValues_1.isNotErrorValue(value)?ErrorValues_1.isNotErrorValue(subValue)?value-subValue:subValue:value}))},where:function where(columnStore,columnSlug,conditionSlug){for(var _len=arguments.length,condition=new Array(_len>3?_len-3:0),_key=3;_key<_len;_key++)condition[_key-3]=arguments[_key];var values=columnStore[columnSlug],conditionValues=columnStore[conditionSlug],operator=condition.shift(),passes=function passes(value){return!0};if(operator===WhereOperators.isNot||operator===WhereOperators.is){var result="isNot"!==operator,list=condition.join(" ").split(" or "),set=new Set(list);passes=function passes(value){return set.has(value)?result:!result}}else operator===WhereOperators.isGreaterThan?passes=function passes(value){return value>parseFloat(condition.join(""))}:operator===WhereOperators.isGreaterThanOrEqual?passes=function passes(value){return value>=parseFloat(condition.join(""))}:operator===WhereOperators.isLessThan?passes=function passes(value){return value<parseFloat(condition.join(""))}:operator===WhereOperators.isLessThanOrEqual&&(passes=function passes(value){return value<=parseFloat(condition.join(""))});return values.map((function(value,index){return passes(conditionValues[index])?value:ErrorValues_1.ErrorValueTypes.FilteredValue}))}};exports.AvailableTransforms=Object.keys(availableTransforms);exports.applyTransforms=function applyTransforms(columnStore,defs){return defs.forEach((function(def){var words=def.transform.split(" "),transformName=words.find((function(word){return void 0!==availableTransforms[word]}));if(transformName){var params=words.filter((function(word){return word!==transformName})),fn=availableTransforms[transformName];try{columnStore[def.slug]=fn.apply(void 0,[columnStore].concat(_toConsumableArray(params)))}catch(err){console.error("Error performing transform '".concat(def.transform,"' for column '").concat(def.slug,"'. Expected args: ").concat(fn.length,". Provided args: ").concat(1+params.length,". Ran as ").concat(transformName,"(columnStore, ").concat(params.map((function(param){return'"'.concat(param,'"')})).join(","),").")),console.error(err)}}else console.warn("Warning: transform '".concat(transformName,"' not found"))})),columnStore}},986:function(module,exports,__webpack_require__){"use strict";function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=arr&&("undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"]);if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}__webpack_require__(28),__webpack_require__(143),__webpack_require__(9),__webpack_require__(10),__webpack_require__(5),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(22),__webpack_require__(17),__webpack_require__(29),Object.defineProperty(exports,"__esModule",{value:!0}),exports.isDarkColor=exports.getLeastUsedColor=exports.interpolateArray=void 0;var d3_color_1=__webpack_require__(200),d3_interpolate_1=__webpack_require__(244),Util_1=__webpack_require__(40);exports.interpolateArray=function interpolateArray(scaleArr){for(var N=scaleArr.length-2,intervalWidth=1/N,intervals=[],i=0;i<=N;i++)intervals[i]=d3_interpolate_1.interpolate(d3_color_1.rgb(scaleArr[i]),d3_color_1.rgb(scaleArr[i+1]));return function(t){if(t<0||t>1)throw new Error("Outside the allowed range of [0, 1]");var i=Math.floor(t*N),intervalOffset=i*intervalWidth;return intervals[i](t/intervalWidth-intervalOffset/intervalWidth)}},exports.getLeastUsedColor=function getLeastUsedColor(availableColors,usedColors){var unusedColors=Util_1.difference(availableColors,usedColors);if(unusedColors.length>0)return unusedColors[0];var colorCounts=Object.entries(Util_1.groupBy(usedColors)).map((function(_ref){var _ref2=_slicedToArray(_ref,2);return[_ref2[0],_ref2[1].length]}));return Util_1.minBy(colorCounts,(function(_ref3){return _slicedToArray(_ref3,2)[1]}))[0]},exports.isDarkColor=function isDarkColor(colorSpecifier){var _a,rgb=null===(_a=d3_color_1.color(colorSpecifier))||void 0===_a?void 0:_a.rgb();if(rgb)return(299*rgb.r+587*rgb.g+114*rgb.b)/1e3<128}},987:function(module,exports,__webpack_require__){"use strict";__webpack_require__(31),__webpack_require__(28),__webpack_require__(119),__webpack_require__(57),Object.defineProperty(exports,"__esModule",{value:!0}),exports.ColumnGrammar=void 0;var CoreColumnDef_1=__webpack_require__(199),Transforms_1=__webpack_require__(982),BinningStrategy_1=__webpack_require__(468),ColorConstants_1=__webpack_require__(278),GridLangConstants_1=__webpack_require__(240);exports.ColumnGrammar={slug:Object.assign(Object.assign({},GridLangConstants_1.SlugDeclarationCellDef),{keyword:"slug"}),name:Object.assign(Object.assign({},GridLangConstants_1.StringCellDef),{keyword:"name",description:"This is the name that may appear on the y or x axis of a chart"}),type:Object.assign(Object.assign({},GridLangConstants_1.StringCellDef),{keyword:"type",description:"The column type reveals how to interpret the data, whether as a string or number for example, and how to display it, like whether to show a % or $.",terminalOptions:Object.values(CoreColumnDef_1.ColumnTypeNames).map((function(keyword){return{keyword:keyword,description:"",cssClass:""}}))}),transform:Object.assign(Object.assign({},GridLangConstants_1.StringCellDef),{keyword:"transform",description:"An advanced option. Available transforms are: ".concat(Transforms_1.AvailableTransforms.join(", "))}),tolerance:Object.assign(Object.assign({},GridLangConstants_1.IntegerCellDef),{keyword:"tolerance",description:"Set this to interpolate missing values as long as they are within this range of an actual value."}),description:Object.assign(Object.assign({},GridLangConstants_1.StringCellDef),{keyword:"description",description:"Describe the column"}),unit:Object.assign(Object.assign({},GridLangConstants_1.StringCellDef),{keyword:"unit",description:"Unit of measurement"}),shortUnit:Object.assign(Object.assign({},GridLangConstants_1.StringCellDef),{keyword:"shortUnit",description:"Short (axis) unit"}),notes:Object.assign(Object.assign({},GridLangConstants_1.StringCellDef),{keyword:"notes",description:"Any internal notes."}),annotationsColumnSlug:Object.assign(Object.assign({},GridLangConstants_1.StringCellDef),{keyword:"annotationsColumnSlug",description:"Column that contains the annotations for this column, if any."}),sourceName:Object.assign(Object.assign({},GridLangConstants_1.StringCellDef),{keyword:"sourceName",description:"Source name displayed on charts using this dataset. For academic papers, the name of the source should be 'Authors (year)' e.g. Arroyo-Abad and Lindert (2016). For institutional projects or reports, the name should be 'Institution, Project (year or vintage)' e.g. U.S. Bureau of Labor Statistics, Consumer Expenditure Survey (2015 release). For data that we have modified extensively, the name should be 'Our World in Data based on Author (year)' e.g. Our World in Data based on Atkinson (2002) and Sen (2000)."}),sourceLink:Object.assign(Object.assign({},GridLangConstants_1.UrlCellDef),{keyword:"sourceLink",description:"Link to the publication from which we retrieved this data"}),dataPublishedBy:Object.assign(Object.assign({},GridLangConstants_1.StringCellDef),{keyword:"dataPublishedBy",description:"For academic papers this should be a complete reference. For institutional projects, detail the project or report. For data we have modified extensively, list OWID as the publishers and provide the name of the person in charge of the calculation."}),dataPublisherSource:Object.assign(Object.assign({},GridLangConstants_1.StringCellDef),{keyword:"dataPublisherSource",description:"Basic indication of how the publisher collected this data e.g. surveys data. Anything longer than a line should go in the dataset description."}),retrievedDate:Object.assign(Object.assign({},GridLangConstants_1.StringCellDef),{keyword:"retrievedDate",description:"Date when this data was obtained by us"}),additionalInfo:Object.assign(Object.assign({},GridLangConstants_1.StringCellDef),{keyword:"additionalInfo",description:"Describe the dataset and the methodology used in its construction. This can be as long and detailed as you like."}),color:Object.assign(Object.assign({},GridLangConstants_1.StringCellDef),{keyword:"color",description:"Default color for column"}),colorScaleScheme:Object.assign(Object.assign({},GridLangConstants_1.EnumCellDef),{keyword:"colorScaleScheme",terminalOptions:Object.values(ColorConstants_1.ColorSchemeName).map((function(keyword){return{keyword:keyword,description:"",cssClass:""}})),description:"The color scheme to use"}),colorScaleInvert:Object.assign(Object.assign({},GridLangConstants_1.BooleanCellDef),{keyword:"colorScaleInvert",description:"Invert the color scale?"}),colorScaleBinningStrategy:Object.assign(Object.assign({},GridLangConstants_1.EnumCellDef),{keyword:"colorScaleBinningStrategy",terminalOptions:Object.values(BinningStrategy_1.BinningStrategy).map((function(keyword){return{keyword:keyword,description:"",cssClass:""}})),description:"The binning strategy to use"}),colorScaleNoDataLabel:Object.assign(Object.assign({},GridLangConstants_1.StringCellDef),{keyword:"colorScaleNoDataLabel",description:"Custom label for the 'No data' bin"}),colorScaleLegendDescription:Object.assign(Object.assign({},GridLangConstants_1.StringCellDef),{keyword:"colorScaleLegendDescription",description:"Legend title for ScatterPlot"}),colorScaleEqualSizeBins:Object.assign(Object.assign({},GridLangConstants_1.BooleanCellDef),{keyword:"colorScaleEqualSizeBins",description:"Disable visual scaling of the bins based on values?"}),colorScaleNumericMinValue:Object.assign(Object.assign({},GridLangConstants_1.NumericCellDef),{keyword:"colorScaleNumericMinValue",description:"Minimum value of the first bin (leaving blank will infer the minimum from the data)"}),colorScaleNumericBins:Object.assign(Object.assign({},GridLangConstants_1.StringCellDef),{keyword:"colorScaleNumericBins",description:["Custom numeric bins","  Format: [binMax],[color],[label]; [binMax],[color],[label]; ...","  Example: 0.1,#ccc,example label; 0.2,,; 0.3,,prev has no label"].join("\n")}),colorScaleCategoricalBins:Object.assign(Object.assign({},GridLangConstants_1.StringCellDef),{keyword:"colorScaleCategoricalBins",description:["Custom categorical bins","  Format: [data value],[color],[label]; [data value],[color],[label]; ...","  Example: one,#ccc,uno; two,,dos"].join("\n")})}},988:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.populationMap=void 0,exports.populationMap={Afghanistan:38928341,Africa:1340598113,Albania:2877800,Algeria:43851043,"American Samoa":55197,Andorra:77265,Angola:32866268,Anguilla:15002,"Antigua and Barbuda":97928,Argentina:45195777,Armenia:2963234,Aruba:106766,Asia:4641054786,Australia:25499881,Austria:9006400,Azerbaijan:10139175,Bahamas:393248,Bahrain:1701583,Bangladesh:164689383,Barbados:287371,Belarus:9449321,Belgium:11589616,Belize:397621,Benin:12123198,Bermuda:62273,Bhutan:771612,Bolivia:11673029,"Bonaire Sint Eustatius and Saba":26221,"Bosnia and Herzegovina":3280815,Botswana:2351625,Brazil:212559409,"British Virgin Islands":30237,Brunei:437483,Bulgaria:6948445,"Burkina Faso":20903278,Burundi:11890781,Cambodia:16718971,Cameroon:26545864,Canada:37742157,"Cape Verde":555988,Caribbean:43532374,"Cayman Islands":65720,"Central African Republic":4829764,"Central America":179670186,"Central Asia":74338926,"Central and Southern Asia":2014708531,Chad:16425859,"Channel Islands":173859,Chile:19116209,China:1439323774,Colombia:50882884,Comoros:869595,Congo:5518092,"Cook Islands":17564,"Costa Rica":5094114,"Cote d'Ivoire":26378275,Croatia:4105268,Cuba:11326616,Curacao:164100,Cyprus:1207361,Czechia:10708982,"Democratic Republic of Congo":89561404,Denmark:5792203,Djibouti:988002,Dominica:71991,"Dominican Republic":10847904,"Eastern Africa":445405578,"Eastern Europe":293013210,Ecuador:17643060,Egypt:102334403,"El Salvador":6486201,"Equatorial Guinea":1402985,Eritrea:3546427,Estonia:1326539,Ethiopia:114963583,Europe:747636045,"Faeroe Islands":48865,"Falkland Islands":3483,Fiji:896444,Finland:5540718,France:65273512,"French Guiana":298682,"French Polynesia":280904,Gabon:2225728,Gambia:2416664,Georgia:3989175,Germany:83783945,Ghana:31072945,Gibraltar:33691,Greece:10423056,Greenland:56772,Grenada:112519,Guadeloupe:400127,Guam:168783,Guatemala:17915567,Guernsey:67052,Guinea:13132792,"Guinea-Bissau":1967998,Guyana:786559,Haiti:11402533,"High-income countries":1263092934,Honduras:9904608,"Hong Kong":7496988,Hungary:9660350,Iceland:341250,India:1380004385,Indonesia:273523621,International:7794798729,Iran:83992953,Iraq:40222503,Ireland:4937796,"Isle of Man":85032,Israel:8655541,Italy:60461828,Jamaica:2961161,Japan:126476458,Jersey:101073,Jordan:10203140,Kazakhstan:18776707,Kenya:53771300,Kiribati:119446,Kosovo:1932774,Kuwait:4270563,Kyrgyzstan:6524191,"Land-locked Developing Countries (LLDC)":533143398,Laos:7275556,"Latin America and the Caribbean":653962332,Latvia:1886202,"Least developed countries":1057438163,Lebanon:6825442,Lesotho:2142252,"Less developed regions":6521494468,Liberia:5057677,Libya:6871287,Liechtenstein:38137,Lithuania:2722291,"Low-income countries":775710612,"Lower-middle-income countries":3098235284,Luxembourg:625976,Macao:649342,"North Macedonia":2083380,Madagascar:27691019,Malawi:19129955,Malaysia:32365998,Maldives:540542,Mali:20250834,Malta:441539,"Marshall Islands":59194,Martinique:375265,Mauritania:4649660,Mauritius:1271767,Mayotte:272813,Melanesia:11122990,Mexico:128932753,Micronesia:548927,"Micronesia (country)":115021,"Middle Africa":179595125,"Middle-income countries":5753051615,Moldova:4033963,Monaco:39244,Mongolia:3278292,Montenegro:628062,Montserrat:4999,"More developed regions":1273304261,Morocco:36910558,Mozambique:31255435,Myanmar:54409794,Namibia:2540916,Nauru:10834,Nepal:29136808,Netherlands:17134873,"New Caledonia":285491,"New Zealand":4822233,Nicaragua:6624554,Niger:24206636,Nigeria:206139587,Niue:1618,"North America":368869644,"North Korea":25778815,"Northern Africa":246232508,"Northern Africa and Western Asia":525869282,"Northern America":368869644,"Northern Europe":106261271,"Northern Mariana Islands":57557,Norway:5421242,Oceania:42677809,Oman:5106622,Pakistan:220892331,Palau:18092,Palestine:5101416,Panama:4314768,"Papua New Guinea":8947027,Paraguay:7132530,Peru:32971846,Philippines:109581085,Poland:37846605,Polynesia:683778,Portugal:10196707,"Puerto Rico":2860840,Qatar:2881060,Reunion:895308,Romania:19237682,Russia:145934460,Rwanda:12952209,"Saint Barthlemy":9885,"Saint Helena":6071,"Saint Kitts and Nevis":53192,"Saint Lucia":183629,"Saint Martin (French part)":38659,"Saint Pierre and Miquelon":5795,"Saint Vincent and the Grenadines":110947,Samoa:198410,"San Marino":33938,"Sao Tome and Principe":219161,"Saudi Arabia":34813867,Senegal:16743930,Serbia:6804596,"Serbia (including Kosovo)":8737370,Seychelles:98340,"Sierra Leone":7976985,Singapore:5850343,"Sint Maarten (Dutch part)":42882,Slovakia:5459643,Slovenia:2078932,"Small Island Developing States (SIDS)":72076098,"Solomon Islands":686878,Somalia:15893219,"South Africa":59308690,"South America":430759772,"South Korea":51269183,"South Sudan":11193729,"South-Eastern Asia":668619854,"Southern Africa":67503647,"Southern Asia":1940369605,"Southern Europe":152215243,Spain:46754783,"Sri Lanka":21413250,"Sub-Saharan Africa":1094365605,Sudan:43849269,Suriname:586634,Eswatini:1160164,Sweden:10099270,Switzerland:8654618,Syria:17500657,Taiwan:23816775,Tajikistan:9537642,Tanzania:59734213,Thailand:69799978,Timor:1318442,Togo:8278737,Tokelau:1350,Tonga:105697,"Trinidad and Tobago":1399491,Tunisia:11818618,Turkey:84339067,Turkmenistan:6031187,"Turks and Caicos Islands":38718,Tuvalu:11792,Uganda:45741e3,Ukraine:43733759,"United Arab Emirates":9890400,"United Kingdom":67886004,"United States":331002647,"United States Virgin Islands":104423,"Upper-middle-income countries":2654816331,Uruguay:3473727,Uzbekistan:33469199,Vanuatu:307150,Vatican:809,Venezuela:28435943,Vietnam:97338583,"Wallis and Futuna":11246,"Western Africa":401861255,"Western Asia":279636774,"Western Europe":196146321,"Western Sahara":597330,World:7794798729,Yemen:29825968,Zambia:18383956,Zimbabwe:14862927}},989:function(module,exports,__webpack_require__){"use strict";function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}__webpack_require__(68),__webpack_require__(5),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),Object.defineProperty(exports,"__esModule",{value:!0}),exports.PromiseCache=void 0;var PromiseCache=function(){function PromiseCache(createPromiseFromKey){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PromiseCache),this.createPromiseFromKey=createPromiseFromKey,this.promisesByKey=new Map}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(PromiseCache,[{key:"get",value:function get(key){var _this=this;return this.promisesByKey.has(key)||this.promisesByKey.set(key,this.createPromiseFromKey(key).catch((function(error){throw _this.promisesByKey.delete(key),error}))),this.promisesByKey.get(key)}},{key:"has",value:function has(key){return this.promisesByKey.has(key)}}]),PromiseCache}();exports.PromiseCache=PromiseCache},990:function(module,exports,__webpack_require__){"use strict";function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(5),__webpack_require__(14),__webpack_require__(9),__webpack_require__(10),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(18),__webpack_require__(21);var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MapConfig=void 0;var mobx_1=__webpack_require__(41),MapProjections_1=__webpack_require__(603),ColorScaleConfig_1=__webpack_require__(390),Persistable_1=__webpack_require__(322),TimeBounds_1=__webpack_require__(387),Util_1=__webpack_require__(40),MapConfigDefaults=function MapConfigDefaults(){_classCallCheck(this,MapConfigDefaults),this.projection=MapProjections_1.MapProjectionName.World,this.colorScale=new ColorScaleConfig_1.ColorScaleConfig,this.tooltipUseCustomLabels=void 0};__decorate([mobx_1.observable],MapConfigDefaults.prototype,"columnSlug",void 0),__decorate([mobx_1.observable],MapConfigDefaults.prototype,"time",void 0),__decorate([mobx_1.observable],MapConfigDefaults.prototype,"timeTolerance",void 0),__decorate([mobx_1.observable],MapConfigDefaults.prototype,"hideTimeline",void 0),__decorate([mobx_1.observable],MapConfigDefaults.prototype,"projection",void 0),__decorate([mobx_1.observable],MapConfigDefaults.prototype,"colorScale",void 0),__decorate([mobx_1.observable],MapConfigDefaults.prototype,"tooltipUseCustomLabels",void 0);var MapConfig=function(_MapConfigDefaults){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(MapConfig,_MapConfigDefaults);var _super=_createSuper(MapConfig);function MapConfig(obj){var _this;return _classCallCheck(this,MapConfig),_this=_super.call(this),obj&&_this.updateFromObject(obj),_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(MapConfig,[{key:"updateFromObject",value:function updateFromObject(obj){obj.variableId&&!obj.columnSlug&&(obj.columnSlug=obj.variableId.toString()),Persistable_1.updatePersistables(this,obj),obj.targetYear?this.time=TimeBounds_1.maxTimeBoundFromJSONOrPositiveInfinity(obj.targetYear):obj.time&&(this.time=TimeBounds_1.maxTimeBoundFromJSONOrPositiveInfinity(obj.time))}},{key:"toObject",value:function toObject(){var obj=Persistable_1.objectWithPersistablesToObject(this);return Persistable_1.deleteRuntimeAndUnchangedProps(obj,new MapConfigDefaults),obj.time&&(obj.time=TimeBounds_1.maxTimeToJSON(this.time)),obj.columnSlug&&(obj.variableId=parseInt(obj.columnSlug),delete obj.columnSlug),Util_1.trimObject(obj)}}]),MapConfig}(MapConfigDefaults);exports.MapConfig=MapConfig},994:function(module,exports,__webpack_require__){"use strict";__webpack_require__(75),__webpack_require__(5),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(28),Object.defineProperty(exports,"__esModule",{value:!0}),exports.isOnTheMap=void 0;var _cache,MapTopology_1=__webpack_require__(995);exports.isOnTheMap=function isOnTheMap(entityName){return _cache||(_cache=new Set(MapTopology_1.MapTopology.objects.world.geometries.map((function(region){return region.id})))),_cache.has(entityName)}},995:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MapTopology=void 0,exports.MapTopology={type:"Topology",objects:{world:{type:"GeometryCollection",geometries:[{type:"Polygon",arcs:[[0,1,2,3,4,5]],id:"Afghanistan"},{type:"MultiPolygon",arcs:[[[6,7,8,9]],[[10,11,12]]],id:"Angola"},{type:"Polygon",arcs:[[13,14,15,16,17]],id:"Albania"},{type:"Polygon",arcs:[[18,19,20,21,22]],id:"United Arab Emirates"},{type:"MultiPolygon",arcs:[[[23,24]],[[25,26,27,28,29,30]]],id:"Argentina"},{type:"Polygon",arcs:[[31,32,33,34,35]],id:"Armenia"},{type:"Polygon",arcs:[[44]],id:"French Southern Territories"},{type:"MultiPolygon",arcs:[[[45]],[[46]]],id:"Australia"},{type:"Polygon",arcs:[[47,48,49,50,51,52,53,54,55,56,57]],id:"Austria"},{type:"MultiPolygon",arcs:[[[58,-35]],[[59,60,-33,61,62]]],id:"Azerbaijan"},{type:"Polygon",arcs:[[63,64,65,66]],id:"Burundi"},{type:"Polygon",arcs:[[67,68,69,70,71]],id:"Belgium"},{type:"Polygon",arcs:[[72,73,74,75,76]],id:"Benin"},{type:"Polygon",arcs:[[77,78,79,-75,80,81]],id:"Burkina Faso"},{type:"Polygon",arcs:[[82,83,84]],id:"Bangladesh"},{type:"Polygon",arcs:[[85,86,87,88,89,90]],id:"Bulgaria"},{type:"MultiPolygon",arcs:[[[91]],[[92]],[[93]]],id:"Bahamas"},{type:"Polygon",arcs:[[94,95,96,97]],id:"Bosnia and Herzegovina"},{type:"Polygon",arcs:[[98,99,100,101,102,103,104,105]],id:"Belarus"},{type:"Polygon",arcs:[[106,107,108]],id:"Belize"},{type:"Polygon",arcs:[[109,110,111,112,-31]],id:"Bolivia"},{type:"Polygon",arcs:[[-27,113,-112,114,115,116,117,118,119,120,121]],id:"Brazil"},{type:"Polygon",arcs:[[122,123]],id:"Brunei"},{type:"Polygon",arcs:[[124,125]],id:"Bhutan"},{type:"Polygon",arcs:[[126,127,128,129]],id:"Botswana"},{type:"Polygon",arcs:[[130,131,132,133,134,135,136]],id:"Central African Republic"},{type:"MultiPolygon",arcs:[[[137]],[[138]],[[139]],[[140]],[[141]],[[142]],[[143]],[[144]],[[145]],[[146]],[[147,148,149,150,151,152]],[[153]],[[154]],[[155]],[[156]],[[157]],[[158]],[[159]],[[160]],[[161]],[[162]],[[163]],[[164]],[[165]],[[166]],[[167]],[[168]],[[169]],[[170]],[[171]]],id:"Canada"},{type:"Polygon",arcs:[[-55,172,173,174,-51,175,176,177]],id:"Switzerland"},{type:"MultiPolygon",arcs:[[[-24,178]],[[-30,179,180,-110]]],id:"Chile"},{type:"MultiPolygon",arcs:[[[181]],[[182,183,184,185,186,187,188,189,190,191,192,193,194,195,-126,196,197,198,199,-4,200,201,202,203,204,205,206,207,208,209,210]]],id:"China"},{type:"Polygon",arcs:[[211,212,213,214,-78,215]],id:"Cote d'Ivoire"},{type:"Polygon",arcs:[[216,217,218,219,220,221,222,-137,223]],id:"Cameroon"},{type:"Polygon",arcs:[[224,225,226,227,-64,228,229,230,-10,231,-13,232,-135,233,234]],id:"Democratic Republic of Congo"},{type:"Polygon",arcs:[[-12,235,236,-224,-136,-233]],id:"Congo"},{type:"Polygon",arcs:[[237,238,239,240,241,-116,242]],id:"Colombia"},{type:"Polygon",arcs:[[243,244,245,246]],id:"Costa Rica"},{type:"Polygon",arcs:[[247]],id:"Cuba"},{type:"Polygon",arcs:[[248]],id:"Cyprus"},{type:"Polygon",arcs:[[-57,249,250,251]],id:"Czechia"},{type:"Polygon",arcs:[[252,253,-250,-56,-178,254,255,-69,256,257,258]],id:"Germany"},{type:"Polygon",arcs:[[259,260,261,262]],id:"Djibouti"},{type:"MultiPolygon",arcs:[[[263]],[[-259,264]]],id:"Denmark"},{type:"MultiPolygon",arcs:[[[265]]],id:"Greenland"},{type:"Polygon",arcs:[[266,267]],id:"Dominican Republic"},{type:"Polygon",arcs:[[268,269,270,271,272,273,274,275]],id:"Algeria"},{type:"Polygon",arcs:[[276,-238,277]],id:"Ecuador"},{type:"Polygon",arcs:[[278,279,280]],id:"Egypt"},{type:"Polygon",arcs:[[281,282,283,284,285,286,287,-263]],id:"Eritrea"},{type:"Polygon",arcs:[[288,289,290,291]],id:"Spain"},{type:"Polygon",arcs:[[292,293,294,295]],id:"Estonia"},{type:"Polygon",arcs:[[296,297,-282,-262,298,299,300,301,302,303,304,305,-285]],id:"Ethiopia"},{type:"Polygon",arcs:[[306,307,308,309]],id:"Finland"},{type:"MultiPolygon",arcs:[[[310]],[[311]],[[312]]],id:"Fiji"},{type:"MultiPolygon",arcs:[[[313]],[[314,-255,-177,315,316,-290,317,-71]]],id:"France"},{type:"Polygon",arcs:[[318,319,320,-120]],id:"French Guiana"},{type:"Polygon",arcs:[[321,322,-217,-237]],id:"Gabon"},{type:"MultiPolygon",arcs:[[[323,324]],[[325]]],id:"United Kingdom"},{type:"Polygon",arcs:[[326,327,328,329,330,-62,-32,331]],id:"Georgia"},{type:"Polygon",arcs:[[332,-216,-82,333]],id:"Ghana"},{type:"Polygon",arcs:[[334,335,336,337,338,339,-214]],id:"Guinea"},{type:"Polygon",arcs:[[340,341]],id:"Gambia"},{type:"Polygon",arcs:[[342,343,-338]],id:"Guinea-Bissau"},{type:"Polygon",arcs:[[344,-218,-323]],id:"Equatorial Guinea"},{type:"MultiPolygon",arcs:[[[345]],[[346,-14,347,-89,348]]],id:"Greece"},{type:"Polygon",arcs:[[349,350,-109,351,352,353]],id:"Guatemala"},{type:"Polygon",arcs:[[354,355,-118,356]],id:"Guyana"},{type:"Polygon",arcs:[[357,358,-353,359,360]],id:"Honduras"},{type:"Polygon",arcs:[[361,362,363,-98,364,365,366]],id:"Croatia"},{type:"Polygon",arcs:[[-268,367]],id:"Haiti"},{type:"Polygon",arcs:[[-48,368,369,370,371,372,-367,373]],id:"Hungary"},{type:"MultiPolygon",arcs:[[[374]],[[375,376]],[[377]],[[378]],[[379]],[[380]],[[381]],[[382]],[[383,384]],[[385]],[[386]],[[387,388]],[[389]]],id:"Indonesia"},{type:"Polygon",arcs:[[-199,390,-197,-125,-196,391,-85,392,393]],id:"India"},{type:"Polygon",arcs:[[394,-324]],id:"Ireland"},{type:"Polygon",arcs:[[395,-6,396,397,398,399,400,-59,-34,-61,401]],id:"Iran"},{type:"Polygon",arcs:[[-399,402,403,404,405,406,407,408]],id:"Iraq"},{type:"Polygon",arcs:[[409]],id:"Iceland"},{type:"Polygon",arcs:[[410,411,412,413,414,415]],id:"Israel"},{type:"MultiPolygon",arcs:[[[416]],[[417]],[[418,419,-316,-176,-50]]],id:"Italy"},{type:"Polygon",arcs:[[420]],id:"Jamaica"},{type:"Polygon",arcs:[[-411,421,-406,422,423,-413,424]],id:"Jordan"},{type:"MultiPolygon",arcs:[[[425]],[[426]],[[427]]],id:"Japan"},{type:"Polygon",arcs:[[428,429,430,431,432,433,434,435,436,437,438,439,440,-203,441]],id:"Kazakhstan"},{type:"Polygon",arcs:[[442,443,444,445,-303,446]],id:"Kenya"},{type:"Polygon",arcs:[[-442,-202,447,448]],id:"Kyrgyzstan"},{type:"Polygon",arcs:[[449,450,451,452]],id:"Cambodia"},{type:"Polygon",arcs:[[453,454]],id:"South Korea"},{type:"Polygon",arcs:[[455,456,457,458,459]],id:"Kosovo"},{type:"Polygon",arcs:[[460,461,-404]],id:"Kuwait"},{type:"Polygon",arcs:[[462,463,-194,464,-451]],id:"Laos"},{type:"Polygon",arcs:[[-415,465,466]],id:"Lebanon"},{type:"Polygon",arcs:[[467,468,-335,-213]],id:"Liberia"},{type:"Polygon",arcs:[[469,-276,470,471,-280,472,473]],id:"Libya"},{type:"Polygon",arcs:[[474]],id:"Sri Lanka"},{type:"Polygon",arcs:[[475]],id:"Lesotho"},{type:"Polygon",arcs:[[476,477,478,-99,479]],id:"Lithuania"},{type:"Polygon",arcs:[[-256,-315,-70]],id:"Luxembourg"},{type:"Polygon",arcs:[[480,-296,481,-100,-479]],id:"Latvia"},{type:"Polygon",arcs:[[-273,482,483]],id:"Morocco"},{type:"Polygon",arcs:[[484,485]],id:"Moldova"},{type:"Polygon",arcs:[[486]],id:"Madagascar"},{type:"Polygon",arcs:[[-107,-351,487,488,489]],id:"Mexico"},{type:"Polygon",arcs:[[-460,490,-90,-348,491]],id:"North Macedonia"},{type:"Polygon",arcs:[[492,-270,493,-79,-215,-340,494]],id:"Mali"},{type:"Polygon",arcs:[[495,-83,-392,-195,-464,496]],id:"Myanmar"},{type:"Polygon",arcs:[[497,-97,498,-458,-16]],id:"Montenegro"},{type:"Polygon",arcs:[[499,500,501,502,503,504,505,506,-205]],id:"Mongolia"},{type:"Polygon",arcs:[[507,508,509,510,511,512,513,514,515]],id:"Mozambique"},{type:"Polygon",arcs:[[516,517,518,-271,-493]],id:"Mauritania"},{type:"Polygon",arcs:[[-516,519,520,521]],id:"Malawi"},{type:"MultiPolygon",arcs:[[[522,523,524,525]],[[-388,526,-124,527]]],id:"Malaysia"},{type:"Polygon",arcs:[[528,-8,529,-128,530]],id:"Namibia"},{type:"Polygon",arcs:[[531]],id:"New Caledonia"},{type:"Polygon",arcs:[[-80,-494,-269,-470,532,533,534,535,536,-221,537,-76]],id:"Niger"},{type:"Polygon",arcs:[[538,-77,-538,-220]],id:"Nigeria"},{type:"Polygon",arcs:[[539,-361,540,-245]],id:"Nicaragua"},{type:"Polygon",arcs:[[-257,-68,541]],id:"Netherlands"},{type:"MultiPolygon",arcs:[[[-310,542,543]],[[544]],[[545]],[[546]]],id:"Norway"},{type:"Polygon",arcs:[[-391,-198]],id:"Nepal"},{type:"MultiPolygon",arcs:[[[547]],[[548]]],id:"New Zealand"},{type:"MultiPolygon",arcs:[[[549,550,-22,551]],[[-20,552]]],id:"Oman"},{type:"Polygon",arcs:[[-200,-394,553,-397,-5]],id:"Pakistan"},{type:"Polygon",arcs:[[554,-247,555,-240]],id:"Panama"},{type:"Polygon",arcs:[[-181,556,-278,-243,-115,-111]],id:"Peru"},{type:"MultiPolygon",arcs:[[[557]],[[558]],[[559]],[[560]],[[561]],[[562]],[[563]]],id:"Philippines"},{type:"MultiPolygon",arcs:[[[564]],[[565]],[[-384,566]],[[567]]],id:"Papua New Guinea"},{type:"Polygon",arcs:[[-254,568,569,-480,-106,570,571,-251]],id:"Poland"},{type:"Polygon",arcs:[[572]],id:"Puerto Rico"},{type:"Polygon",arcs:[[573,-455,574,-191]],id:"North Korea"},{type:"Polygon",arcs:[[-292,575]],id:"Portugal"},{type:"Polygon",arcs:[[-113,-114,-26]],id:"Paraguay"},{type:"Polygon",arcs:[[576,577]],id:"Qatar"},{type:"Polygon",arcs:[[578,-486,579,580,-86,581,-371]],id:"Romania"},{type:"MultiPolygon",arcs:[[[582]],[[-570,583,-477]],[[584]],[[585]],[[586]],[[587]],[[588]],[[589]],[[590]],[[-189,591,592,593,-185,594,-183,595,-210,596,-208,597,-206,-507,598,599,-504,600,-502,601,-500,-204,-441,602,-439,603,604,-436,605,-434,606,607,608,-63,609,-330,610,-328,611,612,613,614,615,616,617,618,619,-103,620,-101,-482,-295,621,622,-307,623]],[[624]],[[625]],[[626]]],id:"Russia"},{type:"Polygon",arcs:[[627,628,-65,-228,629]],id:"Rwanda"},{type:"Polygon",arcs:[[-483,-272,-519,630]],id:"Western Sahara"},{type:"Polygon",arcs:[[631,-423,-405,-462,632,-578,633,-23,-551,634]],id:"Saudi Arabia"},{type:"Polygon",arcs:[[635,636,-132,637,-473,-279,638,-287,639,-306,640]],id:"Sudan"},{type:"Polygon",arcs:[[641,-304,-446,642,643,-234,-134,644,-636]],id:"South Sudan"},{type:"Polygon",arcs:[[645,-517,-495,-339,-344,646,-342]],id:"Senegal"},{type:"MultiPolygon",arcs:[[[647]],[[648]],[[649]],[[650]],[[651]]],id:"Solomon Islands"},{type:"Polygon",arcs:[[652,-336,-469]],id:"Sierra Leone"},{type:"Polygon",arcs:[[653,-354,-359]],id:"El Salvador"},{type:"Polygon",arcs:[[654,655,-299,-261,656,-447,-302]],id:"Somalia"},{type:"Polygon",arcs:[[-91,-491,-459,-499,-96,657,-363,658,-372,-582]],id:"Serbia"},{type:"Polygon",arcs:[[659,-320,660,-119,-356]],id:"Suriname"},{type:"Polygon",arcs:[[-572,661,-369,-58,-252]],id:"Slovakia"},{type:"Polygon",arcs:[[-49,-374,-366,662,-419]],id:"Slovenia"},{type:"Polygon",arcs:[[-543,-309,663]],id:"Sweden"},{type:"Polygon",arcs:[[664,-512]],id:"Eswatini"},{type:"Polygon",arcs:[[-422,-416,-467,665,666,-407]],id:"Syria"},{type:"Polygon",arcs:[[-537,667,-535,668,-533,-474,-638,-131,-223,669]],id:"Chad"},{type:"Polygon",arcs:[[670,-334,-81,-74]],id:"Togo"},{type:"Polygon",arcs:[[671,-526,672,-497,-463,-450]],id:"Thailand"},{type:"Polygon",arcs:[[-448,-201,-3,673]],id:"Tajikistan"},{type:"Polygon",arcs:[[-396,674,-430,675,-1]],id:"Turkmenistan"},{type:"Polygon",arcs:[[676,-376]],id:"Timor"},{type:"Polygon",arcs:[[677]],id:"Trinidad and Tobago"},{type:"Polygon",arcs:[[-275,678,-471]],id:"Tunisia"},{type:"MultiPolygon",arcs:[[[-332,-36,-401,679,-408,-667,680]],[[-349,-88,681]]],id:"Turkey"},{type:"Polygon",arcs:[[682]],id:"Taiwan"},{type:"Polygon",arcs:[[-444,683,684,-508,685,686,687,688,-229,-67,689,-628,690]],id:"Tanzania"},{type:"Polygon",arcs:[[-630,-227,691,-225,692,-643,-445,-691]],id:"Uganda"},{type:"Polygon",arcs:[[693,-619,694,-617,695,696,697,-613,698,-580,-485,-579,-370,-662,-571,-105]],id:"Ukraine"},{type:"Polygon",arcs:[[-122,699,-28]],id:"Uruguay"},{type:"MultiPolygon",arcs:[[[700]],[[701]],[[702]],[[703]],[[704]],[[705,-489,706,-148]],[[707]],[[708]],[[709]],[[-152,710,-150,711]]],id:"United States"},{type:"Polygon",arcs:[[-676,-429,-449,-674,-2]],id:"Uzbekistan"},{type:"Polygon",arcs:[[712,-357,-117,-242]],id:"Venezuela"},{type:"Polygon",arcs:[[713,-452,-465,-193]],id:"Vietnam"},{type:"MultiPolygon",arcs:[[[714]],[[715]]],id:"Vanuatu"},{type:"Polygon",arcs:[[-425,-412]],id:"West Bank"},{type:"Polygon",arcs:[[716,-635,-550]],id:"Yemen"},{type:"Polygon",arcs:[[-531,-127,717,-513,-665,-511,718],[-476]],id:"South Africa"},{type:"Polygon",arcs:[[-520,-515,719,-129,-530,-7,-231,720,-688]],id:"Zambia"},{type:"Polygon",arcs:[[-718,-130,-720,-514]],id:"Zimbabwe"},{type:"MultiPolygon",arcs:[[[721]],[[722]],[[723]],[[724]],[[725]],[[726]],[[727]],[[728]]],id:"Cape Verde"},{type:"MultiPolygon",arcs:[[[729]],[[730]],[[731]]],id:"Comoros"},{type:"Polygon",arcs:[[732]],id:"Mauritius"},{type:"Polygon",arcs:[[733]],id:"Seychelles"},{type:"Polygon",arcs:[[734]],id:"Bahrain"},{type:"MultiPolygon",arcs:[[[735]],[[736]]],id:"Maldives"},{type:"MultiPolygon",arcs:[[[737]],[[738]]],id:"Marshall Islands"},{type:"MultiPolygon",arcs:[[[739]],[[740]],[[741]],[[742]],[[743]]],id:"Micronesia (country)"},{type:"Polygon",arcs:[[744]],id:"Nauru"},{type:"Polygon",arcs:[[745]],id:"Palau"},{type:"MultiPolygon",arcs:[[[746]],[[747]]],id:"Samoa"},{type:"Polygon",arcs:[[523,748]],id:"Singapore"},{type:"MultiPolygon",arcs:[[[749]],[[750]],[[751]]],id:"Tonga"},{type:"MultiPolygon",arcs:[[[752]],[[753]],[[754]],[[755]],[[756]],[[757]],[[758]]],id:"Tuvalu"},{type:"MultiPolygon",arcs:[[[759]],[[760]]],id:"Antigua and Barbuda"},{type:"Polygon",arcs:[[761]],id:"Barbados"},{type:"Polygon",arcs:[[762]],id:"Dominica"},{type:"Polygon",arcs:[[763]],id:"Grenada"},{type:"MultiPolygon",arcs:[[[764]],[[765]]],id:"Saint Kitts and Nevis"},{type:"Polygon",arcs:[[766]],id:"Saint Lucia"},{type:"Polygon",arcs:[[767]],id:"Saint Vincent and the Grenadines"},{type:"Polygon",arcs:[[768]],id:"Andorra"},{type:"Polygon",arcs:[[-53,769,-174,770]],id:"Liechtenstein"},{type:"Polygon",arcs:[[771]],id:"Malta"},{type:"Polygon",arcs:[[772]],id:"Monaco"},{type:"Polygon",arcs:[[773]],id:"San Marino"},{type:"Polygon",arcs:[[774]],id:"Kiribati"},{type:"Polygon",arcs:[[775]],id:"Sao Tome and Principe"}]}},arcs:[[[61.210817,35.650072],[62.230651,35.270664],[62.984662,35.404041],[63.193538,35.857166],[63.982896,36.007957],[64.546479,36.312073],[64.746105,37.111818],[65.588948,37.305217],[65.745631,37.661164],[66.217385,37.39379],[66.518607,37.362784]],[[66.518607,37.362784],[67.075782,37.356144],[67.83,37.144994]],[[67.83,37.144994],[68.135562,37.023115],[68.859446,37.344336],[69.196273,37.151144],[69.518785,37.608997],[70.116578,37.588223],[70.270574,37.735165],[70.376304,38.138396],[70.806821,38.486282],[71.348131,38.258905],[71.239404,37.953265],[71.541918,37.905774],[71.448693,37.065645],[71.844638,36.738171],[72.193041,36.948288],[72.63689,37.047558],[73.260056,37.495257],[73.948696,37.421566],[74.980002,37.41999]],[[74.980002,37.41999],[75.158028,37.133031]],[[75.158028,37.133031],[74.575893,37.020841],[74.067552,36.836176],[72.920025,36.720007],[71.846292,36.509942],[71.262348,36.074388],[71.498768,35.650563],[71.613076,35.153203],[71.115019,34.733126],[71.156773,34.348911],[70.881803,33.988856],[69.930543,34.02012],[70.323594,33.358533],[69.687147,33.105499],[69.262522,32.501944],[69.317764,31.901412],[68.926677,31.620189],[68.556932,31.71331],[67.792689,31.58293],[67.683394,31.303154],[66.938891,31.304911],[66.381458,30.738899],[66.346473,29.887943],[65.046862,29.472181],[64.350419,29.560031],[64.148002,29.340819],[63.550261,29.468331],[62.549857,29.318572],[60.874248,29.829239]],[[60.874248,29.829239],[61.781222,30.73585],[61.699314,31.379506],[60.941945,31.548075],[60.863655,32.18292],[60.536078,32.981269],[60.9637,33.528832],[60.52843,33.676446],[60.803193,34.404102],[61.210817,35.650072]],[[23.912215,-10.926826],[24.017894,-11.237298],[23.904154,-11.722282],[24.079905,-12.191297],[23.930922,-12.565848],[24.016137,-12.911046],[21.933886,-12.898437],[21.887843,-16.08031],[22.562478,-16.898451],[23.215048,-17.523116]],[[23.215048,-17.523116],[21.377176,-17.930636],[18.956187,-17.789095],[18.263309,-17.309951],[14.209707,-17.353101],[14.058501,-17.423381],[13.462362,-16.971212],[12.814081,-16.941343],[12.215461,-17.111668],[11.734199,-17.301889]],[[11.734199,-17.301889],[11.640096,-16.673142],[11.778537,-15.793816],[12.123581,-14.878316],[12.175619,-14.449144],[12.500095,-13.5477],[12.738479,-13.137906],[13.312914,-12.48363],[13.633721,-12.038645],[13.738728,-11.297863],[13.686379,-10.731076],[13.387328,-10.373578],[13.120988,-9.766897],[12.87537,-9.166934],[12.929061,-8.959091],[13.236433,-8.562629],[12.93304,-7.596539],[12.728298,-6.927122],[12.227347,-6.294448],[12.322432,-6.100092]],[[12.322432,-6.100092],[12.735171,-5.965682],[13.024869,-5.984389],[13.375597,-5.864241],[16.326528,-5.87747],[16.57318,-6.622645],[16.860191,-7.222298],[17.089996,-7.545689],[17.47297,-8.068551],[18.134222,-7.987678],[18.464176,-7.847014],[19.016752,-7.988246],[19.166613,-7.738184],[19.417502,-7.155429],[20.037723,-7.116361],[20.091622,-6.94309],[20.601823,-6.939318],[20.514748,-7.299606],[21.728111,-7.290872],[21.746456,-7.920085],[21.949131,-8.305901],[21.801801,-8.908707],[21.875182,-9.523708],[22.208753,-9.894796],[22.155268,-11.084801],[22.402798,-10.993075],[22.837345,-11.017622],[23.456791,-10.867863],[23.912215,-10.926826]],[[12.182337,-5.789931],[11.914963,-5.037987]],[[11.914963,-5.037987],[12.318608,-4.60623],[12.62076,-4.438023],[12.995517,-4.781103]],[[12.995517,-4.781103],[12.631612,-4.991271],[12.468004,-5.248362],[12.436688,-5.684304],[12.182337,-5.789931]],[[21.02004,40.842727],[20.99999,40.580004],[20.674997,40.435],[20.615,40.110007],[20.150016,39.624998]],[[20.150016,39.624998],[19.98,39.694993],[19.960002,39.915006],[19.406082,40.250773],[19.319059,40.72723],[19.40355,41.409566],[19.540027,41.719986],[19.371769,41.877548],[19.304486,42.195745],[19.738051,42.688247]],[[19.738051,42.688247],[19.801613,42.500093],[20.0707,42.58863]],[[20.0707,42.58863],[20.283755,42.32026],[20.52295,42.21787]],[[20.52295,42.21787],[20.590247,41.855404],[20.463175,41.515089],[20.605182,41.086226],[21.02004,40.842727]],[[51.579519,24.245497],[51.757441,24.294073],[51.794389,24.019826],[52.577081,24.177439],[53.404007,24.151317],[54.008001,24.121758],[54.693024,24.797892],[55.439025,25.439145],[56.070821,26.055464]],[[56.070821,26.055464],[56.261042,25.714606]],[[56.261042,25.714606],[56.396847,24.924732]],[[56.396847,24.924732],[55.886233,24.920831],[55.804119,24.269604],[55.981214,24.130543],[55.528632,23.933604],[55.525841,23.524869],[55.234489,23.110993],[55.208341,22.70833]],[[55.208341,22.70833],[55.006803,22.496948],[52.000733,23.001154],[51.617708,24.014219],[51.579519,24.245497]],[[-66.95992,-54.89681],[-67.56244,-54.87001],[-68.63335,-54.8695],[-68.63401,-52.63637]],[[-68.63401,-52.63637],[-68.25,-53.1],[-67.75,-53.85],[-66.45,-54.45],[-65.05,-54.7],[-65.5,-55.2],[-66.45,-55.25],[-66.95992,-54.89681]],[[-62.685057,-22.249029],[-60.846565,-23.880713],[-60.028966,-24.032796],[-58.807128,-24.771459],[-57.777217,-25.16234],[-57.63366,-25.603657],[-58.618174,-27.123719],[-57.60976,-27.395899],[-56.486702,-27.548499],[-55.695846,-27.387837],[-54.788795,-26.621786],[-54.625291,-25.739255]],[[-54.625291,-25.739255],[-54.13005,-25.547639],[-53.628349,-26.124865],[-53.648735,-26.923473],[-54.490725,-27.474757],[-55.162286,-27.881915],[-56.2909,-28.852761],[-57.625133,-30.216295]],[[-57.625133,-30.216295],[-57.874937,-31.016556],[-58.14244,-32.044504],[-58.132648,-33.040567],[-58.349611,-33.263189],[-58.427074,-33.909454]],[[-58.427074,-33.909454],[-58.495442,-34.43149],[-57.22583,-35.288027],[-57.362359,-35.97739],[-56.737487,-36.413126],[-56.788285,-36.901572],[-57.749157,-38.183871],[-59.231857,-38.72022],[-61.237445,-38.928425],[-62.335957,-38.827707],[-62.125763,-39.424105],[-62.330531,-40.172586],[-62.145994,-40.676897],[-62.745803,-41.028761],[-63.770495,-41.166789],[-64.73209,-40.802677],[-65.118035,-41.064315],[-64.978561,-42.058001],[-64.303408,-42.359016],[-63.755948,-42.043687],[-63.458059,-42.563138],[-64.378804,-42.873558],[-65.181804,-43.495381],[-65.328823,-44.501366],[-65.565269,-45.036786],[-66.509966,-45.039628],[-67.293794,-45.551896],[-67.580546,-46.301773],[-66.597066,-47.033925],[-65.641027,-47.236135],[-65.985088,-48.133289],[-67.166179,-48.697337],[-67.816088,-49.869669],[-68.728745,-50.264218],[-69.138539,-50.73251],[-68.815561,-51.771104],[-68.149995,-52.349983],[-68.571545,-52.299444]],[[-68.571545,-52.299444],[-69.498362,-52.142761],[-71.914804,-52.009022],[-72.329404,-51.425956],[-72.309974,-50.67701],[-72.975747,-50.74145],[-73.328051,-50.378785],[-73.415436,-49.318436],[-72.648247,-48.878618],[-72.331161,-48.244238],[-72.447355,-47.738533],[-71.917258,-46.884838],[-71.552009,-45.560733],[-71.659316,-44.973689],[-71.222779,-44.784243],[-71.329801,-44.407522],[-71.793623,-44.207172],[-71.464056,-43.787611],[-71.915424,-43.408565],[-72.148898,-42.254888],[-71.746804,-42.051386],[-71.915734,-40.832339],[-71.680761,-39.808164],[-71.413517,-38.916022],[-70.814664,-38.552995],[-71.118625,-37.576827],[-71.121881,-36.658124],[-70.364769,-36.005089],[-70.388049,-35.169688],[-69.817309,-34.193571],[-69.814777,-33.273886],[-70.074399,-33.09121],[-70.535069,-31.36501],[-69.919008,-30.336339],[-70.01355,-29.367923],[-69.65613,-28.459141],[-69.001235,-27.521214],[-68.295542,-26.89934],[-68.5948,-26.506909],[-68.386001,-26.185016],[-68.417653,-24.518555],[-67.328443,-24.025303],[-66.985234,-22.986349],[-67.106674,-22.735925]],[[-67.106674,-22.735925],[-66.273339,-21.83231],[-64.964892,-22.075862],[-64.377021,-22.798091],[-63.986838,-21.993644],[-62.846468,-22.034985],[-62.685057,-22.249029]],[[43.582746,41.092143],[44.97248,41.248129]],[[44.97248,41.248129],[45.179496,40.985354],[45.560351,40.81229],[45.359175,40.561504],[45.891907,40.218476],[45.610012,39.899994],[46.034534,39.628021],[46.483499,39.464155],[46.50572,38.770605]],[[46.50572,38.770605],[46.143623,38.741201]],[[46.143623,38.741201],[45.735379,39.319719],[45.739978,39.473999],[45.298145,39.471751],[45.001987,39.740004],[44.79399,39.713003]],[[44.79399,39.713003],[44.400009,40.005],[43.656436,40.253564],[43.752658,40.740201],[43.582746,41.092143]],[[-59.572095,-80.040179],[-59.865849,-80.549657],[-60.159656,-81.000327],[-62.255393,-80.863178],[-64.488125,-80.921934],[-65.741666,-80.588827],[-65.741666,-80.549657],[-66.290031,-80.255773],[-64.037688,-80.294944],[-61.883246,-80.39287],[-61.138976,-79.981371],[-60.610119,-79.628679],[-59.572095,-80.040179]],[[-159.208184,-79.497059],[-161.127601,-79.634209],[-162.439847,-79.281465],[-163.027408,-78.928774],[-163.066604,-78.869966],[-163.712896,-78.595667],[-163.712896,-78.595667],[-163.105801,-78.223338],[-161.245113,-78.380176],[-160.246208,-78.693645],[-159.482405,-79.046338],[-159.208184,-79.497059]],[[-45.154758,-78.04707],[-43.920828,-78.478103],[-43.48995,-79.08556],[-43.372438,-79.516645],[-43.333267,-80.026123],[-44.880537,-80.339644],[-46.506174,-80.594357],[-48.386421,-80.829485],[-50.482107,-81.025442],[-52.851988,-80.966685],[-54.164259,-80.633528],[-53.987991,-80.222028],[-51.853134,-79.94773],[-50.991326,-79.614623],[-50.364595,-79.183487],[-49.914131,-78.811209],[-49.306959,-78.458569],[-48.660616,-78.047018],[-48.660616,-78.047019],[-48.151396,-78.04707],[-46.662857,-77.831476],[-45.154758,-78.04707]],[[-121.211511,-73.50099],[-119.918851,-73.657725],[-118.724143,-73.481353],[-119.292119,-73.834097],[-120.232217,-74.08881],[-121.62283,-74.010468],[-122.621735,-73.657778],[-122.621735,-73.657777],[-122.406245,-73.324619],[-121.211511,-73.50099]],[[-125.559566,-73.481353],[-124.031882,-73.873268],[-124.619469,-73.834097],[-125.912181,-73.736118],[-127.28313,-73.461769],[-127.28313,-73.461768],[-126.558472,-73.246226],[-125.559566,-73.481353]],[[-98.98155,-71.933334],[-97.884743,-72.070535],[-96.787937,-71.952971],[-96.20035,-72.521205],[-96.983765,-72.442864],[-98.198083,-72.482035],[-99.432013,-72.442864],[-100.783455,-72.50162],[-101.801868,-72.305663],[-102.330725,-71.894164],[-102.330725,-71.894164],[-101.703967,-71.717792],[-100.430919,-71.854993],[-98.98155,-71.933334]],[[-68.451346,-70.955823],[-68.333834,-71.406493],[-68.510128,-71.798407],[-68.784297,-72.170736],[-69.959471,-72.307885],[-71.075889,-72.503842],[-72.388134,-72.484257],[-71.8985,-72.092343],[-73.073622,-72.229492],[-74.19004,-72.366693],[-74.953895,-72.072757],[-75.012625,-71.661258],[-73.915819,-71.269345],[-73.915819,-71.269344],[-73.230331,-71.15178],[-72.074717,-71.190951],[-71.780962,-70.681473],[-71.72218,-70.309196],[-71.741791,-69.505782],[-71.173815,-69.035475],[-70.253252,-68.87874],[-69.724447,-69.251017],[-69.489422,-69.623346],[-69.058518,-70.074016],[-68.725541,-70.505153],[-68.451346,-70.955823]],[[-58.614143,-64.152467],[-59.045073,-64.36801],[-59.789342,-64.211223],[-60.611928,-64.309202],[-61.297416,-64.54433],[-62.0221,-64.799094],[-62.51176,-65.09303],[-62.648858,-65.484942],[-62.590128,-65.857219],[-62.120079,-66.190326],[-62.805567,-66.425505],[-63.74569,-66.503847],[-64.294106,-66.837004],[-64.881693,-67.150474],[-65.508425,-67.58161],[-65.665082,-67.953887],[-65.312545,-68.365335],[-64.783715,-68.678908],[-63.961103,-68.913984],[-63.1973,-69.227556],[-62.785955,-69.619419],[-62.570516,-69.991747],[-62.276736,-70.383661],[-61.806661,-70.716768],[-61.512906,-71.089045],[-61.375809,-72.010074],[-61.081977,-72.382351],[-61.003661,-72.774265],[-60.690269,-73.166179],[-60.827367,-73.695242],[-61.375809,-74.106742],[-61.96337,-74.439848],[-63.295201,-74.576997],[-63.74569,-74.92974],[-64.352836,-75.262847],[-65.860987,-75.635124],[-67.192818,-75.79191],[-68.446282,-76.007452],[-69.797724,-76.222995],[-70.600724,-76.634494],[-72.206776,-76.673665],[-73.969536,-76.634494],[-75.555977,-76.712887],[-77.24037,-76.712887],[-76.926979,-77.104802],[-75.399294,-77.28107],[-74.282876,-77.55542],[-73.656119,-77.908112],[-74.772536,-78.221633],[-76.4961,-78.123654],[-77.925858,-78.378419],[-77.984666,-78.789918],[-78.023785,-79.181833],[-76.848637,-79.514939],[-76.633224,-79.887216],[-75.360097,-80.259545],[-73.244852,-80.416331],[-71.442946,-80.69063],[-70.013163,-81.004151],[-68.191646,-81.317672],[-65.704279,-81.474458],[-63.25603,-81.748757],[-61.552026,-82.042692],[-59.691416,-82.37585],[-58.712121,-82.846106],[-58.222487,-83.218434],[-57.008117,-82.865691],[-55.362894,-82.571755],[-53.619771,-82.258235],[-51.543644,-82.003521],[-49.76135,-81.729171],[-47.273931,-81.709586],[-44.825708,-81.846735],[-42.808363,-82.081915],[-42.16202,-81.65083],[-40.771433,-81.356894],[-38.244818,-81.337309],[-36.26667,-81.121715],[-34.386397,-80.906172],[-32.310296,-80.769023],[-30.097098,-80.592651],[-28.549802,-80.337938],[-29.254901,-79.985195],[-29.685805,-79.632503],[-29.685805,-79.260226],[-31.624808,-79.299397],[-33.681324,-79.456132],[-35.639912,-79.456132],[-35.914107,-79.083855],[-35.77701,-78.339248],[-35.326546,-78.123654],[-33.896763,-77.888526],[-32.212369,-77.65345],[-30.998051,-77.359515],[-29.783732,-77.065579],[-28.882779,-76.673665],[-27.511752,-76.497345],[-26.160336,-76.360144],[-25.474822,-76.281803],[-23.927552,-76.24258],[-22.458598,-76.105431],[-21.224694,-75.909474],[-20.010375,-75.674346],[-18.913543,-75.439218],[-17.522982,-75.125698],[-16.641589,-74.79254],[-15.701491,-74.498604],[-15.40771,-74.106742],[-16.46532,-73.871614],[-16.112784,-73.460114],[-15.446855,-73.146542],[-14.408805,-72.950585],[-13.311973,-72.715457],[-12.293508,-72.401936],[-11.510067,-72.010074],[-11.020433,-71.539767],[-10.295774,-71.265416],[-9.101015,-71.324224],[-8.611381,-71.65733],[-7.416622,-71.696501],[-7.377451,-71.324224],[-6.868232,-70.93231],[-5.790985,-71.030289],[-5.536375,-71.402617],[-4.341667,-71.461373],[-3.048981,-71.285053],[-1.795492,-71.167438],[-.659489,-71.226246],[-.228637,-71.637745],[.868195,-71.304639],[1.886686,-71.128267],[3.022638,-70.991118],[4.139055,-70.853917],[5.157546,-70.618789],[6.273912,-70.462055],[7.13572,-70.246512],[7.742866,-69.893769],[8.48711,-70.148534],[9.525135,-70.011333],[10.249845,-70.48164],[10.817821,-70.834332],[11.953824,-70.638375],[12.404287,-70.246512],[13.422778,-69.972162],[14.734998,-70.030918],[15.126757,-70.403247],[15.949342,-70.030918],[17.026589,-69.913354],[18.201711,-69.874183],[19.259373,-69.893769],[20.375739,-70.011333],[21.452985,-70.07014],[21.923034,-70.403247],[22.569403,-70.697182],[23.666184,-70.520811],[24.841357,-70.48164],[25.977309,-70.48164],[27.093726,-70.462055],[28.09258,-70.324854],[29.150242,-70.20729],[30.031583,-69.93294],[30.971733,-69.75662],[31.990172,-69.658641],[32.754053,-69.384291],[33.302443,-68.835642],[33.870419,-68.502588],[34.908495,-68.659271],[35.300202,-69.012014],[36.16201,-69.247142],[37.200035,-69.168748],[37.905108,-69.52144],[38.649404,-69.776205],[39.667894,-69.541077],[40.020431,-69.109941],[40.921358,-68.933621],[41.959434,-68.600514],[42.938702,-68.463313],[44.113876,-68.267408],[44.897291,-68.051866],[45.719928,-67.816738],[46.503343,-67.601196],[47.44344,-67.718759],[48.344419,-67.366068],[48.990736,-67.091718],[49.930885,-67.111303],[50.753471,-66.876175],[50.949325,-66.523484],[51.791547,-66.249133],[52.614133,-66.053176],[53.613038,-65.89639],[54.53355,-65.818049],[55.414943,-65.876805],[56.355041,-65.974783],[57.158093,-66.249133],[57.255968,-66.680218],[58.137361,-67.013324],[58.744508,-67.287675],[59.939318,-67.405239],[60.605221,-67.679589],[61.427806,-67.953887],[62.387489,-68.012695],[63.19049,-67.816738],[64.052349,-67.405239],[64.992447,-67.620729],[65.971715,-67.738345],[66.911864,-67.855909],[67.891133,-67.934302],[68.890038,-67.934302],[69.712624,-68.972791],[69.673453,-69.227556],[69.555941,-69.678226],[68.596258,-69.93294],[67.81274,-70.305268],[67.949889,-70.697182],[69.066307,-70.677545],[68.929157,-71.069459],[68.419989,-71.441788],[67.949889,-71.853287],[68.71377,-72.166808],[69.869307,-72.264787],[71.024895,-72.088415],[71.573285,-71.696501],[71.906288,-71.324224],[72.454627,-71.010703],[73.08141,-70.716768],[73.33602,-70.364024],[73.864877,-69.874183],[74.491557,-69.776205],[75.62756,-69.737034],[76.626465,-69.619419],[77.644904,-69.462684],[78.134539,-69.07077],[78.428371,-68.698441],[79.113859,-68.326216],[80.093127,-68.071503],[80.93535,-67.875546],[81.483792,-67.542388],[82.051767,-67.366068],[82.776426,-67.209282],[83.775331,-67.30726],[84.676206,-67.209282],[85.655527,-67.091718],[86.752359,-67.150474],[87.477017,-66.876175],[87.986289,-66.209911],[88.358411,-66.484261],[88.828408,-66.954568],[89.67063,-67.150474],[90.630365,-67.228867],[91.5901,-67.111303],[92.608539,-67.189696],[93.548637,-67.209282],[94.17542,-67.111303],[95.017591,-67.170111],[95.781472,-67.385653],[96.682399,-67.248504],[97.759646,-67.248504],[98.68021,-67.111303],[99.718182,-67.248504],[100.384188,-66.915346],[100.893356,-66.58224],[101.578896,-66.30789],[102.832411,-65.563284],[103.478676,-65.700485],[104.242557,-65.974783],[104.90846,-66.327527],[106.181561,-66.934931],[107.160881,-66.954568],[108.081393,-66.954568],[109.15864,-66.837004],[110.235835,-66.699804],[111.058472,-66.425505],[111.74396,-66.13157],[112.860378,-66.092347],[113.604673,-65.876805],[114.388088,-66.072762],[114.897308,-66.386283],[115.602381,-66.699804],[116.699161,-66.660633],[117.384701,-66.915346],[118.57946,-67.170111],[119.832924,-67.268089],[120.871,-67.189696],[121.654415,-66.876175],[122.320369,-66.562654],[123.221296,-66.484261],[124.122274,-66.621462],[125.160247,-66.719389],[126.100396,-66.562654],[127.001427,-66.562654],[127.882768,-66.660633],[128.80328,-66.758611],[129.704259,-66.58224],[130.781454,-66.425505],[131.799945,-66.386283],[132.935896,-66.386283],[133.85646,-66.288304],[134.757387,-66.209963],[135.031582,-65.72007],[135.070753,-65.308571],[135.697485,-65.582869],[135.873805,-66.033591],[136.206705,-66.44509],[136.618049,-66.778197],[137.460271,-66.954568],[138.596223,-66.895761],[139.908442,-66.876175],[140.809421,-66.817367],[142.121692,-66.817367],[143.061842,-66.797782],[144.374061,-66.837004],[145.490427,-66.915346],[146.195552,-67.228867],[145.999699,-67.601196],[146.646067,-67.895131],[147.723263,-68.130259],[148.839629,-68.385024],[150.132314,-68.561292],[151.483705,-68.71813],[152.502247,-68.874813],[153.638199,-68.894502],[154.284567,-68.561292],[155.165857,-68.835642],[155.92979,-69.149215],[156.811132,-69.384291],[158.025528,-69.482269],[159.181013,-69.599833],[159.670699,-69.991747],[160.80665,-70.226875],[161.570479,-70.579618],[162.686897,-70.736353],[163.842434,-70.716768],[164.919681,-70.775524],[166.11444,-70.755938],[167.309095,-70.834332],[168.425616,-70.971481],[169.463589,-71.20666],[170.501665,-71.402617],[171.20679,-71.696501],[171.089227,-72.088415],[170.560422,-72.441159],[170.109958,-72.891829],[169.75737,-73.24452],[169.287321,-73.65602],[167.975101,-73.812806],[167.387489,-74.165498],[166.094803,-74.38104],[165.644391,-74.772954],[164.958851,-75.145283],[164.234193,-75.458804],[163.822797,-75.870303],[163.568239,-76.24258],[163.47026,-76.693302],[163.489897,-77.065579],[164.057873,-77.457442],[164.273363,-77.82977],[164.743464,-78.182514],[166.604126,-78.319611],[166.995781,-78.750748],[165.193876,-78.907483],[163.666217,-79.123025],[161.766385,-79.162248],[160.924162,-79.730482],[160.747894,-80.200737],[160.316964,-80.573066],[159.788211,-80.945395],[161.120016,-81.278501],[161.629287,-81.690001],[162.490992,-82.062278],[163.705336,-82.395435],[165.095949,-82.708956],[166.604126,-83.022477],[168.895665,-83.335998],[169.404782,-83.825891],[172.283934,-84.041433],[172.477049,-84.117914],[173.224083,-84.41371],[175.985672,-84.158997],[178.277212,-84.472518],[180,-84.71338],[-179.942499,-84.721443],[-179.058677,-84.139412],[-177.256772,-84.452933],[-177.140807,-84.417941],[-176.084673,-84.099259],[-175.947235,-84.110449],[-175.829882,-84.117914],[-174.382503,-84.534323],[-173.116559,-84.117914],[-172.889106,-84.061019],[-169.951223,-83.884647],[-168.999989,-84.117914],[-168.530199,-84.23739],[-167.022099,-84.570497],[-164.182144,-84.82521],[-161.929775,-85.138731],[-158.07138,-85.37391],[-155.192253,-85.09956],[-150.942099,-85.295517],[-148.533073,-85.609038],[-145.888918,-85.315102],[-143.107718,-85.040752],[-142.892279,-84.570497],[-146.829068,-84.531274],[-150.060732,-84.296146],[-150.902928,-83.904232],[-153.586201,-83.68869],[-153.409907,-83.23802],[-153.037759,-82.82652],[-152.665637,-82.454192],[-152.861517,-82.042692],[-154.526299,-81.768394],[-155.29018,-81.41565],[-156.83745,-81.102129],[-154.408787,-81.160937],[-152.097662,-81.004151],[-150.648293,-81.337309],[-148.865998,-81.043373],[-147.22075,-80.671045],[-146.417749,-80.337938],[-146.770286,-79.926439],[-148.062947,-79.652089],[-149.531901,-79.358205],[-151.588416,-79.299397],[-153.390322,-79.162248],[-155.329376,-79.064269],[-155.975668,-78.69194],[-157.268302,-78.378419],[-158.051768,-78.025676],[-158.365134,-76.889207],[-157.875474,-76.987238],[-156.974573,-77.300759],[-155.329376,-77.202728],[-153.742832,-77.065579],[-152.920247,-77.496664],[-151.33378,-77.398737],[-150.00195,-77.183143],[-148.748486,-76.908845],[-147.612483,-76.575738],[-146.104409,-76.47776],[-146.143528,-76.105431],[-146.496091,-75.733154],[-146.20231,-75.380411],[-144.909624,-75.204039],[-144.322037,-75.537197],[-142.794353,-75.34124],[-141.638764,-75.086475],[-140.209007,-75.06689],[-138.85759,-74.968911],[-137.5062,-74.733783],[-136.428901,-74.518241],[-135.214583,-74.302699],[-134.431194,-74.361455],[-133.745654,-74.439848],[-132.257168,-74.302699],[-130.925311,-74.479019],[-129.554284,-74.459433],[-128.242038,-74.322284],[-126.890622,-74.420263],[-125.402082,-74.518241],[-124.011496,-74.479019],[-122.562152,-74.498604],[-121.073613,-74.518241],[-119.70256,-74.479019],[-118.684145,-74.185083],[-117.469801,-74.028348],[-116.216312,-74.243891],[-115.021552,-74.067519],[-113.944331,-73.714828],[-113.297988,-74.028348],[-112.945452,-74.38104],[-112.299083,-74.714198],[-111.261059,-74.420263],[-110.066325,-74.79254],[-108.714909,-74.910103],[-107.559346,-75.184454],[-106.149148,-75.125698],[-104.876074,-74.949326],[-103.367949,-74.988497],[-102.016507,-75.125698],[-100.645531,-75.302018],[-100.1167,-74.870933],[-100.763043,-74.537826],[-101.252703,-74.185083],[-102.545337,-74.106742],[-103.113313,-73.734413],[-103.328752,-73.362084],[-103.681289,-72.61753],[-102.917485,-72.754679],[-101.60524,-72.813436],[-100.312528,-72.754679],[-99.13738,-72.911414],[-98.118889,-73.20535],[-97.688037,-73.558041],[-96.336595,-73.616849],[-95.043961,-73.4797],[-93.672907,-73.283743],[-92.439003,-73.166179],[-91.420564,-73.401307],[-90.088733,-73.322914],[-89.226951,-72.558722],[-88.423951,-73.009393],[-87.268337,-73.185764],[-86.014822,-73.087786],[-85.192236,-73.4797],[-83.879991,-73.518871],[-82.665646,-73.636434],[-81.470913,-73.851977],[-80.687447,-73.4797],[-80.295791,-73.126956],[-79.296886,-73.518871],[-77.925858,-73.420892],[-76.907367,-73.636434],[-76.221879,-73.969541],[-74.890049,-73.871614],[-73.852024,-73.65602],[-72.833533,-73.401307],[-71.619215,-73.264157],[-70.209042,-73.146542],[-68.935916,-73.009393],[-67.956622,-72.79385],[-67.369061,-72.480329],[-67.134036,-72.049244],[-67.251548,-71.637745],[-67.56494,-71.245831],[-67.917477,-70.853917],[-68.230843,-70.462055],[-68.485452,-70.109311],[-68.544209,-69.717397],[-68.446282,-69.325535],[-67.976233,-68.953206],[-67.5845,-68.541707],[-67.427843,-68.149844],[-67.62367,-67.718759],[-67.741183,-67.326845],[-67.251548,-66.876175],[-66.703184,-66.58224],[-66.056815,-66.209963],[-65.371327,-65.89639],[-64.568276,-65.602506],[-64.176542,-65.171423],[-63.628152,-64.897073],[-63.001394,-64.642308],[-62.041686,-64.583552],[-61.414928,-64.270031],[-60.709855,-64.074074],[-59.887269,-63.95651],[-59.162585,-63.701745],[-58.594557,-63.388224],[-57.811143,-63.27066],[-57.223582,-63.525425],[-57.59573,-63.858532],[-58.614143,-64.152467]],[[68.935,-48.625],[69.58,-48.94],[70.525,-49.065],[70.56,-49.255],[70.28,-49.71],[68.745,-49.775],[68.72,-49.2425],[68.8675,-48.83],[68.935,-48.625]],[[145.397978,-40.792549],[146.364121,-41.137695],[146.908584,-41.000546],[147.689259,-40.808258],[148.289068,-40.875438],[148.359865,-42.062445],[148.017301,-42.407024],[147.914052,-43.211522],[147.564564,-42.937689],[146.870343,-43.634597],[146.663327,-43.580854],[146.048378,-43.549745],[145.43193,-42.693776],[145.29509,-42.03361],[144.718071,-41.162552],[144.743755,-40.703975],[145.397978,-40.792549]],[[143.561811,-13.763656],[143.922099,-14.548311],[144.563714,-14.171176],[144.894908,-14.594458],[145.374724,-14.984976],[145.271991,-15.428205],[145.48526,-16.285672],[145.637033,-16.784918],[145.888904,-16.906926],[146.160309,-17.761655],[146.063674,-18.280073],[146.387478,-18.958274],[147.471082,-19.480723],[148.177602,-19.955939],[148.848414,-20.39121],[148.717465,-20.633469],[149.28942,-21.260511],[149.678337,-22.342512],[150.077382,-22.122784],[150.482939,-22.556142],[150.727265,-22.402405],[150.899554,-23.462237],[151.609175,-24.076256],[152.07354,-24.457887],[152.855197,-25.267501],[153.136162,-26.071173],[153.161949,-26.641319],[153.092909,-27.2603],[153.569469,-28.110067],[153.512108,-28.995077],[153.339095,-29.458202],[153.069241,-30.35024],[153.089602,-30.923642],[152.891578,-31.640446],[152.450002,-32.550003],[151.709117,-33.041342],[151.343972,-33.816023],[151.010555,-34.31036],[150.714139,-35.17346],[150.32822,-35.671879],[150.075212,-36.420206],[149.946124,-37.109052],[149.997284,-37.425261],[149.423882,-37.772681],[148.304622,-37.809061],[147.381733,-38.219217],[146.922123,-38.606532],[146.317922,-39.035757],[145.489652,-38.593768],[144.876976,-38.417448],[145.032212,-37.896188],[144.485682,-38.085324],[143.609974,-38.809465],[142.745427,-38.538268],[142.17833,-38.380034],[141.606582,-38.308514],[140.638579,-38.019333],[139.992158,-37.402936],[139.806588,-36.643603],[139.574148,-36.138362],[139.082808,-35.732754],[138.120748,-35.612296],[138.449462,-35.127261],[138.207564,-34.384723],[137.71917,-35.076825],[136.829406,-35.260535],[137.352371,-34.707339],[137.503886,-34.130268],[137.890116,-33.640479],[137.810328,-32.900007],[136.996837,-33.752771],[136.372069,-34.094766],[135.989043,-34.890118],[135.208213,-34.47867],[135.239218,-33.947953],[134.613417,-33.222778],[134.085904,-32.848072],[134.273903,-32.617234],[132.990777,-32.011224],[132.288081,-31.982647],[131.326331,-31.495803],[129.535794,-31.590423],[128.240938,-31.948489],[127.102867,-32.282267],[126.148714,-32.215966],[125.088623,-32.728751],[124.221648,-32.959487],[124.028947,-33.483847],[123.659667,-33.890179],[122.811036,-33.914467],[122.183064,-34.003402],[121.299191,-33.821036],[120.580268,-33.930177],[119.893695,-33.976065],[119.298899,-34.509366],[119.007341,-34.464149],[118.505718,-34.746819],[118.024972,-35.064733],[117.295507,-35.025459],[116.625109,-35.025097],[115.564347,-34.386428],[115.026809,-34.196517],[115.048616,-33.623425],[115.545123,-33.487258],[115.714674,-33.259572],[115.679379,-32.900369],[115.801645,-32.205062],[115.689611,-31.612437],[115.160909,-30.601594],[114.997043,-30.030725],[115.040038,-29.461095],[114.641974,-28.810231],[114.616498,-28.516399],[114.173579,-28.118077],[114.048884,-27.334765],[113.477498,-26.543134],[113.338953,-26.116545],[113.778358,-26.549025],[113.440962,-25.621278],[113.936901,-25.911235],[114.232852,-26.298446],[114.216161,-25.786281],[113.721255,-24.998939],[113.625344,-24.683971],[113.393523,-24.384764],[113.502044,-23.80635],[113.706993,-23.560215],[113.843418,-23.059987],[113.736552,-22.475475],[114.149756,-21.755881],[114.225307,-22.517488],[114.647762,-21.82952],[115.460167,-21.495173],[115.947373,-21.068688],[116.711615,-20.701682],[117.166316,-20.623599],[117.441545,-20.746899],[118.229559,-20.374208],[118.836085,-20.263311],[118.987807,-20.044203],[119.252494,-19.952942],[119.805225,-19.976506],[120.85622,-19.683708],[121.399856,-19.239756],[121.655138,-18.705318],[122.241665,-18.197649],[122.286624,-17.798603],[122.312772,-17.254967],[123.012574,-16.4052],[123.433789,-17.268558],[123.859345,-17.069035],[123.503242,-16.596506],[123.817073,-16.111316],[124.258287,-16.327944],[124.379726,-15.56706],[124.926153,-15.0751],[125.167275,-14.680396],[125.670087,-14.51007],[125.685796,-14.230656],[126.125149,-14.347341],[126.142823,-14.095987],[126.582589,-13.952791],[127.065867,-13.817968],[127.804633,-14.276906],[128.35969,-14.86917],[128.985543,-14.875991],[129.621473,-14.969784],[129.4096,-14.42067],[129.888641,-13.618703],[130.339466,-13.357376],[130.183506,-13.10752],[130.617795,-12.536392],[131.223495,-12.183649],[131.735091,-12.302453],[132.575298,-12.114041],[132.557212,-11.603012],[131.824698,-11.273782],[132.357224,-11.128519],[133.019561,-11.376411],[133.550846,-11.786515],[134.393068,-12.042365],[134.678632,-11.941183],[135.298491,-12.248606],[135.882693,-11.962267],[136.258381,-12.049342],[136.492475,-11.857209],[136.95162,-12.351959],[136.685125,-12.887223],[136.305407,-13.29123],[135.961758,-13.324509],[136.077617,-13.724278],[135.783836,-14.223989],[135.428664,-14.715432],[135.500184,-14.997741],[136.295175,-15.550265],[137.06536,-15.870762],[137.580471,-16.215082],[138.303217,-16.807604],[138.585164,-16.806622],[139.108543,-17.062679],[139.260575,-17.371601],[140.215245,-17.710805],[140.875463,-17.369069],[141.07111,-16.832047],[141.274095,-16.38887],[141.398222,-15.840532],[141.702183,-15.044921],[141.56338,-14.561333],[141.63552,-14.270395],[141.519869,-13.698078],[141.65092,-12.944688],[141.842691,-12.741548],[141.68699,-12.407614],[141.928629,-11.877466],[142.118488,-11.328042],[142.143706,-11.042737],[142.51526,-10.668186],[142.79731,-11.157355],[142.866763,-11.784707],[143.115947,-11.90563],[143.158632,-12.325656],[143.522124,-12.834358],[143.597158,-13.400422],[143.561811,-13.763656]],[[16.979667,48.123497],[16.903754,47.714866],[16.340584,47.712902],[16.534268,47.496171],[16.202298,46.852386]],[[16.202298,46.852386],[16.011664,46.683611],[15.137092,46.658703],[14.632472,46.431817],[13.806475,46.509306]],[[13.806475,46.509306],[12.376485,46.767559],[12.153088,47.115393],[11.164828,46.941579],[11.048556,46.751359],[10.442701,46.893546]],[[10.442701,46.893546],[9.879180119440742,46.93372025967713],[9.871798391640267,47.02000494258236]],[[9.871798391640267,47.02000494258236],[9.60754621634599,47.0613932427273]],[[9.60754621634599,47.0613932427273],[9.63857721710096,47.095217766375],[9.62032689725713,47.1478826137045],[9.56494495232072,47.1709657502944],[9.57917146014346,47.2077927269191]],[[9.57917146014346,47.2077927269191],[9.530220755311232,47.2730326940506],[9.629127151388623,47.364783895095464]],[[9.629127151388623,47.364783895095464],[9.594226,47.525058]],[[9.594226,47.525058],[9.896068,47.580197],[10.402084,47.302488],[10.544504,47.566399],[11.426414,47.523766],[12.141357,47.703083],[12.62076,47.672388],[12.932627,47.467646],[13.025851,47.637584],[12.884103,48.289146],[13.243357,48.416115],[13.595946,48.877172]],[[13.595946,48.877172],[14.338898,48.555305],[14.901447,48.964402],[15.253416,49.039074],[16.029647,48.733899],[16.499283,48.785808],[16.960288,48.596982]],[[16.960288,48.596982],[16.879983,48.470013],[16.979667,48.123497]],[[46.143623,38.741201],[45.457722,38.874139],[44.952688,39.335765],[44.79399,39.713003]],[[47.987283,41.405819],[48.584353,41.80887],[49.110264,41.282287],[49.618915,40.572924],[50.08483,40.526157],[50.392821,40.256561],[49.569202,40.176101],[49.395259,39.399482],[49.223228,39.049219],[48.856532,38.815486],[48.883249,38.320245]],[[48.883249,38.320245],[48.634375,38.270378],[48.010744,38.794015],[48.355529,39.288765],[48.060095,39.582235],[47.685079,39.508364],[46.50572,38.770605]],[[44.97248,41.248129],[45.217426,41.411452],[45.962601,41.123873],[46.501637,41.064445],[46.637908,41.181673],[46.145432,41.722802],[46.404951,41.860675]],[[46.404951,41.860675],[46.686071,41.827137],[47.373315,41.219732],[47.815666,41.151416],[47.987283,41.405819]],[[29.339998,-4.499983],[29.276384,-3.293907],[29.024926,-2.839258]],[[29.024926,-2.839258],[29.632176,-2.917858],[29.938359,-2.348487],[30.469696,-2.413858]],[[30.469696,-2.413858],[30.527677,-2.807632],[30.743013,-3.034285],[30.752263,-3.35933],[30.50556,-3.568567],[30.116333,-4.090138],[29.753512,-4.452389]],[[29.753512,-4.452389],[29.339998,-4.499983]],[[4.047071,51.267259],[4.973991,51.475024],[5.606976,51.037298],[6.156658,50.803721]],[[6.156658,50.803721],[6.043073,50.128052]],[[6.043073,50.128052],[5.782417,50.090328],[5.674052,49.529484]],[[5.674052,49.529484],[4.799222,49.985373],[4.286023,49.907497],[3.588184,50.378992],[3.123252,50.780363],[2.658422,50.796848],[2.513573,51.148506]],[[2.513573,51.148506],[3.314971,51.345781],[4.047071,51.267259]],[[2.691702,6.258817],[1.865241,6.142158]],[[1.865241,6.142158],[1.618951,6.832038],[1.664478,9.12859],[1.463043,9.334624],[1.425061,9.825395],[1.077795,10.175607],[.772336,10.470808],[.899563,10.997339]],[[.899563,10.997339],[1.24347,11.110511],[1.447178,11.547719],[1.935986,11.64115],[2.154474,11.94015]],[[2.154474,11.94015],[2.490164,12.233052],[2.848643,12.235636],[3.61118,11.660167]],[[3.61118,11.660167],[3.572216,11.327939],[3.797112,10.734746],[3.60007,10.332186],[3.705438,10.06321],[3.220352,9.444153],[2.912308,9.137608],[2.723793,8.506845],[2.749063,7.870734],[2.691702,6.258817]],[[-2.827496,9.642461],[-3.511899,9.900326],[-3.980449,9.862344],[-4.330247,9.610835],[-4.779884,9.821985],[-4.954653,10.152714],[-5.404342,10.370737]],[[-5.404342,10.370737],[-5.470565,10.95127],[-5.197843,11.375146],[-5.220942,11.713859],[-4.427166,12.542646],[-4.280405,13.228444],[-4.006391,13.472485],[-3.522803,13.337662],[-3.103707,13.541267],[-2.967694,13.79815],[-2.191825,14.246418],[-2.001035,14.559008],[-1.066363,14.973815],[-.515854,15.116158],[-.266257,14.924309],[.374892,14.928908]],[[.374892,14.928908],[.295646,14.444235],[.429928,13.988733],[.993046,13.33575],[1.024103,12.851826],[2.177108,12.625018],[2.154474,11.94015]],[[.899563,10.997339],[.023803,11.018682]],[[.023803,11.018682],[-.438702,11.098341],[-.761576,10.93693],[-1.203358,11.009819],[-2.940409,10.96269],[-2.963896,10.395335],[-2.827496,9.642461]],[[92.672721,22.041239],[92.652257,21.324048],[92.303234,21.475485],[92.368554,20.670883]],[[92.368554,20.670883],[92.082886,21.192195],[92.025215,21.70157],[91.834891,22.182936],[91.417087,22.765019],[90.496006,22.805017],[90.586957,22.392794],[90.272971,21.836368],[89.847467,22.039146],[89.70205,21.857116],[89.418863,21.966179],[89.031961,22.055708]],[[89.031961,22.055708],[88.876312,22.879146],[88.52977,23.631142],[88.69994,24.233715],[88.084422,24.501657],[88.306373,24.866079],[88.931554,25.238692],[88.209789,25.768066],[88.563049,26.446526],[89.355094,26.014407],[89.832481,25.965082],[89.920693,25.26975],[90.872211,25.132601],[91.799596,25.147432],[92.376202,24.976693],[91.915093,24.130414],[91.46773,24.072639],[91.158963,23.503527],[91.706475,22.985264],[91.869928,23.624346],[92.146035,23.627499],[92.672721,22.041239]],[[22.65715,44.234923],[22.944832,43.823785],[23.332302,43.897011],[24.100679,43.741051],[25.569272,43.688445],[26.065159,43.943494],[27.2424,44.175986],[27.970107,43.812468],[28.558081,43.707462]],[[28.558081,43.707462],[28.039095,43.293172],[27.673898,42.577892],[27.99672,42.007359]],[[27.99672,42.007359],[27.135739,42.141485],[26.117042,41.826905]],[[26.117042,41.826905],[26.106138,41.328899],[25.197201,41.234486],[24.492645,41.583896],[23.692074,41.309081],[22.952377,41.337994]],[[22.952377,41.337994],[22.881374,41.999297],[22.380526,42.32026]],[[22.380526,42.32026],[22.545012,42.461362],[22.436595,42.580321],[22.604801,42.898519],[22.986019,43.211161],[22.500157,43.642814],[22.410446,44.008063],[22.65715,44.234923]],[[-77.53466,23.75975],[-77.78,23.71],[-78.03405,24.28615],[-78.40848,24.57564],[-78.19087,25.2103],[-77.89,25.17],[-77.54,24.34],[-77.53466,23.75975]],[[-77.82,26.58],[-78.91,26.42],[-78.98,26.79],[-78.51,26.87],[-77.85,26.84],[-77.82,26.58]],[[-77,26.59],[-77.17255,25.87918],[-77.35641,26.00735],[-77.34,26.53],[-77.78802,26.92516],[-77.79,27.04],[-77,26.59]],[[19.005486,44.860234],[19.36803,44.863]],[[19.36803,44.863],[19.11761,44.42307],[19.59976,44.03847],[19.454,43.5681],[19.21852,43.52384]],[[19.21852,43.52384],[19.03165,43.43253],[18.70648,43.20011],[18.56,42.65]],[[18.56,42.65],[17.674922,43.028563],[17.297373,43.446341],[16.916156,43.667722],[16.456443,44.04124],[16.23966,44.351143],[15.750026,44.818712],[15.959367,45.233777],[16.318157,45.004127],[16.534939,45.211608],[17.002146,45.233777],[17.861783,45.06774],[18.553214,45.08159],[19.005486,44.860234]],[[23.484128,53.912498],[24.450684,53.905702],[25.536354,54.282423],[25.768433,54.846963],[26.588279,55.167176],[26.494331,55.615107]],[[26.494331,55.615107],[27.10246,55.783314],[28.176709,56.16913]],[[28.176709,56.16913],[29.229513,55.918344],[29.371572,55.670091],[29.896294,55.789463],[30.873909,55.550976],[30.971836,55.081548],[30.757534,54.811771],[31.384472,54.157056],[31.791424,53.974639],[31.731273,53.794029],[32.405599,53.618045],[32.693643,53.351421],[32.304519,53.132726]],[[32.304519,53.132726],[31.497644,53.167427],[31.305201,53.073996]],[[31.305201,53.073996],[31.540018,52.742052]],[[31.540018,52.742052],[31.785998,52.101678]],[[31.785998,52.101678],[30.927549,52.042353],[30.619454,51.822806],[30.555117,51.319503],[30.157364,51.416138],[29.254938,51.368234],[28.992835,51.602044],[28.617613,51.427714],[28.241615,51.572227],[27.454066,51.592303],[26.337959,51.832289],[25.327788,51.910656],[24.553106,51.888461],[24.005078,51.617444],[23.527071,51.578454]],[[23.527071,51.578454],[23.508002,52.023647],[23.199494,52.486977],[23.799199,52.691099],[23.804935,53.089731],[23.527536,53.470122],[23.484128,53.912498]],[[-89.14308,17.808319],[-89.150909,17.955468],[-89.029857,18.001511],[-88.848344,17.883198],[-88.490123,18.486831],[-88.300031,18.499982]],[[-88.300031,18.499982],[-88.296336,18.353273],[-88.106813,18.348674],[-88.123479,18.076675],[-88.285355,17.644143],[-88.197867,17.489475],[-88.302641,17.131694],[-88.239518,17.036066],[-88.355428,16.530774],[-88.551825,16.265467],[-88.732434,16.233635],[-88.930613,15.887273]],[[-88.930613,15.887273],[-89.229122,15.886938],[-89.150806,17.015577],[-89.14308,17.808319]],[[-67.106674,-22.735925],[-67.82818,-22.872919],[-68.219913,-21.494347],[-68.757167,-20.372658],[-68.442225,-19.405068],[-68.966818,-18.981683],[-69.100247,-18.260125],[-69.590424,-17.580012]],[[-69.590424,-17.580012],[-68.959635,-16.500698],[-69.389764,-15.660129],[-69.160347,-15.323974],[-69.339535,-14.953195],[-68.948887,-14.453639],[-68.929224,-13.602684],[-68.88008,-12.899729],[-68.66508,-12.5613],[-69.529678,-10.951734]],[[-69.529678,-10.951734],[-68.786158,-11.03638],[-68.271254,-11.014521],[-68.048192,-10.712059],[-67.173801,-10.306812],[-66.646908,-9.931331],[-65.338435,-9.761988],[-65.444837,-10.511451],[-65.321899,-10.895872],[-65.402281,-11.56627],[-64.316353,-12.461978],[-63.196499,-12.627033],[-62.80306,-13.000653],[-62.127081,-13.198781],[-61.713204,-13.489202],[-61.084121,-13.479384],[-60.503304,-13.775955],[-60.459198,-14.354007],[-60.264326,-14.645979],[-60.251149,-15.077219],[-60.542966,-15.09391],[-60.15839,-16.258284],[-58.24122,-16.299573],[-58.388058,-16.877109],[-58.280804,-17.27171],[-57.734558,-17.552468],[-57.498371,-18.174188],[-57.676009,-18.96184],[-57.949997,-19.400004],[-57.853802,-19.969995],[-58.166392,-20.176701]],[[-58.166392,-20.176701],[-58.183471,-19.868399],[-59.115042,-19.356906],[-60.043565,-19.342747],[-61.786326,-19.633737],[-62.265961,-20.513735],[-62.291179,-21.051635],[-62.685057,-22.249029]],[[-54.625291,-25.739255],[-54.428946,-25.162185],[-54.293476,-24.5708],[-54.29296,-24.021014],[-54.652834,-23.839578],[-55.027902,-24.001274],[-55.400747,-23.956935],[-55.517639,-23.571998],[-55.610683,-22.655619],[-55.797958,-22.35693],[-56.473317,-22.0863],[-56.88151,-22.282154],[-57.937156,-22.090176],[-57.870674,-20.732688],[-58.166392,-20.176701]],[[-69.529678,-10.951734],[-70.093752,-11.123972],[-70.548686,-11.009147],[-70.481894,-9.490118],[-71.302412,-10.079436],[-72.184891,-10.053598],[-72.563033,-9.520194],[-73.226713,-9.462213],[-73.015383,-9.032833],[-73.571059,-8.424447],[-73.987235,-7.52383],[-73.723401,-7.340999],[-73.724487,-6.918595],[-73.120027,-6.629931],[-73.219711,-6.089189],[-72.964507,-5.741251],[-72.891928,-5.274561],[-71.748406,-4.593983],[-70.928843,-4.401591],[-70.794769,-4.251265],[-69.893635,-4.298187]],[[-69.893635,-4.298187],[-69.444102,-1.556287],[-69.420486,-1.122619],[-69.577065,-.549992],[-70.020656,-.185156],[-70.015566,.541414],[-69.452396,.706159],[-69.252434,.602651],[-69.218638,.985677],[-69.804597,1.089081],[-69.816973,1.714805],[-67.868565,1.692455],[-67.53781,2.037163],[-67.259998,1.719999],[-67.065048,1.130112],[-66.876326,1.253361]],[[-66.876326,1.253361],[-66.325765,.724452],[-65.548267,.789254],[-65.354713,1.095282],[-64.611012,1.328731],[-64.199306,1.492855],[-64.083085,1.916369],[-63.368788,2.2009],[-63.422867,2.411068],[-64.269999,2.497006],[-64.408828,3.126786],[-64.368494,3.79721],[-64.816064,4.056445],[-64.628659,4.148481],[-63.888343,4.02053],[-63.093198,3.770571],[-62.804533,4.006965],[-62.08543,4.162124],[-60.966893,4.536468],[-60.601179,4.918098],[-60.733574,5.200277]],[[-60.733574,5.200277],[-60.213683,5.244486],[-59.980959,5.014061],[-60.111002,4.574967],[-59.767406,4.423503],[-59.53804,3.958803],[-59.815413,3.606499],[-59.974525,2.755233],[-59.718546,2.24963],[-59.646044,1.786894],[-59.030862,1.317698],[-58.540013,1.268088],[-58.429477,1.463942],[-58.11345,1.507195],[-57.660971,1.682585],[-57.335823,1.948538],[-56.782704,1.863711],[-56.539386,1.899523]],[[-56.539386,1.899523],[-55.995698,1.817667],[-55.9056,2.021996],[-56.073342,2.220795],[-55.973322,2.510364],[-55.569755,2.421506],[-55.097587,2.523748],[-54.524754,2.311849]],[[-54.524754,2.311849],[-54.088063,2.105557],[-53.778521,2.376703],[-53.554839,2.334897],[-53.418465,2.053389],[-52.939657,2.124858],[-52.556425,2.504705],[-52.249338,3.241094],[-51.657797,4.156232]],[[-51.657797,4.156232],[-51.317146,4.203491],[-51.069771,3.650398],[-50.508875,1.901564],[-49.974076,1.736483],[-49.947101,1.04619],[-50.699251,.222984],[-50.388211,-.078445],[-48.620567,-.235489],[-48.584497,-1.237805],[-47.824956,-.581618],[-46.566584,-.941028],[-44.905703,-1.55174],[-44.417619,-2.13775],[-44.581589,-2.691308],[-43.418791,-2.38311],[-41.472657,-2.912018],[-39.978665,-2.873054],[-38.500383,-3.700652],[-37.223252,-4.820946],[-36.452937,-5.109404],[-35.597796,-5.149504],[-35.235389,-5.464937],[-34.89603,-6.738193],[-34.729993,-7.343221],[-35.128212,-8.996401],[-35.636967,-9.649282],[-37.046519,-11.040721],[-37.683612,-12.171195],[-38.423877,-13.038119],[-38.673887,-13.057652],[-38.953276,-13.79337],[-38.882298,-15.667054],[-39.161092,-17.208407],[-39.267339,-17.867746],[-39.583521,-18.262296],[-39.760823,-19.599113],[-40.774741,-20.904512],[-40.944756,-21.937317],[-41.754164,-22.370676],[-41.988284,-22.97007],[-43.074704,-22.967693],[-44.647812,-23.351959],[-45.352136,-23.796842],[-46.472093,-24.088969],[-47.648972,-24.885199],[-48.495458,-25.877025],[-48.641005,-26.623698],[-48.474736,-27.175912],[-48.66152,-28.186135],[-48.888457,-28.674115],[-49.587329,-29.224469],[-50.696874,-30.984465],[-51.576226,-31.777698],[-52.256081,-32.24537],[-52.7121,-33.196578],[-53.373662,-33.768378]],[[-53.373662,-33.768378],[-53.650544,-33.202004],[-53.209589,-32.727666],[-53.787952,-32.047243],[-54.572452,-31.494511],[-55.60151,-30.853879],[-55.973245,-30.883076],[-56.976026,-30.109686],[-57.625133,-30.216295]],[[114.204017,4.525874],[114.599961,4.900011],[115.45071,5.44773]],[[115.45071,5.44773],[115.4057,4.955228],[115.347461,4.316636],[114.869557,4.348314],[114.659596,4.007637],[114.204017,4.525874]],[[91.696657,27.771742],[92.103712,27.452614],[92.033484,26.83831],[91.217513,26.808648],[90.373275,26.875724],[89.744528,26.719403],[88.835643,27.098966],[88.814248,27.299316]],[[88.814248,27.299316],[89.47581,28.042759],[90.015829,28.296439],[90.730514,28.064954],[91.258854,28.040614],[91.696657,27.771742]],[[29.432188,-22.091313],[28.017236,-22.827754],[27.11941,-23.574323],[26.786407,-24.240691],[26.485753,-24.616327],[25.941652,-24.696373],[25.765849,-25.174845],[25.664666,-25.486816],[25.025171,-25.71967],[24.211267,-25.670216],[23.73357,-25.390129],[23.312097,-25.26869],[22.824271,-25.500459],[22.579532,-25.979448],[22.105969,-26.280256],[21.605896,-26.726534],[20.889609,-26.828543],[20.66647,-26.477453],[20.758609,-25.868136],[20.165726,-24.917962],[19.895768,-24.76779]],[[19.895768,-24.76779],[19.895458,-21.849157],[20.881134,-21.814327],[20.910641,-18.252219],[21.65504,-18.219146],[23.196858,-17.869038],[23.579006,-18.281261],[24.217365,-17.889347],[24.520705,-17.887125],[25.084443,-17.661816]],[[25.084443,-17.661816],[25.264226,-17.73654]],[[25.264226,-17.73654],[25.649163,-18.536026],[25.850391,-18.714413],[26.164791,-19.293086],[27.296505,-20.39152],[27.724747,-20.499059],[27.727228,-20.851802],[28.02137,-21.485975],[28.794656,-21.639454],[29.432188,-22.091313]],[[15.27946,7.421925],[16.106232,7.497088],[16.290562,7.754307],[16.456185,7.734774],[16.705988,7.508328],[17.96493,7.890914],[18.389555,8.281304],[18.911022,8.630895],[18.81201,8.982915],[19.094008,9.074847],[20.059685,9.012706],[21.000868,9.475985],[21.723822,10.567056],[22.231129,10.971889],[22.864165,11.142395]],[[22.864165,11.142395],[22.977544,10.714463],[23.554304,10.089255],[23.55725,9.681218],[23.394779,9.265068],[23.459013,8.954286],[23.805813,8.666319]],[[23.805813,8.666319],[24.567369,8.229188]],[[24.567369,8.229188],[25.114932,7.825104],[25.124131,7.500085],[25.796648,6.979316],[26.213418,6.546603],[26.465909,5.946717],[27.213409,5.550953],[27.374226,5.233944]],[[27.374226,5.233944],[27.044065,5.127853],[26.402761,5.150875],[25.650455,5.256088],[25.278798,5.170408],[25.128833,4.927245],[24.805029,4.897247],[24.410531,5.108784],[23.297214,4.609693],[22.84148,4.710126],[22.704124,4.633051],[22.405124,4.02916],[21.659123,4.224342],[20.927591,4.322786],[20.290679,4.691678],[19.467784,5.031528],[18.932312,4.709506],[18.542982,4.201785],[18.453065,3.504386]],[[18.453065,3.504386],[17.8099,3.560196],[17.133042,3.728197],[16.537058,3.198255],[16.012852,2.26764]],[[16.012852,2.26764],[15.907381,2.557389],[15.862732,3.013537],[15.405396,3.335301],[15.03622,3.851367],[14.950953,4.210389],[14.478372,4.732605],[14.558936,5.030598],[14.459407,5.451761],[14.53656,6.226959],[14.776545,6.408498],[15.27946,7.421925]],[[-63.6645,46.55001],[-62.9393,46.41587],[-62.01208,46.44314],[-62.50391,46.03339],[-62.87433,45.96818],[-64.1428,46.39265],[-64.39261,46.72747],[-64.01486,47.03601],[-63.6645,46.55001]],[[-61.806305,49.10506],[-62.29318,49.08717],[-63.58926,49.40069],[-64.51912,49.87304],[-64.17322,49.95718],[-62.85829,49.70641],[-61.835585,49.28855],[-61.806305,49.10506]],[[-123.510002,48.510011],[-124.012891,48.370846],[-125.655013,48.825005],[-125.954994,49.179996],[-126.850004,49.53],[-127.029993,49.814996],[-128.059336,49.994959],[-128.444584,50.539138],[-128.358414,50.770648],[-127.308581,50.552574],[-126.695001,50.400903],[-125.755007,50.295018],[-125.415002,49.950001],[-124.920768,49.475275],[-123.922509,49.062484],[-123.510002,48.510011]],[[-56.134036,50.68701],[-56.795882,49.812309],[-56.143105,50.150117],[-55.471492,49.935815],[-55.822401,49.587129],[-54.935143,49.313011],[-54.473775,49.556691],[-53.476549,49.249139],[-53.786014,48.516781],[-53.086134,48.687804],[-52.958648,48.157164],[-52.648099,47.535548],[-53.069158,46.655499],[-53.521456,46.618292],[-54.178936,46.807066],[-53.961869,47.625207],[-54.240482,47.752279],[-55.400773,46.884994],[-55.997481,46.91972],[-55.291219,47.389562],[-56.250799,47.632545],[-57.325229,47.572807],[-59.266015,47.603348],[-59.419494,47.899454],[-58.796586,48.251525],[-59.231625,48.523188],[-58.391805,49.125581],[-57.35869,50.718274],[-56.73865,51.287438],[-55.870977,51.632094],[-55.406974,51.588273],[-55.600218,51.317075],[-56.134036,50.68701]],[[-132.710008,54.040009],[-132.710009,54.040009],[-132.710008,54.040009],[-132.710008,54.040009],[-131.74999,54.120004],[-132.04948,52.984621],[-131.179043,52.180433],[-131.57783,52.182371],[-132.180428,52.639707],[-132.549992,53.100015],[-133.054611,53.411469],[-133.239664,53.85108],[-133.180004,54.169975],[-132.710008,54.040009]],[[-79.26582,62.158675],[-79.65752,61.63308],[-80.09956,61.7181],[-80.36215,62.01649],[-80.315395,62.085565],[-79.92939,62.3856],[-79.52002,62.36371],[-79.26582,62.158675]],[[-81.89825,62.7108],[-83.06857,62.15922],[-83.77462,62.18231],[-83.99367,62.4528],[-83.25048,62.91409],[-81.87699,62.90458],[-81.89825,62.7108]],[[-85.161308,65.657285],[-84.975764,65.217518],[-84.464012,65.371772],[-83.882626,65.109618],[-82.787577,64.766693],[-81.642014,64.455136],[-81.55344,63.979609],[-80.817361,64.057486],[-80.103451,63.725981],[-80.99102,63.411246],[-82.547178,63.651722],[-83.108798,64.101876],[-84.100417,63.569712],[-85.523405,63.052379],[-85.866769,63.637253],[-87.221983,63.541238],[-86.35276,64.035833],[-86.224886,64.822917],[-85.883848,65.738778],[-85.161308,65.657285]],[[-75.86588,67.14886],[-76.98687,67.09873],[-77.2364,67.58809],[-76.81166,68.14856],[-75.89521,68.28721],[-75.1145,68.01036],[-75.10333,67.58202],[-75.21597,67.44425],[-75.86588,67.14886]],[[-95.647681,69.10769],[-96.269521,68.75704],[-97.617401,69.06003],[-98.431801,68.9507],[-99.797401,69.40003],[-98.917401,69.71003],[-98.218261,70.14354],[-97.157401,69.86003],[-96.557401,69.68003],[-96.257401,69.49003],[-95.647681,69.10769]],[[-67.13741,45.13753],[-67.79134,45.70281],[-67.79046,47.06636],[-68.23444,47.35486],[-68.905,47.185],[-69.237216,47.447781],[-69.99997,46.69307],[-70.305,45.915],[-70.66,45.46],[-71.08482,45.30524],[-71.405,45.255],[-71.50506,45.0082],[-73.34783,45.00738],[-74.867,45.00048],[-75.31821,44.81645],[-76.375,44.09631],[-76.5,44.018459],[-76.820034,43.628784],[-77.737885,43.629056],[-78.72028,43.625089],[-79.171674,43.466339],[-79.01,43.27],[-78.92,42.965],[-78.939362,42.863611],[-80.247448,42.3662],[-81.277747,42.209026],[-82.439278,41.675105],[-82.690089,41.675105],[-83.02981,41.832796],[-83.142,41.975681],[-83.12,42.08],[-82.9,42.43],[-82.43,42.98],[-82.137642,43.571088],[-82.337763,44.44],[-82.550925,45.347517],[-83.592851,45.816894],[-83.469551,45.994686],[-83.616131,46.116927],[-83.890765,46.116927],[-84.091851,46.275419],[-84.14212,46.512226],[-84.3367,46.40877],[-84.6049,46.4396],[-84.543749,46.538684],[-84.779238,46.637102],[-84.87608,46.900083],[-85.652363,47.220219],[-86.461991,47.553338],[-87.439793,47.94],[-88.378114,48.302918],[-89.272917,48.019808],[-89.6,48.01],[-90.83,48.27],[-91.64,48.14],[-92.61,48.45],[-93.63087,48.60926],[-94.32914,48.67074],[-94.64,48.84],[-94.81758,49.38905],[-95.15609,49.38425],[-95.15907,49],[-97.22872,49.0007],[-100.65,49],[-104.04826,48.99986],[-107.05,49],[-110.05,49],[-113,49],[-116.04818,49],[-117.03121,49],[-120,49],[-122.84,49]],[[-122.84,49],[-122.97421,49.002538],[-124.91024,49.98456],[-125.62461,50.41656],[-127.43561,50.83061],[-127.99276,51.71583],[-127.85032,52.32961],[-129.12979,52.75538],[-129.30523,53.56159],[-130.51497,54.28757],[-130.53611,54.80278],[-129.98,55.285],[-130.00778,55.91583]],[[-130.00778,55.91583],[-131.70781,56.55212],[-132.73042,57.69289]],[[-132.73042,57.69289],[-133.35556,58.41028],[-134.27111,58.86111]],[[-134.27111,58.86111],[-134.945,59.27056],[-135.47583,59.78778],[-136.47972,59.46389],[-137.4525,58.905],[-138.34089,59.56211]],[[-138.34089,59.56211],[-139.039,60],[-140.013,60.27682],[-140.99778,60.30639],[-140.9925,66.00003],[-140.986,69.712],[-139.12052,69.47102],[-137.54636,68.99002],[-136.50358,68.89804],[-135.62576,69.31512],[-134.41464,69.62743],[-132.92925,69.50534],[-131.43136,69.94451],[-129.79471,70.19369],[-129.10773,69.77927],[-128.36156,70.01286],[-128.13817,70.48384],[-127.44712,70.37721],[-125.75632,69.48058],[-124.42483,70.1584],[-124.28968,69.39969],[-123.06108,69.56372],[-122.6835,69.85553],[-121.47226,69.79778],[-119.94288,69.37786],[-117.60268,69.01128],[-116.22643,68.84151],[-115.2469,68.90591],[-113.89794,68.3989],[-115.30489,67.90261],[-113.49727,67.68815],[-110.798,67.80612],[-109.94619,67.98104],[-108.8802,67.38144],[-107.79239,67.88736],[-108.81299,68.31164],[-108.16721,68.65392],[-106.95,68.7],[-106.15,68.8],[-105.34282,68.56122],[-104.33791,68.018],[-103.22115,68.09775],[-101.45433,67.64689],[-99.90195,67.80566],[-98.4432,67.78165],[-98.5586,68.40394],[-97.66948,68.57864],[-96.11991,68.23939],[-96.12588,67.29338],[-95.48943,68.0907],[-94.685,68.06383],[-94.23282,69.06903],[-95.30408,69.68571],[-96.47131,70.08976],[-96.39115,71.19482],[-95.2088,71.92053],[-93.88997,71.76015],[-92.87818,71.31869],[-91.51964,70.19129],[-92.40692,69.69997],[-90.5471,69.49766],[-90.55151,68.47499],[-89.21515,69.25873],[-88.01966,68.61508],[-88.31749,67.87338],[-87.35017,67.19872],[-86.30607,67.92146],[-85.57664,68.78456],[-85.52197,69.88211],[-84.10081,69.80539],[-82.62258,69.65826],[-81.28043,69.16202],[-81.2202,68.66567],[-81.96436,68.13253],[-81.25928,67.59716],[-81.38653,67.11078],[-83.34456,66.41154],[-84.73542,66.2573],[-85.76943,66.55833],[-86.0676,66.05625],[-87.03143,65.21297],[-87.32324,64.77563],[-88.48296,64.09897],[-89.91444,64.03273],[-90.70398,63.61017],[-90.77004,62.96021],[-91.93342,62.83508],[-93.15698,62.02469],[-94.24153,60.89865],[-94.62931,60.11021],[-94.6846,58.94882],[-93.21502,58.78212],[-92.76462,57.84571],[-92.29703,57.08709],[-90.89769,57.28468],[-89.03953,56.85172],[-88.03978,56.47162],[-87.32421,55.99914],[-86.07121,55.72383],[-85.01181,55.3026],[-83.36055,55.24489],[-82.27285,55.14832],[-82.4362,54.28227],[-82.12502,53.27703],[-81.40075,52.15788],[-79.91289,51.20842],[-79.14301,51.53393],[-78.60191,52.56208],[-79.12421,54.14145],[-79.82958,54.66772],[-78.22874,55.13645],[-77.0956,55.83741],[-76.54137,56.53423],[-76.62319,57.20263],[-77.30226,58.05209],[-78.51688,58.80458],[-77.33676,59.85261],[-77.77272,60.75788],[-78.10687,62.31964],[-77.41067,62.55053],[-75.69621,62.2784],[-74.6682,62.18111],[-73.83988,62.4438],[-72.90853,62.10507],[-71.67708,61.52535],[-71.37369,61.13717],[-69.59042,61.06141],[-69.62033,60.22125],[-69.2879,58.95736],[-68.37455,58.80106],[-67.64976,58.21206],[-66.20178,58.76731],[-65.24517,59.87071],[-64.58352,60.33558],[-63.80475,59.4426],[-62.50236,58.16708],[-61.39655,56.96745],[-61.79866,56.33945],[-60.46853,55.77548],[-59.56962,55.20407],[-57.97508,54.94549],[-57.3332,54.6265],[-56.93689,53.78032],[-56.15811,53.64749],[-55.75632,53.27036],[-55.68338,52.14664],[-56.40916,51.7707],[-57.12691,51.41972],[-58.77482,51.0643],[-60.03309,50.24277],[-61.72366,50.08046],[-63.86251,50.29099],[-65.36331,50.2982],[-66.39905,50.22897],[-67.23631,49.51156],[-68.51114,49.06836],[-69.95362,47.74488],[-71.10458,46.82171],[-70.25522,46.98606],[-68.65,48.3],[-66.55243,49.1331],[-65.05626,49.23278],[-64.17099,48.74248],[-65.11545,48.07085],[-64.79854,46.99297],[-64.47219,46.23849],[-63.17329,45.73902],[-61.52072,45.88377],[-60.51815,47.00793],[-60.4486,46.28264],[-59.80287,45.9204],[-61.03988,45.26525],[-63.25471,44.67014],[-64.24656,44.26553],[-65.36406,43.54523],[-66.1234,43.61867],[-66.16173,44.46512],[-64.42549,45.29204],[-66.02605,45.25931],[-67.13741,45.13753]],[[-114.16717,73.12145],[-114.66634,72.65277],[-112.44102,72.9554],[-111.05039,72.4504],[-109.92035,72.96113],[-109.00654,72.63335],[-108.18835,71.65089],[-107.68599,72.06548],[-108.39639,73.08953],[-107.51645,73.23598],[-106.52259,73.07601],[-105.40246,72.67259],[-104.77484,71.6984],[-104.46476,70.99297],[-102.78537,70.49776],[-100.98078,70.02432],[-101.08929,69.58447],[-102.73116,69.50402],[-102.09329,69.11962],[-102.43024,68.75282],[-104.24,68.91],[-105.96,69.18],[-107.12254,69.11922],[-109,68.78],[-111.534149,68.630059],[-113.3132,68.53554],[-113.85496,69.00744],[-115.22,69.28],[-116.10794,69.16821],[-117.34,69.96],[-116.67473,70.06655],[-115.13112,70.2373],[-113.72141,70.19237],[-112.4161,70.36638],[-114.35,70.6],[-116.48684,70.52045],[-117.9048,70.54056],[-118.43238,70.9092],[-116.11311,71.30918],[-117.65568,71.2952],[-119.40199,71.55859],[-118.56267,72.30785],[-117.86642,72.70594],[-115.18909,73.31459],[-114.16717,73.12145]],[[-104.5,73.42],[-105.38,72.76],[-106.94,73.46],[-106.6,73.6],[-105.26,73.64],[-104.5,73.42]],[[-76.34,73.102685],[-76.251404,72.826385],[-77.314438,72.855545],[-78.39167,72.876656],[-79.486252,72.742203],[-79.775833,72.802902],[-80.876099,73.333183],[-80.833885,73.693184],[-80.353058,73.75972],[-78.064438,73.651932],[-76.34,73.102685]],[[-86.562179,73.157447],[-85.774371,72.534126],[-84.850112,73.340278],[-82.31559,73.750951],[-80.600088,72.716544],[-80.748942,72.061907],[-78.770639,72.352173],[-77.824624,72.749617],[-75.605845,72.243678],[-74.228616,71.767144],[-74.099141,71.33084],[-72.242226,71.556925],[-71.200015,70.920013],[-68.786054,70.525024],[-67.91497,70.121948],[-66.969033,69.186087],[-68.805123,68.720198],[-66.449866,68.067163],[-64.862314,67.847539],[-63.424934,66.928473],[-61.851981,66.862121],[-62.163177,66.160251],[-63.918444,64.998669],[-65.14886,65.426033],[-66.721219,66.388041],[-68.015016,66.262726],[-68.141287,65.689789],[-67.089646,65.108455],[-65.73208,64.648406],[-65.320168,64.382737],[-64.669406,63.392927],[-65.013804,62.674185],[-66.275045,62.945099],[-68.783186,63.74567],[-67.369681,62.883966],[-66.328297,62.280075],[-66.165568,61.930897],[-68.877367,62.330149],[-71.023437,62.910708],[-72.235379,63.397836],[-71.886278,63.679989],[-73.378306,64.193963],[-74.834419,64.679076],[-74.818503,64.389093],[-77.70998,64.229542],[-78.555949,64.572906],[-77.897281,65.309192],[-76.018274,65.326969],[-73.959795,65.454765],[-74.293883,65.811771],[-73.944912,66.310578],[-72.651167,67.284576],[-72.92606,67.726926],[-73.311618,68.069437],[-74.843307,68.554627],[-76.869101,68.894736],[-76.228649,69.147769],[-77.28737,69.76954],[-78.168634,69.826488],[-78.957242,70.16688],[-79.492455,69.871808],[-81.305471,69.743185],[-84.944706,69.966634],[-87.060003,70.260001],[-88.681713,70.410741],[-89.51342,70.762038],[-88.467721,71.218186],[-89.888151,71.222552],[-90.20516,72.235074],[-89.436577,73.129464],[-88.408242,73.537889],[-85.826151,73.803816],[-86.562179,73.157447]],[[-100.35642,73.84389],[-99.16387,73.63339],[-97.38,73.76],[-97.12,73.47],[-98.05359,72.99052],[-96.54,72.56],[-96.72,71.66],[-98.35966,71.27285],[-99.32286,71.35639],[-100.01482,71.73827],[-102.5,72.51],[-102.48,72.83],[-100.43836,72.70588],[-101.54,73.36],[-100.35642,73.84389]],[[-93.196296,72.771992],[-94.269047,72.024596],[-95.409856,72.061881],[-96.033745,72.940277],[-96.018268,73.43743],[-95.495793,73.862417],[-94.503658,74.134907],[-92.420012,74.100025],[-90.509793,73.856732],[-92.003965,72.966244],[-93.196296,72.771992]],[[-120.46,71.383602],[-123.09219,70.90164],[-123.62,71.34],[-125.928949,71.868688],[-125.5,72.292261],[-124.80729,73.02256],[-123.94,73.68],[-124.91775,74.29275],[-121.53788,74.44893],[-120.10978,74.24135],[-117.55564,74.18577],[-116.58442,73.89607],[-115.51081,73.47519],[-116.76794,73.22292],[-119.22,72.52],[-120.46,71.82],[-120.46,71.383602]],[[-93.612756,74.979997],[-94.156909,74.592347],[-95.608681,74.666864],[-96.820932,74.927623],[-96.288587,75.377828],[-94.85082,75.647218],[-93.977747,75.29649],[-93.612756,74.979997]],[[-98.5,76.72],[-97.735585,76.25656],[-97.704415,75.74344],[-98.16,75],[-99.80874,74.89744],[-100.88366,75.05736],[-100.86292,75.64075],[-102.50209,75.5638],[-102.56552,76.3366],[-101.48973,76.30537],[-99.98349,76.64634],[-98.57699,76.58859],[-98.5,76.72]],[[-108.21141,76.20168],[-107.81943,75.84552],[-106.92893,76.01282],[-105.881,75.9694],[-105.70498,75.47951],[-106.31347,75.00527],[-109.7,74.85],[-112.22307,74.41696],[-113.74381,74.39427],[-113.87135,74.72029],[-111.79421,75.1625],[-116.31221,75.04343],[-117.7104,75.2222],[-116.34602,76.19903],[-115.40487,76.47887],[-112.59056,76.14134],[-110.81422,75.54919],[-109.0671,75.47321],[-110.49726,76.42982],[-109.5811,76.79417],[-108.54859,76.67832],[-108.21141,76.20168]],[[-94.684086,77.097878],[-93.573921,76.776296],[-91.605023,76.778518],[-90.741846,76.449597],[-90.969661,76.074013],[-89.822238,75.847774],[-89.187083,75.610166],[-87.838276,75.566189],[-86.379192,75.482421],[-84.789625,75.699204],[-82.753445,75.784315],[-81.128531,75.713983],[-80.057511,75.336849],[-79.833933,74.923127],[-80.457771,74.657304],[-81.948843,74.442459],[-83.228894,74.564028],[-86.097452,74.410032],[-88.15035,74.392307],[-89.764722,74.515555],[-92.422441,74.837758],[-92.768285,75.38682],[-92.889906,75.882655],[-93.893824,76.319244],[-95.962457,76.441381],[-97.121379,76.751078],[-96.745123,77.161389],[-94.684086,77.097878]],[[-116.198587,77.645287],[-116.335813,76.876962],[-117.106051,76.530032],[-118.040412,76.481172],[-119.899318,76.053213],[-121.499995,75.900019],[-122.854924,76.116543],[-122.854925,76.116543],[-121.157535,76.864508],[-119.103939,77.51222],[-117.570131,77.498319],[-116.198587,77.645287]],[[-93.840003,77.519997],[-94.295608,77.491343],[-96.169654,77.555111],[-96.436304,77.834629],[-94.422577,77.820005],[-93.720656,77.634331],[-93.840003,77.519997]],[[-110.186938,77.697015],[-112.051191,77.409229],[-113.534279,77.732207],[-112.724587,78.05105],[-111.264443,78.152956],[-109.854452,77.996325],[-110.186938,77.697015]],[[-109.663146,78.601973],[-110.881314,78.40692],[-112.542091,78.407902],[-112.525891,78.550555],[-111.50001,78.849994],[-110.963661,78.804441],[-109.663146,78.601973]],[[-95.830295,78.056941],[-97.309843,77.850597],[-98.124289,78.082857],[-98.552868,78.458105],[-98.631984,78.87193],[-97.337231,78.831984],[-96.754399,78.765813],[-95.559278,78.418315],[-95.830295,78.056941]],[[-100.060192,78.324754],[-99.670939,77.907545],[-101.30394,78.018985],[-102.949809,78.343229],[-105.176133,78.380332],[-104.210429,78.67742],[-105.41958,78.918336],[-105.492289,79.301594],[-103.529282,79.165349],[-100.825158,78.800462],[-100.060192,78.324754]],[[-87.02,79.66],[-85.81435,79.3369],[-87.18756,79.0393],[-89.03535,78.28723],[-90.80436,78.21533],[-92.87669,78.34333],[-93.95116,78.75099],[-93.93574,79.11373],[-93.14524,79.3801],[-94.974,79.37248],[-96.07614,79.70502],[-96.70972,80.15777],[-96.01644,80.60233],[-95.32345,80.90729],[-94.29843,80.97727],[-94.73542,81.20646],[-92.40984,81.25739],[-91.13289,80.72345],[-89.45,80.509322],[-87.81,80.32],[-87.02,79.66]],[[-68.5,83.106322],[-65.82735,83.02801],[-63.68,82.9],[-61.85,82.6286],[-61.89388,82.36165],[-64.334,81.92775],[-66.75342,81.72527],[-67.65755,81.50141],[-65.48031,81.50657],[-67.84,80.9],[-69.4697,80.61683],[-71.18,79.8],[-73.2428,79.63415],[-73.88,79.430162],[-76.90773,79.32309],[-75.52924,79.19766],[-76.22046,79.01907],[-75.39345,78.52581],[-76.34354,78.18296],[-77.88851,77.89991],[-78.36269,77.50859],[-79.75951,77.20968],[-79.61965,76.98336],[-77.91089,77.022045],[-77.88911,76.777955],[-80.56125,76.17812],[-83.17439,76.45403],[-86.11184,76.29901],[-87.6,76.42],[-89.49068,76.47239],[-89.6161,76.95213],[-87.76739,77.17833],[-88.26,77.9],[-87.65,77.970222],[-84.97634,77.53873],[-86.34,78.18],[-87.96192,78.37181],[-87.15198,78.75867],[-85.37868,78.9969],[-85.09495,79.34543],[-86.50734,79.73624],[-86.93179,80.25145],[-84.19844,80.20836],[-83.408696,80.1],[-81.84823,80.46442],[-84.1,80.58],[-87.59895,80.51627],[-89.36663,80.85569],[-90.2,81.26],[-91.36786,81.5531],[-91.58702,81.89429],[-90.1,82.085],[-88.93227,82.11751],[-86.97024,82.27961],[-85.5,82.652273],[-84.260005,82.6],[-83.18,82.32],[-82.42,82.86],[-81.1,83.02],[-79.30664,83.13056],[-76.25,83.172059],[-75.71878,83.06404],[-72.83153,83.23324],[-70.665765,83.169781],[-68.5,83.106322]],[[9.629127151388623,47.364783895095464],[9.53022075531123,47.273032694050606],[9.48531852772954,47.1784895080045]],[[9.48531852772954,47.1784895080045],[9.51421363750238,47.0872683114241],[9.46686466993166,47.0615580974285],[9.55740711339162,47.0511647748693]],[[9.55740711339162,47.0511647748693],[9.60754621634599,47.06139324272732],[9.871798391640267,47.02000494258236]],[[10.442701,46.893546],[10.363378,46.483571],[9.922837,46.314899],[9.182882,46.440215],[8.966306,46.036932],[8.489952,46.005151],[8.31663,46.163642],[7.755992,45.82449],[7.273851,45.776948],[6.843593,45.991147]],[[6.843593,45.991147],[6.5001,46.429673],[6.022609,46.27299],[6.037389,46.725779],[6.768714,47.287708],[6.736571,47.541801],[7.192202,47.449766],[7.466759,47.620582]],[[7.466759,47.620582],[8.317301,47.61358],[8.522612,47.830828],[9.594226,47.525058]],[[-66.95992,-54.89681],[-67.29103,-55.30124],[-68.14863,-55.61183],[-68.639991,-55.580018],[-69.2321,-55.49906],[-69.95809,-55.19843],[-71.00568,-55.05383],[-72.2639,-54.49514],[-73.2852,-53.95752],[-74.66253,-52.83749],[-73.8381,-53.04743],[-72.43418,-53.7154],[-71.10773,-54.07433],[-70.59178,-53.61583],[-70.26748,-52.93123],[-69.34565,-52.5183],[-68.63401,-52.63637]],[[-68.571545,-52.299444],[-69.461284,-52.291951],[-69.94278,-52.537931],[-70.845102,-52.899201],[-71.006332,-53.833252],[-71.429795,-53.856455],[-72.557943,-53.53141],[-73.702757,-52.835069],[-73.702757,-52.83507],[-74.946763,-52.262754],[-75.260026,-51.629355],[-74.976632,-51.043396],[-75.479754,-50.378372],[-75.608015,-48.673773],[-75.18277,-47.711919],[-74.126581,-46.939253],[-75.644395,-46.647643],[-74.692154,-45.763976],[-74.351709,-44.103044],[-73.240356,-44.454961],[-72.717804,-42.383356],[-73.3889,-42.117532],[-73.701336,-43.365776],[-74.331943,-43.224958],[-74.017957,-41.794813],[-73.677099,-39.942213],[-73.217593,-39.258689],[-73.505559,-38.282883],[-73.588061,-37.156285],[-73.166717,-37.12378],[-72.553137,-35.50884],[-71.861732,-33.909093],[-71.43845,-32.418899],[-71.668721,-30.920645],[-71.370083,-30.095682],[-71.489894,-28.861442],[-70.905124,-27.64038],[-70.724954,-25.705924],[-70.403966,-23.628997],[-70.091246,-21.393319],[-70.16442,-19.756468],[-70.372572,-18.347975]],[[-70.372572,-18.347975],[-69.858444,-18.092694],[-69.590424,-17.580012]],[[110.339188,18.678395],[109.47521,18.197701],[108.655208,18.507682],[108.626217,19.367888],[109.119056,19.821039],[110.211599,20.101254],[110.786551,20.077534],[111.010051,19.69593],[110.570647,19.255879],[110.339188,18.678395]],[[129.397818,49.4406],[130.582293,48.729687]],[[130.582293,48.729687],[130.987282,47.790132],[132.506672,47.78897],[133.373596,48.183442]],[[133.373596,48.183442],[135.026311,48.47823]],[[135.026311,48.47823],[134.500814,47.57844],[134.112362,47.212467],[133.769644,46.116927]],[[133.769644,46.116927],[133.097127,45.144066],[131.883454,45.321162]],[[131.883454,45.321162],[131.025212,44.967953],[131.288555,44.11152]],[[131.288555,44.11152],[131.144688,42.92999],[130.633866,42.903015]],[[130.633866,42.903015],[130.640016,42.395009]],[[130.640016,42.395009],[129.994267,42.985387],[129.596669,42.424982],[128.052215,41.994285],[128.208433,41.466772],[127.343783,41.503152],[126.869083,41.816569],[126.182045,41.107336],[125.079942,40.569824],[124.265625,39.928493]],[[124.265625,39.928493],[122.86757,39.637788],[122.131388,39.170452],[121.054554,38.897471],[121.585995,39.360854],[121.376757,39.750261],[122.168595,40.422443],[121.640359,40.94639],[120.768629,40.593388],[119.639602,39.898056],[119.023464,39.252333],[118.042749,39.204274],[117.532702,38.737636],[118.059699,38.061476],[118.87815,37.897325],[118.911636,37.448464],[119.702802,37.156389],[120.823457,37.870428],[121.711259,37.481123],[122.357937,37.454484],[122.519995,36.930614],[121.104164,36.651329],[120.637009,36.11144],[119.664562,35.609791],[119.151208,34.909859],[120.227525,34.360332],[120.620369,33.376723],[121.229014,32.460319],[121.908146,31.692174],[121.891919,30.949352],[121.264257,30.676267],[121.503519,30.142915],[122.092114,29.83252],[121.938428,29.018022],[121.684439,28.225513],[121.125661,28.135673],[120.395473,27.053207],[119.585497,25.740781],[118.656871,24.547391],[117.281606,23.624501],[115.890735,22.782873],[114.763827,22.668074],[114.152547,22.22376],[113.80678,22.54834],[113.241078,22.051367],[111.843592,21.550494],[110.785466,21.397144],[110.444039,20.341033],[109.889861,20.282457],[109.627655,21.008227],[109.864488,21.395051],[108.522813,21.715212],[108.05018,21.55238]],[[108.05018,21.55238],[107.04342,21.811899],[106.567273,22.218205],[106.725403,22.794268],[105.811247,22.976892],[105.329209,23.352063],[104.476858,22.81915],[103.504515,22.703757],[102.706992,22.708795],[102.170436,22.464753]],[[102.170436,22.464753],[101.652018,22.318199],[101.80312,21.174367],[101.270026,21.201652],[101.180005,21.436573]],[[101.180005,21.436573],[101.150033,21.849984],[100.416538,21.558839],[99.983489,21.742937],[99.240899,22.118314],[99.531992,22.949039],[98.898749,23.142722],[98.660262,24.063286],[97.60472,23.897405],[97.724609,25.083637],[98.671838,25.918703],[98.712094,26.743536],[98.68269,27.508812],[98.246231,27.747221],[97.911988,28.335945],[97.327114,28.261583]],[[97.327114,28.261583],[96.248833,28.411031],[96.586591,28.83098],[96.117679,29.452802],[95.404802,29.031717],[94.56599,29.277438],[93.413348,28.640629],[92.503119,27.896876],[91.696657,27.771742]],[[88.814248,27.299316],[88.730326,28.086865],[88.120441,27.876542]],[[88.120441,27.876542],[86.954517,27.974262],[85.82332,28.203576],[85.011638,28.642774],[84.23458,28.839894],[83.898993,29.320226],[83.337115,29.463732],[82.327513,30.115268],[81.525804,30.422717],[81.111256,30.183481]],[[81.111256,30.183481],[79.721367,30.882715],[78.738894,31.515906],[78.458446,32.618164],[79.176129,32.48378],[79.208892,32.994395],[78.811086,33.506198],[78.912269,34.321936],[77.837451,35.49401]],[[77.837451,35.49401],[76.192848,35.898403],[75.896897,36.666806],[75.158028,37.133031]],[[74.980002,37.41999],[74.829986,37.990007],[74.864816,38.378846],[74.257514,38.606507],[73.928852,38.505815],[73.675379,39.431237]],[[73.675379,39.431237],[73.960013,39.660008],[73.822244,39.893973],[74.776862,40.366425],[75.467828,40.562072],[76.526368,40.427946],[76.904484,41.066486],[78.187197,41.185316],[78.543661,41.582243],[80.11943,42.123941],[80.25999,42.349999]],[[80.25999,42.349999],[80.18015,42.920068],[80.866206,43.180362],[79.966106,44.917517],[81.947071,45.317027],[82.458926,45.53965],[83.180484,47.330031],[85.16429,47.000956],[85.720484,47.452969],[85.768233,48.455751],[86.598776,48.549182],[87.35997,49.214981]],[[87.35997,49.214981],[87.751264,49.297198]],[[87.751264,49.297198],[88.013832,48.599463],[88.854298,48.069082],[90.280826,47.693549],[90.970809,46.888146],[90.585768,45.719716],[90.94554,45.286073],[92.133891,45.115076],[93.480734,44.975472],[94.688929,44.352332],[95.306875,44.241331],[95.762455,43.319449],[96.349396,42.725635],[97.451757,42.74889],[99.515817,42.524691],[100.845866,42.663804],[101.83304,42.514873],[103.312278,41.907468],[104.522282,41.908347],[104.964994,41.59741],[106.129316,42.134328],[107.744773,42.481516],[109.243596,42.519446],[110.412103,42.871234],[111.129682,43.406834],[111.829588,43.743118],[111.667737,44.073176],[111.348377,44.457442],[111.873306,45.102079],[112.436062,45.011646],[113.463907,44.808893],[114.460332,45.339817],[115.985096,45.727235],[116.717868,46.388202],[117.421701,46.672733],[118.874326,46.805412],[119.66327,46.69268],[119.772824,47.048059],[118.866574,47.74706],[118.064143,48.06673],[117.295507,47.697709],[116.308953,47.85341],[115.742837,47.726545],[115.485282,48.135383],[116.191802,49.134598],[116.678801,49.888531]],[[116.678801,49.888531],[117.879244,49.510983],[119.288461,50.142883]],[[119.288461,50.142883],[119.279366,50.582908],[120.18205,51.643566],[120.738191,51.964115],[120.725789,52.516226]],[[120.725789,52.516226],[120.177089,52.753886],[121.003085,53.251401],[122.245748,53.431726]],[[122.245748,53.431726],[123.571507,53.458804],[125.068211,53.161045]],[[125.068211,53.161045],[125.946349,52.792799],[126.564399,51.784255],[126.939157,51.353894],[127.287456,50.739797]],[[127.287456,50.739797],[127.657407,49.76027],[129.397818,49.4406]],[[-2.856125,4.994476],[-3.311084,4.984296],[-4.00882,5.179813],[-4.649917,5.168264],[-5.834496,4.993701],[-6.528769,4.705088],[-7.518941,4.338288],[-7.712159,4.364566]],[[-7.712159,4.364566],[-7.635368,5.188159],[-7.539715,5.313345],[-7.570153,5.707352],[-7.993693,6.12619],[-8.311348,6.193033],[-8.60288,6.467564],[-8.385452,6.911801],[-8.485446,7.395208],[-8.439298,7.686043]],[[-8.439298,7.686043],[-8.280703,7.68718],[-8.221792,8.123329],[-8.299049,8.316444],[-8.203499,8.455453],[-7.8321,8.575704],[-8.079114,9.376224],[-8.309616,9.789532],[-8.229337,10.12902],[-8.029944,10.206535]],[[-8.029944,10.206535],[-7.89959,10.297382],[-7.622759,10.147236],[-6.850507,10.138994],[-6.666461,10.430811],[-6.493965,10.411303],[-6.205223,10.524061],[-6.050452,10.096361],[-5.816926,10.222555],[-5.404342,10.370737]],[[-2.827496,9.642461],[-2.56219,8.219628],[-2.983585,7.379705],[-3.24437,6.250472],[-2.810701,5.389051],[-2.856125,4.994476]],[[13.075822,2.267097],[12.951334,2.321616],[12.35938,2.192812],[11.751665,2.326758],[11.276449,2.261051]],[[11.276449,2.261051],[9.649158,2.283866]],[[9.649158,2.283866],[9.795196,3.073404],[9.404367,3.734527],[8.948116,3.904129],[8.744924,4.352215],[8.488816,4.495617],[8.500288,4.771983]],[[8.500288,4.771983],[8.757533,5.479666],[9.233163,6.444491],[9.522706,6.453482],[10.118277,7.03877],[10.497375,7.055358],[11.058788,6.644427],[11.745774,6.981383],[11.839309,7.397042],[12.063946,7.799808],[12.218872,8.305824],[12.753672,8.717763],[12.955468,9.417772],[13.1676,9.640626],[13.308676,10.160362],[13.57295,10.798566],[14.415379,11.572369],[14.468192,11.904752],[14.577178,12.085361],[14.181336,12.483657]],[[14.181336,12.483657],[14.213531,12.802035],[14.495787,12.859396]],[[14.495787,12.859396],[14.893386,12.219048],[14.960152,11.555574]],[[14.960152,11.555574],[14.923565,10.891325],[15.467873,9.982337],[14.909354,9.992129],[14.627201,9.920919],[14.171466,10.021378],[13.954218,9.549495],[14.544467,8.965861],[14.979996,8.796104],[15.120866,8.38215],[15.436092,7.692812],[15.27946,7.421925]],[[16.012852,2.26764],[15.940919,1.727673],[15.146342,1.964015],[14.337813,2.227875],[13.075822,2.267097]],[[31.174149,2.204465],[30.85267,1.849396],[30.468508,1.583805],[30.086154,1.062313],[29.875779,.59738]],[[29.875779,.59738],[29.819503,-.20531],[29.587838,-.587406]],[[29.587838,-.587406],[29.579466,-1.341313]],[[29.579466,-1.341313],[29.291887,-1.620056],[29.254835,-2.21511],[29.117479,-2.292211],[29.024926,-2.839258]],[[29.339998,-4.499983],[29.519987,-5.419979],[29.419993,-5.939999]],[[29.419993,-5.939999],[29.620032,-6.520015],[30.199997,-7.079981],[30.740015,-8.340007]],[[30.740015,-8.340007],[30.346086,-8.238257],[29.002912,-8.407032],[28.734867,-8.526559],[28.449871,-9.164918],[28.673682,-9.605925],[28.49607,-10.789884],[28.372253,-11.793647],[28.642417,-11.971569],[29.341548,-12.360744],[29.616001,-12.178895],[29.699614,-13.257227],[28.934286,-13.248958],[28.523562,-12.698604],[28.155109,-12.272481],[27.388799,-12.132747],[27.16442,-11.608748],[26.553088,-11.92444],[25.75231,-11.784965],[25.418118,-11.330936],[24.78317,-11.238694],[24.314516,-11.262826],[24.257155,-10.951993],[23.912215,-10.926826]],[[12.322432,-6.100092],[12.182337,-5.789931]],[[12.995517,-4.781103],[13.25824,-4.882957],[13.600235,-4.500138],[14.144956,-4.510009],[14.209035,-4.793092],[14.582604,-4.970239],[15.170992,-4.343507],[15.75354,-3.855165],[16.00629,-3.535133],[15.972803,-2.712392],[16.407092,-1.740927],[16.865307,-1.225816],[17.523716,-.74383],[17.638645,-.424832],[17.663553,-.058084],[17.82654,.288923],[17.774192,.855659],[17.898835,1.741832],[18.094276,2.365722],[18.393792,2.900443],[18.453065,3.504386]],[[27.374226,5.233944],[27.979977,4.408413],[28.428994,4.287155],[28.696678,4.455077],[29.159078,4.389267],[29.715995,4.600805]],[[29.715995,4.600805],[29.9535,4.173699],[30.83386,3.509166],[30.773347,2.339883],[31.174149,2.204465]],[[11.914963,-5.037987],[11.093773,-3.978827]],[[11.093773,-3.978827],[11.855122,-3.426871],[11.478039,-2.765619],[11.820964,-2.514161],[12.495703,-2.391688],[12.575284,-1.948511],[13.109619,-2.42874],[13.992407,-2.470805],[14.29921,-1.998276],[14.425456,-1.333407],[14.316418,-.552627],[13.843321,.038758],[14.276266,1.19693],[14.026669,1.395677],[13.282631,1.314184],[13.003114,1.830896],[13.075822,2.267097]],[[-75.373223,-.152032],[-75.801466,.084801],[-76.292314,.416047],[-76.57638,.256936],[-77.424984,.395687],[-77.668613,.825893],[-77.855061,.809925],[-78.855259,1.380924]],[[-78.855259,1.380924],[-78.990935,1.69137],[-78.617831,1.766404],[-78.662118,2.267355],[-78.42761,2.629556],[-77.931543,2.696606],[-77.510431,3.325017],[-77.12769,3.849636],[-77.496272,4.087606],[-77.307601,4.667984],[-77.533221,5.582812],[-77.318815,5.845354],[-77.476661,6.691116],[-77.881571,7.223771]],[[-77.881571,7.223771],[-77.753414,7.70984],[-77.431108,7.638061],[-77.242566,7.935278],[-77.474723,8.524286],[-77.353361,8.670505]],[[-77.353361,8.670505],[-76.836674,8.638749],[-76.086384,9.336821],[-75.6746,9.443248],[-75.664704,9.774003],[-75.480426,10.61899],[-74.906895,11.083045],[-74.276753,11.102036],[-74.197223,11.310473],[-73.414764,11.227015],[-72.627835,11.731972],[-72.238195,11.95555],[-71.75409,12.437303],[-71.399822,12.376041],[-71.137461,12.112982],[-71.331584,11.776284]],[[-71.331584,11.776284],[-71.973922,11.608672],[-72.227575,11.108702],[-72.614658,10.821975],[-72.905286,10.450344],[-73.027604,9.73677],[-73.304952,9.152],[-72.78873,9.085027],[-72.660495,8.625288],[-72.439862,8.405275],[-72.360901,8.002638],[-72.479679,7.632506],[-72.444487,7.423785],[-72.198352,7.340431],[-71.960176,6.991615],[-70.674234,7.087785],[-70.093313,6.960376],[-69.38948,6.099861],[-68.985319,6.206805],[-68.265052,6.153268],[-67.695087,6.267318],[-67.34144,6.095468],[-67.521532,5.55687],[-67.744697,5.221129],[-67.823012,4.503937],[-67.621836,3.839482],[-67.337564,3.542342],[-67.303173,3.318454],[-67.809938,2.820655],[-67.447092,2.600281],[-67.181294,2.250638],[-66.876326,1.253361]],[[-69.893635,-4.298187],[-70.394044,-3.766591],[-70.692682,-3.742872],[-70.047709,-2.725156],[-70.813476,-2.256865],[-71.413646,-2.342802],[-71.774761,-2.16979],[-72.325787,-2.434218],[-73.070392,-2.308954],[-73.659504,-1.260491],[-74.122395,-1.002833],[-74.441601,-.53082],[-75.106625,-.057205],[-75.373223,-.152032]],[[-82.965783,8.225028],[-83.508437,8.446927],[-83.711474,8.656836],[-83.596313,8.830443],[-83.632642,9.051386],[-83.909886,9.290803],[-84.303402,9.487354],[-84.647644,9.615537],[-84.713351,9.908052],[-84.97566,10.086723],[-84.911375,9.795992],[-85.110923,9.55704],[-85.339488,9.834542],[-85.660787,9.933347],[-85.797445,10.134886],[-85.791709,10.439337],[-85.659314,10.754331],[-85.941725,10.895278],[-85.71254,11.088445]],[[-85.71254,11.088445],[-85.561852,11.217119],[-84.903003,10.952303],[-84.673069,11.082657],[-84.355931,10.999226],[-84.190179,10.79345],[-83.895054,10.726839],[-83.655612,10.938764]],[[-83.655612,10.938764],[-83.40232,10.395438],[-83.015677,9.992982],[-82.546196,9.566135]],[[-82.546196,9.566135],[-82.932891,9.476812],[-82.927155,9.07433],[-82.719183,8.925709],[-82.868657,8.807266],[-82.829771,8.626295],[-82.913176,8.423517],[-82.965783,8.225028]],[[-82.268151,23.188611],[-81.404457,23.117271],[-80.618769,23.10598],[-79.679524,22.765303],[-79.281486,22.399202],[-78.347434,22.512166],[-77.993296,22.277194],[-77.146422,21.657851],[-76.523825,21.20682],[-76.19462,21.220565],[-75.598222,21.016624],[-75.67106,20.735091],[-74.933896,20.693905],[-74.178025,20.284628],[-74.296648,20.050379],[-74.961595,19.923435],[-75.63468,19.873774],[-76.323656,19.952891],[-77.755481,19.855481],[-77.085108,20.413354],[-77.492655,20.673105],[-78.137292,20.739949],[-78.482827,21.028613],[-78.719867,21.598114],[-79.285,21.559175],[-80.217475,21.827324],[-80.517535,22.037079],[-81.820943,22.192057],[-82.169992,22.387109],[-81.795002,22.636965],[-82.775898,22.68815],[-83.494459,22.168518],[-83.9088,22.154565],[-84.052151,21.910575],[-84.54703,21.801228],[-84.974911,21.896028],[-84.447062,22.20495],[-84.230357,22.565755],[-83.77824,22.788118],[-83.267548,22.983042],[-82.510436,23.078747],[-82.268151,23.188611]],[[32.73178,35.140026],[32.802474,35.145504],[32.946961,35.386703],[33.667227,35.373216],[34.576474,35.671596],[33.900804,35.245756],[33.973617,35.058506],[34.004881,34.978098],[32.979827,34.571869],[32.490296,34.701655],[32.256667,35.103232],[32.73178,35.140026]],[[13.595946,48.877172],[13.031329,49.307068],[12.521024,49.547415],[12.415191,49.969121],[12.240111,50.266338],[12.966837,50.484076],[13.338132,50.733234],[14.056228,50.926918],[14.307013,51.117268],[14.570718,51.002339],[15.016996,51.106674]],[[15.016996,51.106674],[15.490972,50.78473],[16.238627,50.697733],[16.176253,50.422607],[16.719476,50.215747],[16.868769,50.473974],[17.554567,50.362146],[17.649445,50.049038],[18.392914,49.988629],[18.853144,49.49623]],[[18.853144,49.49623],[18.554971,49.495015],[18.399994,49.315001],[18.170498,49.271515],[18.104973,49.043983],[17.913512,48.996493],[17.886485,48.903475],[17.545007,48.800019],[17.101985,48.816969],[16.960288,48.596982]],[[9.921906,54.983104],[9.93958,54.596642],[10.950112,54.363607],[10.939467,54.008693],[11.956252,54.196486],[12.51844,54.470371],[13.647467,54.075511],[14.119686,53.757029]],[[14.119686,53.757029],[14.353315,53.248171],[14.074521,52.981263],[14.4376,52.62485],[14.685026,52.089947],[14.607098,51.745188],[15.016996,51.106674]],[[7.466759,47.620582],[7.593676,48.333019],[8.099279,49.017784],[6.65823,49.201958],[6.18632,49.463803]],[[6.18632,49.463803],[6.242751,49.902226],[6.043073,50.128052]],[[6.156658,50.803721],[5.988658,51.851616],[6.589397,51.852029],[6.84287,52.22844],[7.092053,53.144043],[6.90514,53.482162]],[[6.90514,53.482162],[7.100425,53.693932],[7.936239,53.748296],[8.121706,53.527792],[8.800734,54.020786],[8.572118,54.395646],[8.526229,54.962744]],[[8.526229,54.962744],[9.282049,54.830865],[9.921906,54.983104]],[[43.081226,12.699639],[43.317852,12.390148],[43.286381,11.974928],[42.715874,11.735641],[43.145305,11.46204]],[[43.145305,11.46204],[42.776852,10.926879]],[[42.776852,10.926879],[42.55493,11.10511],[42.31414,11.0342],[41.75557,11.05091],[41.73959,11.35511],[41.66176,11.6312],[42,12.1],[42.35156,12.54223]],[[42.35156,12.54223],[42.779642,12.455416],[43.081226,12.699639]],[[12.690006,55.609991],[12.089991,54.800015],[11.043543,55.364864],[10.903914,55.779955],[12.370904,56.111407],[12.690006,55.609991]],[[8.526229,54.962744],[8.120311,55.517723],[8.089977,56.540012],[8.256582,56.809969],[8.543438,57.110003],[9.424469,57.172066],[9.775559,57.447941],[10.580006,57.730017],[10.546106,57.215733],[10.25,56.890016],[10.369993,56.609982],[10.912182,56.458621],[10.667804,56.081383],[10.369993,56.190007],[9.649985,55.469999],[9.921906,54.983104]],[[-46.76379,82.62796],[-43.40644,83.22516],[-39.89753,83.18018],[-38.62214,83.54905],[-35.08787,83.64513],[-27.10046,83.51966],[-20.84539,82.72669],[-22.69182,82.34165],[-26.51753,82.29765],[-31.9,82.2],[-31.39646,82.02154],[-27.85666,82.13178],[-24.84448,81.78697],[-22.90328,82.09317],[-22.07175,81.73449],[-23.16961,81.15271],[-20.62363,81.52462],[-15.76818,81.91245],[-12.77018,81.71885],[-12.20855,81.29154],[-16.28533,80.58004],[-16.85,80.35],[-20.04624,80.17708],[-17.73035,80.12912],[-18.9,79.4],[-19.70499,78.75128],[-19.67353,77.63859],[-18.47285,76.98565],[-20.03503,76.94434],[-21.67944,76.62795],[-19.83407,76.09808],[-19.59896,75.24838],[-20.66818,75.15585],[-19.37281,74.29561],[-21.59422,74.22382],[-20.43454,73.81713],[-20.76234,73.46436],[-22.17221,73.30955],[-23.56593,73.30663],[-22.31311,72.62928],[-22.29954,72.18409],[-24.27834,72.59788],[-24.79296,72.3302],[-23.44296,72.08016],[-22.13281,71.46898],[-21.75356,70.66369],[-23.53603,70.471],[-24.30702,70.85649],[-25.54341,71.43094],[-25.20135,70.75226],[-26.36276,70.22646],[-23.72742,70.18401],[-22.34902,70.12946],[-25.02927,69.2588],[-27.74737,68.47046],[-30.67371,68.12503],[-31.77665,68.12078],[-32.81105,67.73547],[-34.20196,66.67974],[-36.35284,65.9789],[-37.04378,65.93768],[-38.37505,65.69213],[-39.81222,65.45848],[-40.66899,64.83997],[-40.68281,64.13902],[-41.1887,63.48246],[-42.81938,62.68233],[-42.41666,61.90093],[-42.86619,61.07404],[-43.3784,60.09772],[-44.7875,60.03676],[-46.26364,60.85328],[-48.26294,60.85843],[-49.23308,61.40681],[-49.90039,62.38336],[-51.63325,63.62691],[-52.14014,64.27842],[-52.27659,65.1767],[-53.66166,66.09957],[-53.30161,66.8365],[-53.96911,67.18899],[-52.9804,68.35759],[-51.47536,68.72958],[-51.08041,69.14781],[-50.87122,69.9291],[-52.013585,69.574925],[-52.55792,69.42616],[-53.45629,69.283625],[-54.68336,69.61003],[-54.75001,70.28932],[-54.35884,70.821315],[-53.431315,70.835755],[-51.39014,70.56978],[-53.10937,71.20485],[-54.00422,71.54719],[-55,71.406537],[-55.83468,71.65444],[-54.71819,72.58625],[-55.32634,72.95861],[-56.12003,73.64977],[-57.32363,74.71026],[-58.59679,75.09861],[-58.58516,75.51727],[-61.26861,76.10238],[-63.39165,76.1752],[-66.06427,76.13486],[-68.50438,76.06141],[-69.66485,76.37975],[-71.40257,77.00857],[-68.77671,77.32312],[-66.76397,77.37595],[-71.04293,77.63595],[-73.297,78.04419],[-73.15938,78.43271],[-69.37345,78.91388],[-65.7107,79.39436],[-65.3239,79.75814],[-68.02298,80.11721],[-67.15129,80.51582],[-63.68925,81.21396],[-62.23444,81.3211],[-62.65116,81.77042],[-60.28249,82.03363],[-57.20744,82.19074],[-54.13442,82.19962],[-53.04328,81.88833],[-50.39061,82.43883],[-48.00386,82.06481],[-46.59984,81.985945],[-44.523,81.6607],[-46.9007,82.19979],[-46.76379,82.62796]],[[-71.712361,19.714456],[-71.587304,19.884911],[-70.806706,19.880286],[-70.214365,19.622885],[-69.950815,19.648],[-69.76925,19.293267],[-69.222126,19.313214],[-69.254346,19.015196],[-68.809412,18.979074],[-68.317943,18.612198],[-68.689316,18.205142],[-69.164946,18.422648],[-69.623988,18.380713],[-69.952934,18.428307],[-70.133233,18.245915],[-70.517137,18.184291],[-70.669298,18.426886],[-70.99995,18.283329],[-71.40021,17.598564],[-71.657662,17.757573],[-71.708305,18.044997]],[[-71.708305,18.044997],[-71.687738,18.31666],[-71.945112,18.6169],[-71.701303,18.785417],[-71.624873,19.169838],[-71.712361,19.714456]],[[11.999506,23.471668],[8.572893,21.565661],[5.677566,19.601207],[4.267419,19.155265]],[[4.267419,19.155265],[3.158133,19.057364],[3.146661,19.693579],[2.683588,19.85623],[2.060991,20.142233],[1.823228,20.610809],[-1.550055,22.792666],[-4.923337,24.974574]],[[-4.923337,24.974574],[-8.6844,27.395744]],[[-8.6844,27.395744],[-8.665124,27.589479],[-8.66559,27.6]],[[-8.66559,27.6],[-8.674116,28.841289],[-7.059228,29.579228],[-6.060632,29.7317],[-5.242129,30.000443],[-4.859646,30.501188],[-3.690441,30.896952],[-3.647498,31.637294],[-3.06898,31.724498],[-2.616605,32.094346],[-1.307899,32.262889],[-1.124551,32.651522],[-1.388049,32.864015],[-1.733455,33.919713],[-1.792986,34.527919],[-2.169914,35.168396]],[[-2.169914,35.168396],[-1.208603,35.714849],[-.127454,35.888662],[.503877,36.301273],[1.466919,36.605647],[3.161699,36.783905],[4.815758,36.865037],[5.32012,36.716519],[6.26182,37.110655],[7.330385,37.118381],[7.737078,36.885708],[8.420964,36.946427]],[[8.420964,36.946427],[8.217824,36.433177],[8.376368,35.479876],[8.140981,34.655146],[7.524482,34.097376],[7.612642,33.344115],[8.430473,32.748337],[8.439103,32.506285],[9.055603,32.102692],[9.48214,30.307556]],[[9.48214,30.307556],[9.805634,29.424638],[9.859998,28.95999],[9.683885,28.144174],[9.756128,27.688259],[9.629056,27.140953],[9.716286,26.512206],[9.319411,26.094325],[9.910693,25.365455],[9.948261,24.936954],[10.303847,24.379313],[10.771364,24.562532],[11.560669,24.097909],[11.999506,23.471668]],[[-80.302561,-3.404856],[-79.770293,-2.657512],[-79.986559,-2.220794],[-80.368784,-2.685159],[-80.967765,-2.246943],[-80.764806,-1.965048],[-80.933659,-1.057455],[-80.58337,-.906663],[-80.399325,-.283703],[-80.020898,.36034],[-80.09061,.768429],[-79.542762,.982938],[-78.855259,1.380924]],[[-75.373223,-.152032],[-75.233723,-.911417],[-75.544996,-1.56161],[-76.635394,-2.608678],[-77.837905,-3.003021],[-78.450684,-3.873097],[-78.639897,-4.547784],[-79.205289,-4.959129],[-79.624979,-4.454198],[-80.028908,-4.346091],[-80.442242,-4.425724],[-80.469295,-4.059287],[-80.184015,-3.821162],[-80.302561,-3.404856]],[[36.86623,22],[32.9,22],[29.02,22],[25,22]],[[25,22],[25,25.6825],[25,29.238655],[24.70007,30.04419],[24.95762,30.6616],[24.80287,31.08929],[25.16482,31.56915]],[[25.16482,31.56915],[26.49533,31.58568],[27.45762,31.32126],[28.45048,31.02577],[28.91353,30.87005],[29.68342,31.18686],[30.09503,31.4734],[30.97693,31.55586],[31.68796,31.4296],[31.96041,30.9336],[32.19247,31.26034],[32.99392,31.02407],[33.7734,30.96746],[34.26544,31.21936],[34.9226,29.50133],[34.64174,29.09942],[34.42655,28.34399],[34.15451,27.8233],[33.92136,27.6487],[33.58811,27.97136],[33.13676,28.41765],[32.42323,29.85108],[32.32046,29.76043],[32.73482,28.70523],[33.34876,27.69989],[34.10455,26.14227],[34.47387,25.59856],[34.79507,25.03375],[35.69241,23.92671],[35.49372,23.75237],[35.52598,23.10244],[36.69069,22.20485],[36.86623,22]],[[42.35156,12.54223],[42.00975,12.86582],[41.59856,13.45209]],[[41.59856,13.45209],[41.155194,13.77332],[40.8966,14.11864]],[[40.8966,14.11864],[40.026219,14.519579],[39.34061,14.53155]],[[39.34061,14.53155],[39.0994,14.74064],[38.51295,14.50547],[37.90607,14.95943],[37.59377,14.2131],[36.42951,14.42211]],[[36.42951,14.42211],[36.323189,14.822481],[36.75386,16.291874],[36.85253,16.95655]],[[36.85253,16.95655],[37.16747,17.26314],[37.904,17.42754],[38.41009,17.998307]],[[38.41009,17.998307],[38.990623,16.840626],[39.26611,15.922723],[39.814294,15.435647],[41.179275,14.49108],[41.734952,13.921037],[42.276831,13.343992],[42.589576,13.000421],[43.081226,12.699639]],[[-9.034818,41.880571],[-8.984433,42.592775],[-9.392884,43.026625],[-7.97819,43.748338],[-6.754492,43.567909],[-5.411886,43.57424],[-4.347843,43.403449],[-3.517532,43.455901],[-1.901351,43.422802]],[[-1.901351,43.422802],[-1.502771,43.034014],[.338047,42.579546],[.701591,42.795734],[1.826793,42.343385],[2.985999,42.473015]],[[2.985999,42.473015],[3.039484,41.89212],[2.091842,41.226089],[.810525,41.014732],[.721331,40.678318],[.106692,40.123934],[-.278711,39.309978],[.111291,38.738514],[-.467124,38.292366],[-.683389,37.642354],[-1.438382,37.443064],[-2.146453,36.674144],[-3.415781,36.6589],[-4.368901,36.677839],[-4.995219,36.324708],[-5.37716,35.94685],[-5.866432,36.029817],[-6.236694,36.367677],[-6.520191,36.942913],[-7.453726,37.097788]],[[-7.453726,37.097788],[-7.537105,37.428904],[-7.166508,37.803894],[-7.029281,38.075764],[-7.374092,38.373059],[-7.098037,39.030073],[-7.498632,39.629571],[-7.066592,39.711892],[-7.026413,40.184524],[-6.86402,40.330872],[-6.851127,41.111083],[-6.389088,41.381815],[-6.668606,41.883387],[-7.251309,41.918346],[-7.422513,41.792075],[-8.013175,41.790886],[-8.263857,42.280469],[-8.671946,42.134689],[-9.034818,41.880571]],[[24.312863,57.793424],[24.428928,58.383413],[24.061198,58.257375],[23.42656,58.612753],[23.339795,59.18724],[24.604214,59.465854],[25.864189,59.61109],[26.949136,59.445803],[27.981114,59.475388],[28.131699,59.300825]],[[28.131699,59.300825],[27.420166,58.724581],[27.716686,57.791899]],[[27.716686,57.791899],[27.288185,57.474528]],[[27.288185,57.474528],[26.463532,57.476389],[25.60281,57.847529],[25.164594,57.970157],[24.312863,57.793424]],[[39.34061,14.53155],[40.02625,14.51959],[40.8966,14.11864]],[[40.8966,14.11864],[41.1552,13.77333],[41.59856,13.45209]],[[42.776852,10.926879],[42.55876,10.57258],[42.92812,10.02194]],[[42.92812,10.02194],[43.29699,9.54048],[43.67875,9.18358]],[[43.67875,9.18358],[46.94834,7.99688],[47.78942,8.003]],[[47.78942,8.003],[44.9636,5.00162],[43.66087,4.95755],[42.76967,4.25259],[42.12861,4.23413],[41.855083,3.918912]],[[41.855083,3.918912],[41.1718,3.91909],[40.76848,4.25702],[39.85494,3.83879],[39.559384,3.42206],[38.89251,3.50074],[38.67114,3.61607],[38.43697,3.58851],[38.120915,3.598605],[36.855093,4.447864],[36.159079,4.447864],[35.817448,4.776966],[35.817448,5.338232],[35.298007,5.506]],[[35.298007,5.506],[34.70702,6.59422],[34.25032,6.82607],[34.0751,7.22595],[33.56829,7.71334],[32.95418,7.78497],[33.2948,8.35458],[33.8255,8.37916],[33.97498,8.68456]],[[33.97498,8.68456],[33.96162,9.58358]],[[33.96162,9.58358],[34.25745,10.63009],[34.73115,10.91017],[34.83163,11.31896],[35.26049,12.08286],[35.86363,12.57828],[36.27022,13.56333],[36.42951,14.42211]],[[28.59193,69.064777],[28.445944,68.364613],[29.977426,67.698297],[29.054589,66.944286],[30.21765,65.80598],[29.54443,64.948672],[30.444685,64.204453],[30.035872,63.552814],[31.516092,62.867687],[31.139991,62.357693],[30.211107,61.780028]],[[30.211107,61.780028],[28.069998,60.503517],[26.255173,60.423961],[24.496624,60.057316],[22.869695,59.846373],[22.290764,60.391921],[21.322244,60.72017],[21.544866,61.705329],[21.059211,62.607393],[21.536029,63.189735],[22.442744,63.81781],[24.730512,64.902344],[25.398068,65.111427],[25.294043,65.534346],[23.903379,66.006927]],[[23.903379,66.006927],[23.56588,66.396051],[23.539473,67.936009],[21.978535,68.616846],[20.645593,69.106247]],[[20.645593,69.106247],[21.244936,69.370443],[22.356238,68.841741],[23.66205,68.891247],[24.735679,68.649557],[25.689213,69.092114],[26.179622,69.825299],[27.732292,70.164193],[29.015573,69.766491],[28.59193,69.064777]],[[178.3736,-17.33992],[178.71806,-17.62846],[178.55271,-18.15059],[177.93266,-18.28799],[177.38146,-18.16432],[177.28504,-17.72465],[177.67087,-17.38114],[178.12557,-17.50481],[178.3736,-17.33992]],[[179.364143,-16.801354],[178.725059,-17.012042],[178.596839,-16.63915],[179.096609,-16.433984],[179.413509,-16.379054],[180,-16.067133],[180,-16.555217],[179.364143,-16.801354]],[[-179.917369,-16.501783],[-180,-16.555217],[-180,-16.067133],[-179.79332,-16.020882],[-179.917369,-16.501783]],[[9.560016,42.152492],[9.229752,41.380007],[8.775723,41.583612],[8.544213,42.256517],[8.746009,42.628122],[9.390001,43.009985],[9.560016,42.152492]],[[5.674052,49.529484],[5.897759,49.442667],[6.18632,49.463803]],[[6.843593,45.991147],[6.802355,45.70858],[7.096652,45.333099],[6.749955,45.028518],[7.007562,44.254767],[7.549596,44.127901],[7.435185,43.693845]],[[7.435185,43.693845],[6.529245,43.128892],[4.556963,43.399651],[3.100411,43.075201],[2.985999,42.473015]],[[-1.901351,43.422802],[-1.384225,44.02261],[-1.193798,46.014918],[-2.225724,47.064363],[-2.963276,47.570327],[-4.491555,47.954954],[-4.59235,48.68416],[-3.295814,48.901692],[-1.616511,48.644421],[-1.933494,49.776342],[-.989469,49.347376],[1.338761,50.127173],[1.639001,50.946606],[2.513573,51.148506]],[[-54.524754,2.311849],[-54.27123,2.738748],[-54.184284,3.194172],[-54.011504,3.62257],[-54.399542,4.212611]],[[-54.399542,4.212611],[-54.478633,4.896756],[-53.958045,5.756548]],[[-53.958045,5.756548],[-53.618453,5.646529],[-52.882141,5.409851],[-51.823343,4.565768],[-51.657797,4.156232]],[[11.093773,-3.978827],[10.066135,-2.969483],[9.405245,-2.144313],[8.797996,-1.111301],[8.830087,-.779074],[9.04842,-.459351],[9.291351,.268666],[9.492889,1.01012]],[[9.492889,1.01012],[9.830284,1.067894],[11.285079,1.057662],[11.276449,2.261051]],[[-6.197885,53.867565],[-6.95373,54.073702],[-7.572168,54.059956],[-7.366031,54.595841],[-7.572168,55.131622]],[[-7.572168,55.131622],[-6.733847,55.17286],[-5.661949,54.554603],[-6.197885,53.867565]],[[-3.005005,58.635],[-4.073828,57.553025],[-3.055002,57.690019],[-1.959281,57.6848],[-2.219988,56.870017],[-3.119003,55.973793],[-2.085009,55.909998],[-2.005676,55.804903],[-1.114991,54.624986],[-.430485,54.464376],[.184981,53.325014],[.469977,52.929999],[1.681531,52.73952],[1.559988,52.099998],[1.050562,51.806761],[1.449865,51.289428],[.550334,50.765739],[-.787517,50.774989],[-2.489998,50.500019],[-2.956274,50.69688],[-3.617448,50.228356],[-4.542508,50.341837],[-5.245023,49.96],[-5.776567,50.159678],[-4.30999,51.210001],[-3.414851,51.426009],[-3.422719,51.426848],[-4.984367,51.593466],[-5.267296,51.9914],[-4.222347,52.301356],[-4.770013,52.840005],[-4.579999,53.495004],[-3.093831,53.404547],[-3.09208,53.404441],[-2.945009,53.985],[-3.614701,54.600937],[-3.630005,54.615013],[-4.844169,54.790971],[-5.082527,55.061601],[-4.719112,55.508473],[-5.047981,55.783986],[-5.586398,55.311146],[-5.644999,56.275015],[-6.149981,56.78501],[-5.786825,57.818848],[-5.009999,58.630013],[-4.211495,58.550845],[-3.005005,58.635]],[[41.554084,41.535656],[41.703171,41.962943],[41.45347,42.645123],[40.875469,43.013628],[40.321394,43.128634],[39.955009,43.434998]],[[39.955009,43.434998],[40.076965,43.553104]],[[40.076965,43.553104],[40.922185,43.382159],[42.394395,43.220308],[43.756017,42.740828],[43.9312,42.554974],[44.537623,42.711993]],[[44.537623,42.711993],[45.470279,42.502781]],[[45.470279,42.502781],[45.77641,42.092444],[46.404951,41.860675]],[[43.582746,41.092143],[42.619549,41.583173],[41.554084,41.535656]],[[1.060122,5.928837],[-.507638,5.343473],[-1.063625,5.000548],[-1.964707,4.710462],[-2.856125,4.994476]],[[.023803,11.018682],[-.049785,10.706918],[.36758,10.191213],[.365901,9.465004],[.461192,8.677223],[.712029,8.312465],[.490957,7.411744],[.570384,6.914359],[.836931,6.279979],[1.060122,5.928837]],[[-8.439298,7.686043],[-8.722124,7.711674],[-8.926065,7.309037],[-9.208786,7.313921],[-9.403348,7.526905],[-9.33728,7.928534],[-9.755342,8.541055],[-10.016567,8.428504],[-10.230094,8.406206]],[[-10.230094,8.406206],[-10.505477,8.348896],[-10.494315,8.715541],[-10.65477,8.977178],[-10.622395,9.26791],[-10.839152,9.688246],[-11.117481,10.045873],[-11.917277,10.046984],[-12.150338,9.858572],[-12.425929,9.835834],[-12.596719,9.620188],[-12.711958,9.342712],[-13.24655,8.903049]],[[-13.24655,8.903049],[-13.685154,9.494744],[-14.074045,9.886167],[-14.330076,10.01572],[-14.579699,10.214467],[-14.693232,10.656301],[-14.839554,10.876572],[-15.130311,11.040412]],[[-15.130311,11.040412],[-14.685687,11.527824],[-14.382192,11.509272],[-14.121406,11.677117],[-13.9008,11.678719],[-13.743161,11.811269],[-13.828272,12.142644],[-13.718744,12.247186],[-13.700476,12.586183]],[[-13.700476,12.586183],[-13.217818,12.575874],[-12.499051,12.33209],[-12.278599,12.35444],[-12.203565,12.465648],[-11.658301,12.386583],[-11.513943,12.442988]],[[-11.513943,12.442988],[-11.456169,12.076834],[-11.297574,12.077971],[-11.036556,12.211245],[-10.87083,12.177887],[-10.593224,11.923975],[-10.165214,11.844084],[-9.890993,12.060479],[-9.567912,12.194243],[-9.327616,12.334286],[-9.127474,12.30806],[-8.905265,12.088358],[-8.786099,11.812561],[-8.376305,11.393646],[-8.581305,11.136246],[-8.620321,10.810891],[-8.407311,10.909257],[-8.282357,10.792597],[-8.335377,10.494812],[-8.029944,10.206535]],[[-16.841525,13.151394],[-16.713729,13.594959]],[[-16.713729,13.594959],[-15.624596,13.623587],[-15.39877,13.860369],[-15.081735,13.876492],[-14.687031,13.630357],[-14.376714,13.62568],[-14.046992,13.794068],[-13.844963,13.505042],[-14.277702,13.280585],[-14.712197,13.298207],[-15.141163,13.509512],[-15.511813,13.27857],[-15.691001,13.270353],[-15.931296,13.130284],[-16.841525,13.151394]],[[-15.130311,11.040412],[-15.66418,11.458474],[-16.085214,11.524594],[-16.314787,11.806515],[-16.308947,11.958702],[-16.613838,12.170911],[-16.677452,12.384852]],[[-16.677452,12.384852],[-16.147717,12.547762],[-15.816574,12.515567],[-15.548477,12.62817],[-13.700476,12.586183]],[[9.492889,1.01012],[9.305613,1.160911],[9.649158,2.283866]],[[23.69998,35.705004],[24.246665,35.368022],[25.025015,35.424996],[25.769208,35.354018],[25.745023,35.179998],[26.290003,35.29999],[26.164998,35.004995],[24.724982,34.919988],[24.735007,35.084991],[23.514978,35.279992],[23.69998,35.705004]],[[26.056942,40.824123],[25.447677,40.852545],[24.925848,40.947062],[23.714811,40.687129],[24.407999,40.124993],[23.899968,39.962006],[23.342999,39.960998],[22.813988,40.476005],[22.626299,40.256561],[22.849748,39.659311],[23.350027,39.190011],[22.973099,38.970903],[23.530016,38.510001],[24.025025,38.219993],[24.040011,37.655015],[23.115003,37.920011],[23.409972,37.409991],[22.774972,37.30501],[23.154225,36.422506],[22.490028,36.41],[21.670026,36.844986],[21.295011,37.644989],[21.120034,38.310323],[20.730032,38.769985],[20.217712,39.340235],[20.150016,39.624998]],[[21.02004,40.842727],[21.674161,40.931275],[22.055378,41.149866],[22.597308,41.130487],[22.76177,41.3048],[22.952377,41.337994]],[[26.117042,41.826905],[26.604196,41.562115],[26.294602,40.936261],[26.056942,40.824123]],[[-90.095555,13.735338],[-90.608624,13.909771],[-91.23241,13.927832],[-91.689747,14.126218],[-92.22775,14.538829]],[[-92.22775,14.538829],[-92.20323,14.830103],[-92.087216,15.064585],[-92.229249,15.251447],[-91.74796,16.066565],[-90.464473,16.069562],[-90.438867,16.41011],[-90.600847,16.470778],[-90.711822,16.687483],[-91.08167,16.918477],[-91.453921,17.252177],[-91.002269,17.254658],[-91.00152,17.817595],[-90.067934,17.819326],[-89.14308,17.808319]],[[-88.930613,15.887273],[-88.604586,15.70638],[-88.518364,15.855389],[-88.225023,15.727722]],[[-88.225023,15.727722],[-88.68068,15.346247],[-89.154811,15.066419],[-89.22522,14.874286],[-89.145535,14.678019],[-89.353326,14.424133]],[[-89.353326,14.424133],[-89.587343,14.362586],[-89.534219,14.244816],[-89.721934,14.134228],[-90.064678,13.88197],[-90.095555,13.735338]],[[-59.758285,8.367035],[-59.101684,7.999202],[-58.482962,7.347691],[-58.454876,6.832787],[-58.078103,6.809094],[-57.542219,6.321268],[-57.147436,5.97315]],[[-57.147436,5.97315],[-57.307246,5.073567],[-57.914289,4.812626],[-57.86021,4.576801],[-58.044694,4.060864],[-57.601569,3.334655],[-57.281433,3.333492],[-57.150098,2.768927],[-56.539386,1.899523]],[[-60.733574,5.200277],[-61.410303,5.959068],[-61.139415,6.234297],[-61.159336,6.696077],[-60.543999,6.856584],[-60.295668,7.043911],[-60.637973,7.415],[-60.550588,7.779603],[-59.758285,8.367035]],[[-87.316654,12.984686],[-87.489409,13.297535],[-87.793111,13.38448]],[[-87.793111,13.38448],[-87.723503,13.78505],[-87.859515,13.893312],[-88.065343,13.964626],[-88.503998,13.845486],[-88.541231,13.980155],[-88.843073,14.140507],[-89.058512,14.340029],[-89.353326,14.424133]],[[-88.225023,15.727722],[-88.121153,15.688655],[-87.901813,15.864458],[-87.61568,15.878799],[-87.522921,15.797279],[-87.367762,15.84694],[-86.903191,15.756713],[-86.440946,15.782835],[-86.119234,15.893449],[-86.001954,16.005406],[-85.683317,15.953652],[-85.444004,15.885749],[-85.182444,15.909158],[-84.983722,15.995923],[-84.52698,15.857224],[-84.368256,15.835158],[-84.063055,15.648244],[-83.773977,15.424072],[-83.410381,15.270903],[-83.147219,14.995829]],[[-83.147219,14.995829],[-83.489989,15.016267],[-83.628585,14.880074],[-83.975721,14.749436],[-84.228342,14.748764],[-84.449336,14.621614],[-84.649582,14.666805],[-84.820037,14.819587],[-84.924501,14.790493],[-85.052787,14.551541],[-85.148751,14.560197],[-85.165365,14.35437],[-85.514413,14.079012],[-85.698665,13.960078],[-85.801295,13.836055],[-86.096264,14.038187],[-86.312142,13.771356],[-86.520708,13.778487],[-86.755087,13.754845],[-86.733822,13.263093],[-86.880557,13.254204],[-87.005769,13.025794],[-87.316654,12.984686]],[[18.829838,45.908878],[19.072769,45.521511]],[[19.072769,45.521511],[19.390476,45.236516]],[[19.390476,45.236516],[19.005486,44.860234]],[[18.56,42.65],[18.450016,42.479991],[17.50997,42.849995],[16.930006,43.209998],[16.015385,43.507215],[15.174454,44.243191],[15.37625,44.317915],[14.920309,44.738484],[14.901602,45.07606],[14.258748,45.233777],[13.952255,44.802124],[13.656976,45.136935],[13.679403,45.484149],[13.71506,45.500324]],[[13.71506,45.500324],[14.411968,45.466166],[14.595109,45.634941],[14.935244,45.471695],[15.327675,45.452316],[15.323954,45.731783],[15.67153,45.834154],[15.768733,46.238108],[16.564808,46.503751]],[[16.564808,46.503751],[16.882515,46.380632],[17.630066,45.951769],[18.456062,45.759481],[18.829838,45.908878]],[[-71.708305,18.044997],[-72.372476,18.214961],[-72.844411,18.145611],[-73.454555,18.217906],[-73.922433,18.030993],[-74.458034,18.34255],[-74.369925,18.664908],[-73.449542,18.526053],[-72.694937,18.445799],[-72.334882,18.668422],[-72.79165,19.101625],[-72.784105,19.483591],[-73.415022,19.639551],[-73.189791,19.915684],[-72.579673,19.871501],[-71.712361,19.714456]],[[16.979667,48.123497],[17.488473,47.867466],[17.857133,47.758429],[18.696513,47.880954],[18.777025,48.081768],[19.174365,48.111379],[19.661364,48.266615],[19.769471,48.202691],[20.239054,48.327567],[20.473562,48.56285],[20.801294,48.623854],[21.872236,48.319971],[22.085608,48.422264]],[[22.085608,48.422264],[22.64082,48.15024],[22.710531,47.882194]],[[22.710531,47.882194],[22.099768,47.672439],[21.626515,46.994238],[21.021952,46.316088],[20.220192,46.127469]],[[20.220192,46.127469],[19.596045,46.17173]],[[19.596045,46.17173],[18.829838,45.908878]],[[16.564808,46.503751],[16.370505,46.841327],[16.202298,46.852386]],[[120.715609,-10.239581],[120.295014,-10.25865],[118.967808,-9.557969],[119.90031,-9.36134],[120.425756,-9.665921],[120.775502,-9.969675],[120.715609,-10.239581]],[[124.968682,-8.89279],[125.07002,-9.089987],[125.08852,-9.393173]],[[125.08852,-9.393173],[124.43595,-10.140001],[123.579982,-10.359987],[123.459989,-10.239995],[123.550009,-9.900016],[123.980009,-9.290027],[124.968682,-8.89279]],[[117.900018,-8.095681],[118.260616,-8.362383],[118.87846,-8.280683],[119.126507,-8.705825],[117.970402,-8.906639],[117.277731,-9.040895],[116.740141,-9.032937],[117.083737,-8.457158],[117.632024,-8.449303],[117.900018,-8.095681]],[[122.903537,-8.094234],[122.756983,-8.649808],[121.254491,-8.933666],[119.924391,-8.810418],[119.920929,-8.444859],[120.715092,-8.236965],[121.341669,-8.53674],[122.007365,-8.46062],[122.903537,-8.094234]],[[108.623479,-6.777674],[110.539227,-6.877358],[110.759576,-6.465186],[112.614811,-6.946036],[112.978768,-7.594213],[114.478935,-7.776528],[115.705527,-8.370807],[114.564511,-8.751817],[113.464734,-8.348947],[112.559672,-8.376181],[111.522061,-8.302129],[110.58615,-8.122605],[109.427667,-7.740664],[108.693655,-7.6416],[108.277763,-7.766657],[106.454102,-7.3549],[106.280624,-6.9249],[105.365486,-6.851416],[106.051646,-5.895919],[107.265009,-5.954985],[108.072091,-6.345762],[108.486846,-6.421985],[108.623479,-6.777674]],[[134.724624,-6.214401],[134.210134,-6.895238],[134.112776,-6.142467],[134.290336,-5.783058],[134.499625,-5.445042],[134.727002,-5.737582],[134.724624,-6.214401]],[[127.249215,-3.459065],[126.874923,-3.790983],[126.183802,-3.607376],[125.989034,-3.177273],[127.000651,-3.129318],[127.249215,-3.459065]],[[130.471344,-3.093764],[130.834836,-3.858472],[129.990547,-3.446301],[129.155249,-3.362637],[128.590684,-3.428679],[127.898891,-3.393436],[128.135879,-2.84365],[129.370998,-2.802154],[130.471344,-3.093764]],[[141.00021,-2.600151],[141.017057,-5.859022],[141.033852,-9.117893]],[[141.033852,-9.117893],[140.143415,-8.297168],[139.127767,-8.096043],[138.881477,-8.380935],[137.614474,-8.411683],[138.039099,-7.597882],[138.668621,-7.320225],[138.407914,-6.232849],[137.92784,-5.393366],[135.98925,-4.546544],[135.164598,-4.462931],[133.66288,-3.538853],[133.367705,-4.024819],[132.983956,-4.112979],[132.756941,-3.746283],[132.753789,-3.311787],[131.989804,-2.820551],[133.066845,-2.460418],[133.780031,-2.479848],[133.696212,-2.214542],[132.232373,-2.212526],[131.836222,-1.617162],[130.94284,-1.432522],[130.519558,-.93772],[131.867538,-.695461],[132.380116,-.369538],[133.985548,-.78021],[134.143368,-1.151867],[134.422627,-2.769185],[135.457603,-3.367753],[136.293314,-2.307042],[137.440738,-1.703513],[138.329727,-1.702686],[139.184921,-2.051296],[139.926684,-2.409052],[141.00021,-2.600151]],[[125.240501,1.419836],[124.437035,.427881],[123.685505,.235593],[122.723083,.431137],[121.056725,.381217],[120.183083,.237247],[120.04087,-.519658],[120.935905,-1.408906],[121.475821,-.955962],[123.340565,-.615673],[123.258399,-1.076213],[122.822715,-.930951],[122.38853,-1.516858],[121.508274,-1.904483],[122.454572,-3.186058],[122.271896,-3.5295],[123.170963,-4.683693],[123.162333,-5.340604],[122.628515,-5.634591],[122.236394,-5.282933],[122.719569,-4.464172],[121.738234,-4.851331],[121.489463,-4.574553],[121.619171,-4.188478],[120.898182,-3.602105],[120.972389,-2.627643],[120.305453,-2.931604],[120.390047,-4.097579],[120.430717,-5.528241],[119.796543,-5.6734],[119.366906,-5.379878],[119.653606,-4.459417],[119.498835,-3.494412],[119.078344,-3.487022],[118.767769,-2.801999],[119.180974,-2.147104],[119.323394,-1.353147],[119.825999,.154254],[120.035702,.566477],[120.885779,1.309223],[121.666817,1.013944],[122.927567,.875192],[124.077522,.917102],[125.065989,1.643259],[125.240501,1.419836]],[[128.688249,1.132386],[128.635952,.258486],[128.12017,.356413],[127.968034,-.252077],[128.379999,-.780004],[128.100016,-.899996],[127.696475,-.266598],[127.39949,1.011722],[127.600512,1.810691],[127.932378,2.174596],[128.004156,1.628531],[128.594559,1.540811],[128.688249,1.132386]],[[109.66326,2.006467],[109.830227,1.338136],[110.514061,.773131],[111.159138,.976478],[111.797548,.904441],[112.380252,1.410121],[112.859809,1.49779],[113.80585,1.217549],[114.621355,1.430688],[115.134037,2.821482],[115.519078,3.169238],[115.865517,4.306559],[117.015214,4.306094],[117.882035,4.137551]],[[117.882035,4.137551],[117.313232,3.234428],[118.04833,2.28769],[117.875627,1.827641],[118.996747,.902219],[117.811858,.784242],[117.478339,.102475],[117.521644,-.803723],[116.560048,-1.487661],[116.533797,-2.483517],[116.148084,-4.012726],[116.000858,-3.657037],[114.864803,-4.106984],[114.468652,-3.495704],[113.755672,-3.43917],[113.256994,-3.118776],[112.068126,-3.478392],[111.703291,-2.994442],[111.04824,-3.049426],[110.223846,-2.934032],[110.070936,-1.592874],[109.571948,-1.314907],[109.091874,-.459507],[108.952658,.415375],[109.069136,1.341934],[109.66326,2.006467]],[[105.817655,-5.852356],[104.710384,-5.873285],[103.868213,-5.037315],[102.584261,-4.220259],[102.156173,-3.614146],[101.399113,-2.799777],[100.902503,-2.050262],[100.141981,-.650348],[99.26374,.183142],[98.970011,1.042882],[98.601351,1.823507],[97.699598,2.453184],[97.176942,3.308791],[96.424017,3.86886],[95.380876,4.970782],[95.293026,5.479821],[95.936863,5.439513],[97.484882,5.246321],[98.369169,4.26837],[99.142559,3.59035],[99.693998,3.174329],[100.641434,2.099381],[101.658012,2.083697],[102.498271,1.3987],[103.07684,.561361],[103.838396,.104542],[103.437645,-.711946],[104.010789,-1.059212],[104.369991,-1.084843],[104.53949,-1.782372],[104.887893,-2.340425],[105.622111,-2.428844],[106.108593,-3.061777],[105.857446,-4.305525],[105.817655,-5.852356]],[[81.111256,30.183481],[80.476721,29.729865],[80.088425,28.79447],[81.057203,28.416095],[81.999987,27.925479],[83.304249,27.364506],[84.675018,27.234901],[85.251779,26.726198],[86.024393,26.630985],[87.227472,26.397898],[88.060238,26.414615],[88.174804,26.810405],[88.043133,27.445819],[88.120441,27.876542]],[[97.327114,28.261583],[97.402561,27.882536],[97.051989,27.699059],[97.133999,27.083774],[96.419366,27.264589],[95.124768,26.573572],[95.155153,26.001307],[94.603249,25.162495],[94.552658,24.675238],[94.106742,23.850741],[93.325188,24.078556],[93.286327,23.043658],[93.060294,22.703111],[93.166128,22.27846],[92.672721,22.041239]],[[89.031961,22.055708],[88.888766,21.690588],[88.208497,21.703172],[86.975704,21.495562],[87.033169,20.743308],[86.499351,20.151638],[85.060266,19.478579],[83.941006,18.30201],[83.189217,17.671221],[82.192792,17.016636],[82.191242,16.556664],[81.692719,16.310219],[80.791999,15.951972],[80.324896,15.899185],[80.025069,15.136415],[80.233274,13.835771],[80.286294,13.006261],[79.862547,12.056215],[79.857999,10.357275],[79.340512,10.308854],[78.885345,9.546136],[79.18972,9.216544],[78.277941,8.933047],[77.941165,8.252959],[77.539898,7.965535],[76.592979,8.899276],[76.130061,10.29963],[75.746467,11.308251],[75.396101,11.781245],[74.864816,12.741936],[74.616717,13.992583],[74.443859,14.617222],[73.534199,15.990652],[73.119909,17.92857],[72.820909,19.208234],[72.824475,20.419503],[72.630533,21.356009],[71.175273,20.757441],[70.470459,20.877331],[69.16413,22.089298],[69.644928,22.450775],[69.349597,22.84318],[68.176645,23.691965]],[[68.176645,23.691965],[68.842599,24.359134],[71.04324,24.356524],[70.844699,25.215102],[70.282873,25.722229],[70.168927,26.491872],[69.514393,26.940966],[70.616496,27.989196],[71.777666,27.91318],[72.823752,28.961592],[73.450638,29.976413],[74.42138,30.979815],[74.405929,31.692639],[75.258642,32.271105],[74.451559,32.7649],[74.104294,33.441473],[73.749948,34.317699],[74.240203,34.748887],[75.757061,34.504923],[76.871722,34.653544],[77.837451,35.49401]],[[-6.197885,53.867565],[-6.032985,53.153164],[-6.788857,52.260118],[-8.561617,51.669301],[-9.977086,51.820455],[-9.166283,52.864629],[-9.688525,53.881363],[-8.327987,54.664519],[-7.572168,55.131622]],[[53.921598,37.198918],[54.800304,37.392421],[55.511578,37.964117],[56.180375,37.935127],[56.619366,38.121394],[57.330434,38.029229],[58.436154,37.522309],[59.234762,37.412988],[60.377638,36.527383],[61.123071,36.491597],[61.210817,35.650072]],[[60.874248,29.829239],[61.369309,29.303276],[61.771868,28.699334],[62.72783,28.259645],[62.755426,27.378923],[63.233898,27.217047],[63.316632,26.756532],[61.874187,26.239975],[61.497363,25.078237]],[[61.497363,25.078237],[59.616134,25.380157],[58.525761,25.609962],[57.397251,25.739902],[56.970766,26.966106],[56.492139,27.143305],[55.72371,26.964633],[54.71509,26.480658],[53.493097,26.812369],[52.483598,27.580849],[51.520763,27.86569],[50.852948,28.814521],[50.115009,30.147773],[49.57685,29.985715],[48.941333,30.31709],[48.567971,29.926778]],[[48.567971,29.926778],[48.014568,30.452457],[48.004698,30.985137],[47.685286,30.984853],[47.849204,31.709176],[47.334661,32.469155],[46.109362,33.017287],[45.416691,33.967798],[45.64846,34.748138],[46.151788,35.093259],[46.07634,35.677383],[45.420618,35.977546]],[[45.420618,35.977546],[44.77267,37.17045],[44.225756,37.971584]],[[44.225756,37.971584],[44.421403,38.281281],[44.109225,39.428136],[44.79399,39.713003]],[[48.883249,38.320245],[49.199612,37.582874],[50.147771,37.374567],[50.842354,36.872814],[52.264025,36.700422],[53.82579,36.965031],[53.921598,37.198918]],[[48.567971,29.926778],[47.974519,29.975819]],[[47.974519,29.975819],[47.302622,30.05907],[46.568713,29.099025]],[[46.568713,29.099025],[44.709499,29.178891],[41.889981,31.190009],[40.399994,31.889992],[39.195468,32.161009]],[[39.195468,32.161009],[38.792341,33.378686]],[[38.792341,33.378686],[41.006159,34.419372],[41.383965,35.628317],[41.289707,36.358815],[41.837064,36.605854],[42.349591,37.229873]],[[42.349591,37.229873],[42.779126,37.385264],[43.942259,37.256228],[44.293452,37.001514],[44.772699,37.170445]],[[44.772699,37.170445],[45.420618,35.977546]],[[-14.508695,66.455892],[-14.739637,65.808748],[-13.609732,65.126671],[-14.909834,64.364082],[-17.794438,63.678749],[-18.656246,63.496383],[-19.972755,63.643635],[-22.762972,63.960179],[-21.778484,64.402116],[-23.955044,64.89113],[-22.184403,65.084968],[-22.227423,65.378594],[-24.326184,65.611189],[-23.650515,66.262519],[-22.134922,66.410469],[-20.576284,65.732112],[-19.056842,66.276601],[-17.798624,65.993853],[-16.167819,66.526792],[-14.508695,66.455892]],[[35.719918,32.709192],[35.545665,32.393992]],[[35.545665,32.393992],[35.18393,32.532511],[34.974641,31.866582],[35.225892,31.754341],[34.970507,31.616778],[34.927408,31.353435],[35.397561,31.489086]],[[35.397561,31.489086],[35.420918,31.100066],[34.922603,29.501326]],[[34.922603,29.501326],[34.265433,31.219361],[34.556372,31.548824],[34.488107,31.605539],[34.752587,32.072926],[34.955417,32.827376],[35.098457,33.080539],[35.126053,33.0909]],[[35.126053,33.0909],[35.460709,33.08904],[35.552797,33.264275],[35.821101,33.277426]],[[35.821101,33.277426],[35.836397,32.868123],[35.700798,32.716014],[35.719918,32.709192]],[[15.520376,38.231155],[15.160243,37.444046],[15.309898,37.134219],[15.099988,36.619987],[14.335229,36.996631],[13.826733,37.104531],[12.431004,37.61295],[12.570944,38.126381],[13.741156,38.034966],[14.761249,38.143874],[15.520376,38.231155]],[[9.210012,41.209991],[9.809975,40.500009],[9.669519,39.177376],[9.214818,39.240473],[8.806936,38.906618],[8.428302,39.171847],[8.388253,40.378311],[8.159998,40.950007],[8.709991,40.899984],[9.210012,41.209991]],[[13.806475,46.509306],[13.69811,46.016778],[13.93763,45.591016]],[[13.93763,45.591016],[13.141606,45.736692],[12.328581,45.381778],[12.383875,44.885374],[12.261453,44.600482],[12.589237,44.091366],[13.526906,43.587727],[14.029821,42.761008],[15.14257,41.95514],[15.926191,41.961315],[16.169897,41.740295],[15.889346,41.541082],[16.785002,41.179606],[17.519169,40.877143],[18.376687,40.355625],[18.480247,40.168866],[18.293385,39.810774],[17.73838,40.277671],[16.869596,40.442235],[16.448743,39.795401],[17.17149,39.4247],[17.052841,38.902871],[16.635088,38.843572],[16.100961,37.985899],[15.684087,37.908849],[15.687963,38.214593],[15.891981,38.750942],[16.109332,38.964547],[15.718814,39.544072],[15.413613,40.048357],[14.998496,40.172949],[14.703268,40.60455],[14.060672,40.786348],[13.627985,41.188287],[12.888082,41.25309],[12.106683,41.704535],[11.191906,42.355425],[10.511948,42.931463],[10.200029,43.920007],[9.702488,44.036279],[8.888946,44.366336],[8.428561,44.231228],[7.850767,43.767148],[7.435185,43.693845]],[[-77.569601,18.490525],[-76.896619,18.400867],[-76.365359,18.160701],[-76.199659,17.886867],[-76.902561,17.868238],[-77.206341,17.701116],[-77.766023,17.861597],[-78.337719,18.225968],[-78.217727,18.454533],[-77.797365,18.524218],[-77.569601,18.490525]],[[35.719918,32.709192],[36.834062,32.312938],[38.792341,33.378686]],[[39.195468,32.161009],[39.004886,32.010217],[37.002166,31.508413],[37.998849,30.5085],[37.66812,30.338665],[37.503582,30.003776],[36.740528,29.865283],[36.501214,29.505254],[36.068941,29.197495],[34.956037,29.356555]],[[34.956037,29.356555],[34.922603,29.501326]],[[35.397561,31.489086],[35.545252,31.782505],[35.545665,32.393992]],[[134.638428,34.149234],[134.766379,33.806335],[134.203416,33.201178],[133.79295,33.521985],[133.280268,33.28957],[133.014858,32.704567],[132.363115,32.989382],[132.371176,33.463642],[132.924373,34.060299],[133.492968,33.944621],[133.904106,34.364931],[134.638428,34.149234]],[[140.976388,37.142074],[140.59977,36.343983],[140.774074,35.842877],[140.253279,35.138114],[138.975528,34.6676],[137.217599,34.606286],[135.792983,33.464805],[135.120983,33.849071],[135.079435,34.596545],[133.340316,34.375938],[132.156771,33.904933],[130.986145,33.885761],[132.000036,33.149992],[131.33279,31.450355],[130.686318,31.029579],[130.20242,31.418238],[130.447676,32.319475],[129.814692,32.61031],[129.408463,33.296056],[130.353935,33.604151],[130.878451,34.232743],[131.884229,34.749714],[132.617673,35.433393],[134.608301,35.731618],[135.677538,35.527134],[136.723831,37.304984],[137.390612,36.827391],[138.857602,37.827485],[139.426405,38.215962],[140.05479,39.438807],[139.883379,40.563312],[140.305783,41.195005],[141.368973,41.37856],[141.914263,39.991616],[141.884601,39.180865],[140.959489,38.174001],[140.976388,37.142074]],[[143.910162,44.1741],[144.613427,43.960883],[145.320825,44.384733],[145.543137,43.262088],[144.059662,42.988358],[143.18385,41.995215],[141.611491,42.678791],[141.067286,41.584594],[139.955106,41.569556],[139.817544,42.563759],[140.312087,43.333273],[141.380549,43.388825],[141.671952,44.772125],[141.967645,45.551483],[143.14287,44.510358],[143.910162,44.1741]],[[70.962315,42.266154],[70.388965,42.081308],[69.070027,41.384244],[68.632483,40.668681],[68.259896,40.662325],[67.985856,41.135991],[66.714047,41.168444],[66.510649,41.987644],[66.023392,41.994646],[66.098012,42.99766],[64.900824,43.728081],[63.185787,43.650075],[62.0133,43.504477],[61.05832,44.405817],[60.239972,44.784037],[58.689989,45.500014],[58.503127,45.586804],[55.928917,44.995858],[55.968191,41.308642]],[[55.968191,41.308642],[55.455251,41.259859],[54.755345,42.043971],[54.079418,42.324109],[52.944293,42.116034],[52.50246,41.783316]],[[52.50246,41.783316],[52.446339,42.027151],[52.692112,42.443895],[52.501426,42.792298],[51.342427,43.132975],[50.891292,44.031034],[50.339129,44.284016],[50.305643,44.609836],[51.278503,44.514854],[51.316899,45.245998],[52.16739,45.408391],[53.040876,45.259047],[53.220866,46.234646],[53.042737,46.853006],[52.042023,46.804637],[51.191945,47.048705],[50.034083,46.60899],[49.10116,46.39933]],[[49.10116,46.39933],[48.593241,46.561034],[48.694734,47.075628]],[[48.694734,47.075628],[48.057253,47.743753],[47.315231,47.715847],[46.466446,48.394152]],[[46.466446,48.394152],[47.043672,49.152039],[46.751596,49.356006],[47.54948,50.454698],[48.577841,49.87476],[48.702382,50.605128],[50.766648,51.692762],[52.328724,51.718652],[54.532878,51.02624]],[[54.532878,51.02624],[55.716941,50.621717],[56.777961,51.043551],[58.363291,51.063653],[59.642282,50.545442]],[[59.642282,50.545442],[59.932807,50.842194],[61.337424,50.79907],[61.588003,51.272659],[59.967534,51.96042],[60.927269,52.447548],[60.739993,52.719986],[61.699986,52.979996],[60.978066,53.664993]],[[60.978066,53.664993],[61.436591,54.006265],[65.178534,54.354228]],[[65.178534,54.354228],[65.666876,54.601267],[68.1691,54.970392]],[[68.1691,54.970392],[69.068167,55.38525],[70.865267,55.169734],[71.180131,54.133285],[72.22415,54.376655],[73.508516,54.035617],[73.425679,53.48981]],[[73.425679,53.48981],[74.384845,53.546861],[76.8911,54.490524]],[[76.8911,54.490524],[76.525179,54.177003],[77.800916,53.404415],[80.03556,50.864751],[80.568447,51.388336],[81.945986,50.812196],[83.383004,51.069183],[83.935115,50.889246],[84.416377,50.3114],[85.11556,50.117303],[85.54127,49.692859],[86.829357,49.826675],[87.35997,49.214981]],[[80.25999,42.349999],[79.643645,42.496683],[79.142177,42.856092],[77.658392,42.960686],[76.000354,42.988022],[75.636965,42.8779],[74.212866,43.298339],[73.645304,43.091272],[73.489758,42.500894],[71.844638,42.845395],[71.186281,42.704293],[70.962315,42.266154]],[[41.58513,-1.68325],[40.88477,-2.08255],[40.63785,-2.49979],[40.26304,-2.57309],[40.12119,-3.27768],[39.80006,-3.68116],[39.60489,-4.34653],[39.20222,-4.67677]],[[39.20222,-4.67677],[37.7669,-3.67712],[37.69869,-3.09699],[34.07262,-1.05982],[33.903711,-.95]],[[33.903711,-.95],[33.893569,.109814],[34.18,.515],[34.6721,1.17694],[35.03599,1.90584],[34.59607,3.05374],[34.47913,3.5556],[34.005,4.249885]],[[34.005,4.249885],[34.620196,4.847123],[35.298007,5.506]],[[41.855083,3.918912],[40.98105,2.78452],[40.993,-.85829],[41.58513,-1.68325]],[[73.675379,39.431237],[71.784694,39.279463],[70.549162,39.604198],[69.464887,39.526683],[69.55961,40.103211],[70.648019,39.935754],[71.014198,40.244366]],[[71.014198,40.244366],[71.774875,40.145844],[73.055417,40.866033],[71.870115,41.3929],[71.157859,41.143587],[70.420022,41.519998],[71.259248,42.167711],[70.962315,42.266154]],[[102.584932,12.186595],[102.348099,13.394247],[102.988422,14.225721],[104.281418,14.416743],[105.218777,14.273212]],[[105.218777,14.273212],[106.043946,13.881091],[106.496373,14.570584],[107.382727,14.202441]],[[107.382727,14.202441],[107.614548,13.535531],[107.491403,12.337206],[105.810524,11.567615],[106.24967,10.961812],[105.199915,10.88931],[104.334335,10.486544]],[[104.334335,10.486544],[103.49728,10.632555],[103.09069,11.153661],[102.584932,12.186595]],[[128.349716,38.612243],[129.21292,37.432392],[129.46045,36.784189],[129.468304,35.632141],[129.091377,35.082484],[128.18585,34.890377],[127.386519,34.475674],[126.485748,34.390046],[126.37392,34.93456],[126.559231,35.684541],[126.117398,36.725485],[126.860143,36.893924],[126.174759,37.749686]],[[126.174759,37.749686],[126.237339,37.840378],[126.68372,37.804773],[127.073309,38.256115],[127.780035,38.304536],[128.205746,38.370397],[128.349716,38.612243]],[[20.59023,41.85541],[20.52295,42.21787]],[[20.52295,42.21787],[20.28374,42.32025],[20.0707,42.58863]],[[20.0707,42.58863],[20.25758,42.81275]],[[20.25758,42.81275],[20.49679,42.88469],[20.63508,43.21671],[20.81448,43.27205],[20.95651,43.13094],[21.143395,43.068685],[21.27421,42.90959],[21.43866,42.86255],[21.63302,42.67717],[21.77505,42.6827],[21.66292,42.43922],[21.54332,42.32025],[21.576636,42.245224]],[[21.576636,42.245224],[21.3527,42.2068],[20.76216,42.05186],[20.71731,41.84711],[20.59023,41.85541]],[[47.974519,29.975819],[48.183189,29.534477],[48.093943,29.306299],[48.416094,28.552004]],[[48.416094,28.552004],[47.708851,28.526063],[47.459822,29.002519],[46.568713,29.099025]],[[105.218777,14.273212],[105.544338,14.723934],[105.589039,15.570316],[104.779321,16.441865],[104.716947,17.428859],[103.956477,18.240954],[103.200192,18.309632],[102.998706,17.961695],[102.413005,17.932782],[102.113592,18.109102],[101.059548,17.512497],[101.035931,18.408928],[101.282015,19.462585],[100.606294,19.508344],[100.548881,20.109238],[100.115988,20.41785]],[[100.115988,20.41785],[100.329101,20.786122],[101.180005,21.436573]],[[102.170436,22.464753],[102.754896,21.675137],[103.203861,20.766562],[104.435,20.758733],[104.822574,19.886642],[104.183388,19.624668],[103.896532,19.265181],[105.094598,18.666975],[105.925762,17.485315],[106.556008,16.604284],[107.312706,15.908538],[107.564525,15.202173],[107.382727,14.202441]],[[35.126053,33.0909],[35.482207,33.90545],[35.979592,34.610058],[35.998403,34.644914]],[[35.998403,34.644914],[36.448194,34.593935],[36.61175,34.201789],[36.06646,33.824912],[35.821101,33.277426]],[[-7.712159,4.364566],[-7.974107,4.355755],[-9.004794,4.832419],[-9.91342,5.593561],[-10.765384,6.140711],[-11.438779,6.785917]],[[-11.438779,6.785917],[-11.199802,7.105846],[-11.146704,7.396706],[-10.695595,7.939464],[-10.230094,8.406206]],[[14.8513,22.86295],[14.143871,22.491289],[13.581425,23.040506],[11.999506,23.471668]],[[9.48214,30.307556],[9.970017,30.539325],[10.056575,30.961831],[9.950225,31.37607],[10.636901,31.761421],[10.94479,32.081815],[11.432253,32.368903],[11.488787,33.136996]],[[11.488787,33.136996],[12.66331,32.79278],[13.08326,32.87882],[13.91868,32.71196],[15.24563,32.26508],[15.71394,31.37626],[16.61162,31.18218],[18.02109,30.76357],[19.08641,30.26639],[19.57404,30.52582],[20.05335,30.98576],[19.82033,31.75179],[20.13397,32.2382],[20.85452,32.7068],[21.54298,32.8432],[22.89576,32.63858],[23.2368,32.19149],[23.60913,32.18726],[23.9275,32.01667],[24.92114,31.89936],[25.16482,31.56915]],[[25,22],[25,20.00304],[23.85,20],[23.83766,19.58047]],[[23.83766,19.58047],[19.84926,21.49509],[15.86085,23.40972],[14.8513,22.86295]],[[81.787959,7.523055],[81.637322,6.481775],[81.21802,6.197141],[80.348357,5.96837],[79.872469,6.763463],[79.695167,8.200843],[80.147801,9.824078],[80.838818,9.268427],[81.304319,8.564206],[81.787959,7.523055]],[[28.978263,-28.955597],[29.325166,-29.257387],[29.018415,-29.743766],[28.8484,-30.070051],[28.291069,-30.226217],[28.107205,-30.545732],[27.749397,-30.645106],[26.999262,-29.875954],[27.532511,-29.242711],[28.074338,-28.851469],[28.5417,-28.647502],[28.978263,-28.955597]],[[22.731099,54.327537],[22.651052,54.582741],[22.757764,54.856574],[22.315724,55.015299],[21.268449,55.190482]],[[21.268449,55.190482],[21.0558,56.031076]],[[21.0558,56.031076],[22.201157,56.337802],[23.878264,56.273671],[24.860684,56.372528],[25.000934,56.164531],[25.533047,56.100297],[26.494331,55.615107]],[[23.484128,53.912498],[23.243987,54.220567],[22.731099,54.327537]],[[21.0558,56.031076],[21.090424,56.783873],[21.581866,57.411871],[22.524341,57.753374],[23.318453,57.006236],[24.12073,57.025693],[24.312863,57.793424]],[[27.288185,57.474528],[27.770016,57.244258],[27.855282,56.759326],[28.176709,56.16913]],[[-8.66559,27.6],[-13.0953665818028,27.6]],[[-13.0953665818028,27.6],[-12.360674033948428,28.164869967003586],[-10.900957,28.832142],[-10.399592,29.098586],[-9.564811,29.933574],[-9.814718,31.177736],[-9.434793,32.038096],[-9.300693,32.564679],[-8.657476,33.240245],[-7.654178,33.697065],[-6.912544,34.110476],[-6.244342,35.145865],[-5.929994,35.759988],[-5.193863,35.755182],[-4.591006,35.330712],[-3.640057,35.399855],[-2.604306,35.179093],[-2.169914,35.168396]],[[26.619337,48.220726],[26.857824,48.368211],[27.522537,48.467119],[28.259547,48.155562],[28.670891,48.118149],[29.122698,47.849095],[29.050868,47.510227],[29.415135,47.346645],[29.559674,46.928583],[29.908852,46.674361],[29.83821,46.525326],[30.024659,46.423937],[29.759972,46.349988],[29.170654,46.379262],[29.072107,46.517678],[28.862972,46.437889],[28.933717,46.25883],[28.659987,45.939987],[28.485269,45.596907],[28.233554,45.488283]],[[28.233554,45.488283],[28.054443,45.944586],[28.160018,46.371563],[28.12803,46.810476],[27.551166,47.405117],[27.233873,47.826771],[26.924176,48.123264],[26.619337,48.220726]],[[49.543519,-12.469833],[49.808981,-12.895285],[50.056511,-13.555761],[50.217431,-14.758789],[50.476537,-15.226512],[50.377111,-15.706069],[50.200275,-16.000263],[49.860606,-15.414253],[49.672607,-15.710204],[49.863344,-16.451037],[49.774564,-16.875042],[49.498612,-17.106036],[49.435619,-17.953064],[49.041792,-19.118781],[48.548541,-20.496888],[47.930749,-22.391501],[47.547723,-23.781959],[47.095761,-24.94163],[46.282478,-25.178463],[45.409508,-25.601434],[44.833574,-25.346101],[44.03972,-24.988345],[43.763768,-24.460677],[43.697778,-23.574116],[43.345654,-22.776904],[43.254187,-22.057413],[43.433298,-21.336475],[43.893683,-21.163307],[43.89637,-20.830459],[44.374325,-20.072366],[44.464397,-19.435454],[44.232422,-18.961995],[44.042976,-18.331387],[43.963084,-17.409945],[44.312469,-16.850496],[44.446517,-16.216219],[44.944937,-16.179374],[45.502732,-15.974373],[45.872994,-15.793454],[46.312243,-15.780018],[46.882183,-15.210182],[47.70513,-14.594303],[48.005215,-14.091233],[47.869047,-13.663869],[48.293828,-13.784068],[48.84506,-13.089175],[48.863509,-12.487868],[49.194651,-12.040557],[49.543519,-12.469833]],[[-92.22775,14.538829],[-93.359464,15.61543],[-93.875169,15.940164],[-94.691656,16.200975],[-95.250227,16.128318],[-96.053382,15.752088],[-96.557434,15.653515],[-97.263592,15.917065],[-98.01303,16.107312],[-98.947676,16.566043],[-99.697397,16.706164],[-100.829499,17.171071],[-101.666089,17.649026],[-101.918528,17.91609],[-102.478132,17.975751],[-103.50099,18.292295],[-103.917527,18.748572],[-104.99201,19.316134],[-105.493038,19.946767],[-105.731396,20.434102],[-105.397773,20.531719],[-105.500661,20.816895],[-105.270752,21.076285],[-105.265817,21.422104],[-105.603161,21.871146],[-105.693414,22.26908],[-106.028716,22.773752],[-106.90998,23.767774],[-107.915449,24.548915],[-108.401905,25.172314],[-109.260199,25.580609],[-109.444089,25.824884],[-109.291644,26.442934],[-109.801458,26.676176],[-110.391732,27.162115],[-110.641019,27.859876],[-111.178919,27.941241],[-111.759607,28.467953],[-112.228235,28.954409],[-112.271824,29.266844],[-112.809594,30.021114],[-113.163811,30.786881],[-113.148669,31.170966],[-113.871881,31.567608],[-114.205737,31.524045],[-114.776451,31.799532],[-114.9367,31.393485],[-114.771232,30.913617],[-114.673899,30.162681],[-114.330974,29.750432],[-113.588875,29.061611],[-113.424053,28.826174],[-113.271969,28.754783],[-113.140039,28.411289],[-112.962298,28.42519],[-112.761587,27.780217],[-112.457911,27.525814],[-112.244952,27.171727],[-111.616489,26.662817],[-111.284675,25.73259],[-110.987819,25.294606],[-110.710007,24.826004],[-110.655049,24.298595],[-110.172856,24.265548],[-109.771847,23.811183],[-109.409104,23.364672],[-109.433392,23.185588],[-109.854219,22.818272],[-110.031392,22.823078],[-110.295071,23.430973],[-110.949501,24.000964],[-111.670568,24.484423],[-112.182036,24.738413],[-112.148989,25.470125],[-112.300711,26.012004],[-112.777297,26.32196],[-113.464671,26.768186],[-113.59673,26.63946],[-113.848937,26.900064],[-114.465747,27.14209],[-115.055142,27.722727],[-114.982253,27.7982],[-114.570366,27.741485],[-114.199329,28.115003],[-114.162018,28.566112],[-114.931842,29.279479],[-115.518654,29.556362],[-115.887365,30.180794],[-116.25835,30.836464],[-116.721526,31.635744],[-117.12776,32.53534]],[[-117.12776,32.53534],[-115.99135,32.61239],[-114.72139,32.72083],[-114.815,32.52528],[-113.30498,32.03914],[-111.02361,31.33472],[-109.035,31.34194],[-108.24194,31.34222],[-108.24,31.754854],[-106.50759,31.75452],[-106.1429,31.39995],[-105.63159,31.08383],[-105.03737,30.64402],[-104.70575,30.12173],[-104.45697,29.57196],[-103.94,29.27],[-103.11,28.97],[-102.48,29.76],[-101.6624,29.7793],[-100.9576,29.38071],[-100.45584,28.69612],[-100.11,28.11],[-99.52,27.54],[-99.3,26.84],[-99.02,26.37],[-98.24,26.06],[-97.53,25.84]],[[-97.53,25.84],[-97.140008,25.869997],[-97.528072,24.992144],[-97.702946,24.272343],[-97.776042,22.93258],[-97.872367,22.444212],[-97.699044,21.898689],[-97.38896,21.411019],[-97.189333,20.635433],[-96.525576,19.890931],[-96.292127,19.320371],[-95.900885,18.828024],[-94.839063,18.562717],[-94.42573,18.144371],[-93.548651,18.423837],[-92.786114,18.524839],[-92.037348,18.704569],[-91.407903,18.876083],[-90.77187,19.28412],[-90.53359,19.867418],[-90.451476,20.707522],[-90.278618,20.999855],[-89.601321,21.261726],[-88.543866,21.493675],[-87.658417,21.458846],[-87.05189,21.543543],[-86.811982,21.331515],[-86.845908,20.849865],[-87.383291,20.255405],[-87.621054,19.646553],[-87.43675,19.472403],[-87.58656,19.04013],[-87.837191,18.259816],[-88.090664,18.516648],[-88.300031,18.499982]],[[21.576636,42.245224],[21.91708,42.30364],[22.380526,42.32026]],[[21.02004,40.842727],[20.60518,41.08622],[20.46315,41.51509],[20.59023,41.85541]],[[-12.17075,14.616834],[-11.834208,14.799097],[-11.666078,15.388208],[-11.349095,15.411256],[-10.650791,15.132746],[-10.086846,15.330486],[-9.700255,15.264107],[-9.550238,15.486497],[-5.537744,15.50169],[-5.315277,16.201854],[-5.488523,16.325102],[-5.971129,20.640833],[-6.453787,24.956591],[-4.923337,24.974574]],[[4.267419,19.155265],[4.27021,16.852227],[3.723422,16.184284],[3.638259,15.56812],[2.749993,15.409525],[1.385528,15.323561],[1.015783,14.968182],[.374892,14.928908]],[[-11.513943,12.442988],[-11.467899,12.754519],[-11.553398,13.141214],[-11.927716,13.422075],[-12.124887,13.994727],[-12.17075,14.616834]],[[98.553551,9.93296],[98.457174,10.675266],[98.764546,11.441292],[98.428339,12.032987],[98.509574,13.122378],[98.103604,13.64046],[97.777732,14.837286],[97.597072,16.100568],[97.16454,16.928734],[96.505769,16.427241],[95.369352,15.71439],[94.808405,15.803454],[94.188804,16.037936],[94.533486,17.27724],[94.324817,18.213514],[93.540988,19.366493],[93.663255,19.726962],[93.078278,19.855145],[92.368554,20.670883]],[[100.115988,20.41785],[99.543309,20.186598],[98.959676,19.752981],[98.253724,19.708203],[97.797783,18.62708],[97.375896,18.445438],[97.859123,17.567946],[98.493761,16.837836],[98.903348,16.177824],[98.537376,15.308497],[98.192074,15.123703],[98.430819,14.622028],[99.097755,13.827503],[99.212012,13.269294],[99.196354,12.804748],[99.587286,11.892763],[99.038121,10.960546],[98.553551,9.93296]],[[19.738051,42.688247],[19.30449,42.19574],[19.37177,41.87755],[19.16246,41.95502],[18.88214,42.28151],[18.45,42.48],[18.56,42.65]],[[19.21852,43.52384],[19.48389,43.35229],[19.63,43.21378],[19.95857,43.10604],[20.3398,42.89852],[20.25758,42.81275]],[[87.751264,49.297198],[88.805567,49.470521],[90.713667,50.331812],[92.234712,50.802171]],[[92.234712,50.802171],[93.104219,50.49529],[94.147566,50.480537]],[[94.147566,50.480537],[94.815949,50.013433]],[[94.815949,50.013433],[95.814028,49.977467],[97.259728,49.726061],[98.231762,50.422401]],[[98.231762,50.422401],[97.82574,51.010995],[98.861491,52.047366],[99.981732,51.634006],[100.88948,51.516856]],[[100.88948,51.516856],[102.065223,51.259921],[102.255909,50.510561],[103.676545,50.089966]],[[103.676545,50.089966],[104.621552,50.275329],[105.886591,50.406019]],[[105.886591,50.406019],[106.888804,50.274296],[107.868176,49.793705],[108.475167,49.282548],[109.402449,49.292961],[110.662011,49.130128],[111.581231,49.377968],[112.89774,49.543565],[114.362456,50.248303],[114.96211,50.140247],[115.485695,49.805177],[116.678801,49.888531]],[[34.559989,-11.52002],[35.312398,-11.439146],[36.514082,-11.720938],[36.775151,-11.594537]],[[36.775151,-11.594537],[37.471284,-11.568751],[37.827645,-11.268769],[38.427557,-11.285202]],[[38.427557,-11.285202],[39.52103,-10.896854],[40.316589,-10.317096],[40.478387,-10.765441],[40.437253,-11.761711],[40.560811,-12.639177],[40.59962,-14.201975],[40.775475,-14.691764],[40.477251,-15.406294],[40.089264,-16.100774],[39.452559,-16.720891],[38.538351,-17.101023],[37.411133,-17.586368],[36.281279,-18.659688],[35.896497,-18.84226],[35.1984,-19.552811],[34.786383,-19.784012],[34.701893,-20.497043],[35.176127,-21.254361],[35.373428,-21.840837],[35.385848,-22.14],[35.562546,-22.09],[35.533935,-23.070788],[35.371774,-23.535359],[35.60747,-23.706563],[35.458746,-24.12261],[35.040735,-24.478351],[34.215824,-24.816314],[33.01321,-25.357573],[32.574632,-25.727318],[32.660363,-26.148584],[32.915955,-26.215867],[32.83012,-26.742192]],[[32.83012,-26.742192],[32.071665,-26.73382]],[[32.071665,-26.73382],[31.985779,-26.29178],[31.837778,-25.843332]],[[31.837778,-25.843332],[31.752408,-25.484284],[31.930589,-24.369417],[31.670398,-23.658969],[31.191409,-22.25151]],[[31.191409,-22.25151],[32.244988,-21.116489],[32.508693,-20.395292],[32.659743,-20.30429],[32.772708,-19.715592],[32.611994,-19.419383],[32.654886,-18.67209],[32.849861,-17.979057],[32.847639,-16.713398],[32.328239,-16.392074],[31.852041,-16.319417],[31.636498,-16.07199],[31.173064,-15.860944],[30.338955,-15.880839],[30.274256,-15.507787]],[[30.274256,-15.507787],[30.179481,-14.796099],[33.214025,-13.97186]],[[33.214025,-13.97186],[33.7897,-14.451831],[34.064825,-14.35995],[34.459633,-14.61301],[34.517666,-15.013709],[34.307291,-15.478641],[34.381292,-16.18356],[35.03381,-16.8013],[35.339063,-16.10744],[35.771905,-15.896859],[35.686845,-14.611046],[35.267956,-13.887834],[34.907151,-13.565425],[34.559989,-13.579998],[34.280006,-12.280025],[34.559989,-11.52002]],[[-12.17075,14.616834],[-12.830658,15.303692],[-13.435738,16.039383],[-14.099521,16.304302],[-14.577348,16.598264],[-15.135737,16.587282],[-15.623666,16.369337],[-16.12069,16.455663],[-16.463098,16.135036]],[[-16.463098,16.135036],[-16.549708,16.673892],[-16.270552,17.166963],[-16.146347,18.108482],[-16.256883,19.096716],[-16.377651,19.593817],[-16.277838,20.092521],[-16.536324,20.567866],[-17.063423,20.999752]],[[-17.063423,20.999752],[-16.845194,21.333323],[-12.929102,21.327071],[-13.118754,22.77122],[-12.874222,23.284832],[-11.937224,23.374594],[-11.969419,25.933353],[-8.687294,25.881056],[-8.6844,27.395744]],[[33.214025,-13.97186],[32.688165,-13.712858],[32.991764,-12.783871],[33.306422,-12.435778],[33.114289,-11.607198],[33.31531,-10.79655],[33.485688,-10.525559],[33.231388,-9.676722],[32.759375,-9.230599]],[[32.759375,-9.230599],[33.739729,-9.417151],[33.940838,-9.693674]],[[33.940838,-9.693674],[34.280006,-10.16],[34.559989,-11.52002]],[[102.141187,6.221636],[102.371147,6.128205],[102.961705,5.524495],[103.381215,4.855001],[103.438575,4.181606],[103.332122,3.726698],[103.429429,3.382869],[103.502448,2.791019],[103.854674,2.515454],[104.24920028287048,1.629873113952467],[104.28557629432274,1.373567897681572],[104.126080087493,1.27402861451777]],[[104.126080087493,1.27402861451777],[103.74037541366759,1.131348126577838],[103.562828617596,1.19209804885879]],[[103.562828617596,1.19209804885879],[102.573615,1.967115],[101.390638,2.760814],[101.27354,3.270292],[100.695435,3.93914],[100.557408,4.76728],[100.196706,5.312493],[100.30626,6.040562],[100.085757,6.464489]],[[100.085757,6.464489],[100.259596,6.642825],[101.075516,6.204867],[101.154219,5.691384],[101.814282,5.810808],[102.141187,6.221636]],[[109.66326,2.006467],[110.396135,1.663775],[111.168853,1.850637],[111.370081,2.697303],[111.796928,2.885897],[112.995615,3.102395],[113.712935,3.893509],[114.204017,4.525874]],[[115.45071,5.44773],[116.220741,6.143191],[116.725103,6.924771],[117.129626,6.928053],[117.643393,6.422166],[117.689075,5.98749],[118.347691,5.708696],[119.181904,5.407836],[119.110694,5.016128],[118.439727,4.966519],[118.618321,4.478202],[117.882035,4.137551]],[[16.344977,-28.576705],[15.601818,-27.821247],[15.210472,-27.090956],[14.989711,-26.117372],[14.743214,-25.39292],[14.408144,-23.853014],[14.385717,-22.656653],[14.257714,-22.111208],[13.868642,-21.699037],[13.352498,-20.872834],[12.826845,-19.673166],[12.608564,-19.045349],[11.794919,-18.069129],[11.734199,-17.301889]],[[23.215048,-17.523116],[24.033862,-17.295843],[24.682349,-17.353411],[25.07695,-17.578823],[25.084443,-17.661816]],[[19.895768,-24.76779],[19.894734,-28.461105],[19.002127,-28.972443],[18.464899,-29.045462],[17.836152,-28.856378],[17.387497,-28.783514],[17.218929,-28.355943],[16.824017,-28.082162],[16.344977,-28.576705]],[[165.77999,-21.080005],[166.599991,-21.700019],[167.120011,-22.159991],[166.740035,-22.399976],[166.189732,-22.129708],[165.474375,-21.679607],[164.829815,-21.14982],[164.167995,-20.444747],[164.029606,-20.105646],[164.459967,-20.120012],[165.020036,-20.459991],[165.460009,-20.800022],[165.77999,-21.080005]],[[14.8513,22.86295],[15.096888,21.308519]],[[15.096888,21.308519],[15.471077,21.048457],[15.487148,20.730415]],[[15.487148,20.730415],[15.903247,20.387619],[15.685741,19.95718],[15.300441,17.92795],[15.247731,16.627306]],[[15.247731,16.627306],[13.972202,15.684366],[13.540394,14.367134]],[[13.540394,14.367134],[13.956699,13.996691],[13.954477,13.353449],[14.595781,13.330427],[14.495787,12.859396]],[[14.181336,12.483657],[13.995353,12.461565],[13.318702,13.556356],[13.083987,13.596147],[12.302071,13.037189],[11.527803,13.32898],[10.989593,13.387323],[10.701032,13.246918],[10.114814,13.277252],[9.524928,12.851102],[9.014933,12.826659],[7.804671,13.343527],[7.330747,13.098038],[6.820442,13.115091],[6.445426,13.492768],[5.443058,13.865924],[4.368344,13.747482],[4.107946,13.531216],[3.967283,12.956109],[3.680634,12.552903],[3.61118,11.660167]],[[8.500288,4.771983],[7.462108,4.412108],[7.082596,4.464689],[6.698072,4.240594],[5.898173,4.262453],[5.362805,4.887971],[5.033574,5.611802],[4.325607,6.270651],[3.57418,6.2583],[2.691702,6.258817]],[[-85.71254,11.088445],[-86.058488,11.403439],[-86.52585,11.806877],[-86.745992,12.143962],[-87.167516,12.458258],[-87.668493,12.90991],[-87.557467,13.064552],[-87.392386,12.914018],[-87.316654,12.984686]],[[-83.147219,14.995829],[-83.233234,14.899866],[-83.284162,14.676624],[-83.182126,14.310703],[-83.4125,13.970078],[-83.519832,13.567699],[-83.552207,13.127054],[-83.498515,12.869292],[-83.473323,12.419087],[-83.626104,12.32085],[-83.719613,11.893124],[-83.650858,11.629032],[-83.85547,11.373311],[-83.808936,11.103044],[-83.655612,10.938764]],[[4.047071,51.267259],[3.314971,51.345755],[3.830289,51.620545],[4.705997,53.091798],[6.074183,53.510403],[6.90514,53.482162]],[[20.645593,69.106247],[20.025269,69.065139],[19.87856,68.407194],[17.993868,68.567391],[17.729182,68.010552],[16.768879,68.013937],[16.108712,67.302456],[15.108411,66.193867],[13.55569,64.787028],[13.919905,64.445421],[13.571916,64.049114],[12.579935,64.066219],[11.930569,63.128318],[11.992064,61.800362],[12.631147,61.293572],[12.300366,60.117933],[11.468272,59.432393],[11.027369,58.856149]],[[11.027369,58.856149],[10.356557,59.469807],[8.382,58.313288],[7.048748,58.078884],[5.665835,58.588155],[5.308234,59.663232],[4.992078,61.970998],[5.9129,62.614473],[8.553411,63.454008],[10.527709,64.486038],[12.358347,65.879726],[14.761146,67.810642],[16.435927,68.563205],[19.184028,69.817444],[21.378416,70.255169],[23.023742,70.202072],[24.546543,71.030497],[26.37005,70.986262],[28.165547,71.185474],[31.293418,70.453788],[30.005435,70.186259],[31.101079,69.55808],[29.399581,69.156916],[28.59193,69.064777]],[[24.72412,77.85385],[22.49032,77.44493],[20.72601,77.67704],[21.41611,77.93504],[20.8119,78.25463],[22.88426,78.45494],[23.28134,78.07954],[24.72412,77.85385]],[[18.25183,79.70175],[21.54383,78.95611],[19.02737,78.5626],[18.47172,77.82669],[17.59441,77.63796],[17.1182,76.80941],[15.91315,76.77045],[13.76259,77.38035],[14.66956,77.73565],[13.1706,78.02493],[11.22231,78.8693],[10.44453,79.65239],[13.17077,80.01046],[13.71852,79.66039],[15.14282,79.67431],[15.52255,80.01608],[16.99085,80.05086],[18.25183,79.70175]],[[25.447625,80.40734],[27.407506,80.056406],[25.924651,79.517834],[23.024466,79.400012],[20.075188,79.566823],[19.897266,79.842362],[18.462264,79.85988],[17.368015,80.318896],[20.455992,80.598156],[21.907945,80.357679],[22.919253,80.657144],[25.447625,80.40734]],[[173.020375,-40.919052],[173.247234,-41.331999],[173.958405,-40.926701],[174.247587,-41.349155],[174.248517,-41.770008],[173.876447,-42.233184],[173.22274,-42.970038],[172.711246,-43.372288],[173.080113,-43.853344],[172.308584,-43.865694],[171.452925,-44.242519],[171.185138,-44.897104],[170.616697,-45.908929],[169.831422,-46.355775],[169.332331,-46.641235],[168.411354,-46.619945],[167.763745,-46.290197],[166.676886,-46.219917],[166.509144,-45.852705],[167.046424,-45.110941],[168.303763,-44.123973],[168.949409,-43.935819],[169.667815,-43.555326],[170.52492,-43.031688],[171.12509,-42.512754],[171.569714,-41.767424],[171.948709,-41.514417],[172.097227,-40.956104],[172.79858,-40.493962],[173.020375,-40.919052]],[[174.612009,-36.156397],[175.336616,-37.209098],[175.357596,-36.526194],[175.808887,-36.798942],[175.95849,-37.555382],[176.763195,-37.881253],[177.438813,-37.961248],[178.010354,-37.579825],[178.517094,-37.695373],[178.274731,-38.582813],[177.97046,-39.166343],[177.206993,-39.145776],[176.939981,-39.449736],[177.032946,-39.879943],[176.885824,-40.065978],[176.508017,-40.604808],[176.01244,-41.289624],[175.239567,-41.688308],[175.067898,-41.425895],[174.650973,-41.281821],[175.22763,-40.459236],[174.900157,-39.908933],[173.824047,-39.508854],[173.852262,-39.146602],[174.574802,-38.797683],[174.743474,-38.027808],[174.697017,-37.381129],[174.292028,-36.711092],[174.319004,-36.534824],[173.840997,-36.121981],[173.054171,-35.237125],[172.636005,-34.529107],[173.007042,-34.450662],[173.551298,-35.006183],[174.32939,-35.265496],[174.612009,-36.156397]],[[53.108573,16.651051],[52.782184,17.349742],[52.00001,19.000003]],[[52.00001,19.000003],[54.999982,19.999994],[55.666659,22.000001],[55.208341,22.70833]],[[56.396847,24.924732],[56.84514,24.241673],[57.403453,23.878594],[58.136948,23.747931],[58.729211,23.565668],[59.180502,22.992395],[59.450098,22.660271],[59.80806,22.533612],[59.806148,22.310525],[59.442191,21.714541],[59.282408,21.433886],[58.861141,21.114035],[58.487986,20.428986],[58.034318,20.481437],[57.826373,20.243002],[57.665762,19.736005],[57.7887,19.06757],[57.694391,18.94471],[57.234264,18.947991],[56.609651,18.574267],[56.512189,18.087113],[56.283521,17.876067],[55.661492,17.884128],[55.269939,17.632309],[55.2749,17.228354],[54.791002,16.950697],[54.239253,17.044981],[53.570508,16.707663],[53.108573,16.651051]],[[56.070821,26.055464],[56.362017,26.395934],[56.485679,26.309118],[56.391421,25.895991],[56.261042,25.714606]],[[68.176645,23.691965],[67.443667,23.944844],[67.145442,24.663611],[66.372828,25.425141],[64.530408,25.237039],[62.905701,25.218409],[61.497363,25.078237]],[[-77.881571,7.223771],[-78.214936,7.512255],[-78.429161,8.052041],[-78.182096,8.319182],[-78.435465,8.387705],[-78.622121,8.718124],[-79.120307,8.996092],[-79.557877,8.932375],[-79.760578,8.584515],[-80.164481,8.333316],[-80.382659,8.298409],[-80.480689,8.090308],[-80.00369,7.547524],[-80.276671,7.419754],[-80.421158,7.271572],[-80.886401,7.220541],[-81.059543,7.817921],[-81.189716,7.647906],[-81.519515,7.70661],[-81.721311,8.108963],[-82.131441,8.175393],[-82.390934,8.292362],[-82.820081,8.290864],[-82.850958,8.073823],[-82.965783,8.225028]],[[-82.546196,9.566135],[-82.187123,9.207449],[-82.207586,8.995575],[-81.808567,8.950617],[-81.714154,9.031955],[-81.439287,8.786234],[-80.947302,8.858504],[-80.521901,9.111072],[-79.9146,9.312765],[-79.573303,9.61161],[-79.021192,9.552931],[-79.05845,9.454565],[-78.500888,9.420459],[-78.055928,9.24773],[-77.729514,8.946844],[-77.353361,8.670505]],[[-70.372572,-18.347975],[-71.37525,-17.773799],[-71.462041,-17.363488],[-73.44453,-16.359363],[-75.237883,-15.265683],[-76.009205,-14.649286],[-76.423469,-13.823187],[-76.259242,-13.535039],[-77.106192,-12.222716],[-78.092153,-10.377712],[-79.036953,-8.386568],[-79.44592,-7.930833],[-79.760578,-7.194341],[-80.537482,-6.541668],[-81.249996,-6.136834],[-80.926347,-5.690557],[-81.410943,-4.736765],[-81.09967,-4.036394],[-80.302561,-3.404856]],[[126.376814,8.414706],[126.478513,7.750354],[126.537424,7.189381],[126.196773,6.274294],[125.831421,7.293715],[125.363852,6.786485],[125.683161,6.049657],[125.396512,5.581003],[124.219788,6.161355],[123.93872,6.885136],[124.243662,7.36061],[123.610212,7.833527],[123.296071,7.418876],[122.825506,7.457375],[122.085499,6.899424],[121.919928,7.192119],[122.312359,8.034962],[122.942398,8.316237],[123.487688,8.69301],[123.841154,8.240324],[124.60147,8.514158],[124.764612,8.960409],[125.471391,8.986997],[125.412118,9.760335],[126.222714,9.286074],[126.306637,8.782487],[126.376814,8.414706]],[[123.982438,10.278779],[123.623183,9.950091],[123.309921,9.318269],[122.995883,9.022189],[122.380055,9.713361],[122.586089,9.981045],[122.837081,10.261157],[122.947411,10.881868],[123.49885,10.940624],[123.337774,10.267384],[124.077936,11.232726],[123.982438,10.278779]],[[118.504581,9.316383],[117.174275,8.3675],[117.664477,9.066889],[118.386914,9.6845],[118.987342,10.376292],[119.511496,11.369668],[119.689677,10.554291],[119.029458,10.003653],[118.504581,9.316383]],[[121.883548,11.891755],[122.483821,11.582187],[123.120217,11.58366],[123.100838,11.165934],[122.637714,10.741308],[122.00261,10.441017],[121.967367,10.905691],[122.03837,11.415841],[121.883548,11.891755]],[[125.502552,12.162695],[125.783465,11.046122],[125.011884,11.311455],[125.032761,10.975816],[125.277449,10.358722],[124.801819,10.134679],[124.760168,10.837995],[124.459101,10.88993],[124.302522,11.495371],[124.891013,11.415583],[124.87799,11.79419],[124.266762,12.557761],[125.227116,12.535721],[125.502552,12.162695]],[[121.527394,13.06959],[121.26219,12.20556],[120.833896,12.704496],[120.323436,13.466413],[121.180128,13.429697],[121.527394,13.06959]],[[121.321308,18.504065],[121.937601,18.218552],[122.246006,18.47895],[122.336957,18.224883],[122.174279,17.810283],[122.515654,17.093505],[122.252311,16.262444],[121.662786,15.931018],[121.50507,15.124814],[121.728829,14.328376],[122.258925,14.218202],[122.701276,14.336541],[123.950295,13.782131],[123.855107,13.237771],[124.181289,12.997527],[124.077419,12.536677],[123.298035,13.027526],[122.928652,13.55292],[122.671355,13.185836],[122.03465,13.784482],[121.126385,13.636687],[120.628637,13.857656],[120.679384,14.271016],[120.991819,14.525393],[120.693336,14.756671],[120.564145,14.396279],[120.070429,14.970869],[119.920929,15.406347],[119.883773,16.363704],[120.286488,16.034629],[120.390047,17.599081],[120.715867,18.505227],[121.321308,18.504065]],[[155.880026,-6.819997],[155.599991,-6.919991],[155.166994,-6.535931],[154.729192,-5.900828],[154.514114,-5.139118],[154.652504,-5.042431],[154.759991,-5.339984],[155.062918,-5.566792],[155.547746,-6.200655],[156.019965,-6.540014],[155.880026,-6.819997]],[[151.982796,-5.478063],[151.459107,-5.56028],[151.30139,-5.840728],[150.754447,-6.083763],[150.241197,-6.317754],[149.709963,-6.316513],[148.890065,-6.02604],[148.318937,-5.747142],[148.401826,-5.437756],[149.298412,-5.583742],[149.845562,-5.505503],[149.99625,-5.026101],[150.139756,-5.001348],[150.236908,-5.53222],[150.807467,-5.455842],[151.089672,-5.113693],[151.647881,-4.757074],[151.537862,-4.167807],[152.136792,-4.14879],[152.338743,-4.312966],[152.318693,-4.867661],[151.982796,-5.478063]],[[141.00021,-2.600151],[142.735247,-3.289153],[144.583971,-3.861418],[145.27318,-4.373738],[145.829786,-4.876498],[145.981922,-5.465609],[147.648073,-6.083659],[147.891108,-6.614015],[146.970905,-6.721657],[147.191874,-7.388024],[148.084636,-8.044108],[148.734105,-9.104664],[149.306835,-9.071436],[149.266631,-9.514406],[150.038728,-9.684318],[149.738798,-9.872937],[150.801628,-10.293687],[150.690575,-10.582713],[150.028393,-10.652476],[149.78231,-10.393267],[148.923138,-10.280923],[147.913018,-10.130441],[147.135443,-9.492444],[146.567881,-8.942555],[146.048481,-8.067414],[144.744168,-7.630128],[143.897088,-7.91533],[143.286376,-8.245491],[143.413913,-8.983069],[142.628431,-9.326821],[142.068259,-9.159596],[141.033852,-9.117893]],[[153.140038,-4.499983],[152.827292,-4.766427],[152.638673,-4.176127],[152.406026,-3.789743],[151.953237,-3.462062],[151.384279,-3.035422],[150.66205,-2.741486],[150.939965,-2.500002],[151.479984,-2.779985],[151.820015,-2.999972],[152.239989,-3.240009],[152.640017,-3.659983],[153.019994,-3.980015],[153.140038,-4.499983]],[[14.119686,53.757029],[14.8029,54.050706],[16.363477,54.513159],[17.622832,54.851536],[18.620859,54.682606],[18.696255,54.438719],[19.66064,54.426084]],[[19.66064,54.426084],[20.892245,54.312525],[22.731099,54.327537]],[[23.527071,51.578454],[24.029986,50.705407],[23.922757,50.424881],[23.426508,50.308506],[22.51845,49.476774],[22.776419,49.027395],[22.558138,49.085738]],[[22.558138,49.085738],[21.607808,49.470107],[20.887955,49.328772],[20.415839,49.431453],[19.825023,49.217125],[19.320713,49.571574],[18.909575,49.435846],[18.853144,49.49623]],[[-66.282434,18.514762],[-65.771303,18.426679],[-65.591004,18.228035],[-65.847164,17.975906],[-66.599934,17.981823],[-67.184162,17.946553],[-67.242428,18.37446],[-67.100679,18.520601],[-66.282434,18.514762]],[[130.640016,42.395009],[130.780007,42.220007],[130.400031,42.280004],[129.965949,41.941368],[129.667362,41.601104],[129.705189,40.882828],[129.188115,40.661808],[129.0104,40.485436],[128.633368,40.189847],[127.967414,40.025413],[127.533436,39.75685],[127.50212,39.323931],[127.385434,39.213472],[127.783343,39.050898],[128.349716,38.612243]],[[126.174759,37.749686],[125.689104,37.94001],[125.568439,37.752089],[125.27533,37.669071],[125.240087,37.857224],[124.981033,37.948821],[124.712161,38.108346],[124.985994,38.548474],[125.221949,38.665857],[125.132859,38.848559],[125.38659,39.387958],[125.321116,39.551385],[124.737482,39.660344],[124.265625,39.928493]],[[-7.453726,37.097788],[-7.855613,36.838269],[-8.382816,36.97888],[-8.898857,36.868809],[-8.746101,37.651346],[-8.839998,38.266243],[-9.287464,38.358486],[-9.526571,38.737429],[-9.446989,39.392066],[-9.048305,39.755093],[-8.977353,40.159306],[-8.768684,40.760639],[-8.790853,41.184334],[-8.990789,41.543459],[-9.034818,41.880571]],[[50.810108,24.754743],[50.743911,25.482424],[51.013352,26.006992],[51.286462,26.114582],[51.589079,25.801113],[51.6067,25.21567],[51.389608,24.627386]],[[51.389608,24.627386],[51.112415,24.556331],[50.810108,24.754743]],[[22.710531,47.882194],[23.142236,48.096341],[23.760958,47.985598],[24.402056,47.981878],[24.866317,47.737526],[25.207743,47.891056],[25.945941,47.987149],[26.19745,48.220881],[26.619337,48.220726]],[[28.233554,45.488283],[28.679779,45.304031],[29.149725,45.464925],[29.603289,45.293308]],[[29.603289,45.293308],[29.626543,45.035391],[29.141612,44.82021],[28.837858,44.913874],[28.558081,43.707462]],[[22.65715,44.234923],[22.474008,44.409228],[22.705726,44.578003],[22.459022,44.702517],[22.145088,44.478422],[21.562023,44.768947],[21.483526,45.18117],[20.874313,45.416375],[20.762175,45.734573],[20.220192,46.127469]],[[143.648007,50.7476],[144.654148,48.976391],[143.173928,49.306551],[142.558668,47.861575],[143.533492,46.836728],[143.505277,46.137908],[142.747701,46.740765],[142.09203,45.966755],[141.906925,46.805929],[142.018443,47.780133],[141.904445,48.859189],[142.1358,49.615163],[142.179983,50.952342],[141.594076,51.935435],[141.682546,53.301966],[142.606934,53.762145],[142.209749,54.225476],[142.654786,54.365881],[142.914616,53.704578],[143.260848,52.74076],[143.235268,51.75666],[143.648007,50.7476]],[[19.66064,54.426084],[19.888481,54.86616],[21.268449,55.190482]],[[-175.01425,66.58435],[-174.33983,66.33556],[-174.57182,67.06219],[-171.85731,66.91308],[-169.89958,65.97724],[-170.89107,65.54139],[-172.53025,65.43791],[-172.555,64.46079],[-172.95533,64.25269],[-173.89184,64.2826],[-174.65392,64.63125],[-175.98353,64.92288],[-176.20716,65.35667],[-177.22266,65.52024],[-178.35993,65.39052],[-178.90332,65.74044],[-178.68611,66.11211],[-179.88377,65.87456],[-179.43268,65.40411],[-180,64.979709],[-180,68.963636],[-177.55,68.2],[-174.92825,67.20589],[-175.01425,66.58435]],[[180,70.832199],[178.903425,70.78114],[178.7253,71.0988],[180,71.515714],[180,70.832199]],[[-178.69378,70.89302],[-180,70.832199],[-180,71.515714],[-179.871875,71.55762],[-179.02433,71.55553],[-177.577945,71.26948],[-177.663575,71.13277],[-178.69378,70.89302]],[[143.60385,73.21244],[142.08763,73.20544],[140.038155,73.31692],[139.86312,73.36983],[140.81171,73.76506],[142.06207,73.85758],[143.48283,73.47525],[143.60385,73.21244]],[[150.73167,75.08406],[149.575925,74.68892],[147.977465,74.778355],[146.11919,75.17298],[146.358485,75.49682],[148.22223,75.345845],[150.73167,75.08406]],[[145.086285,75.562625],[144.3,74.82],[140.61381,74.84768],[138.95544,74.61148],[136.97439,75.26167],[137.51176,75.94917],[138.831075,76.13676],[141.471615,76.09289],[145.086285,75.562625]],[[57.535693,70.720464],[56.944979,70.632743],[53.677375,70.762658],[53.412017,71.206662],[51.601895,71.474759],[51.455754,72.014881],[52.478275,72.229442],[52.444169,72.774731],[54.427614,73.627548],[53.50829,73.749814],[55.902459,74.627486],[55.631933,75.081412],[57.868644,75.60939],[61.170044,76.251883],[64.498368,76.439055],[66.210977,76.809782],[68.15706,76.939697],[68.852211,76.544811],[68.180573,76.233642],[64.637326,75.737755],[61.583508,75.260885],[58.477082,74.309056],[56.986786,73.333044],[55.419336,72.371268],[55.622838,71.540595],[57.535693,70.720464]],[[131.288555,44.11152],[131.02519,44.96796],[131.883454,45.321162]],[[131.883454,45.321162],[133.09712,45.14409],[133.769644,46.116927]],[[133.769644,46.116927],[134.11235,47.21248],[134.50081,47.57845],[135.026311,48.47823]],[[133.373596,48.183442],[132.50669,47.78896],[130.98726,47.79013],[130.582293,48.729687]],[[129.397818,49.4406],[127.6574,49.76027],[127.287456,50.739797]],[[125.068211,53.161045],[123.57147,53.4588],[122.245748,53.431726]],[[120.725789,52.516226],[120.7382,51.96411],[120.18208,51.64355],[119.27939,50.58292],[119.288461,50.142883]],[[105.886591,50.406019],[104.62158,50.27532],[103.676545,50.089966]],[[103.676545,50.089966],[102.25589,50.51056],[102.06521,51.25991],[100.88948,51.516856]],[[98.231762,50.422401],[97.25976,49.72605],[95.81402,49.97746],[94.815949,50.013433]],[[94.147566,50.480537],[93.10421,50.49529],[92.234712,50.802171]],[[76.8911,54.490524],[74.38482,53.54685],[73.425679,53.48981]],[[68.1691,54.970392],[65.66687,54.60125],[65.178534,54.354228]],[[65.178534,54.354228],[61.4366,54.00625],[60.978066,53.664993]],[[59.642282,50.545442],[58.36332,51.06364],[56.77798,51.04355],[55.71694,50.62171],[54.532878,51.02624]],[[46.466446,48.394152],[47.31524,47.71585],[48.05725,47.74377],[48.694734,47.075628]],[[48.694734,47.075628],[48.59325,46.56104],[49.10116,46.39933]],[[49.10116,46.39933],[48.64541,45.80629],[47.67591,45.64149],[46.68201,44.6092],[47.59094,43.66016],[47.49252,42.98658],[48.58437,41.80888],[47.987283,41.405819]],[[46.404951,41.860675],[45.7764,42.09244],[45.470279,42.502781]],[[44.537623,42.711993],[43.93121,42.55496],[43.75599,42.74083],[42.3944,43.2203],[40.92219,43.38215],[40.076965,43.553104]],[[39.955009,43.434998],[38.68,44.28],[37.53912,44.65721],[36.67546,45.24469],[37.40317,45.40451],[38.23295,46.24087],[37.67372,46.63657],[39.14767,47.04475],[39.1212,47.26336],[38.223538,47.10219]],[[38.223538,47.10219],[38.255112,47.5464]],[[38.255112,47.5464],[38.77057,47.82562],[39.738278,47.898937]],[[39.738278,47.898937],[39.89562,48.23241],[39.67465,48.78382],[40.080789,49.30743]],[[40.080789,49.30743],[40.06904,49.60105],[38.594988,49.926462]],[[38.594988,49.926462],[38.010631,49.915662],[37.39346,50.383953],[36.626168,50.225591],[35.356116,50.577197]],[[35.356116,50.577197],[35.37791,50.77394],[35.022183,51.207572]],[[35.022183,51.207572],[34.224816,51.255993],[34.141978,51.566413],[34.391731,51.768882],[33.7527,52.335075],[32.715761,52.238465],[32.412058,52.288695]],[[32.412058,52.288695],[32.15944,52.06125],[31.78597,52.10168],[31.540018,52.742052]],[[31.305201,53.073996],[31.49764,53.16743],[32.304519,53.132726]],[[27.716686,57.791899],[27.42015,58.72457],[28.131699,59.300825]],[[28.131699,59.300825],[27.98112,59.47537],[29.1177,60.02805],[28.07,60.50352],[30.211107,61.780028]],[[28.59193,69.064777],[29.39955,69.15692],[31.10108,69.55811],[32.13272,69.90595],[33.77547,69.30142],[36.51396,69.06342],[40.29234,67.9324],[41.05987,67.45713],[41.12595,66.79158],[40.01583,66.26618],[38.38295,65.99953],[33.91871,66.75961],[33.18444,66.63253],[34.81477,65.90015],[34.878574,65.436213],[34.94391,64.41437],[36.23129,64.10945],[37.01273,63.84983],[37.14197,64.33471],[36.539579,64.76446],[37.17604,65.14322],[39.59345,64.52079],[40.4356,64.76446],[39.7626,65.49682],[42.09309,66.47623],[43.01604,66.41858],[43.94975,66.06908],[44.53226,66.75634],[43.69839,67.35245],[44.18795,67.95051],[43.45282,68.57079],[46.25,68.25],[46.82134,67.68997],[45.55517,67.56652],[45.56202,67.01005],[46.34915,66.66767],[47.89416,66.88455],[48.13876,67.52238],[50.22766,67.99867],[53.71743,68.85738],[54.47171,68.80815],[53.48582,68.20131],[54.72628,68.09702],[55.44268,68.43866],[57.31702,68.46628],[58.802,68.88082],[59.94142,68.27844],[61.07784,68.94069],[60.03,69.52],[60.55,69.85],[63.504,69.54739],[64.888115,69.234835],[68.51216,68.09233],[69.18068,68.61563],[68.16444,69.14436],[68.13522,69.35649],[66.93008,69.45461],[67.25976,69.92873],[66.72492,70.70889],[66.69466,71.02897],[68.54006,71.9345],[69.19636,72.84336],[69.94,73.04],[72.58754,72.77629],[72.79603,72.22006],[71.84811,71.40898],[72.47011,71.09019],[72.79188,70.39114],[72.5647,69.02085],[73.66787,68.4079],[73.2387,67.7404],[71.28,66.32],[72.42301,66.17267],[72.82077,66.53267],[73.92099,66.78946],[74.18651,67.28429],[75.052,67.76047],[74.46926,68.32899],[74.93584,68.98918],[73.84236,69.07146],[73.60187,69.62763],[74.3998,70.63175],[73.1011,71.44717],[74.89082,72.12119],[74.65926,72.83227],[75.15801,72.85497],[75.68351,72.30056],[75.28898,71.33556],[76.35911,71.15287],[75.90313,71.87401],[77.57665,72.26717],[79.65202,72.32011],[81.5,71.75],[80.61071,72.58285],[80.51109,73.6482],[82.25,73.85],[84.65526,73.80591],[86.8223,73.93688],[86.00956,74.45967],[87.16682,75.11643],[88.31571,75.14393],[90.26,75.64],[92.90058,75.77333],[93.23421,76.0472],[95.86,76.14],[96.67821,75.91548],[98.92254,76.44689],[100.75967,76.43028],[101.03532,76.86189],[101.99084,77.28754],[104.3516,77.69792],[106.06664,77.37389],[104.705,77.1274],[106.97013,76.97419],[107.24,76.48],[108.1538,76.72335],[111.07726,76.71],[113.33151,76.22224],[114.13417,75.84764],[113.88539,75.32779],[112.77918,75.03186],[110.15125,74.47673],[109.4,74.18],[110.64,74.04],[112.11919,73.78774],[113.01954,73.97693],[113.52958,73.33505],[113.96881,73.59488],[115.56782,73.75285],[118.77633,73.58772],[119.02,73.12],[123.20066,72.97122],[123.25777,73.73503],[125.38,73.56],[126.97644,73.56549],[128.59126,73.03871],[129.05157,72.39872],[128.46,71.98],[129.71599,71.19304],[131.28858,70.78699],[132.2535,71.8363],[133.85766,71.38642],[135.56193,71.65525],[137.49755,71.34763],[138.23409,71.62803],[139.86983,71.48783],[139.14791,72.41619],[140.46817,72.84941],[149.5,72.2],[150.35118,71.60643],[152.9689,70.84222],[157.00688,71.03141],[158.99779,70.86672],[159.83031,70.45324],[159.70866,69.72198],[160.94053,69.43728],[162.27907,69.64204],[164.05248,69.66823],[165.94037,69.47199],[167.83567,69.58269],[169.57763,68.6938],[170.81688,69.01363],[170.0082,69.65276],[170.45345,70.09703],[173.64391,69.81743],[175.72403,69.87725],[178.6,69.4],[180,68.963636],[180,64.979709],[179.99281,64.97433],[178.7072,64.53493],[177.41128,64.60821],[178.313,64.07593],[178.90825,63.25197],[179.37034,62.98262],[179.48636,62.56894],[179.22825,62.3041],[177.3643,62.5219],[174.56929,61.76915],[173.68013,61.65261],[172.15,60.95],[170.6985,60.33618],[170.33085,59.88177],[168.90046,60.57355],[166.29498,59.78855],[165.84,60.16],[164.87674,59.7316],[163.53929,59.86871],[163.21711,59.21101],[162.01733,58.24328],[162.05297,57.83912],[163.19191,57.61503],[163.05794,56.15924],[162.12958,56.12219],[161.70146,55.28568],[162.11749,54.85514],[160.36877,54.34433],[160.02173,53.20257],[158.53094,52.95868],[158.23118,51.94269],[156.78979,51.01105],[156.42,51.7],[155.99182,53.15895],[155.43366,55.38103],[155.91442,56.76792],[156.75815,57.3647],[156.81035,57.83204],[158.36433,58.05575],[160.15064,59.31477],[161.87204,60.343],[163.66969,61.1409],[164.47355,62.55061],[163.25842,62.46627],[162.65791,61.6425],[160.12148,60.54423],[159.30232,61.77396],[156.72068,61.43442],[154.21806,59.75818],[155.04375,59.14495],[152.81185,58.88385],[151.26573,58.78089],[151.33815,59.50396],[149.78371,59.65573],[148.54481,59.16448],[145.48722,59.33637],[142.19782,59.03998],[138.95848,57.08805],[135.12619,54.72959],[136.70171,54.60355],[137.19342,53.97732],[138.1647,53.75501],[138.80463,54.25455],[139.90151,54.18968],[141.34531,53.08957],[141.37923,52.23877],[140.59742,51.23967],[140.51308,50.04553],[140.06193,48.44671],[138.55472,46.99965],[138.21971,46.30795],[136.86232,45.1435],[135.51535,43.989],[134.86939,43.39821],[133.53687,42.81147],[132.90627,42.79849],[132.27807,43.28456],[130.93587,42.55274],[130.78,42.22],[130.64,42.395],[130.633866,42.903015]],[[105.07547,78.30689],[99.43814,77.921],[101.2649,79.23399],[102.08635,79.34641],[102.837815,79.28129],[105.37243,78.71334],[105.07547,78.30689]],[[51.136187,80.54728],[49.793685,80.415428],[48.894411,80.339567],[48.754937,80.175468],[47.586119,80.010181],[46.502826,80.247247],[47.072455,80.559424],[44.846958,80.58981],[46.799139,80.771918],[48.318477,80.78401],[48.522806,80.514569],[49.09719,80.753986],[50.039768,80.918885],[51.522933,80.699726],[51.136187,80.54728]],[[99.93976,78.88094],[97.75794,78.7562],[94.97259,79.044745],[93.31288,79.4265],[92.5454,80.14379],[91.18107,80.34146],[93.77766,81.0246],[95.940895,81.2504],[97.88385,80.746975],[100.186655,79.780135],[99.93976,78.88094]],[[30.419105,-1.134659],[30.816135,-1.698914],[30.758309,-2.28725]],[[30.758309,-2.28725],[30.469696,-2.413858]],[[29.579466,-1.341313],[29.821519,-1.443322],[30.419105,-1.134659]],[[-17.063423,20.999752],[-17.021343423606428,21.413313149941047],[-16.975648775331546,21.891687698419226],[-16.58061690573147,22.164556507225765],[-16.26002753409497,22.681019518875157],[-16.326419672079705,23.016952258555825],[-15.985200461416207,23.727032109699284],[-15.426731727820668,24.361869528783902],[-15.090619655087165,24.520185930758263],[-14.825599019285237,25.104586394725832],[-14.798998208222914,25.636368397001075],[-14.436699125374576,26.254418099501397],[-13.775188821299968,26.62089094274117],[-13.411005014422669,27.201816644327014],[-13.264710152455724,27.443546935398597],[-13.0953665818028,27.6]],[[42.779332,16.347891],[42.649573,16.774635],[42.347989,17.075806],[42.270888,17.474722],[41.754382,17.833046],[41.221391,18.6716],[40.939341,19.486485],[40.247652,20.174635],[39.801685,20.338862],[39.139399,21.291905],[39.023696,21.986875],[39.066329,22.579656],[38.492772,23.688451],[38.02386,24.078686],[37.483635,24.285495],[37.154818,24.858483],[37.209491,25.084542],[36.931627,25.602959],[36.639604,25.826228],[36.249137,26.570136],[35.640182,27.37652],[35.130187,28.063352],[34.632336,28.058546],[34.787779,28.607427],[34.83222,28.957483],[34.956037,29.356555]],[[48.416094,28.552004],[48.807595,27.689628],[49.299554,27.461218],[49.470914,27.109999],[50.152422,26.689663],[50.212935,26.277027],[50.113303,25.943972],[50.239859,25.60805],[50.527387,25.327808],[50.660557,24.999896],[50.810108,24.754743]],[[51.389608,24.627386],[51.579519,24.245497]],[[52.00001,19.000003],[49.116672,18.616668],[48.183344,18.166669],[47.466695,17.116682],[47.000005,16.949999],[46.749994,17.283338],[46.366659,17.233315],[45.399999,17.333335],[45.216651,17.433329],[44.062613,17.410359],[43.791519,17.319977],[43.380794,17.579987],[43.115798,17.08844],[43.218375,16.66689],[42.779332,16.347891]],[[33.963393,9.464285],[33.824963,9.484061],[33.842131,9.981915],[33.721959,10.325262],[33.206938,10.720112],[33.086766,11.441141],[33.206938,12.179338],[32.743419,12.248008],[32.67475,12.024832],[32.073892,11.97333],[32.314235,11.681484],[32.400072,11.080626],[31.850716,10.531271],[31.352862,9.810241],[30.837841,9.707237],[29.996639,10.290927],[29.618957,10.084919],[29.515953,9.793074],[29.000932,9.604232],[28.966597,9.398224],[27.97089,9.398224],[27.833551,9.604232],[27.112521,9.638567],[26.752006,9.466893],[26.477328,9.55273],[25.962307,10.136421],[25.790633,10.411099],[25.069604,10.27376],[24.794926,9.810241],[24.537415,8.917538],[24.194068,8.728696],[23.88698,8.61973]],[[23.88698,8.61973],[23.805813,8.666319]],[[22.864165,11.142395],[22.87622,11.38461],[22.50869,11.67936],[22.49762,12.26024],[22.28801,12.64605],[21.93681,12.58818],[22.03759,12.95546],[22.29658,13.37232],[22.18329,13.78648],[22.51202,14.09318],[22.30351,14.32682],[22.56795,14.94429],[23.02459,15.68072],[23.88689,15.61084],[23.83766,19.58047]],[[36.86623,22],[37.18872,21.01885],[36.96941,20.83744],[37.1147,19.80796],[37.48179,18.61409],[37.86276,18.36786],[38.41009,17.998307]],[[36.85253,16.95655],[36.75389,16.29186],[36.32322,14.82249],[36.42951,14.42211]],[[33.96162,9.58358],[33.963393,9.464285]],[[33.963393,9.464285],[33.97498,8.68456]],[[34.005,4.249885],[33.39,3.79],[32.68642,3.79232],[31.88145,3.55827],[31.24556,3.7819],[30.83385,3.50917]],[[30.83385,3.50917],[29.95349,4.1737],[29.715995,4.600805]],[[24.567369,8.229188],[23.88698,8.61973]],[[-16.713729,13.594959],[-17.126107,14.373516],[-17.625043,14.729541],[-17.185173,14.919477],[-16.700706,15.621527],[-16.463098,16.135036]],[[-16.677452,12.384852],[-16.841525,13.151394]],[[162.119025,-10.482719],[162.398646,-10.826367],[161.700032,-10.820011],[161.319797,-10.204751],[161.917383,-10.446701],[162.119025,-10.482719]],[[160.852229,-9.872937],[160.462588,-9.89521],[159.849447,-9.794027],[159.640003,-9.63998],[159.702945,-9.24295],[160.362956,-9.400304],[160.688518,-9.610162],[160.852229,-9.872937]],[[161.679982,-9.599982],[161.529397,-9.784312],[160.788253,-8.917543],[160.579997,-8.320009],[160.920028,-8.320009],[161.280006,-9.120011],[161.679982,-9.599982]],[[159.875027,-8.33732],[159.917402,-8.53829],[159.133677,-8.114181],[158.586114,-7.754824],[158.21115,-7.421872],[158.359978,-7.320018],[158.820001,-7.560003],[159.640003,-8.020027],[159.875027,-8.33732]],[[157.538426,-7.34782],[157.33942,-7.404767],[156.90203,-7.176874],[156.491358,-6.765943],[156.542828,-6.599338],[157.14,-7.021638],[157.538426,-7.34782]],[[-11.438779,6.785917],[-11.708195,6.860098],[-12.428099,7.262942],[-12.949049,7.798646],[-13.124025,8.163946],[-13.24655,8.903049]],[[-87.793111,13.38448],[-87.904112,13.149017],[-88.483302,13.163951],[-88.843228,13.259734],[-89.256743,13.458533],[-89.812394,13.520622],[-90.095555,13.735338]],[[47.78942,8.003],[46.948328,7.996877],[43.67875,9.18358]],[[43.67875,9.18358],[43.296975,9.540477],[42.92812,10.02194]],[[43.145305,11.46204],[43.47066,11.27771],[43.666668,10.864169],[44.117804,10.445538],[44.614259,10.442205],[45.556941,10.698029],[46.645401,10.816549],[47.525658,11.127228],[48.021596,11.193064],[48.378784,11.375482],[48.948206,11.410622],[48.942005,11.394266],[48.948205,11.410617],[49.26776,11.43033],[49.72862,11.5789],[50.25878,11.67957],[50.73202,12.0219],[51.1112,12.02464],[51.13387,11.74815],[51.04153,11.16651],[51.04531,10.6409],[50.83418,10.27972],[50.55239,9.19874],[50.07092,8.08173],[49.4527,6.80466],[48.59455,5.33911],[47.74079,4.2194],[46.56476,2.85529],[45.56399,2.04576],[44.06815,1.05283],[43.13597,.2922],[42.04157,-.91916],[41.81095,-1.44647],[41.58513,-1.68325]],[[19.36803,44.863],[19.00548,44.86023],[19.390476,45.236516]],[[19.072769,45.521511],[18.82982,45.90888],[19.596045,46.17173]],[[-57.147436,5.97315],[-55.949318,5.772878],[-55.84178,5.953125],[-55.03325,6.025291],[-53.958045,5.756548]],[[-54.399542,4.212611],[-54.006931,3.620038],[-54.181726,3.18978],[-54.269705,2.732392],[-54.524754,2.311849]],[[22.558138,49.085738],[22.280842,48.825392],[22.085608,48.422264]],[[13.71506,45.500324],[13.93763,45.591016]],[[23.903379,66.006927],[22.183173,65.723741],[21.213517,65.026005],[21.369631,64.413588],[19.778876,63.609554],[17.847779,62.7494],[17.119555,61.341166],[17.831346,60.636583],[18.787722,60.081914],[17.869225,58.953766],[16.829185,58.719827],[16.44771,57.041118],[15.879786,56.104302],[14.666681,56.200885],[14.100721,55.407781],[12.942911,55.361737],[12.625101,56.30708],[11.787942,57.441817],[11.027369,58.856149]],[[32.071665,-26.73382],[31.86806,-27.177927],[31.282773,-27.285879],[30.685962,-26.743845],[30.676609,-26.398078],[30.949667,-26.022649],[31.04408,-25.731452],[31.333158,-25.660191],[31.837778,-25.843332]],[[35.998403,34.644914],[35.905023,35.410009],[36.149763,35.821535]],[[36.149763,35.821535],[36.41755,36.040617],[36.685389,36.259699],[36.739494,36.81752],[37.066761,36.623036],[38.167727,36.90121],[38.699891,36.712927],[39.52258,36.716054],[40.673259,37.091276],[41.212089,37.074352],[42.349591,37.229873]],[[13.540394,14.367134],[13.97217,15.68437],[15.247731,16.627306]],[[15.487148,20.730415],[15.47106,21.04845],[15.096888,21.308519]],[[14.960152,11.555574],[14.89336,12.21905],[14.495787,12.859396]],[[1.865241,6.142158],[1.060122,5.928837]],[[102.584932,12.186595],[101.687158,12.64574],[100.83181,12.627085],[100.978467,13.412722],[100.097797,13.406856],[100.018733,12.307001],[99.478921,10.846367],[99.153772,9.963061],[99.222399,9.239255],[99.873832,9.207862],[100.279647,8.295153],[100.459274,7.429573],[101.017328,6.856869],[101.623079,6.740622],[102.141187,6.221636]],[[100.085757,6.464489],[99.690691,6.848213],[99.519642,7.343454],[98.988253,7.907993],[98.503786,8.382305],[98.339662,7.794512],[98.150009,8.350007],[98.25915,8.973923],[98.553551,9.93296]],[[67.83,37.144994],[68.392033,38.157025],[68.176025,38.901553],[67.44222,39.140144],[67.701429,39.580478],[68.536416,39.533453],[69.011633,40.086158],[69.329495,40.727824],[70.666622,40.960213],[70.45816,40.496495],[70.601407,40.218527],[71.014198,40.244366]],[[53.921598,37.198918],[53.735511,37.906136],[53.880929,38.952093],[53.101028,39.290574],[53.357808,39.975286],[52.693973,40.033629],[52.915251,40.876523],[53.858139,40.631034],[54.736845,40.951015],[54.008311,41.551211],[53.721713,42.123191],[52.91675,41.868117],[52.814689,41.135371],[52.50246,41.783316]],[[55.968191,41.308642],[57.096391,41.32231],[56.932215,41.826026],[57.78653,42.170553],[58.629011,42.751551],[59.976422,42.223082],[60.083341,41.425146],[60.465953,41.220327],[61.547179,41.26637],[61.882714,41.084857],[62.37426,40.053886],[63.518015,39.363257],[64.170223,38.892407],[65.215999,38.402695],[66.54615,37.974685],[66.518607,37.362784]],[[124.968682,-8.89279],[125.086246,-8.656887],[125.947072,-8.432095],[126.644704,-8.398247],[126.957243,-8.273345],[127.335928,-8.397317],[126.967992,-8.668256],[125.925885,-9.106007],[125.08852,-9.393173]],[[-61.68,10.76],[-61.105,10.89],[-60.895,10.855],[-60.935,10.11],[-61.77,10],[-61.95,10.09],[-61.66,10.365],[-61.68,10.76]],[[8.420964,36.946427],[9.509994,37.349994],[10.210002,37.230002],[10.18065,36.724038],[11.028867,37.092103],[11.100026,36.899996],[10.600005,36.41],[10.593287,35.947444],[10.939519,35.698984],[10.807847,34.833507],[10.149593,34.330773],[10.339659,33.785742],[10.856836,33.76874],[11.108501,33.293343],[11.488787,33.136996]],[[44.225756,37.971584],[44.772699,37.170445]],[[36.149763,35.821535],[35.782085,36.274995],[36.160822,36.650606],[35.550936,36.565443],[34.714553,36.795532],[34.026895,36.21996],[32.509158,36.107564],[31.699595,36.644275],[30.621625,36.677865],[30.391096,36.262981],[29.699976,36.144357],[28.732903,36.676831],[27.641187,36.658822],[27.048768,37.653361],[26.318218,38.208133],[26.8047,38.98576],[26.170785,39.463612],[27.28002,40.420014],[28.819978,40.460011],[29.240004,41.219991],[31.145934,41.087622],[32.347979,41.736264],[33.513283,42.01896],[35.167704,42.040225],[36.913127,41.335358],[38.347665,40.948586],[39.512607,41.102763],[40.373433,41.013673],[41.554084,41.535656]],[[27.99672,42.007359],[28.115525,41.622886],[28.988443,41.299934],[28.806438,41.054962],[27.619017,40.999823],[27.192377,40.690566],[26.358009,40.151994],[26.043351,40.617754],[26.056942,40.824123]],[[121.777818,24.394274],[121.175632,22.790857],[120.74708,21.970571],[120.220083,22.814861],[120.106189,23.556263],[120.69468,24.538451],[121.495044,25.295459],[121.951244,24.997596],[121.777818,24.394274]],[[39.20222,-4.67677],[38.74054,-5.90895],[38.79977,-6.47566],[39.44,-6.84],[39.47,-7.1],[39.19469,-7.7039],[39.25203,-8.00781],[39.18652,-8.48551],[39.53574,-9.11237],[39.9496,-10.0984],[40.31659,-10.3171],[39.521,-10.89688],[38.427557,-11.285202]],[[38.427557,-11.285202],[37.82764,-11.26879],[37.47129,-11.56876],[36.775151,-11.594537]],[[34.559989,-11.52002],[34.28,-10.16],[33.940838,-9.693674]],[[33.940838,-9.693674],[33.73972,-9.41715],[32.759375,-9.230599]],[[32.759375,-9.230599],[32.191865,-8.930359],[31.556348,-8.762049],[31.157751,-8.594579]],[[31.157751,-8.594579],[30.74,-8.34],[30.2,-7.08],[29.62,-6.52],[29.419993,-5.939999]],[[29.753512,-4.452389],[30.11632,-4.09012],[30.50554,-3.56858],[30.75224,-3.35931],[30.74301,-3.03431],[30.52766,-2.80762],[30.46967,-2.41383],[30.758309,-2.28725]],[[30.419105,-1.134659],[30.76986,-1.01455],[31.86617,-1.02736],[33.903711,-.95]],[[29.587838,-.587406],[29.8195,-.2053],[29.875779,.59738]],[[31.174149,2.204465],[30.77332,2.33989],[30.83385,3.50917]],[[31.785998,52.101678],[32.159412,52.061267],[32.412058,52.288695]],[[35.022183,51.207572],[35.377924,50.773955],[35.356116,50.577197]],[[38.594988,49.926462],[40.069058,49.601055],[40.080789,49.30743]],[[40.080789,49.30743],[39.674664,48.783818],[39.895632,48.232405],[39.738278,47.898937]],[[39.738278,47.898937],[38.770585,47.825608],[38.255112,47.5464]],[[38.223538,47.10219],[37.425137,47.022221],[36.759855,46.6987],[35.823685,46.645964],[34.962342,46.273197],[35.020788,45.651219],[35.510009,45.409993],[36.529998,45.46999],[36.334713,45.113216],[35.239999,44.939996],[33.882511,44.361479],[33.326421,44.564877],[33.546924,45.034771],[32.454174,45.327466],[32.630804,45.519186],[33.588162,45.851569],[33.298567,46.080598],[31.74414,46.333348],[31.675307,46.706245],[30.748749,46.5831],[30.377609,46.03241],[29.603289,45.293308]],[[-53.373662,-33.768378],[-53.806426,-34.396815],[-54.935866,-34.952647],[-55.67409,-34.752659],[-56.215297,-34.859836],[-57.139685,-34.430456],[-57.817861,-34.462547],[-58.427074,-33.909454]],[[-155.54211,19.08348],[-155.68817,18.91619],[-155.93665,19.05939],[-155.90806,19.33888],[-156.07347,19.70294],[-156.02368,19.81422],[-155.85008,19.97729],[-155.91907,20.17395],[-155.86108,20.26721],[-155.78505,20.2487],[-155.40214,20.07975],[-155.22452,19.99302],[-155.06226,19.8591],[-154.80741,19.50871],[-154.83147,19.45328],[-155.22217,19.23972],[-155.54211,19.08348]],[[-156.07926,20.64397],[-156.41445,20.57241],[-156.58673,20.783],[-156.70167,20.8643],[-156.71055,20.92676],[-156.61258,21.01249],[-156.25711,20.91745],[-155.99566,20.76404],[-156.07926,20.64397]],[[-156.75824,21.17684],[-156.78933,21.06873],[-157.32521,21.09777],[-157.25027,21.21958],[-156.75824,21.17684]],[[-157.65283,21.32217],[-157.70703,21.26442],[-157.7786,21.27729],[-158.12667,21.31244],[-158.2538,21.53919],[-158.29265,21.57912],[-158.0252,21.71696],[-157.94161,21.65272],[-157.65283,21.32217]],[[-159.34512,21.982],[-159.46372,21.88299],[-159.80051,22.06533],[-159.74877,22.1382],[-159.5962,22.23618],[-159.36569,22.21494],[-159.34512,21.982]],[[-67.13741,45.13753],[-66.96466,44.8097],[-68.03252,44.3252],[-69.06,43.98],[-70.11617,43.68405],[-70.645476,43.090238],[-70.81489,42.8653],[-70.825,42.335],[-70.495,41.805],[-70.08,41.78],[-70.185,42.145],[-69.88497,41.92283],[-69.96503,41.63717],[-70.64,41.475],[-71.12039,41.49445],[-71.86,41.32],[-72.295,41.27],[-72.87643,41.22065],[-73.71,40.931102],[-72.24126,41.11948],[-71.945,40.93],[-73.345,40.63],[-73.982,40.628],[-73.952325,40.75075],[-74.25671,40.47351],[-73.96244,40.42763],[-74.17838,39.70926],[-74.90604,38.93954],[-74.98041,39.1964],[-75.20002,39.24845],[-75.52805,39.4985],[-75.32,38.96],[-75.071835,38.782032],[-75.05673,38.40412],[-75.37747,38.01551],[-75.94023,37.21689],[-76.03127,37.2566],[-75.72205,37.93705],[-76.23287,38.319215],[-76.35,39.15],[-76.542725,38.717615],[-76.32933,38.08326],[-76.989998,38.239992],[-76.30162,37.917945],[-76.25874,36.9664],[-75.9718,36.89726],[-75.86804,36.55125],[-75.72749,35.55074],[-76.36318,34.80854],[-77.397635,34.51201],[-78.05496,33.92547],[-78.55435,33.86133],[-79.06067,33.49395],[-79.20357,33.15839],[-80.301325,32.509355],[-80.86498,32.0333],[-81.33629,31.44049],[-81.49042,30.72999],[-81.31371,30.03552],[-80.98,29.18],[-80.535585,28.47213],[-80.53,28.04],[-80.056539,26.88],[-80.088015,26.205765],[-80.13156,25.816775],[-80.38103,25.20616],[-80.68,25.08],[-81.17213,25.20126],[-81.33,25.64],[-81.71,25.87],[-82.24,26.73],[-82.70515,27.49504],[-82.85526,27.88624],[-82.65,28.55],[-82.93,29.1],[-83.70959,29.93656],[-84.1,30.09],[-85.10882,29.63615],[-85.28784,29.68612],[-85.7731,30.15261],[-86.4,30.4],[-87.53036,30.27433],[-88.41782,30.3849],[-89.18049,30.31598],[-89.593831,30.159994],[-89.413735,29.89419],[-89.43,29.48864],[-89.21767,29.29108],[-89.40823,29.15961],[-89.77928,29.30714],[-90.15463,29.11743],[-90.880225,29.148535],[-91.626785,29.677],[-92.49906,29.5523],[-93.22637,29.78375],[-93.84842,29.71363],[-94.69,29.48],[-95.60026,28.73863],[-96.59404,28.30748],[-97.14,27.83],[-97.37,27.38],[-97.38,26.69],[-97.33,26.21],[-97.14,25.87],[-97.53,25.84]],[[-117.12776,32.53534],[-117.295938,33.046225],[-117.944,33.621236],[-118.410602,33.740909],[-118.519895,34.027782],[-119.081,34.078],[-119.438841,34.348477],[-120.36778,34.44711],[-120.62286,34.60855],[-120.74433,35.15686],[-121.71457,36.16153],[-122.54747,37.55176],[-122.51201,37.78339],[-122.95319,38.11371],[-123.7272,38.95166],[-123.86517,39.76699],[-124.39807,40.3132],[-124.17886,41.14202],[-124.2137,41.99964],[-124.53284,42.76599],[-124.14214,43.70838],[-124.020535,44.615895],[-123.89893,45.52341],[-124.079635,46.86475],[-124.39567,47.72017],[-124.68721,48.184433],[-124.566101,48.379715],[-123.12,48.04],[-122.58736,47.096],[-122.34,47.36],[-122.5,48.18],[-122.84,49]],[[-153.006314,57.115842],[-154.00509,56.734677],[-154.516403,56.992749],[-154.670993,57.461196],[-153.76278,57.816575],[-153.228729,57.968968],[-152.564791,57.901427],[-152.141147,57.591059],[-153.006314,57.115842]],[[-165.579164,59.909987],[-166.19277,59.754441],[-166.848337,59.941406],[-167.455277,60.213069],[-166.467792,60.38417],[-165.67443,60.293607],[-165.579164,59.909987]],[[-171.731657,63.782515],[-171.114434,63.592191],[-170.491112,63.694975],[-169.682505,63.431116],[-168.689439,63.297506],[-168.771941,63.188598],[-169.52944,62.976931],[-170.290556,63.194438],[-170.671386,63.375822],[-171.553063,63.317789],[-171.791111,63.405846],[-171.731657,63.782515]],[[-134.27111,58.86111],[-133.355549,58.410285],[-132.73042,57.69289]],[[-130.00778,55.91583],[-129.979994,55.284998],[-130.53611,54.802753],[-131.085818,55.178906],[-131.967211,55.497776],[-132.250011,56.369996],[-133.539181,57.178887],[-134.078063,58.123068],[-135.038211,58.187715],[-136.628062,58.212209],[-137.800006,58.499995],[-139.867787,59.537762],[-140.825274,59.727517],[-142.574444,60.084447],[-143.958881,59.99918],[-145.925557,60.45861],[-147.114374,60.884656],[-148.224306,60.672989],[-148.018066,59.978329],[-148.570823,59.914173],[-149.727858,59.705658],[-150.608243,59.368211],[-151.716393,59.155821],[-151.859433,59.744984],[-151.409719,60.725803],[-150.346941,61.033588],[-150.621111,61.284425],[-151.895839,60.727198],[-152.57833,60.061657],[-154.019172,59.350279],[-153.287511,58.864728],[-154.232492,58.146374],[-155.307491,57.727795],[-156.308335,57.422774],[-156.556097,56.979985],[-158.117217,56.463608],[-158.433321,55.994154],[-159.603327,55.566686],[-160.28972,55.643581],[-161.223048,55.364735],[-162.237766,55.024187],[-163.069447,54.689737],[-164.785569,54.404173],[-164.942226,54.572225],[-163.84834,55.039431],[-162.870001,55.348043],[-161.804175,55.894986],[-160.563605,56.008055],[-160.07056,56.418055],[-158.684443,57.016675],[-158.461097,57.216921],[-157.72277,57.570001],[-157.550274,58.328326],[-157.041675,58.918885],[-158.194731,58.615802],[-158.517218,58.787781],[-159.058606,58.424186],[-159.711667,58.93139],[-159.981289,58.572549],[-160.355271,59.071123],[-161.355003,58.670838],[-161.968894,58.671665],[-162.054987,59.266925],[-161.874171,59.633621],[-162.518059,59.989724],[-163.818341,59.798056],[-164.662218,60.267484],[-165.346388,60.507496],[-165.350832,61.073895],[-166.121379,61.500019],[-165.734452,62.074997],[-164.919179,62.633076],[-164.562508,63.146378],[-163.753332,63.219449],[-163.067224,63.059459],[-162.260555,63.541936],[-161.53445,63.455817],[-160.772507,63.766108],[-160.958335,64.222799],[-161.518068,64.402788],[-160.777778,64.788604],[-161.391926,64.777235],[-162.45305,64.559445],[-162.757786,64.338605],[-163.546394,64.55916],[-164.96083,64.446945],[-166.425288,64.686672],[-166.845004,65.088896],[-168.11056,65.669997],[-166.705271,66.088318],[-164.47471,66.57666],[-163.652512,66.57666],[-163.788602,66.077207],[-161.677774,66.11612],[-162.489715,66.735565],[-163.719717,67.116395],[-164.430991,67.616338],[-165.390287,68.042772],[-166.764441,68.358877],[-166.204707,68.883031],[-164.430811,68.915535],[-163.168614,69.371115],[-162.930566,69.858062],[-161.908897,70.33333],[-160.934797,70.44769],[-159.039176,70.891642],[-158.119723,70.824721],[-156.580825,71.357764],[-155.06779,71.147776],[-154.344165,70.696409],[-153.900006,70.889989],[-152.210006,70.829992],[-152.270002,70.600006],[-150.739992,70.430017],[-149.720003,70.53001],[-147.613362,70.214035],[-145.68999,70.12001],[-144.920011,69.989992],[-143.589446,70.152514],[-142.07251,69.851938],[-140.985988,69.711998],[-140.985988,69.711998],[-140.992499,66.000029],[-140.99777,60.306397],[-140.012998,60.276838],[-139.039,60.000007],[-138.34089,59.56211]],[[-71.331584,11.776284],[-71.360006,11.539994],[-71.94705,11.423282],[-71.620868,10.96946],[-71.633064,10.446494],[-72.074174,9.865651],[-71.695644,9.072263],[-71.264559,9.137195],[-71.039999,9.859993],[-71.350084,10.211935],[-71.400623,10.968969],[-70.155299,11.375482],[-70.293843,11.846822],[-69.943245,12.162307],[-69.5843,11.459611],[-68.882999,11.443385],[-68.233271,10.885744],[-68.194127,10.554653],[-67.296249,10.545868],[-66.227864,10.648627],[-65.655238,10.200799],[-64.890452,10.077215],[-64.329479,10.389599],[-64.318007,10.641418],[-63.079322,10.701724],[-61.880946,10.715625],[-62.730119,10.420269],[-62.388512,9.948204],[-61.588767,9.873067],[-60.830597,9.38134],[-60.671252,8.580174],[-60.150096,8.602757],[-59.758285,8.367035]],[[108.05018,21.55238],[106.715068,20.696851],[105.881682,19.75205],[105.662006,19.058165],[106.426817,18.004121],[107.361954,16.697457],[108.269495,16.079742],[108.877107,15.276691],[109.33527,13.426028],[109.200136,11.666859],[108.36613,11.008321],[107.220929,10.364484],[106.405113,9.53084],[105.158264,8.59976],[104.795185,9.241038],[105.076202,9.918491],[104.334335,10.486544]],[[167.844877,-16.466333],[167.515181,-16.59785],[167.180008,-16.159995],[167.216801,-15.891846],[167.844877,-16.466333]],[[167.107712,-14.93392],[167.270028,-15.740021],[167.001207,-15.614602],[166.793158,-15.668811],[166.649859,-15.392704],[166.629137,-14.626497],[167.107712,-14.93392]],[[53.108573,16.651051],[52.385206,16.382411],[52.191729,15.938433],[52.168165,15.59742],[51.172515,15.17525],[49.574576,14.708767],[48.679231,14.003202],[48.238947,13.94809],[47.938914,14.007233],[47.354454,13.59222],[46.717076,13.399699],[45.877593,13.347764],[45.62505,13.290946],[45.406459,13.026905],[45.144356,12.953938],[44.989533,12.699587],[44.494576,12.721653],[44.175113,12.58595],[43.482959,12.6368],[43.222871,13.22095],[43.251448,13.767584],[43.087944,14.06263],[42.892245,14.802249],[42.604873,15.213335],[42.805015,15.261963],[42.702438,15.718886],[42.823671,15.911742],[42.779332,16.347891]],[[29.432188,-22.091313],[29.839037,-22.102216],[30.322883,-22.271612],[30.659865,-22.151567],[31.191409,-22.25151]],[[32.83012,-26.742192],[32.580265,-27.470158],[32.462133,-28.301011],[32.203389,-28.752405],[31.521001,-29.257387],[31.325561,-29.401978],[30.901763,-29.909957],[30.622813,-30.423776],[30.055716,-31.140269],[28.925553,-32.172041],[28.219756,-32.771953],[27.464608,-33.226964],[26.419452,-33.61495],[25.909664,-33.66704],[25.780628,-33.944646],[25.172862,-33.796851],[24.677853,-33.987176],[23.594043,-33.794474],[22.988189,-33.916431],[22.574157,-33.864083],[21.542799,-34.258839],[20.689053,-34.417175],[20.071261,-34.795137],[19.616405,-34.819166],[19.193278,-34.462599],[18.855315,-34.444306],[18.424643,-33.997873],[18.377411,-34.136521],[18.244499,-33.867752],[18.25008,-33.281431],[17.92519,-32.611291],[18.24791,-32.429131],[18.221762,-31.661633],[17.566918,-30.725721],[17.064416,-29.878641],[17.062918,-29.875954],[16.344977,-28.576705]],[[30.274256,-15.507787],[29.516834,-15.644678],[28.947463,-16.043051],[28.825869,-16.389749],[28.467906,-16.4684],[27.598243,-17.290831],[27.044427,-17.938026],[26.706773,-17.961229],[26.381935,-17.846042],[25.264226,-17.73654]],[[30.740015,-8.340007],[31.157751,-8.594579]],[[-24.320432043204306,14.84771426361388],[-24.3924392439244,14.812991084264695],[-24.464446444644466,14.830352673939288],[-24.53645364536453,14.917160622312252],[-24.5004500450045,14.969245391336017],[-24.3924392439244,15.021330160359796],[-24.35643564356434,15.003968570685203],[-24.320432043204306,14.917160622312252],[-24.320432043204306,14.84771426361388]],[[-23.204320432043204,15.125499698407353],[-23.240324032403237,15.125499698407353],[-23.27632763276327,15.177584467431132],[-23.27632763276327,15.247030826129503],[-23.240324032403237,15.316477184827875],[-23.16831683168317,15.316477184827875],[-23.13231323132314,15.264392415804096],[-23.13231323132314,15.160222877756539],[-23.204320432043204,15.125499698407353]],[[-23.456345634563462,15.003968570685203],[-23.528352835283528,14.89979903263766],[-23.67236723672366,14.917160622312252],[-23.81638163816382,15.073414929383574],[-23.81638163816382,15.160222877756539],[-23.780378037803786,15.22966923645491],[-23.780378037803786,15.316477184827875],[-23.70837083708369,15.316477184827875],[-23.70837083708369,15.264392415804096],[-23.56435643564356,15.125499698407353],[-23.456345634563462,15.003968570685203]],[[-22.952295229522946,16.23664143758127],[-22.844284428442847,16.201918258232084],[-22.772277227722753,16.219279847906677],[-22.700270027002688,16.167195078882898],[-22.700270027002688,16.09774872018454],[-22.73627362736272,16.02830236148617],[-22.844284428442847,15.97621759246239],[-22.916291629162913,15.97621759246239],[-22.98829882988298,16.02830236148617],[-22.916291629162913,16.132471899533712],[-22.952295229522946,16.23664143758127]],[[-24.10441044104411,16.618596410422313],[-24.068406840684077,16.566511641398534],[-24.10441044104411,16.54915005172394],[-24.24842484248424,16.583873231073127],[-24.284428442844273,16.566511641398534],[-24.35643564356434,16.47970369302557],[-24.428442844284433,16.60123482074772],[-24.428442844284433,16.6533195897715],[-24.3924392439244,16.670681179446078],[-24.284428442844273,16.635958000096906],[-24.10441044104411,16.618596410422313]],[[-22.916291629162913,16.6533195897715],[-22.952295229522946,16.60123482074772],[-22.98829882988298,16.670681179446078],[-23.02430243024301,16.792212307168228],[-22.952295229522946,16.826935486517414],[-22.916291629162913,16.826935486517414],[-22.916291629162913,16.6533195897715]],[[-24.896489648964888,16.80957389684282],[-25.040504050405048,16.792212307168228],[-25.112511251125113,16.826935486517414],[-25.07650765076508,16.8616586658666],[-24.968496849684954,16.913743434890378],[-24.896489648964888,16.844297076192007],[-24.896489648964888,16.80957389684282]],[[-25.18451845184518,16.93110502456497],[-25.292529252925277,16.913743434890378],[-25.32853285328531,16.93110502456497],[-25.32853285328531,17.000551383263343],[-25.36453645364537,17.05263615228712],[-25.36453645364537,17.087359331636307],[-25.148514851485146,17.191528869683864],[-25.040504050405048,17.17416728000927],[-25.004500450044986,17.087359331636307],[-25.040504050405048,17.03527456261253],[-25.18451845184518,16.93110502456497]],[[43.762376237623755,-12.323173577123328],[43.65436543654366,-12.357896756472499],[43.618361836183624,-12.288450397774142],[43.618361836183624,-12.253727218424956],[43.69036903690369,-12.271088808099549],[43.762376237623755,-12.323173577123328]],[[44.446444644464464,-12.09747291135362],[44.51845184518453,-12.236365628750363],[44.51845184518453,-12.34053516679792],[44.482448244824496,-12.357896756472499],[44.446444644464464,-12.34053516679792],[44.37443744374437,-12.253727218424956],[44.194419441944206,-12.184280859726584],[44.26642664266427,-12.166919270051991],[44.302430243024304,-12.184280859726584],[44.37443744374437,-12.166919270051991],[44.37443744374437,-12.132196090702806],[44.41044104410443,-12.09747291135362],[44.446444644464464,-12.09747291135362]],[[43.43834383438343,-11.906495424933098],[43.43834383438343,-11.923857014607691],[43.2943294329433,-11.85441065590932],[43.222322232223235,-11.76760270753637],[43.222322232223235,-11.437732503719104],[43.25832583258327,-11.403009324369918],[43.33033303330333,-11.385647734695326],[43.366336633663366,-11.420370914044511],[43.366336633663366,-11.628709990139626],[43.43834383438343,-11.76760270753637],[43.47434743474349,-11.871772245583912],[43.43834383438343,-11.906495424933098]],[[57.623762376237636,-20.500482313856367],[57.51575157515751,-20.51784390353096],[57.37173717371738,-20.51784390353096],[57.29972997299731,-20.46575913450718],[57.335733573357345,-20.413674365483402],[57.335733573357345,-20.34422800678503],[57.37173717371738,-20.240058468737487],[57.40774077407741,-20.18797369971371],[57.479747974797476,-20.153250520364523],[57.479747974797476,-20.06644257199156],[57.55175517551757,-20.01435780296778],[57.623762376237636,-19.996996213293187],[57.731773177317734,-20.101165751340744],[57.76777677767777,-20.222696879062894],[57.76777677767777,-20.34422800678503],[57.6957695769577,-20.378951186134216],[57.6957695769577,-20.448397544832588],[57.623762376237636,-20.500482313856367]],[[55.535553555355534,-4.701435709977233],[55.535553555355534,-4.788243658350197],[55.46354635463547,-4.770882068675604],[55.46354635463547,-4.701435709977233],[55.3915391539154,-4.666712530628047],[55.35553555355537,-4.614627761604268],[55.427542754275436,-4.5625429925804895],[55.535553555355534,-4.701435709977233]],[[50.60306030603061,25.872323706980083],[50.56705670567058,25.80287734828171],[50.53105310531055,25.820238937956304],[50.459045904590454,25.959131655353048],[50.459045904590454,26.045939603726012],[50.42304230423042,26.184832321122755],[50.459045904590454,26.21955550047194],[50.56705670567058,26.236917090146534],[50.53105310531055,26.184832321122755],[50.60306030603061,26.115385962424384],[50.60306030603061,25.872323706980083]],[[73.3933393339334,3.2154491816369273],[73.35733573357336,3.23281077131152],[73.35733573357336,3.267533950660706],[73.3933393339334,3.284895540335299],[73.42934293429343,3.267533950660706],[73.42934293429343,3.23281077131152],[73.3933393339334,3.2154491816369273]],[[73.5013501350135,4.152975024064929],[73.46534653465346,4.152975024064929],[73.46534653465346,4.205059793088694],[73.5013501350135,4.222421382763287],[73.5013501350135,4.152975024064929]],[[169.63096309630964,5.819687632825804],[169.59495949594958,5.85441081217499],[169.63096309630964,5.94121876054794],[169.6669666966697,5.923857170873347],[169.63096309630964,5.819687632825804]],[[171.07110711071107,7.1218068584202285],[171.2151215121512,7.06972208939645],[171.3591359135914,7.104445268745636],[171.3591359135914,7.087083679071043],[171.25112511251126,7.052360499721857],[171.2151215121512,7.052360499721857],[171.07110711071107,7.104445268745636],[171.07110711071107,7.1218068584202285]],[[162.97029702970298,5.31620153226261],[162.97029702970298,5.264116763238846],[162.8982898289829,5.2988399425880175],[162.93429342934297,5.333563121937203],[162.97029702970298,5.31620153226261]],[[158.2898289828983,6.809298244277571],[158.25382538253825,6.774575064928385],[158.1818181818182,6.791936654602978],[158.14581458145818,6.878744602975942],[158.10981098109812,6.896106192650535],[158.10981098109812,6.930829371999721],[158.1818181818182,6.965552551348907],[158.2898289828983,6.948190961674314],[158.32583258325832,6.878744602975942],[158.2898289828983,6.8440214236267565],[158.2898289828983,6.809298244277571]],[[151.62916291629165,7.330145934515343],[151.5931593159316,7.347507524189936],[151.5931593159316,7.382230703539122],[151.62916291629165,7.382230703539122],[151.62916291629165,7.330145934515343]],[[151.8811881188119,7.416953882888308],[151.84518451845184,7.416953882888308],[151.84518451845184,7.4516770622374935],[151.8811881188119,7.4516770622374935],[151.8811881188119,7.416953882888308]],[[138.12781278127812,9.500344643839398],[138.12781278127812,9.56979100253777],[138.16381638163818,9.587152592212362],[138.1998199819982,9.535067823188584],[138.16381638163818,9.500344643839398],[138.12781278127812,9.500344643839398]],[[166.89468946894692,-.5172925984004451],[166.93069306930693,-.49993100872585217],[166.966696669667,-.5172925984004451],[166.966696669667,-.5520157777496308],[166.93069306930693,-.5520157777496308],[166.89468946894692,-.5520157777496308],[166.89468946894692,-.534654188075038],[166.89468946894692,-.5172925984004451]],[[134.56345634563456,7.364869113864529],[134.52745274527456,7.347507524189936],[134.4914491449145,7.434315472562901],[134.4914491449145,7.521123420935865],[134.52745274527456,7.590569779634222],[134.59945994599462,7.607931369308815],[134.59945994599462,7.486400241586679],[134.56345634563456,7.434315472562901],[134.56345634563456,7.364869113864529]],[[-171.46714671467146,-14.05933254458256],[-171.75517551755175,-14.05933254458256],[-171.8991899189919,-14.007247775558795],[-171.93519351935194,-14.007247775558795],[-172.04320432043204,-13.920439827185831],[-172.07920792079207,-13.868355058162052],[-172.007200720072,-13.833631878812866],[-171.86318631863188,-13.816270289138274],[-171.61116111611162,-13.885716647836645],[-171.57515751575158,-13.955163006535017],[-171.53915391539155,-13.955163006535017],[-171.46714671467146,-13.989886185884203],[-171.46714671467146,-14.05933254458256]],[[-172.36723672367236,-13.46903849564643],[-172.22322232223223,-13.573208033693973],[-172.1872187218722,-13.694739161416123],[-172.25922592259226,-13.816270289138274],[-172.33123312331233,-13.781547109789088],[-172.51125112511252,-13.816270289138274],[-172.54725472547256,-13.79890869946368],[-172.76327632763275,-13.590569623368566],[-172.7992799279928,-13.521123264670194],[-172.6912691269127,-13.538484854344787],[-172.51125112511252,-13.486400085321009],[-172.36723672367236,-13.46903849564643]],[[103.562828617596,1.19209804885879],[103.66539168093617,1.415549393564978],[103.72316284718511,1.461049419576995],[103.86289105136714,1.465021405443363],[104.00318672278996,1.42040107478995],[104.07707806368612,1.430908392589419],[104.08024877086231,1.356636222342184],[104.126080087493,1.27402861451777]],[[-174.92349234923492,-21.31647702856222],[-174.92349234923492,-21.455369745958947],[-174.99549954995499,-21.38592338726059],[-174.99549954995499,-21.351200207911404],[-174.92349234923492,-21.31647702856222]],[[-175.17551755175518,-21.177584311165475],[-175.13951395139514,-21.14286113181629],[-175.1035103510351,-21.177584311165475],[-175.17551755175518,-21.26439225953844],[-175.2115211521152,-21.229669080189254],[-175.35553555355534,-21.160222721490882],[-175.3195319531953,-21.125499542141696],[-175.24752475247524,-21.125499542141696],[-175.17551755175518,-21.177584311165475]],[[-173.98739873987398,-18.64279221867497],[-174.02340234023401,-18.71223857737334],[-174.0954095409541,-18.64279221867497],[-174.02340234023401,-18.573345859976612],[-173.95139513951395,-18.590707449651205],[-173.95139513951395,-18.625430629000377],[-173.98739873987398,-18.64279221867497]],[[178.30783078307832,-8.034860927498983],[178.37983798379838,-7.930691389451425],[178.45184518451845,-7.965414568800611],[178.37983798379838,-8.086945696522761],[178.30783078307832,-8.034860927498983]],[[178.6678667866787,-7.461928468237431],[178.7038703870387,-7.479290057912024],[178.6678667866787,-7.496651647586617],[178.6678667866787,-7.461928468237431]],[[179.13591359135916,-8.416815900340012],[179.17191719171916,-8.434177490014605],[179.20792079207922,-8.52098543838757],[179.0999099909991,-8.590431797085941],[179.0999099909991,-8.625154976435127],[179.0639063906391,-8.64251656610972],[179.0639063906391,-8.590431797085941],[179.02790279027903,-8.52098543838757],[179.0999099909991,-8.434177490014605],[179.13591359135916,-8.416815900340012]],[[179.85598559855987,-9.354341742768014],[179.85598559855987,-9.371703332442607],[179.89198919891993,-9.3890649221172],[179.85598559855987,-9.441149691140978],[179.85598559855987,-9.423788101466386],[179.8199819981998,-9.371703332442607],[179.8199819981998,-9.354341742768014],[179.85598559855987,-9.354341742768014]],[[176.97569756975696,-12.462066294520056],[177.15571557155715,-12.47942788419465],[177.15571557155715,-12.531512653218428],[177.01170117011702,-12.514151063543835],[176.97569756975696,-12.462066294520056]],[[177.15571557155715,-7.253589392142317],[177.11971197119715,-7.184143033443959],[177.15571557155715,-7.201504623118552],[177.15571557155715,-7.253589392142317]],[[176.0756075607561,-5.63896155240522],[176.11161116111612,-5.656323142079813],[176.14761476147618,-5.708407911103592],[176.11161116111612,-5.673684731754406],[176.03960396039605,-5.63896155240522],[176.0756075607561,-5.63896155240522]],[[-61.72817281728173,17.03527456261253],[-61.764176417641764,16.98318979358875],[-61.87218721872186,17.000551383263343],[-61.90819081908191,17.05263615228712],[-61.90819081908191,17.087359331636307],[-61.83618361836183,17.15680569033468],[-61.692169216921684,17.087359331636307],[-61.692169216921684,17.05263615228712],[-61.72817281728173,17.03527456261253]],[[-61.764176417641764,17.573483842524894],[-61.764176417641764,17.538760663175708],[-61.87218721872186,17.590845432199487],[-61.87218721872186,17.712376559921637],[-61.764176417641764,17.66029179089786],[-61.764176417641764,17.573483842524894]],[[-59.4959495949595,13.076832116805448],[-59.53195319531953,13.059470527130856],[-59.63996399639963,13.094193706480041],[-59.675967596759676,13.14627847550382],[-59.675967596759676,13.302532782575142],[-59.6039603960396,13.302532782575142],[-59.45994599459945,13.14627847550382],[-59.4959495949595,13.076832116805448]],[[-61.296129612961295,15.247030826129503],[-61.40414041404141,15.212307646780317],[-61.44014401440144,15.385923543526246],[-61.512151215121506,15.52481626092299],[-61.47614761476147,15.594262619621347],[-61.47614761476147,15.628985798970533],[-61.33213321332133,15.576901029946754],[-61.296129612961295,15.52481626092299],[-61.26012601260126,15.368561953851653],[-61.296129612961295,15.247030826129503]],[[-61.72817281728173,12.000413556980718],[-61.764176417641764,12.035136736329903],[-61.764176417641764,12.104583095028275],[-61.692169216921684,12.226114222750411],[-61.62016201620162,12.208752633075818],[-61.65616561656165,12.052498326004496],[-61.72817281728173,12.000413556980718]],[[-62.55625562556256,17.1047209213109],[-62.59225922592259,17.087359331636307],[-62.62826282628262,17.122082510985493],[-62.62826282628262,17.191528869683864],[-62.59225922592259,17.191528869683864],[-62.55625562556256,17.15680569033468],[-62.55625562556256,17.1047209213109]],[[-62.664266426642655,17.22625204903305],[-62.736273627362735,17.278336818056815],[-62.8082808280828,17.295698407731408],[-62.84428442844285,17.330421587080593],[-62.84428442844285,17.382506356104372],[-62.8082808280828,17.399867945778965],[-62.736273627362735,17.347783176755186],[-62.7002700270027,17.278336818056815],[-62.664266426642655,17.26097522838222],[-62.664266426642655,17.22625204903305]],[[-60.90009000900089,13.806018883138336],[-60.97209720972097,13.701849345090778],[-61.080108010801084,13.77129570378915],[-61.080108010801084,13.910188421185879],[-61.008100810081004,13.996996369558843],[-60.97209720972097,14.066442728257215],[-60.93609360936094,14.083804317931808],[-60.90009000900089,13.996996369558843],[-60.90009000900089,13.806018883138336]],[[-61.18811881188118,13.14627847550382],[-61.224122412241215,13.128916885829227],[-61.296129612961295,13.198363244527599],[-61.296129612961295,13.285171192900549],[-61.224122412241215,13.319894372249735],[-61.18811881188118,13.35461755159892],[-61.15211521152115,13.35461755159892],[-61.15211521152115,13.198363244527599],[-61.18811881188118,13.14627847550382]],[[1.4221422142214237,42.591534563612626],[1.4941494149414893,42.62625774296181],[1.5661566156615834,42.62625774296181],[1.7101710171017146,42.57417297393802],[1.7101710171017146,42.522088204914255],[1.6741674167416818,42.48736502556507],[1.4581458145814565,42.4179186668667],[1.4221422142214237,42.435280256541304],[1.4221422142214237,42.48736502556507],[1.386138613861391,42.522088204914255],[1.4221422142214237,42.591534563612626]],[[9.60754621634599,47.0613932427273],[9.55740711339162,47.0511647748693]],[[9.48531852772954,47.1784895080045],[9.53022075531123,47.2730326940506],[9.57917146014346,47.2077927269191]],[[14.563456345634563,35.83787618019616],[14.52745274527453,35.803153000846976],[14.419441944194432,35.82051459052157],[14.347434743474366,35.855237769870755],[14.347434743474366,35.976768897592905],[14.52745274527453,35.87259935954535],[14.563456345634563,35.83787618019616]],[[7.434743474347442,43.73739948213573],[7.362736273627377,43.72003789246112],[7.362736273627377,43.75476107181031],[7.434743474347442,43.73739948213573]],[[12.367236723672363,43.928376968556236],[12.439243924392457,43.98046173758003],[12.511251125112523,43.94573855823084],[12.47524752475249,43.89365378920705],[12.403240324032396,43.89365378920705],[12.367236723672363,43.928376968556236]],[[-157.42381751199986,2.020453192000062],[-157.38585364499994,1.990464585000097],[-157.32184811099995,1.972113348000136],[-157.3101293609999,1.973089911000116],[-157.3113907539999,1.962591864000061],[-157.31505286399994,1.952785549000112],[-157.32066809799994,1.945502020000021],[-157.33617102799994,1.939113674000083],[-157.34044348899988,1.930243231000048],[-157.34491939999992,1.907945054000095],[-157.3477270169999,1.860785223000107],[-157.32542883999992,1.835842190000079],[-157.28978430899988,1.818752346000139],[-157.25243079299992,1.795314846000153],[-157.2383927069999,1.783636786000073],[-157.22297115799995,1.773586330000086],[-157.20689856699988,1.766546942000033],[-157.19098873599995,1.763902085000126],[-157.17939205599993,1.753892320000148],[-157.17463131399992,1.733791408000016],[-157.1787817049999,1.718491929000052],[-157.1940811839999,1.722967841000099],[-157.20307369699995,1.717474677000084],[-157.21324622299989,1.71279531500015],[-157.22411048099988,1.709702867000161],[-157.23505611899995,1.709295966000155],[-157.24640865799992,1.71332428600013],[-157.2546280589999,1.720282294000128],[-157.26085364499988,1.726874091000099],[-157.27118893099987,1.732977606000176],[-157.2815649079999,1.747056382000125],[-157.28685462099986,1.750230210000012],[-157.30927486899986,1.751898505000113],[-157.41059322799993,1.78192780200007],[-157.44896399599995,1.800238348000036],[-157.48265540299994,1.825384833000101],[-157.50861568899995,1.849595445000105],[-157.5282690089999,1.86249420800003],[-157.53730221299992,1.856675523000149],[-157.5468236969999,1.85643138200011],[-157.56602942599994,1.863755601000037],[-157.58116614499994,1.880316473],[-157.57823645699995,1.907945054000095],[-157.5723363919999,1.912787177000084],[-157.54352779899986,1.929022528000033],[-157.53014075399986,1.93056875200007],[-157.52122962099992,1.927679755000042],[-157.51756751199986,1.923651434000149],[-157.51988684799994,1.921576239000132],[-157.53282630099994,1.916083075000117],[-157.54535885299993,1.90232982000019],[-157.54950924399986,1.884466864000132],[-157.53730221299992,1.866359768000123],[-157.5269262359999,1.864813544000086],[-157.5130509109999,1.866603908000073],[-157.50092525899993,1.865871486000046],[-157.49571692599994,1.856675523000149],[-157.4906713529999,1.850165106000077],[-157.47883053299995,1.847967841000084],[-157.4547826809999,1.847072658],[-157.43468176999994,1.83852773600016],[-157.4285375639999,1.838568427000055],[-157.43736731699994,1.850165106000077],[-157.44794674399986,1.857489325000159],[-157.45860755099991,1.862127997000016],[-157.4680883449999,1.868353583000058],[-157.47520911399988,1.880601304000038],[-157.46235104099995,1.876288153000118],[-157.45164954299992,1.876410223000093],[-157.4457901679999,1.883734442000105],[-157.44733639199993,1.901109117000175],[-157.4365942049999,1.893866278000147],[-157.43248450399986,1.883734442000105],[-157.43000240799995,1.872788804000123],[-157.42369544199988,1.863226630000057],[-157.4119766919999,1.858465887000136],[-157.40794837099992,1.866156317000076],[-157.41002356699988,1.879380601000193],[-157.42442786399994,1.901841539000102],[-157.42638098899988,1.912054755000057],[-157.42438717399995,1.921210028000118],[-157.41999264199995,1.929022528000033],[-157.40831458199995,1.921454169000157],[-157.40314693899995,1.924221096000124],[-157.4063207669999,1.942694403000147],[-157.39472408799992,1.935736395000063],[-157.39399166599986,1.926743882000139],[-157.39586341099994,1.91697825700011],[-157.3920792309999,1.907945054000095],[-157.38206946499992,1.902167059000135],[-157.37718665299985,1.90525950700011],[-157.3739721339999,1.911363023000192],[-157.36384029899995,1.917385158000116],[-157.3584692049999,1.923895575000103],[-157.35411536399988,1.931830145000077],[-157.3523656889999,1.938950914000117],[-157.3550512359999,1.94765859600011],[-157.36168372299994,1.951483466000113],[-157.3796280589999,1.955715236000131],[-157.40888424399992,1.969305731000091],[-157.4453018869999,1.994370835000012],[-157.45103919199988,1.997300523000121],[-157.45539303299995,2.002997137000094],[-157.4662979809999,2.013332424000112],[-157.47752844999994,2.018133856000091],[-157.48265540299994,2.007228908000116],[-157.48790442599994,2.000555731000162],[-157.4988907539999,2.002183335000083],[-157.50841223899988,2.010687567000033],[-157.5093888009999,2.024603583000015],[-157.4962865879999,2.034409898000121],[-157.4745987619999,2.033351955000072],[-157.42381751199986,2.020453192000062]],[[6.662253442589007,.416881758953456],[6.766597964464581,.283008296118973],[6.664222207152696,.119601901283034],[6.526408687694389,.019194995035456],[6.461439457092617,.212133437981513],[6.490970925547967,.314508100511184],[6.662253442589007,.416881758953456]]],bbox:[-180,-85.609038,180,83.64513]}},996:function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(31),__webpack_require__(36),__webpack_require__(39),__webpack_require__(9),__webpack_require__(10),__webpack_require__(28),__webpack_require__(5),__webpack_require__(14),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(18),__webpack_require__(21),__webpack_require__(29),__webpack_require__(22),__webpack_require__(17);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.FooterControls=exports.FacetStrategyDropdown=exports.FilterSmallCountriesToggle=exports.ZoomToggle=exports.FacetYDomainToggle=exports.AbsRelToggle=exports.HighlightToggle=void 0;var React=__importStar(__webpack_require__(0)),mobx_1=__webpack_require__(41),mobx_react_1=__webpack_require__(58),UrlUtils_1=__webpack_require__(469),TimelineComponent_1=__webpack_require__(997),formatValue_1=__webpack_require__(981),react_fontawesome_1=__webpack_require__(123),faDownload_1=__webpack_require__(998),faShareAlt_1=__webpack_require__(999),faExpand_1=__webpack_require__(1798),faExternalLinkAlt_1=__webpack_require__(1799),faChevronDown_1=__webpack_require__(1800),GrapherConstants_1=__webpack_require__(64),ShareMenu_1=__webpack_require__(1801),Tippy_1=__webpack_require__(392),Bounds_1=__webpack_require__(73),classnames_1=__importDefault(__webpack_require__(139)),HighlightToggle=function(_React$Component){_inherits(HighlightToggle,_React$Component);var _super=_createSuper(HighlightToggle);function HighlightToggle(){return _classCallCheck(this,HighlightToggle),_super.apply(this,arguments)}return _createClass(HighlightToggle,[{key:"manager",get:function get(){return this.props.manager}},{key:"highlight",get:function get(){return this.props.manager.highlightToggle}},{key:"highlightParams",get:function get(){var _a;return UrlUtils_1.getQueryParams(((null===(_a=this.highlight)||void 0===_a?void 0:_a.paramStr)||"").substring(1))}},{key:"onHighlightToggle",value:function onHighlightToggle(event){var _a;if(event.currentTarget.checked){var params=Object.assign(Object.assign({},UrlUtils_1.getWindowQueryParams()),this.highlightParams);this.manager.populateFromQueryParams(params)}else null===(_a=this.manager.selectionArray)||void 0===_a||_a.clearSelection()}},{key:"isHighlightActive",get:function get(){var _this=this,params=UrlUtils_1.getWindowQueryParams(),isActive=!0;return Object.keys(this.highlightParams).forEach((function(key){params[key]!==_this.highlightParams[key]&&(isActive=!1)})),isActive}},{key:"render",value:function render(){var highlight=this.highlight,isHighlightActive=this.isHighlightActive;return React.createElement("label",{className:"clickable HighlightToggle"},React.createElement("input",{type:"checkbox",checked:isHighlightActive,onChange:this.onHighlightToggle})," ","Â ",null==highlight?void 0:highlight.description)}}]),HighlightToggle}(React.Component);__decorate([mobx_1.computed],HighlightToggle.prototype,"manager",null),__decorate([mobx_1.computed],HighlightToggle.prototype,"highlight",null),__decorate([mobx_1.computed],HighlightToggle.prototype,"highlightParams",null),__decorate([mobx_1.action.bound],HighlightToggle.prototype,"onHighlightToggle",null),HighlightToggle=__decorate([mobx_react_1.observer],HighlightToggle),exports.HighlightToggle=HighlightToggle;var AbsRelToggle=function(_React$Component2){_inherits(AbsRelToggle,_React$Component2);var _super2=_createSuper(AbsRelToggle);function AbsRelToggle(){return _classCallCheck(this,AbsRelToggle),_super2.apply(this,arguments)}return _createClass(AbsRelToggle,[{key:"onToggle",value:function onToggle(){this.manager.stackMode=this.isRelativeMode?GrapherConstants_1.StackMode.absolute:GrapherConstants_1.StackMode.relative}},{key:"isRelativeMode",get:function get(){return this.manager.stackMode===GrapherConstants_1.StackMode.relative}},{key:"manager",get:function get(){return this.props.manager}},{key:"render",value:function render(){var _a,label=null!==(_a=this.manager.relativeToggleLabel)&&void 0!==_a?_a:"Relative";return React.createElement("label",{className:"clickable"},React.createElement("input",{type:"checkbox",checked:this.isRelativeMode,onChange:this.onToggle,"data-track-note":"chart-abs-rel-toggle"})," ","Â ",label)}}]),AbsRelToggle}(React.Component);__decorate([mobx_1.action.bound],AbsRelToggle.prototype,"onToggle",null),__decorate([mobx_1.computed],AbsRelToggle.prototype,"isRelativeMode",null),__decorate([mobx_1.computed],AbsRelToggle.prototype,"manager",null),AbsRelToggle=__decorate([mobx_react_1.observer],AbsRelToggle),exports.AbsRelToggle=AbsRelToggle;var FacetYDomainToggle=function(_React$Component3){_inherits(FacetYDomainToggle,_React$Component3);var _super3=_createSuper(FacetYDomainToggle);function FacetYDomainToggle(){return _classCallCheck(this,FacetYDomainToggle),_super3.apply(this,arguments)}return _createClass(FacetYDomainToggle,[{key:"onToggle",value:function onToggle(){this.props.manager.yAxis.facetDomain=this.isYDomainShared?GrapherConstants_1.FacetAxisDomain.independent:GrapherConstants_1.FacetAxisDomain.shared}},{key:"isYDomainShared",get:function get(){return this.props.manager.yAxis.facetDomain===GrapherConstants_1.FacetAxisDomain.shared}},{key:"render",value:function render(){return React.createElement("label",{className:"clickable"},React.createElement("input",{type:"checkbox",checked:this.isYDomainShared,onChange:this.onToggle,"data-track-note":"chart-facet-ydomain-toggle"})," ","Â Uniform y-axis")}}]),FacetYDomainToggle}(React.Component);__decorate([mobx_1.action.bound],FacetYDomainToggle.prototype,"onToggle",null),__decorate([mobx_1.computed],FacetYDomainToggle.prototype,"isYDomainShared",null),FacetYDomainToggle=__decorate([mobx_react_1.observer],FacetYDomainToggle),exports.FacetYDomainToggle=FacetYDomainToggle;var ZoomToggle=function(_React$Component4){_inherits(ZoomToggle,_React$Component4);var _super4=_createSuper(ZoomToggle);function ZoomToggle(){return _classCallCheck(this,ZoomToggle),_super4.apply(this,arguments)}return _createClass(ZoomToggle,[{key:"onToggle",value:function onToggle(){this.props.manager.zoomToSelection=!this.props.manager.zoomToSelection||void 0}},{key:"render",value:function render(){return React.createElement("label",{className:"clickable"},React.createElement("input",{type:"checkbox",checked:this.props.manager.zoomToSelection,onChange:this.onToggle,"data-track-note":"chart-zoom-to-selection"})," ","Zoom to selection")}}]),ZoomToggle}(React.Component);__decorate([mobx_1.action.bound],ZoomToggle.prototype,"onToggle",null),ZoomToggle=__decorate([mobx_react_1.observer],ZoomToggle),exports.ZoomToggle=ZoomToggle;var FilterSmallCountriesToggle=function(_React$Component5){_inherits(FilterSmallCountriesToggle,_React$Component5);var _super5=_createSuper(FilterSmallCountriesToggle);function FilterSmallCountriesToggle(){return _classCallCheck(this,FilterSmallCountriesToggle),_super5.apply(this,arguments)}return _createClass(FilterSmallCountriesToggle,[{key:"onChange",value:function onChange(){this.manager.minPopulationFilter=this.manager.minPopulationFilter?void 0:this.filterOption}},{key:"manager",get:function get(){return this.props.manager}},{key:"filterOption",get:function get(){var _a;return null!==(_a=this.manager.populationFilterOption)&&void 0!==_a?_a:1e6}},{key:"render",value:function render(){var label="Hide countries < ".concat(formatValue_1.formatValue(this.filterOption,{})," people");return React.createElement("label",{className:"clickable"},React.createElement("input",{type:"checkbox",checked:!!this.manager.minPopulationFilter,onChange:this.onChange,"data-track-note":"chart-filter-small-countries"})," ","Â ",label)}}]),FilterSmallCountriesToggle}(React.Component);__decorate([mobx_1.action.bound],FilterSmallCountriesToggle.prototype,"onChange",null),__decorate([mobx_1.computed],FilterSmallCountriesToggle.prototype,"manager",null),__decorate([mobx_1.computed],FilterSmallCountriesToggle.prototype,"filterOption",null),FilterSmallCountriesToggle=__decorate([mobx_react_1.observer],FilterSmallCountriesToggle),exports.FilterSmallCountriesToggle=FilterSmallCountriesToggle;var FacetStrategyDropdown=function(_React$Component6){_inherits(FacetStrategyDropdown,_React$Component6);var _super6=_createSuper(FacetStrategyDropdown);function FacetStrategyDropdown(){return _classCallCheck(this,FacetStrategyDropdown),_super6.apply(this,arguments)}return _createClass(FacetStrategyDropdown,[{key:"render",value:function render(){return React.createElement(Tippy_1.Tippy,{content:this.content,interactive:!0,trigger:"click",placement:"bottom-start",arrow:!1},React.createElement("div",{className:"FacetStrategyDropdown",style:{width:this.dropDownWidth}},this.facetStrategyLabels[this.facetStrategy],React.createElement("div",null,React.createElement(react_fontawesome_1.FontAwesomeIcon,{icon:faChevronDown_1.faChevronDown}))))}},{key:"facetStrategyLabels",get:function get(){var _ref,_a,entityType=null!==(_a=this.props.manager.entityType)&&void 0!==_a?_a:"country",entityLabel=entityType.length>"country".length?"item":entityType;return _defineProperty(_ref={},GrapherConstants_1.FacetStrategy.none,"All together"),_defineProperty(_ref,GrapherConstants_1.FacetStrategy.entity,"Split by ".concat(entityLabel)),_defineProperty(_ref,GrapherConstants_1.FacetStrategy.column,"Split by metric"),_ref}},{key:"strategies",get:function get(){return this.props.manager.availableFacetStrategies||[GrapherConstants_1.FacetStrategy.none,GrapherConstants_1.FacetStrategy.entity,GrapherConstants_1.FacetStrategy.column]}},{key:"dropDownWidth",get:function get(){var _this2=this,maxWidth=Math.max.apply(Math,_toConsumableArray(this.strategies.map((function(s){return Bounds_1.Bounds.forText(_this2.facetStrategyLabels[s],{fontSize:12}).width}))));return"".concat(maxWidth+45,"px")}},{key:"content",get:function get(){var _this3=this,parts=this.strategies.map((function(value){var label=_this3.facetStrategyLabels[value],children=value===GrapherConstants_1.FacetStrategy.none?React.createElement("div",{className:"FacetStrategyPreview-none-child"}):React.createElement(React.Fragment,null,React.createElement("div",{className:"FacetStrategyPreview-split-child"}),React.createElement("div",{className:"FacetStrategyPreview-split-child"}),React.createElement("div",{className:"FacetStrategyPreview-split-child"}),React.createElement("div",{className:"FacetStrategyPreview-split-child"}),React.createElement("div",{className:"FacetStrategyPreview-split-child"}),React.createElement("div",{className:"FacetStrategyPreview-split-child"}));return React.createElement("div",{className:classnames_1.default({FacetStrategyOption:!0,selected:value===_this3.facetStrategy}),key:value.toString()},React.createElement("a",{onClick:function onClick(){_this3.props.manager.facetStrategy=value}},React.createElement("div",{className:"FacetStrategyLabel"},label),React.createElement("div",{className:"FacetStrategyPreview-parent"},children)))}));return React.createElement("div",{className:"FacetStrategyFloat"},parts)}},{key:"facetStrategy",get:function get(){return this.props.manager.facetStrategy||GrapherConstants_1.FacetStrategy.none}}]),FacetStrategyDropdown}(React.Component);__decorate([mobx_1.computed],FacetStrategyDropdown.prototype,"facetStrategyLabels",null),__decorate([mobx_1.computed],FacetStrategyDropdown.prototype,"strategies",null),__decorate([mobx_1.computed],FacetStrategyDropdown.prototype,"dropDownWidth",null),__decorate([mobx_1.computed],FacetStrategyDropdown.prototype,"content",null),__decorate([mobx_1.computed],FacetStrategyDropdown.prototype,"facetStrategy",null),FacetStrategyDropdown=__decorate([mobx_react_1.observer],FacetStrategyDropdown),exports.FacetStrategyDropdown=FacetStrategyDropdown;var FooterControls=function(_React$Component7){_inherits(FooterControls,_React$Component7);var _super7=_createSuper(FooterControls);function FooterControls(){return _classCallCheck(this,FooterControls),_super7.apply(this,arguments)}return _createClass(FooterControls,[{key:"manager",get:function get(){return this.props.manager}},{key:"onShareMenu",value:function onShareMenu(){this.manager.isShareMenuActive=!this.manager.isShareMenuActive}},{key:"availableTabs",get:function get(){return this.manager.availableTabs||[]}},{key:"_getTabsElement",value:function _getTabsElement(){var manager=this.manager;return React.createElement("nav",{className:"tabs"},React.createElement("ul",null,this.availableTabs.map((function(tabName){return tabName!==GrapherConstants_1.GrapherTabOption.download?React.createElement("li",{key:tabName,className:"tab clickable"+(tabName===manager.currentTab?" active":"")},React.createElement("a",{onClick:function onClick(){manager.currentTab=tabName},"data-track-note":"chart-click-"+tabName},tabName)):null})),React.createElement("li",{className:"tab clickable icon download-tab-button"+(manager.currentTab===GrapherConstants_1.GrapherTabOption.download?" active":""),title:"Download as .png or .svg"},React.createElement("a",{"data-track-note":"chart-click-download",onClick:function onClick(){return manager.currentTab=GrapherConstants_1.GrapherTabOption.download}},React.createElement(react_fontawesome_1.FontAwesomeIcon,{icon:faDownload_1.faDownload})," Download")),React.createElement("li",{className:"clickable icon"},React.createElement("a",{title:"Share",onClick:this.onShareMenu,"data-track-note":"chart-click-share"},React.createElement(react_fontawesome_1.FontAwesomeIcon,{icon:faShareAlt_1.faShareAlt}))),manager.isInIFrame&&React.createElement("li",{className:"clickable icon"},React.createElement("a",{title:"Open chart in new tab",href:manager.canonicalUrl,"data-track-note":"chart-click-newtab",target:"_blank",rel:"noopener"},React.createElement(react_fontawesome_1.FontAwesomeIcon,{icon:faExpand_1.faExpand})))))}},{key:"render",value:function render(){var _a,manager=this.manager,isShareMenuActive=manager.isShareMenuActive,hasRelatedQuestion=manager.hasRelatedQuestion,relatedQuestions=manager.relatedQuestions,tabsElement=React.createElement("div",{className:"footerRowSingle"},this._getTabsElement()),shareMenuElement=isShareMenuActive&&React.createElement(ShareMenu_1.ShareMenu,{manager:manager,onDismiss:this.onShareMenu}),relatedQuestionElement=relatedQuestions&&hasRelatedQuestion&&React.createElement("div",{className:"relatedQuestion"},"Related:Â ",React.createElement("a",{href:relatedQuestions[0].url,target:"_blank",rel:"noopener","data-track-note":"chart-click-related"},relatedQuestions[0].text,React.createElement(react_fontawesome_1.FontAwesomeIcon,{icon:faExternalLinkAlt_1.faExternalLinkAlt}))),timeline=manager.hasTimeline?React.createElement("div",{className:"footerRowSingle"},React.createElement(TimelineComponent_1.TimelineComponent,{timelineController:this.manager.timelineController})):null;return React.createElement("div",{className:"ControlsFooter",style:{height:null!==(_a=manager.footerControlsHeight)&&void 0!==_a?_a:1}},timeline,tabsElement,shareMenuElement,relatedQuestionElement)}}]),FooterControls}(React.Component);__decorate([mobx_1.computed],FooterControls.prototype,"manager",null),__decorate([mobx_1.action.bound],FooterControls.prototype,"onShareMenu",null),__decorate([mobx_1.computed],FooterControls.prototype,"availableTabs",null),FooterControls=__decorate([mobx_react_1.observer],FooterControls),exports.FooterControls=FooterControls},997:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(23),__webpack_require__(5),__webpack_require__(14),__webpack_require__(9),__webpack_require__(10),__webpack_require__(11),__webpack_require__(7),__webpack_require__(6),__webpack_require__(8),__webpack_require__(18),__webpack_require__(21);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__decorate=this&&this.__decorate||function(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.TimelineComponent=void 0;var React=__importStar(__webpack_require__(0)),d3_selection_1=__webpack_require__(135),Util_1=__webpack_require__(40),Bounds_1=__webpack_require__(73),mobx_1=__webpack_require__(41),mobx_react_1=__webpack_require__(58),faPlay_1=__webpack_require__(1796),faPause_1=__webpack_require__(1797),react_fontawesome_1=__webpack_require__(123),react_1=__importDefault(__webpack_require__(1174)),classnames_1=__importDefault(__webpack_require__(139)),TimeBounds_1=__webpack_require__(387),TimelineComponent=function(_React$Component){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(TimelineComponent,_React$Component);var _super=_createSuper(TimelineComponent);function TimelineComponent(){var _this;return _classCallCheck(this,TimelineComponent),(_this=_super.apply(this,arguments)).base=React.createRef(),_this.mouseHoveringOverTimeline=!1,_this.hideStartTooltip=Util_1.debounce((function(){_this.startTooltipVisible=!1}),2e3),_this.hideEndTooltip=Util_1.debounce((function(){_this.endTooltipVisible=!1}),2e3),_this.startTooltipVisible=!1,_this.endTooltipVisible=!1,_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(TimelineComponent,[{key:"isDragging",get:function get(){return!!this.dragTarget}},{key:"manager",get:function get(){return this.props.timelineController.manager}},{key:"controller",get:function get(){return this.props.timelineController}},{key:"sliderBounds",get:function get(){return this.slider?Bounds_1.Bounds.fromRect(this.slider.getBoundingClientRect()):new Bounds_1.Bounds(0,0,100,100)}},{key:"getInputTimeFromMouse",value:function getInputTimeFromMouse(event){var _this$controller=this.controller,minTime=_this$controller.minTime,maxTime=_this$controller.maxTime;if(this.slider)return minTime+Util_1.getRelativeMouse(this.slider,event).x/this.sliderBounds.width*(maxTime-minTime)}},{key:"onDrag",value:function onDrag(inputTime){this.manager.isPlaying||(this.manager.userHasSetTimeline=!0),this.dragTarget=this.controller.dragHandleToTime(this.dragTarget,inputTime),this.showTooltips()}},{key:"showTooltips",value:function showTooltips(){this.hideStartTooltip.cancel(),this.hideEndTooltip.cancel(),this.startTooltipVisible=!0,this.endTooltipVisible=!0,"start"===this.dragTarget&&(this.lastUpdatedTooltip="startMarker"),"end"===this.dragTarget&&(this.lastUpdatedTooltip="endMarker"),this.manager.startHandleTimeBound>this.manager.endHandleTimeBound&&(this.lastUpdatedTooltip="startMarker"===this.lastUpdatedTooltip?"endMarker":"startMarker")}},{key:"getDragTarget",value:function getDragTarget(inputTime,isStartMarker,isEndMarker){var _this$manager=this.manager,startHandleTimeBound=_this$manager.startHandleTimeBound,endHandleTimeBound=_this$manager.endHandleTimeBound;return startHandleTimeBound===endHandleTimeBound&&(isStartMarker||isEndMarker)?"both":isStartMarker||inputTime<=startHandleTimeBound?"start":isEndMarker||inputTime>=endHandleTimeBound?"end":"both"}},{key:"onMouseDown",value:function onMouseDown(event){var logic=this.controller,targetEl=d3_selection_1.select(event.target),inputTime=this.getInputTimeFromMouse(event);inputTime&&(this.dragTarget=this.getDragTarget(inputTime,targetEl.classed("startMarker"),targetEl.classed("endMarker")),"both"===this.dragTarget&&logic.setDragOffsets(inputTime),this.onDrag(inputTime),event.preventDefault())}},{key:"onMouseMove",value:function onMouseMove(event){if(this.dragTarget&&!this.queuedDrag){this.queuedDrag=!0;var inputTime=this.getInputTimeFromMouse(event);inputTime&&this.onDrag(inputTime),this.queuedDrag=!1}}},{key:"onMouseUp",value:function onMouseUp(){this.dragTarget=void 0,this.manager.isPlaying||(Util_1.isMobile()?(this.startTooltipVisible&&this.hideStartTooltip(),this.endTooltipVisible&&this.hideEndTooltip()):this.mouseHoveringOverTimeline||(this.startTooltipVisible=!1,this.endTooltipVisible=!1))}},{key:"onMouseOver",value:function onMouseOver(){this.mouseHoveringOverTimeline=!0,this.hideStartTooltip.cancel(),this.startTooltipVisible=!0,this.hideEndTooltip.cancel(),this.endTooltipVisible=!0}},{key:"onMouseLeave",value:function onMouseLeave(){this.manager.isPlaying||this.isDragging||(this.startTooltipVisible=!1,this.endTooltipVisible=!1),this.mouseHoveringOverTimeline=!1}},{key:"onPlayTouchEnd",value:function onPlayTouchEnd(evt){evt.preventDefault(),evt.stopPropagation(),this.controller.togglePlay()}},{key:"isPlayingOrDragging",get:function get(){return this.manager.isPlaying||this.isDragging}},{key:"componentDidMount",value:function componentDidMount(){var _a,_b,current=this.base.current;current&&(this.slider=current.querySelector(".slider"),this.playButton=current.querySelector(".play")),document.documentElement.addEventListener("mouseup",this.onMouseUp),document.documentElement.addEventListener("mouseleave",this.onMouseUp),document.documentElement.addEventListener("mousemove",this.onMouseMove),document.documentElement.addEventListener("touchend",this.onMouseUp),document.documentElement.addEventListener("touchmove",this.onMouseMove),null===(_a=this.slider)||void 0===_a||_a.addEventListener("touchstart",this.onMouseDown,{passive:!1}),null===(_b=this.playButton)||void 0===_b||_b.addEventListener("touchend",this.onPlayTouchEnd,{passive:!1})}},{key:"componentWillUnmount",value:function componentWillUnmount(){var _a,_b;document.documentElement.removeEventListener("mouseup",this.onMouseUp),document.documentElement.removeEventListener("mouseleave",this.onMouseUp),document.documentElement.removeEventListener("mousemove",this.onMouseMove),document.documentElement.removeEventListener("touchend",this.onMouseUp),document.documentElement.removeEventListener("touchmove",this.onMouseMove),null===(_a=this.slider)||void 0===_a||_a.removeEventListener("touchstart",this.onMouseDown,{passive:!1}),null===(_b=this.playButton)||void 0===_b||_b.removeEventListener("touchend",this.onPlayTouchEnd,{passive:!1})}},{key:"formatTime",value:function formatTime(time){return this.manager.formatTimeFn?this.manager.formatTimeFn(time):time.toString()}},{key:"timelineEdgeMarker",value:function timelineEdgeMarker(markerType){var controller=this.controller,time="start"===markerType?controller.minTime:controller.maxTime;return React.createElement("div",{className:"date clickable",onClick:function onClick(){return"start"===markerType?controller.resetStartToMin():controller.resetEndToMax()}},this.formatTime(time))}},{key:"togglePlay",value:function togglePlay(){this.controller.togglePlay()}},{key:"convertToTime",value:function convertToTime(time){return time===-1/0?this.controller.minTime:time===1/0?this.controller.maxTime:time}},{key:"render",value:function render(){var manager=this.manager,controller=this.controller,startTimeProgress=controller.startTimeProgress,endTimeProgress=controller.endTimeProgress,minTime=controller.minTime,maxTime=controller.maxTime,startHandleTimeBound=manager.startHandleTimeBound,endHandleTimeBound=manager.endHandleTimeBound,formattedStartTime=this.formatTime(TimeBounds_1.timeFromTimebounds(startHandleTimeBound,minTime)),formattedEndTime=this.formatTime(TimeBounds_1.timeFromTimebounds(endHandleTimeBound,maxTime));return React.createElement("div",{ref:this.base,className:"TimelineComponent",onMouseOver:this.onMouseOver,onMouseLeave:this.onMouseLeave},!this.manager.disablePlay&&React.createElement("div",{onMouseDown:function onMouseDown(e){return e.stopPropagation()},onClick:this.togglePlay,className:"play"},manager.isPlaying?React.createElement(react_fontawesome_1.FontAwesomeIcon,{icon:faPause_1.faPause}):React.createElement(react_fontawesome_1.FontAwesomeIcon,{icon:faPlay_1.faPlay})),this.timelineEdgeMarker("start"),React.createElement("div",{className:"slider clickable",onMouseDown:this.onMouseDown},React.createElement(TimelineHandle,{type:"startMarker",offsetPercent:100*startTimeProgress,tooltipContent:formattedStartTime,tooltipVisible:this.startTooltipVisible,tooltipZIndex:"startMarker"===this.lastUpdatedTooltip?2:1}),React.createElement("div",{className:"interval",style:{left:"".concat(100*startTimeProgress,"%"),right:"".concat(100-100*endTimeProgress,"%")}}),React.createElement(TimelineHandle,{type:"endMarker",offsetPercent:100*endTimeProgress,tooltipContent:formattedEndTime,tooltipVisible:this.endTooltipVisible,tooltipZIndex:"endMarker"===this.lastUpdatedTooltip?2:1})),this.timelineEdgeMarker("end"))}}]),TimelineComponent}(React.Component);__decorate([mobx_1.observable],TimelineComponent.prototype,"dragTarget",void 0),__decorate([mobx_1.computed],TimelineComponent.prototype,"isDragging",null),__decorate([mobx_1.computed],TimelineComponent.prototype,"manager",null),__decorate([mobx_1.computed],TimelineComponent.prototype,"controller",null),__decorate([mobx_1.action.bound],TimelineComponent.prototype,"onDrag",null),__decorate([mobx_1.action.bound],TimelineComponent.prototype,"showTooltips",null),__decorate([mobx_1.action.bound],TimelineComponent.prototype,"onMouseDown",null),__decorate([mobx_1.action.bound],TimelineComponent.prototype,"onMouseMove",null),__decorate([mobx_1.action.bound],TimelineComponent.prototype,"onMouseUp",null),__decorate([mobx_1.action.bound],TimelineComponent.prototype,"onMouseOver",null),__decorate([mobx_1.action.bound],TimelineComponent.prototype,"onMouseLeave",null),__decorate([mobx_1.action.bound],TimelineComponent.prototype,"onPlayTouchEnd",null),__decorate([mobx_1.computed],TimelineComponent.prototype,"isPlayingOrDragging",null),__decorate([mobx_1.observable],TimelineComponent.prototype,"startTooltipVisible",void 0),__decorate([mobx_1.observable],TimelineComponent.prototype,"endTooltipVisible",void 0),__decorate([mobx_1.observable],TimelineComponent.prototype,"lastUpdatedTooltip",void 0),__decorate([mobx_1.action.bound],TimelineComponent.prototype,"togglePlay",null),TimelineComponent=__decorate([mobx_react_1.observer],TimelineComponent),exports.TimelineComponent=TimelineComponent;var TimelineHandle=function TimelineHandle(_ref){var type=_ref.type,offsetPercent=_ref.offsetPercent,tooltipContent=_ref.tooltipContent,tooltipVisible=_ref.tooltipVisible,tooltipZIndex=_ref.tooltipZIndex;return React.createElement("div",{className:classnames_1.default("handle",type),style:{left:"".concat(offsetPercent,"%")}},React.createElement(react_1.default,{content:tooltipContent,visible:tooltipVisible,zIndex:tooltipZIndex},React.createElement("div",{className:"icon"})))}}},[[1223,2,3]]]);